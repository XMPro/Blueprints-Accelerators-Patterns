(()=>{var e,t,n,r,i={74:(e,t,n)=>{"use strict";const r=n(1104),i=Object.freeze(new r.ImmutableMap);class o{constructor(e,t){if(!Array.isArray(e))throw new TypeError("items must be an Array instance");this._items=e,this.attributes=t||i,this.length=e.length}[Symbol.iterator](){return this._items[Symbol.iterator]()}toArray(){return this._items}first(){const e=this._items[0];return void 0!==e?e:null}}e.exports=o},163:(e,t,n)=>{"use strict";const r=n(5332),{TraversalStrategies:i}=n(3335);class o{constructor(e,t){this.id=e,this.label=t}equals(e){return e instanceof o&&this.id===e.id}}class a{constructor(e,t){this.key=e,this.value=t}toString(){return`p[${this.key}->${l(this.value)}]`}equals(e){return e instanceof a&&this.key===e.key&&this.value===e.value}}class s{constructor(e,t){this.labels=e,this.objects=t}toString(){return`path[${(this.objects||[]).join(", ")}]`}equals(e){return e instanceof s&&(e===this||c(this.objects,e.objects)&&c(this.labels,e.labels))}}function c(e,t){if(e===t)return!0;if("function"==typeof e.equals)return e.equals(t);if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!c(e[n],t[n]))return!1;return!0}return!1}function l(e){if(null==e)return e;const t=e.toString();return t.length>20?t.substr(0,20):t}e.exports={Edge:class extends o{constructor(e,t,n,r,i){if(super(e,n),this.outV=t,this.inV=r,this.properties={},i){const e=Object.keys(i);for(let t=0;t<e.length;t++){const n=e[t];this.properties[n]=i[n].value}}}toString(){const e=this.outV?this.outV.id:"?",t=this.inV?this.inV.id:"?";return`e[${this.id}][${e}-${this.label}->${t}]`}},Graph:class{traversal(e){return new(e||r.GraphTraversalSource)(this,new i)}toString(){return"graph[]"}},Path:s,Property:a,Vertex:class extends o{constructor(e,t,n){super(e,t),this.properties=n}toString(){return`v[${this.id}]`}},VertexProperty:class extends o{constructor(e,t,n,r){super(e,t),this.value=n,this.key=this.label,this.properties=r}toString(){return`vp[${this.label}->${l(this.value)}]`}}}},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,l,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,a),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var f,h=u.length;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,i);break;default:if(!c)for(f=1,c=new Array(d-1);f<d;f++)c[f-1]=arguments[f];u[l].fn.apply(u[l].context,c)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var c=0,l=[],u=s.length;c<u;c++)(s[c].fn!==t||i&&!s[c].once||r&&s[c].context!==r)&&l.push(s[c]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},243:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.VERTEX]=this}canBeUsedFor(e){return e instanceof i.Vertex}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.VERTEX,1]);const e=[3,0,0,0,0,0],n=[0,0,0,0],i=[254,1];return r.from([...e,...n,...i])}const n=[];return t&&n.push(r.from([this.ioc.DataType.VERTEX,0])),n.push(this.ioc.anySerializer.serialize(e.id)),n.push(this.ioc.stringSerializer.serialize(e.label,!1)),n.push(this.ioc.anySerializer.serialize(e.properties)),r.concat(n)}deserialize(e,t=!0){let n=0,o=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(n++,e!==this.ioc.DataType.VERTEX)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,c,l,u,d;try{({v:a,len:s}=this.ioc.anySerializer.deserialize(o)),n+=s}catch(e){throw e.message="{id}: "+e.message,e}o=o.slice(s);try{({v:c,len:l}=this.ioc.stringSerializer.deserialize(o,!1)),n+=l}catch(e){throw e.message="{label}: "+e.message,e}o=o.slice(l);try{({v:u,len:d}=this.ioc.anySerializer.deserialize(o)),n+=d}catch(e){throw e.message="{properties}: "+e.message,e}o=o.slice(d);const f=u||[];return{v:new i.Vertex(a,c,f),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},251:(e,t)=>{t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-u)-1,h>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+d],d+=f,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,l=8*o-i-1,u=(1<<l)-1,d=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+h]=255&a,h+=p,a/=256,l-=8);e[n+h-p]|=128*m}},277:(e,t,n)=>{"use strict";const{ArrayIsArray:r,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:o,ArrayPrototypeMap:a,NumberIsInteger:s,NumberIsNaN:c,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:u,NumberParseInt:d,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:h,String:p,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=n(4134),{hideStackFrames:y,codes:{ERR_SOCKET_BAD_PORT:v,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:E}}=n(6371),{normalizeEncoding:_}=n(7760),{isAsyncFunction:T,isArrayBufferView:A}=n(7760).types,I={};const D=/^[0-7]+$/;const x=y((e,t,n=u,r=l)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!s(e))throw new S(t,"an integer",e);if(e<n||e>r)throw new S(t,`>= ${n} && <= ${r}`,e)}),C=y((e,t,n=-2147483648,r=2147483647)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!s(e))throw new S(t,"an integer",e);if(e<n||e>r)throw new S(t,`>= ${n} && <= ${r}`,e)}),O=y((e,t,n=!1)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!s(e))throw new S(t,"an integer",e);const r=n?1:0,i=4294967295;if(e<r||e>i)throw new S(t,`>= ${r} && <= ${i}`,e)});function R(e,t){if("string"!=typeof e)throw new b(t,"string",e)}const N=y((e,t,n)=>{if(!i(n,e)){const r=o(a(n,e=>"string"==typeof e?`'${e}'`:p(e)),", ");throw new w(t,e,"must be one of: "+r)}});function k(e,t){if("boolean"!=typeof e)throw new b(t,"boolean",e)}function L(e,t,n){return null!=e&&f(e,t)?e[t]:n}const M=y((e,t,n=null)=>{const i=L(n,"allowArray",!1),o=L(n,"allowFunction",!1);if(!L(n,"nullable",!1)&&null===e||!i&&r(e)||"object"!=typeof e&&(!o||"function"!=typeof e))throw new b(t,"Object",e)}),P=y((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new b(t,"a dictionary",e)}),j=y((e,t,n=0)=>{if(!r(e))throw new b(t,"Array",e);if(e.length<n){throw new w(t,e,`must be longer than ${n}`)}});const z=y((e,t="buffer")=>{if(!A(e))throw new b(t,["Buffer","TypedArray","DataView"],e)});const U=y((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new b(t,"AbortSignal",e)}),B=y((e,t)=>{if("function"!=typeof e)throw new b(t,"Function",e)}),F=y((e,t)=>{if("function"!=typeof e||T(e))throw new b(t,"Function",e)}),H=y((e,t)=>{if(void 0!==e)throw new b(t,"undefined",e)});const $=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function q(e,t){if(void 0===e||!h($,e))throw new w(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,n){if(void 0===e&&(e=n),"string"==typeof e){if(null===h(D,e))throw new w(t,e,"must be a 32-bit unsigned integer or an octal string");e=d(e,8)}return O(e,t),e},validateArray:j,validateStringArray:function(e,t){j(e,t);for(let n=0;n<e.length;n++)R(e[n],`${t}[${n}]`)},validateBooleanArray:function(e,t){j(e,t);for(let n=0;n<e.length;n++)k(e[n],`${t}[${n}]`)},validateAbortSignalArray:function(e,t){j(e,t);for(let n=0;n<e.length;n++){const r=e[n],i=`${t}[${n}]`;if(null==r)throw new b(i,"AbortSignal",r);U(r,i)}},validateBoolean:k,validateBuffer:z,validateDictionary:P,validateEncoding:function(e,t){const n=_(t),r=e.length;if("hex"===n&&r%2!=0)throw new w("encoding",t,`is invalid for data of length ${r}`)},validateFunction:B,validateInt32:C,validateInteger:x,validateNumber:function(e,t,n=void 0,r){if("number"!=typeof e)throw new b(t,"number",e);if(null!=n&&e<n||null!=r&&e>r||(null!=n||null!=r)&&c(e))throw new S(t,`${null!=n?`>= ${n}`:""}${null!=n&&null!=r?" && ":""}${null!=r?`<= ${r}`:""}`,e)},validateObject:M,validateOneOf:N,validatePlainFunction:F,validatePort:function(e,t="Port",n=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===g(e).length||+e!==+e>>>0||e>65535||0===e&&!n)throw new v(t,e,n);return 0|e},validateSignalName:function(e,t="signal"){if(R(e,t),void 0===I[e]){if(void 0!==I[m(e)])throw new E(e+" (signals must use all capital letters)");throw new E(e)}},validateString:R,validateUint32:O,validateUndefined:H,validateUnion:function(e,t,n){if(!i(n,e))throw new b(t,`('${o(n,"|")}')`,e)},validateAbortSignal:U,validateLinkHeaderValue:function(e){if("string"==typeof e)return q(e,"hints"),e;if(r(e)){const t=e.length;let n="";if(0===t)return n;for(let r=0;r<t;r++){const i=e[r];q(i,"hints"),n+=i,r!==t-1&&(n+=", ")}return n}throw new w("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},345:(e,t,n)=>{"use strict";const{StringPrototypeSlice:r,SymbolIterator:i,TypedArrayPrototypeSet:o,Uint8Array:a}=n(4134),{Buffer:s}=n(8287),{inspect:c}=n(7760);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,n=""+t.data;for(;null!==(t=t.next);)n+=e+t.data;return n}concat(e){if(0===this.length)return s.alloc(0);const t=s.allocUnsafe(e>>>0);let n=this.head,r=0;for(;n;)o(t,n.data,r),r+=n.data.length,n=n.next;return t}consume(e,t){const n=this.head.data;if(e<n.length){const t=n.slice(0,e);return this.head.data=n.slice(e),t}return e===n.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[i](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",n=this.head,i=0;do{const o=n.data;if(!(e>o.length)){e===o.length?(t+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(t+=r(o,0,e),this.head=n,n.data=r(o,e));break}t+=o,e-=o.length,++i}while(null!==(n=n.next));return this.length-=i,t}_getBuffer(e){const t=s.allocUnsafe(e),n=e;let r=this.head,i=0;do{const s=r.data;if(!(e>s.length)){e===s.length?(o(t,s,n-e),++i,r.next?this.head=r.next:this.head=this.tail=null):(o(t,new a(s.buffer,s.byteOffset,e),n-e),this.head=r,r.data=s.slice(e));break}o(t,s,n-e),e-=s.length,++i}while(null!==(r=r.next));return this.length-=i,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return c(this,{...t,depth:0,customInspect:!1})}}},474:(e,t,n)=>{"use strict";const r=n(1545),i=n(3335),o=n(9032),a=n(163),s=n(1104),c="@value",l="@type";class u{serialize(){throw new Error("serialize() method not implemented for "+this.constructor.name)}deserialize(){throw new Error("deserialize() method not implemented for "+this.constructor.name)}canBeUsedFor(){throw new Error("canBeUsedFor() method not implemented for "+this.constructor.name)}}class d extends u{constructor(e){super(),this.typeKey=e}deserialize(e){const t=e[c];if(!Array.isArray(t))throw new Error("Expected Array, obtained: "+t);return t.map(e=>this.reader.read(e))}serialize(e){return{[l]:this.typeKey,[c]:e.map(e=>this.writer.adaptObject(e))}}canBeUsedFor(e){return Array.isArray(e)}}e.exports={BulkSetSerializer:class extends u{deserialize(e){const t=e[c];if(!Array.isArray(t))throw new Error("Expected Array, obtained: "+t);let n=[];for(let e=0,r=t.length;e<r;e+=2){const r=t.slice(e,e+2);n=n.concat(Array(this.reader.read(r[1])).fill(this.reader.read(r[0])))}return n}},BytecodeSerializer:class extends u{serialize(e){let t=e;e instanceof r.Traversal&&(t=e.getBytecode());const n={};n[l]="g:Bytecode";const i=n[c]={},o=this._serializeInstructions(t.sourceInstructions);o&&(i.source=o);const a=this._serializeInstructions(t.stepInstructions);return a&&(i.step=a),n}_serializeInstructions(e){if(0===e.length)return null;const t=new Array(e.length);t[0]=e[0];for(let n=0;n<e.length;n++)t[n]=e[n].map(e=>this.writer.adaptObject(e));return t}canBeUsedFor(e){return e instanceof o||e instanceof r.Traversal}},DateSerializer:class extends u{serialize(e){return{[l]:"g:Date",[c]:e.getTime()}}deserialize(e){return new Date(e[c])}canBeUsedFor(e){return e instanceof Date}},DirectionSerializer:class extends u{deserialize(e){return r.direction[e[c].toLowerCase()]}},EdgeSerializer:class extends u{deserialize(e){const t=e[c];return new a.Edge(this.reader.read(t.id),new a.Vertex(this.reader.read(t.outV),this.reader.read(t.outVLabel)),t.label,new a.Vertex(this.reader.read(t.inV),this.reader.read(t.inVLabel)),this.reader.read(t.properties))}serialize(e){return{[l]:"g:Edge",[c]:{id:this.writer.adaptObject(e.id),label:e.label,outV:this.writer.adaptObject(e.outV.id),outVLabel:e.outV.label,inV:this.writer.adaptObject(e.inV.id),inVLabel:e.inV.label}}}canBeUsedFor(e){return e instanceof a.Edge}},EnumSerializer:class extends u{serialize(e){return{[l]:"g:"+e.typeName,[c]:e.elementName}}canBeUsedFor(e){return e&&e.typeName&&e instanceof r.EnumValue}},LambdaSerializer:class extends u{serialize(e){const t=e(),n="string"==typeof t,r=n?t:t[0],i=n?"gremlin-groovy":t[1],o="gremlin-groovy"===i&&r.includes("->")?r.substring(0,r.indexOf("->")).includes(",")?2:1:-1;return{[l]:"g:Lambda",[c]:{arguments:o,language:i,script:r}}}canBeUsedFor(e){return"function"==typeof e}},ListSerializer:class extends d{constructor(){super("g:List")}},LongSerializer:class extends u{serialize(e){return{[l]:"g:Int64",[c]:e.value}}canBeUsedFor(e){return e instanceof s.Long}},MapSerializer:class extends u{deserialize(e){const t=e[c];if(!Array.isArray(t))throw new Error("Expected Array, obtained: "+t);const n=new Map;for(let e=0;e<t.length;e+=2)n.set(this.reader.read(t[e]),this.reader.read(t[e+1]));return n}serialize(e){const t=[];return e.forEach((e,n)=>{t.push(this.writer.adaptObject(n)),t.push(this.writer.adaptObject(e))}),{[l]:"g:Map",[c]:t}}canBeUsedFor(e){return e instanceof Map}},NumberSerializer:class extends u{serialize(e){return isNaN(e)?{[l]:"g:Double",[c]:"NaN"}:e===Number.POSITIVE_INFINITY?{[l]:"g:Double",[c]:"Infinity"}:e===Number.NEGATIVE_INFINITY?{[l]:"g:Double",[c]:"-Infinity"}:e}deserialize(e){const t=e[c];return"NaN"===t?NaN:"Infinity"===t?Number.POSITIVE_INFINITY:"-Infinity"===t?Number.NEGATIVE_INFINITY:parseFloat(t)}canBeUsedFor(e){return"number"==typeof e}},Path3Serializer:class extends u{deserialize(e){const t=e[c];return new a.Path(this.reader.read(t.labels),this.reader.read(t.objects))}},PathSerializer:class extends u{deserialize(e){const t=e[c],n=t.objects.map(e=>this.reader.read(e));return new a.Path(this.reader.read(t.labels),n)}},PropertySerializer:class extends u{deserialize(e){const t=e[c];return new a.Property(t.key,this.reader.read(t.value))}},PSerializer:class extends u{serialize(e){const t={};t[l]="g:P";const n=t[c]={predicate:e.operator};return void 0===e.other||null===e.other?n.value=this.writer.adaptObject(e.value):n.value=[this.writer.adaptObject(e.value),this.writer.adaptObject(e.other)],t}canBeUsedFor(e){return e instanceof r.P}},TextPSerializer:class extends u{serialize(e){const t={};t[l]="g:TextP";const n=t[c]={predicate:e.operator};return void 0===e.other||null===e.other?n.value=this.writer.adaptObject(e.value):n.value=[this.writer.adaptObject(e.value),this.writer.adaptObject(e.other)],t}canBeUsedFor(e){return e instanceof r.TextP}},SetSerializer:class extends d{constructor(){super("g:Set")}},TSerializer:class extends u{deserialize(e){return r.t[e[c]]}},TraverserSerializer:class extends u{serialize(e){return{[l]:"g:Traverser",[c]:{value:this.writer.adaptObject(e.object),bulk:this.writer.adaptObject(e.bulk)}}}deserialize(e){const t=e[c];return new r.Traverser(this.reader.read(t.value),this.reader.read(t.bulk))}canBeUsedFor(e){return e instanceof r.Traverser}},TraversalStrategySerializer:class extends u{serialize(e){const t={};for(const n in e.configuration)e.configuration.hasOwnProperty(n)&&(t[n]=this.writer.adaptObject(e.configuration[n]));return{[l]:"g:"+e.constructor.name,[c]:t}}canBeUsedFor(e){return e instanceof i.TraversalStrategy}},typeKey:l,valueKey:c,VertexPropertySerializer:class extends u{deserialize(e){const t=e[c];return new a.VertexProperty(this.reader.read(t.id),t.label,this.reader.read(t.value),this.reader.read(t.properties))}},VertexSerializer:class extends u{deserialize(e){const t=e[c];return new a.Vertex(this.reader.read(t.id),t.label,this.reader.read(t.properties))}serialize(e){return{[l]:"g:Vertex",[c]:{id:this.writer.adaptObject(e.id),label:e.label}}}canBeUsedFor(e){return e instanceof a.Vertex}}}},703:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.SHORT]=this}canBeUsedFor(e){}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.SHORT,1]):r.from([0,0]);const n=[];t&&n.push(r.from([this.ioc.DataType.SHORT,0]));const i=r.alloc(2);return i.writeInt16BE(e),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.SHORT)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<2)throw new Error("unexpected {value} length");n+=2;return{v:i.readInt16BE(),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},795:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BYTE]=this}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.BYTE,1]):r.from([0]);const n=[];t&&n.push(r.from([this.ioc.DataType.BYTE,0]));const i=r.alloc(1);return i.writeUInt8(e),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.BYTE)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<1)throw new Error("unexpected {value} length");n+=1;return{v:i.readUInt8(),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},823:(e,t,n)=>{"use strict";const r=globalThis.AbortController||n(5568).AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:s},AbortError:c}=n(6371),{validateAbortSignal:l,validateInteger:u,validateObject:d}=n(277),f=n(4134).Symbol("kWeak"),h=n(4134).Symbol("kResistStopPropagation"),{finished:p}=n(6238),m=n(7830),{addAbortSignalNoValidate:g}=n(4147),{isWritable:y,isNodeStream:v}=n(6115),{deprecate:b}=n(7760),{ArrayPrototypePush:w,Boolean:S,MathFloor:E,Number:_,NumberIsNaN:T,Promise:A,PromiseReject:I,PromiseResolve:D,PromisePrototypeThen:x,Symbol:C}=n(4134),O=C("kEmpty"),R=C("kEof");function N(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal");let r=1;null!=(null==t?void 0:t.concurrency)&&(r=E(t.concurrency));let i=r-1;return null!=(null==t?void 0:t.highWaterMark)&&(i=E(t.highWaterMark)),u(r,"options.concurrency",1),u(i,"options.highWaterMark",0),i+=r,async function*(){const o=n(7760).AbortSignalAny([null==t?void 0:t.signal].filter(S)),a=this,s=[],l={signal:o};let u,d,f=!1,h=0;function p(){f=!0,m()}function m(){h-=1,g()}function g(){d&&!f&&h<r&&s.length<i&&(d(),d=null)}!async function(){try{for await(let t of a){if(f)return;if(o.aborted)throw new c;try{if(t=e(t,l),t===O)continue;t=D(t)}catch(e){t=I(e)}h+=1,x(t,m,p),s.push(t),u&&(u(),u=null),!f&&(s.length>=i||h>=r)&&await new A(e=>{d=e})}s.push(R)}catch(e){const t=I(e);x(t,m,p),s.push(t)}finally{f=!0,u&&(u(),u=null)}}();try{for(;;){for(;s.length>0;){const e=await s[0];if(e===R)return;if(o.aborted)throw new c;e!==O&&(yield e),s.shift(),g()}await new A(e=>{u=e})}}finally{f=!0,d&&(d(),d=null)}}.call(this)}async function k(e,t=void 0){for await(const n of L.call(this,e,t))return!0;return!1}function L(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return N.call(this,async function(t,n){return await e(t,n)?t:O},t)}class M extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function P(e){if(e=_(e),T(e))return 0;if(e<0)throw new s("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:b(function(e=void 0){return null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal"),async function*(){let t=0;for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new c({cause:e.signal.reason});yield[t++,r]}}.call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),e=P(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new c;for await(const n of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new c;e--<=0&&(yield n)}}.call(this)},filter:L,flatMap:function(e,t){const n=N.call(this,e,t);return async function*(){for await(const e of n)yield*e}.call(this)},map:N,take:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),e=P(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new c;for await(const n of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new c;if(e-- >0&&(yield n),e<=0)return}}.call(this)},compose:function(e,t){if(null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),v(e)&&!y(e))throw new i("stream",e,"must be writable");const n=m(this,e);return null!=t&&t.signal&&g(t.signal,n),n}},e.exports.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return!await k.call(this,async(...t)=>!await e(...t),t)},forEach:async function(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);for await(const n of N.call(this,async function(t,n){return await e(t,n),O},t));},reduce:async function(e,t,n){var i;if("function"!=typeof e)throw new o("reducer",["Function","AsyncFunction"],e);null!=n&&d(n,"options"),null!=(null==n?void 0:n.signal)&&l(n.signal,"options.signal");let a=arguments.length>1;if(null!=n&&null!==(i=n.signal)&&void 0!==i&&i.aborted){const e=new c(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await p(this.destroy(e)),e}const s=new r,u=s.signal;if(null!=n&&n.signal){const e={once:!0,[f]:this,[h]:!0};n.signal.addEventListener("abort",()=>s.abort(),e)}let m=!1;try{for await(const r of this){var g;if(m=!0,null!=n&&null!==(g=n.signal)&&void 0!==g&&g.aborted)throw new c;a?t=await e(t,r,{signal:u}):(t=r,a=!0)}if(!m&&!a)throw new M}finally{s.abort()}return t},toArray:async function(e){null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new c(void 0,{cause:e.signal.reason});w(t,r)}return t},some:k,find:async function(e,t){for await(const n of L.call(this,e,t))return n}}},834:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(9032),o=n(1545);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BYTECODE]=this}canBeUsedFor(e){return e instanceof i||e instanceof o.Traversal}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.BYTECODE,1]);const e=[0,0,0,0],n=[0,0,0,0];return r.from([...e,...n])}e instanceof o.Traversal&&(e=e.getBytecode());const n=[];t&&n.push(r.from([this.ioc.DataType.BYTECODE,0])),n.push(this.ioc.intSerializer.serialize(e.stepInstructions.length,!1));for(let t=0;t<e.stepInstructions.length;t++){const r=e.stepInstructions[t],i=r[0],o=r.length-1;n.push(this.ioc.stringSerializer.serialize(i,!1)),n.push(this.ioc.intSerializer.serialize(o,!1));for(let e=0;e<o;e++)n.push(this.ioc.anySerializer.serialize(r[1+e],!0))}n.push(this.ioc.intSerializer.serialize(e.sourceInstructions.length,!1));for(let t=0;t<e.sourceInstructions.length;t++){const r=e.sourceInstructions[t],i=r[0],o=r.length-1;n.push(this.ioc.stringSerializer.serialize(i,!1)),n.push(this.ioc.intSerializer.serialize(o,!1));for(let e=0;e<o;e++)n.push(this.ioc.anySerializer.serialize(r[1+e],!0))}return r.concat(n)}deserialize(e,t=!0){let n=0,o=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(n++,e!==this.ioc.DataType.BYTECODE)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}const a=new i;let s,c,l,u;try{({v:s,len:c}=this.ioc.intSerializer.deserialize(o,!1)),n+=c}catch(e){throw e.message="{steps_length}: "+e.message,e}if(s<0)throw new Error("{steps_length} is less than zero");o=o.slice(c);for(let e=0;e<s;e++){let t,r,i,s;try{({v:t,len:r}=this.ioc.stringSerializer.deserialize(o,!1)),n+=r}catch(t){throw t.message=`{step_${e}} {name}: `+t.message,t}o=o.slice(r);try{({v:i,len:s}=this.ioc.intSerializer.deserialize(o,!1)),n+=s}catch(t){throw t.message=`{step_${e}} {values_length}: `+t.message,t}if(i<0)throw new Error(`{step_${e}} {values_length} is less than zero`);o=o.slice(s);const c=[];let l,u;for(let t=0;t<i;t++){try{({v:l,len:u}=this.ioc.anySerializer.deserialize(o)),n+=u,c.push(l)}catch(n){throw n.message=`{step_${e}} {value_${t}}: `+n.message,n}o=o.slice(u)}a.addStep(t,c)}try{({v:l,len:u}=this.ioc.intSerializer.deserialize(o,!1)),n+=u}catch(e){throw e.message="{sources_length}: "+e.message,e}if(l<0)throw new Error("{sources_length} is less than zero");o=o.slice(u);for(let e=0;e<l;e++){let t,r,i,s;try{({v:t,len:r}=this.ioc.stringSerializer.deserialize(o,!1)),n+=r}catch(t){throw t.message=`{source_${e}} {name}: `+t.message,t}o=o.slice(r);try{({v:i,len:s}=this.ioc.intSerializer.deserialize(o,!1)),n+=s}catch(t){throw t.message=`{source_${e}} {values_length}: `+t.message,t}if(i<0)throw new Error(`{source_${e}} {values_length} is less than zero`);o=o.slice(s);const c=[];let l,u;for(let t=0;t<i;t++){try{({v:l,len:u}=this.ioc.anySerializer.deserialize(o)),n+=u,c.push(l)}catch(n){throw n.message=`{source_${e}} {value_${t}}: `+n.message,n}o=o.slice(u)}a.addSource(t,c)}return{v:a,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},1019:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,i={exports:{}},o=i.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,u=[],d=!1,f=-1;function h(){d&&l&&(d=!1,l.length?u=l.concat(u):f=-1,u.length&&p())}function p(){if(!d){var e=c(h);d=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||d||c(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0};var v=i.exports.browser,b=y,w=i.exports.binding,S=y,E={},_=y,T=y,A=y,I=y,D=y,x="browser",C="browser",O="browser",R=[],N={nextTick:i.exports.nextTick,title:i.exports.title,browser:v,env:i.exports.env,argv:i.exports.argv,version:i.exports.version,versions:i.exports.versions,on:i.exports.on,addListener:i.exports.addListener,once:i.exports.once,off:i.exports.off,removeListener:i.exports.removeListener,removeAllListeners:i.exports.removeAllListeners,emit:i.exports.emit,emitWarning:b,prependListener:i.exports.prependListener,prependOnceListener:i.exports.prependOnceListener,listeners:i.exports.listeners,binding:w,cwd:i.exports.cwd,chdir:i.exports.chdir,umask:i.exports.umask,exit:S,pid:1,features:E,kill:_,dlopen:T,uptime:A,memoryUsage:I,uvCounters:D,platform:x,arch:C,execPath:O,execArgv:R};t.addListener=i.exports.addListener,t.arch=C,t.argv=i.exports.argv,t.binding=w,t.browser=v,t.chdir=i.exports.chdir,t.cwd=i.exports.cwd,t.default=N,t.dlopen=T,t.emit=i.exports.emit,t.emitWarning=b,t.env=i.exports.env,t.execArgv=R,t.execPath=O,t.exit=S,t.features=E,t.kill=_,t.listeners=i.exports.listeners,t.memoryUsage=I,t.nextTick=i.exports.nextTick,t.off=i.exports.off,t.on=i.exports.on,t.once=i.exports.once,t.pid=1,t.platform=x,t.prependListener=i.exports.prependListener,t.prependOnceListener=i.exports.prependOnceListener,t.removeAllListeners=i.exports.removeAllListeners,t.removeListener=i.exports.removeListener,t.title=i.exports.title,t.umask=i.exports.umask,t.uptime=A,t.uvCounters=D,t.version=i.exports.version,t.versions=i.exports.versions,t=e.exports=N},1104:(e,t,n)=>{"use strict";var r=n(1019);const i=n(2831);t.toLong=function(e){return new o(e)};const o=t.Long=function(e){if("string"!=typeof e&&"number"!=typeof e)throw new TypeError("The value must be a string or a number");this.value=e.toString()};t.getUuid=function(){return i.v4()},t.emptyArray=Object.freeze([]);class a extends Map{constructor(e){super(e)}set(){return this}delete(){return!1}clear(){}}t.ImmutableMap=a,t.getUserAgentHeader=function(){return"User-Agent"},t.getUserAgent=async()=>"navigator"in globalThis?globalThis.navigator.userAgent:void 0!==r?.versions?.node?await async function(){const e=await n.e(72).then(n.t.bind(n,1072,19)),t=(r?.env.npm_package_name??"NotAvailable").replace("_"," ");let i,o,a,s;return i=o=a=s="NotAvailable",null!=r&&(r.version&&(i=r.version.replace(" ","_")),r.arch&&(s=r.arch.replace(" ","_"))),null!=e&&(o=e.platform().replace(" ","_"),a=e.release().replace(" ","_")),`${t} Gremlin-Javascript.3.7.4 ${i} ${o}.${a} ${s}`}():void 0;t.toArrayBuffer=e=>e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);e.exports.DeferredPromise=()=>{let e=e=>{},t=e=>{};const n=new Promise((n,r)=>{e=n,t=r});return Object.assign(n,{resolve:e,reject:t})}},1352:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.DOUBLE]=this}canBeUsedFor(e){return"number"==typeof e&&!Number.isInteger(e)}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.DOUBLE,1]):r.from([0,0,0,0,0,0,0,0]);const n=[];t&&n.push(r.from([this.ioc.DataType.DOUBLE,0]));const i=r.alloc(8);return i.writeDoubleBE(e),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.DOUBLE)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<8)throw new Error("unexpected {value} length");n+=8;return{v:i.readDoubleBE(),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},1421:(e,t,n)=>{"use strict";const r={};r.DataType=n(8653),r.utils=n(6980),r.serializers={},r.intSerializer=new(n(6580))(r),r.longSerializer=new(n(1743))(r),r.longSerializerNg=new(n(7092))(r),r.stringSerializer=new(n(2420))(r,r.DataType.STRING),r.dateSerializer=new(n(2285))(r,r.DataType.DATE),r.timestampSerializer=new(n(2285))(r,r.DataType.TIMESTAMP),r.classSerializer=new(n(2420))(r,r.DataType.CLASS),r.doubleSerializer=new(n(1352))(r),r.floatSerializer=new(n(9995))(r),r.listSerializer=new(n(7100))(r,r.DataType.LIST),r.mapSerializer=new(n(8095))(r),r.setSerializer=new(n(7100))(r,r.DataType.SET),r.uuidSerializer=new(n(4194))(r),r.edgeSerializer=new(n(2588))(r),r.pathSerializer=new(n(5094))(r),r.propertySerializer=new(n(3920))(r),r.vertexSerializer=new(n(243))(r),r.vertexPropertySerializer=new(n(6414))(r),r.bytecodeSerializer=new(n(834))(r),r.pSerializer=new(n(3933))(r),r.traverserSerializer=new(n(4253))(r),r.enumSerializer=new(n(8372))(r),r.lambdaSerializer=new(n(6078))(r),r.bigIntegerSerializer=new(n(4957))(r),r.byteSerializer=new(n(795))(r),r.byteBufferSerializer=new(n(7777))(r),r.shortSerializer=new(n(703))(r),r.booleanSerializer=new(n(3321))(r),r.textPSerializer=new(n(6348))(r),r.traversalStrategySerializer=new(n(9386))(r),r.bulkSetSerializer=new(n(7765))(r),r.unspecifiedNullSerializer=new(n(7135))(r),r.numberSerializationStrategy=new(n(4687))(r),r.anySerializer=new(n(5127))(r),r.graphBinaryReader=new(n(3203))(r),r.graphBinaryWriter=new(n(6579))(r),e.exports=r},1545:e=>{"use strict";const t=Object.freeze({value:null,done:!0}),n=Symbol.asyncIterator||Symbol("@@asyncIterator");class r{constructor(e,t,n){this.operator=e,this.value=t,this.other=n}toString(){function e(t){if(Array.isArray(t)){const n=[];for(const r of t)n.push(e(r));return n}return t&&"string"==typeof t?`'${t}'`:t}return void 0===this.other||null===this.other?this.operator+"("+e(this.value)+")":this.operator+"("+e(this.value)+", "+e(this.other)+")"}and(e){return new r("and",this,e)}or(e){return new r("or",this,e)}static within(...e){return 1===e.length&&Array.isArray(e[0])?new r("within",e[0],null):new r("within",e,null)}static without(...e){return 1===e.length&&Array.isArray(e[0])?new r("without",e[0],null):new r("without",e,null)}static between(...e){return i("between",e)}static eq(...e){return i("eq",e)}static gt(...e){return i("gt",e)}static gte(...e){return i("gte",e)}static inside(...e){return i("inside",e)}static lt(...e){return i("lt",e)}static lte(...e){return i("lte",e)}static neq(...e){return i("neq",e)}static not(...e){return i("not",e)}static outside(...e){return i("outside",e)}static test(...e){return i("test",e)}}function i(e,t){return t.unshift(null,e),new(Function.prototype.bind.apply(r,t))}class o{constructor(e,t,n){this.operator=e,this.value=t,this.other=n}toString(){function e(e){return e&&"string"==typeof e?`'${e}'`:e}return void 0===this.other?this.operator+"("+e(this.value)+")":this.operator+"("+e(this.value)+", "+e(this.other)+")"}and(e){return new r("and",this,e)}or(e){return new r("or",this,e)}static containing(...e){return a("containing",e)}static endingWith(...e){return a("endingWith",e)}static notContaining(...e){return a("notContaining",e)}static notEndingWith(...e){return a("notEndingWith",e)}static notStartingWith(...e){return a("notStartingWith",e)}static startingWith(...e){return a("startingWith",e)}static regex(...e){return a("regex",e)}static notRegex(...e){return a("notRegex",e)}}function a(e,t){return t.unshift(null,e),new(Function.prototype.bind.apply(o,t))}function s(e,t){const n={};return t.split(" ").forEach(t=>{let r=t;r===r.toUpperCase()&&(r=r.toLowerCase()),n[r]=new l(e,t)}),n}const c={from_:"out",to:"in"};class l{constructor(e,t){this.typeName=e,this.elementName=t}toString(){return this.elementName}}e.exports={EnumValue:l,P:r,TextP:o,withOptions:{tokens:"~tinkerpop.valueMap.tokens",none:0,ids:1,labels:2,keys:4,values:8,all:15,indexer:"~tinkerpop.index.indexer",list:0,map:1},IO:class{static get graphml(){return"graphml"}static get graphson(){return"graphson"}static get gryo(){return"gryo"}static get reader(){return"~tinkerpop.io.reader"}static get registry(){return"~tinkerpop.io.registry"}static get writer(){return"~tinkerpop.io.writer"}},Traversal:class{constructor(e,t,n){this.graph=e,this.traversalStrategies=t,this.bytecode=n,this.traversers=null,this.sideEffects=null,this._traversalStrategiesPromise=null,this._traversersIteratorIndex=0}[n](){return this}getBytecode(){return this.bytecode}toList(){return this._applyStrategies().then(()=>{const e=[];let t;for(;(t=this._getNext())&&!t.done;)e.push(t.value);return e})}hasNext(){return this._applyStrategies().then(()=>this.traversers&&this.traversers.length>0&&this._traversersIteratorIndex<this.traversers.length&&this.traversers[this._traversersIteratorIndex].bulk>0)}iterate(){return this.bytecode.addStep("none"),this._applyStrategies().then(()=>{let e;for(;(e=this._getNext())&&!e.done;);})}next(){return this._applyStrategies().then(()=>this._getNext())}_getNext(){for(;this.traversers&&this._traversersIteratorIndex<this.traversers.length;){const e=this.traversers[this._traversersIteratorIndex];if(e.bulk>0)return e.bulk--,{value:e.object,done:!1};this._traversersIteratorIndex++}return t}_applyStrategies(){return this._traversalStrategiesPromise?this._traversalStrategiesPromise:this._traversalStrategiesPromise=this.traversalStrategies.applyStrategies(this)}toJSON(){return this.bytecode.stepInstructions}toString(){return this.bytecode.toString()}},TraversalSideEffects:class{},Traverser:class{constructor(e,t){this.object=e,this.bulk=t||1}},barrier:s("Barrier","normSack"),cardinality:s("Cardinality","list set single"),column:s("Column","keys values"),direction:function(e,t){const n=s(e,t);return Object.keys(c).forEach(e=>{n[e]=n[c[e]]}),n}("Direction","BOTH IN OUT from_ to"),dt:s("DT","second minute hour day"),graphSONVersion:s("GraphSONVersion","V1_0 V2_0 V3_0"),gryoVersion:s("GryoVersion","V1_0 V3_0"),merge:s("Merge","onCreate onMatch outV inV"),operator:s("Operator","addAll and assign div max min minus mult or sum sumLong"),order:s("Order","asc desc shuffle"),pick:s("Pick","any none"),pop:s("Pop","all first last mixed"),scope:s("Scope","global local"),t:s("T","id key label value")}},1743:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.LONG]=this}canBeUsedFor(){}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.LONG,1]):r.from([0,0,0,0,0,0,0,0]);const n=[];t&&n.push(r.from([this.ioc.DataType.LONG,0]));const i=r.alloc(8);return i.writeBigInt64BE(BigInt(e)),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.LONG)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<8)throw new Error("unexpected {value} length");n+=8;let o=i.readBigInt64BE();return o=o<Number.MIN_SAFE_INTEGER||o>Number.MAX_SAFE_INTEGER?parseFloat(o.toString()):Number(o),{v:o,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},1893:(e,t,n)=>{"use strict";const r=n(2468),i=n(8402);e.exports=class extends r{constructor(e,t,n){super({mechanism:new i({username:e,password:t,authzid:n})})}evaluateChallenge(e){return this._options.mechanism.evaluateChallenge(e)}}},1982:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function s(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return o(u,"_invoke",function(n,r,i){var o,a,s,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,a=0,s=e,f.n=n,c}};function h(n,r){for(a=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,o=u[t],h=f.p,p=o[2];n>3?(i=p===r)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(a=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,a=0))}if(i||n>1)return c;throw d=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),a=u,s=p;(t=a<2?e:s)||!d;){o||(a?a<3?(a>1&&(f.n=-1),h(a,s)):f.n=s:f.v=s);try{if(l=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((t=(d=f.n<0)?s:n.call(r,f))!==c)break}catch(t){o=e,a=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),u}var c={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(o(t={},r,function(){return this}),t),h=d.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o(e,a,"GeneratorFunction")),e.prototype=Object.create(h),e}return u.prototype=d,o(h,"constructor",d),o(d,"constructor",u),u.displayName="GeneratorFunction",o(d,a,"GeneratorFunction"),o(h),o(h,a,"Generator"),o(h,r,function(){return this}),o(h,"toString",function(){return"[object Generator]"}),(i=function(){return{w:s,m:p}})()}function o(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}o=function(e,t,n,r){function a(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},o(e,t,n,r)}function a(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)})}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.d(t,{M:()=>f});var f=function(){return u(function e(t){if(c(this,e),this.constructor===e)throw new Error("Can't create an instance of an abstract class.")},[{key:"initialize",value:(d=s(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:throw new Error("initialize() has not been implemented.");case 1:return e.a(2)}},e)})),function(){return d.apply(this,arguments)})},{key:"close",value:(l=s(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:throw new Error("close() has not been implemented.");case 1:return e.a(2)}},e)})),function(){return l.apply(this,arguments)})},{key:"startTransaction",value:(a=s(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:throw new Error("startTransaction() has not been implemented.");case 1:return e.a(2)}},e)})),function(){return a.apply(this,arguments)})},{key:"endTransaction",value:(o=s(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:throw new Error("endTransaction() has not been implemented.");case 1:return e.a(2)}},e)})),function(){return o.apply(this,arguments)})},{key:"executeInTransaction",value:(r=s(i().m(function e(t,n){return i().w(function(e){for(;;)switch(e.n){case 0:throw new Error("executeInTransaction() has not been implemented.");case 1:return e.a(2)}},e)})),function(e,t){return r.apply(this,arguments)})},{key:"executeRead",value:(t=s(i().m(function e(t,n){return i().w(function(e){for(;;)switch(e.n){case 0:throw new Error("executeRead() has not been implemented.");case 1:return e.a(2)}},e)})),function(e,n){return t.apply(this,arguments)})},{key:"executeWrite",value:(e=s(i().m(function e(t,n){return i().w(function(e){for(;;)switch(e.n){case 0:throw new Error("executeWrite() has not been implemented.");case 1:return e.a(2)}},e)})),function(t,n){return e.apply(this,arguments)})},{key:"getQuery",value:function(e){if(utils.debugLog("getQuery('".concat(e,"')")),e in this.queryStrings)return this.queryStrings[e][this.dbtype];throw new Error("A query with ID ".concat(e," was not found."))}}],[{key:"classFactory",value:function(e,t,r){var i;switch(e.DATABASETYPE.toLowerCase()){case"neo4j":i=new(0,n(4423).Neo4jDatabaseService)(e.NEO4J_CONFIG);break;case"neo4j-https":i=new(0,n(3434).Neo4jHTTPSDatabaseService)(e.NEO4J_CONFIG);break;case"cosmosdb":i=new(0,n(2147).GremlinDatabaseService)(e.COSMOSDB_CONFIG,r);break;default:throw new Error("Unsupported graph database type: ".concat(e.DATABASETYPE))}return i.dbtype=e.DATABASETYPE.toLowerCase(),i.queryStrings=t,i}}]);var e,t,r,o,a,l,d}()},2029:(e,t,n)=>{"use strict";const r=n(1545).Traversal,i=n(9032);e.exports=class{constructor(e){this._traversalSource=e}getTraversalSource(){return this._traversalSource}getTargetLanguage(){return"gremlin-groovy"}of(e){this._traversalSource=e}translate(e,t=!1){let n=t?"__":this._traversalSource;const r=(e instanceof i?e:e.getBytecode()).stepInstructions;for(let e=0;e<r.length;e++){const t=r[e].slice(1);if(n+="."+r[e][0]+"(",t.length)for(let e=0;e<t.length;e++)e>0&&(n+=", "),n+=this.convert(t[e]);n+=")"}return n}convert(e){let t="";if(Object(e)===e)if(e instanceof r)t+=this.translate(e.getBytecode(),!0);else if("[object Object]"===e.toString())Object.keys(e).forEach(function(n,r){r>0&&(t+=", "),t+=`('${n}', `,e[n]instanceof String||"string"==typeof e[n]?t+=`'${`${e[n]}`.replaceAll("'","\\'")}'`:t+=e[n],t+=")"});else if(Array.isArray(e)){const n=[];for(const t of e)n.push(this.convert(t));t+="["+n.join(", ")+"]"}else t+=e.toString();else t+=null==e?"null":"number"==typeof e||"boolean"==typeof e?e:`'${`${e}`.replaceAll("'","\\'")}'`;return t}}},2147:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GremlinDatabaseService:()=>x});var r=n(1982);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function s(n,r,i,o){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return a(u,"_invoke",function(n,r,i){var o,a,s,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,a=0,s=e,f.n=n,c}};function h(n,r){for(a=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,o=u[t],h=f.p,p=o[2];n>3?(i=p===r)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(a=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,a=0))}if(i||n>1)return c;throw d=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),a=u,s=p;(t=a<2?e:s)||!d;){o||(a?a<3?(a>1&&(f.n=-1),h(a,s)):f.n=s:f.v=s);try{if(l=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((t=(d=f.n<0)?s:n.call(r,f))!==c)break}catch(t){o=e,a=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,i,o),!0),u}var c={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(a(t={},r,function(){return this}),t),h=d.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e}return u.prototype=d,a(h,"constructor",d),a(d,"constructor",u),u.displayName="GeneratorFunction",a(d,i,"GeneratorFunction"),a(h),a(h,i,"Generator"),a(h,r,function(){return this}),a(h,"toString",function(){return"[object Generator]"}),(o=function(){return{w:s,m:p}})()}function a(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}a=function(e,t,n,r){function o(t,n){a(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},a(e,t,n,r)}function s(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,c,"next",e)}function c(e){s(o,r,i,a,c,"throw",e)}a(void 0)})}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var d=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t},t=[{key:"initialize",value:(s=c(o().m(function e(t){return o().w(function(e){for(;;)switch(e.n){case 0:return this.client=t,e.n=1,this.client.open();case 1:return e.a(2)}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"close",value:(a=c(o().m(function e(){var t,n;return o().w(function(e){for(;;)switch(e.n){case 0:if(null===(t=this.client)||void 0===t||!t.isOpen){e.n=2;break}return e.n=1,null===(n=this.client)||void 0===n?void 0:n.close();case 1:this.client=null;case 2:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"runQuery",value:(r=c(o().m(function e(t){var n,r,i=arguments;return o().w(function(e){for(;;)switch(e.n){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:null,r=i.length>2&&void 0!==i[2]&&i[2],null!=this.client){e.n=1;break}throw new Error("Gremlin client has not been initialised.");case 1:if(this.client.isOpen){e.n=2;break}return e.n=2,this.client.open();case 2:if(!r){e.n=4;break}return e.n=3,this.client.submit(t,n);case 3:case 5:return e.a(2,e.v);case 4:return utils.debugLog(this.prepareQuery(t,n)),e.n=5,this.client.submit(this.prepareQuery(t,n))}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"prepareQuery",value:function(e,t){for(var n,r=this,i=null!=t?t:{},o=[],a=/\$([a-zA-Z0-9_]+)\b/g;null!=(n=a.exec(e));)o.push(n[1]);var s=o.filter(function(e){return!(e in i)});if(s.length>0)throw new Error("One or more parameters, ".concat(s.join(", "),", are referenced in the query but not included in the parameters object."));if(null!=t&&0!==Object.keys(t).length){var c=Object.keys(t).sort(function(e,t){return t.length-e.length}),l=new RegExp("\\$(".concat(c.join("|"),")\\b"),"g");e=e.replace(l,function(e,n){var i=t[n],o=r.sanitiseValue(i);return null===o?"null":o})}return e}},{key:"sanitiseValue",value:function(e){if(null==e)return null;switch(i(e)){case"string":return this.escapeSpecial(e,"'");case"number":case"boolean":return e.toString();case"object":return Array.isArray(e)?!0===e.isRawArray?e.quotedElements?e.map(function(e){return'"'.concat(e,'"')}).join(", "):e.join(", "):"'".concat(JSON.stringify(e),"'"):this.isDate(e)?"'".concat(new Date(e).toISOString(),"'"):this.escapeSpecial(e,'"');default:throw new Error("Unsupported parameter type: ".concat(i(e)))}}},{key:"escapeSpecial",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"'";return"".concat(t).concat(e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\$/g,"\\$").replace(/`/g,"\\u0060")).concat(t)}},{key:"isDate",value:function(e){var t=new Date(e);return!isNaN(t.getTime())}}],t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,a,s}();function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return b(l,"_invoke",function(n,r,i){var o,s,c,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,c=e,f.n=n,a}};function h(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,o=u[t],h=f.p,p=o[2];n>3?(i=p===r)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,c=p;(t=s<2?e:c)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,c)):f.n=c:f.v=c);try{if(l=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){o=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,o),!0),l}var a={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(b(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,b(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,b(d,"constructor",l),b(l,"constructor",c),c.displayName="GeneratorFunction",b(l,i,"GeneratorFunction"),b(d),b(d,i,"Generator"),b(d,r,function(){return this}),b(d,"toString",function(){return"[object Generator]"}),(v=function(){return{w:o,m:f}})()}function b(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}b=function(e,t,n,r){function o(t,n){b(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},b(e,t,n,r)}function w(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function S(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){w(o,r,i,a,s,"next",e)}function s(e){w(o,r,i,a,s,"throw",e)}a(void 0)})}}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function _(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}function T(e,t,n){return t=I(t),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,A()?Reflect.construct(t,n||[],I(e).constructor):t.apply(e,n))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(A=function(){return!!e})()}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}var x=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=T(this,t,[e])).config=e,r.gremlin=n,r.gremlinClient=new d(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(t,e),n=t,r=[{key:"initialize",value:(u=S(v().m(function e(){var t,n;return v().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=new this.gremlin.driver.auth.PlainTextSaslAuthenticator("/dbs/".concat(this.config.db,"/colls/").concat(this.config.graph),this.config.key),n=new this.gremlin.driver.Client(this.config.endpoint,{authenticator:t,traversalSource:"g",rejectUnauthorized:!0,mimeType:"application/vnd.gremlin-v2.0+json"}),e.n=1,this.gremlinClient.initialize(n);case 1:e.n=3;break;case 2:throw e.p=2,e.v;case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return u.apply(this,arguments)})},{key:"close",value:(l=S(v().m(function e(){return v().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.gremlinClient.close();case 1:case 2:return e.a(2)}},e,this)})),function(){return l.apply(this,arguments)})},{key:"startTransaction",value:function(){return null}},{key:"endTransaction",value:function(){}},{key:"executeInTransaction",value:(c=S(v().m(function e(t,n){return v().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n(null);case 1:return e.a(2,e.v)}},e)})),function(e,t){return c.apply(this,arguments)})},{key:"transformRecord",value:function(e){if(!e)return null;try{var t={};return e.properties?Object.keys(e.properties).forEach(function(n){var r=e.properties[n];Array.isArray(r)&&r.length>0?t[n]=r[0].value:"string"==typeof r&&r.length>1&&"["===r[0]&&"{"!==r[1]?t[n]=JSON.parse(r):t[n]=r}):e.value&&e.value.properties?Object.keys(e.value.properties).forEach(function(n){var r=e.properties[n];Array.isArray(r)&&r.length>0?t[n]=r[0].value:"string"==typeof r&&r.length>1&&"["===r[0]&&"{"!==r[1]?t[n]=JSON.parse(r):t[n]=r}):"object"===y(e)&&Object.keys(e).forEach(function(n){var r=e[n];"string"==typeof r&&r.length>1&&"["===r[0]&&"{"!==r[1]?t[n]=JSON.parse(r):t[n]=r}),t.created_date&&"string"==typeof t.created_date&&(t.created_date=new Date(t.created_date)),t.last_modified_date&&"string"==typeof t.last_modified_date&&(t.last_modified_date=new Date(t.last_modified_date)),t}catch(t){return e}}},{key:"executeRead",value:(s=S(v().m(function e(t,n){var r,i,o,a,s=arguments;return v().w(function(e){for(;;)if(0===e.n)return r=s.length>2&&void 0!==s[2]?s[2]:null,i=s.length>3&&void 0!==s[3]&&s[3],o=s.length>4&&void 0!==s[4]?s[4]:0,a=s.length>5&&void 0!==s[5]?s[5]:0,e.a(2,this.executeInternal(t,m(m({},n),{},{skip:o,limit:a+o}),r,i,"WRITE"))},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"executeWrite",value:(a=S(v().m(function e(t,n){var r,i=arguments;return v().w(function(e){for(;;)if(0===e.n)return r=i.length>2&&void 0!==i[2]?i[2]:null,e.a(2,this.executeInternal(t,n,r,!0,"WRITE"))},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"_transformParameters",value:function(e){var t=m({},e);return this.queryStrings&&this.queryStrings.cosmosdb_default_values&&"object"===y(this.queryStrings.cosmosdb_default_values)&&Object.entries(this.queryStrings.cosmosdb_default_values).forEach(function(e){var n=f(e,2),r=n[0],i=n[1],o=t[r];(null==o||"string"==typeof o&&""===o||Array.isArray(o)&&0===o.length)&&(t[r]=i)}),this.queryStrings&&this.queryStrings.cosmosdb_force_lowercase&&Array.isArray(this.queryStrings.cosmosdb_force_lowercase)&&this.queryStrings.cosmosdb_force_lowercase.length>0&&this.queryStrings.cosmosdb_force_lowercase.forEach(function(e){e in t&&"string"==typeof t[e]&&(t[e]=t[e].toLowerCase())}),t}},{key:"executeInternal",value:(o=S(v().m(function e(t,n,r,i,o){var a,s,c;return v().w(function(e){for(;;)switch(e.n){case 0:return s=this._transformParameters(n),utils.debugLog("Executing Gremlin query:\n".concat(t)),e.n=1,this.gremlinClient.runQuery(t,m(m({},s),{},{partitionkeyproperty:this.config.partitionkeyproperty,partitionkeyvalue:this.config.partitionkeyvalue}));case 1:if(a=e.v,c=this.normaliseData(a),!i){e.n=3;break}if(!Array.isArray(c)){e.n=2;break}if(!(c.length>0)){e.n=2;break}return e.a(2,c[0]);case 2:return e.a(2,c);case 3:if(!Array.isArray(c)){e.n=4;break}return e.a(2,c);case 4:if(null==c){e.n=5;break}return e.a(2,[c]);case 5:return e.a(2,[]);case 6:return e.a(2)}},e,this)})),function(e,t,n,r,i){return o.apply(this,arguments)})},{key:"normaliseData",value:function(e){var t=this;return 0===e._items.length?null:1===e._items.length?this.transformRecord(e._items[0]):e._items.map(function(e){return t.transformRecord(e)})}}],r&&E(n.prototype,r),i&&E(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o,a,s,c,l,u}(r.M)},2285:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e,t){this.ioc=e,this.ID=t,this.ioc.serializers[t]=this}canBeUsedFor(e){return e instanceof Date}serialize(e,t=!0){if(null==e)return t?r.from([this.ID,1]):r.from([0,0,0,0,0,0,0,0]);const n=[];t&&n.push(r.from([this.ID,0]));const i=r.alloc(8);return i.writeBigInt64BE(BigInt(e.getTime())),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ID)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<8)throw new Error("unexpected {value} length");n+=8;const o=i.readBigInt64BE();return{v:new Date(Number(o)),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},2311:(e,t)=>{"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function r(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,o,a){return r((s=r(r(t,e),r(i,a)))<<(c=o)|s>>>32-c,n);var s,c}function o(e,t,n,r,o,a,s){return i(t&n|~t&r,e,t,o,a,s)}function a(e,t,n,r,o,a,s){return i(t&r|n&~r,e,t,o,a,s)}function s(e,t,n,r,o,a,s){return i(t^n^r,e,t,o,a,s)}function c(e,t,n,r,o,a,s){return i(n^(t|~r),e,t,o,a,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,r="0123456789abcdef";for(let i=0;i<n;i+=8){const n=e[i>>5]>>>i%32&255,o=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let i=1732584193,l=-271733879,u=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const n=i,f=l,h=u,p=d;i=o(i,l,u,d,e[t],7,-680876936),d=o(d,i,l,u,e[t+1],12,-389564586),u=o(u,d,i,l,e[t+2],17,606105819),l=o(l,u,d,i,e[t+3],22,-1044525330),i=o(i,l,u,d,e[t+4],7,-176418897),d=o(d,i,l,u,e[t+5],12,1200080426),u=o(u,d,i,l,e[t+6],17,-1473231341),l=o(l,u,d,i,e[t+7],22,-45705983),i=o(i,l,u,d,e[t+8],7,1770035416),d=o(d,i,l,u,e[t+9],12,-1958414417),u=o(u,d,i,l,e[t+10],17,-42063),l=o(l,u,d,i,e[t+11],22,-1990404162),i=o(i,l,u,d,e[t+12],7,1804603682),d=o(d,i,l,u,e[t+13],12,-40341101),u=o(u,d,i,l,e[t+14],17,-1502002290),l=o(l,u,d,i,e[t+15],22,1236535329),i=a(i,l,u,d,e[t+1],5,-165796510),d=a(d,i,l,u,e[t+6],9,-1069501632),u=a(u,d,i,l,e[t+11],14,643717713),l=a(l,u,d,i,e[t],20,-373897302),i=a(i,l,u,d,e[t+5],5,-701558691),d=a(d,i,l,u,e[t+10],9,38016083),u=a(u,d,i,l,e[t+15],14,-660478335),l=a(l,u,d,i,e[t+4],20,-405537848),i=a(i,l,u,d,e[t+9],5,568446438),d=a(d,i,l,u,e[t+14],9,-1019803690),u=a(u,d,i,l,e[t+3],14,-187363961),l=a(l,u,d,i,e[t+8],20,1163531501),i=a(i,l,u,d,e[t+13],5,-1444681467),d=a(d,i,l,u,e[t+2],9,-51403784),u=a(u,d,i,l,e[t+7],14,1735328473),l=a(l,u,d,i,e[t+12],20,-1926607734),i=s(i,l,u,d,e[t+5],4,-378558),d=s(d,i,l,u,e[t+8],11,-2022574463),u=s(u,d,i,l,e[t+11],16,1839030562),l=s(l,u,d,i,e[t+14],23,-35309556),i=s(i,l,u,d,e[t+1],4,-1530992060),d=s(d,i,l,u,e[t+4],11,1272893353),u=s(u,d,i,l,e[t+7],16,-155497632),l=s(l,u,d,i,e[t+10],23,-1094730640),i=s(i,l,u,d,e[t+13],4,681279174),d=s(d,i,l,u,e[t],11,-358537222),u=s(u,d,i,l,e[t+3],16,-722521979),l=s(l,u,d,i,e[t+6],23,76029189),i=s(i,l,u,d,e[t+9],4,-640364487),d=s(d,i,l,u,e[t+12],11,-421815835),u=s(u,d,i,l,e[t+15],16,530742520),l=s(l,u,d,i,e[t+2],23,-995338651),i=c(i,l,u,d,e[t],6,-198630844),d=c(d,i,l,u,e[t+7],10,1126891415),u=c(u,d,i,l,e[t+14],15,-1416354905),l=c(l,u,d,i,e[t+5],21,-57434055),i=c(i,l,u,d,e[t+12],6,1700485571),d=c(d,i,l,u,e[t+3],10,-1894986606),u=c(u,d,i,l,e[t+10],15,-1051523),l=c(l,u,d,i,e[t+1],21,-2054922799),i=c(i,l,u,d,e[t+8],6,1873313359),d=c(d,i,l,u,e[t+15],10,-30611744),u=c(u,d,i,l,e[t+6],15,-1560198380),l=c(l,u,d,i,e[t+13],21,1309151649),i=c(i,l,u,d,e[t+4],6,-145523070),d=c(d,i,l,u,e[t+11],10,-1120210379),u=c(u,d,i,l,e[t+2],15,718787259),l=c(l,u,d,i,e[t+9],21,-343485551),i=r(i,n),l=r(l,f),u=r(u,h),d=r(d,p)}return[i,l,u,d]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};t.default=l},2420:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e,t){this.ioc=e,this.ID=t,this.ioc.serializers[t]=this}canBeUsedFor(e){return"string"==typeof e}serialize(e,t=!0){if(null==e)return t?r.from([this.ID,1]):this.ioc.intSerializer.serialize(0,!1);const n=[];t&&n.push(r.from([this.ID,0]));const i=r.from(String(e),"utf8");return n.push(this.ioc.intSerializer.serialize(i.length,!1)),n.push(i),r.concat(n)}deserialize(e,t=!0,n=!1){let i=0,o=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(i++,e!==this.ID)throw new Error("unexpected {type_code}");o=o.slice(1)}if(t||n){if(o.length<1)throw new Error("{value_flag} is missing");const e=o.readUInt8();if(i++,1===e)return{v:null,len:i};if(0!==e)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s;try{({v:a,len:s}=this.ioc.intSerializer.deserialize(o,!1)),i+=s}catch(e){throw e.message="{length}: "+e.message,e}if(a<0)throw new Error("{length} is less than zero");if(o=o.slice(s),o.length<a)throw new Error("unexpected {text_value} length");i+=a;return{v:o.toString("utf8",0,a),len:i}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},2468:e=>{"use strict";e.exports=class{constructor(e){this._options=e}evaluateChallenge(e){throw new Error("evaluateChallenge should be implemented")}}},2588:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.EDGE]=this}canBeUsedFor(e){return e instanceof i.Edge}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.EDGE,1]);const e=[3,0,0,0,0,0],n=[0,0,0,0],i=[3,0,0,0,0,0],o=[0,0,0,0],a=[3,0,0,0,0,0],s=[0,0,0,0],c=[254,1],l=[254,1];return r.from([...e,...n,...i,...o,...a,...s,...c,...l])}const n=[];t&&n.push(r.from([this.ioc.DataType.EDGE,0])),n.push(this.ioc.anySerializer.serialize(e.id)),n.push(this.ioc.stringSerializer.serialize(e.label,!1));const i=e.inV&&e.inV.id;n.push(this.ioc.anySerializer.serialize(i));const o=e.inV&&e.inV.label;n.push(this.ioc.stringSerializer.serialize(o,!1));const a=e.outV&&e.outV.id;n.push(this.ioc.anySerializer.serialize(a));const s=e.outV&&e.outV.label;return n.push(this.ioc.stringSerializer.serialize(s,!1)),n.push(this.ioc.unspecifiedNullSerializer.serialize(null)),n.push(this.ioc.unspecifiedNullSerializer.serialize(null)),r.concat(n)}deserialize(e,t=!0){let n=0,o=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(n++,e!==this.ioc.DataType.EDGE)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,c,l,u,d,f,h,p,m,g,y,v,b,w;try{({v:a,len:s}=this.ioc.anySerializer.deserialize(o)),n+=s}catch(e){throw e.message="{id}: "+e.message,e}o=o.slice(s);try{({v:c,len:l}=this.ioc.stringSerializer.deserialize(o,!1)),n+=l}catch(e){throw e.message="{label}: "+e.message,e}o=o.slice(l);try{({v:u,len:d}=this.ioc.anySerializer.deserialize(o)),n+=d}catch(e){throw e.message="{inVId}: "+e.message,e}o=o.slice(d);try{({v:f,len:h}=this.ioc.stringSerializer.deserialize(o,!1)),n+=h}catch(e){throw e.message="{inVLabel}: "+e.message,e}o=o.slice(h);try{({v:p,len:m}=this.ioc.anySerializer.deserialize(o)),n+=m}catch(e){throw e.message="{outVId}: "+e.message,e}o=o.slice(m);try{({v:g,len:y}=this.ioc.stringSerializer.deserialize(o,!1)),n+=y}catch(e){throw e.message="{outVLabel}: "+e.message,e}o=o.slice(y);try{({len:v}=this.ioc.anySerializer.deserialize(o)),n+=v}catch(e){throw e.message="{parent}: "+e.message,e}o=o.slice(v);try{({v:b,len:w}=this.ioc.anySerializer.deserialize(o)),n+=w}catch(e){throw e.message="{properties}: "+e.message,e}o=o.slice(w);return{v:new i.Edge(a,new i.Vertex(p,g,null),c,new i.Vertex(u,f,null),b),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},2617:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function a(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}var l=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.locale=t,this.config=this.getLocaleConfig(t),this.initializeFormatters()},t=[{key:"initializeFormatters",value:function(){var e={hour12:this.config.timeFormat.hour12};this.dateFormatters={short:new Intl.DateTimeFormat(this.locale,o({dateStyle:"short",timeStyle:"short"},e)),medium:new Intl.DateTimeFormat(this.locale,o({dateStyle:"medium",timeStyle:"medium"},e)),long:new Intl.DateTimeFormat(this.locale,o({dateStyle:"full",timeStyle:"long"},e)),time:new Intl.DateTimeFormat(this.locale,o({timeStyle:"short"},e))},this.numberFormatter=new Intl.NumberFormat(this.locale,{minimumFractionDigits:0,maximumFractionDigits:20}),this.currencyFormatter=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.config.numberFormat.currency})}},{key:"getLocaleConfig",value:function(e){return window.localeConfigs[e]||window.localeConfigs["en-US"]}},{key:"formatDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium",n=this.config.dateFormat;return null!=n&&n[t]?new Intl.DateTimeFormat(this.locale,{dateStyle:t}).format(e):e.toLocaleDateString(this.locale)}},{key:"formatNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return null!==t?new Intl.NumberFormat(this.locale,{minimumFractionDigits:t,maximumFractionDigits:t}).format(e):this.numberFormatter.format(e)}catch(t){return e.toString()}}},{key:"formatCurrency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return t?new Intl.NumberFormat(this.locale,{style:"currency",currency:t}).format(e):this.currencyFormatter.format(e)}catch(t){return e.toString()}}},{key:"formatRelativeTime",value:function(e){try{for(var t=new Intl.RelativeTimeFormat(this.locale,{numeric:"auto"}),r=(new Date(e).getTime()-Date.now())/1e3,i=0,o=Object.entries({year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1});i<o.length;i++){var a=n(o[i],2),s=a[0],c=a[1];if(Math.abs(r)>=c||"second"===s)return t.format(Math.round(r/c),s)}}catch(t){return new Date(e).toLocaleString(this.locale)}}},{key:"formatTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";try{var n,r={hour:"numeric",minute:"numeric",second:"short"!==t?"numeric":void 0,hour12:null===(n=this.config.timeFormat)||void 0===n?void 0:n.hour12};return new Intl.DateTimeFormat(this.locale,r).format(e)}catch(t){return e.toLocaleTimeString(this.locale)}}},{key:"uses12HourTime",value:function(){var e,t;return"12h"===(null===(e=this.config.timeFormat)||void 0===e?void 0:e.system)||!0===(null===(t=this.config.timeFormat)||void 0===t?void 0:t.hour12)}},{key:"usesMixedTimeFormat",value:function(){var e;return"mixed"===(null===(e=this.config.timeFormat)||void 0===e?void 0:e.system)}},{key:"formatDateTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";try{var n,r=e instanceof Date?e:new Date(e),i=(null===(n=this.config.dateTimeFormat)||void 0===n?void 0:n[t])||{},o=new Intl.DateTimeFormat(this.locale,{dateStyle:t}),a=new Intl.DateTimeFormat(this.locale,{hour:"12h"===this.config.timeFormat.system?"numeric":"2-digit",minute:"2-digit",second:"short"!==t?"2-digit":void 0,hour12:this.config.timeFormat.hour12});return(i.pattern||"{date} {time}").replace("{date}",o.format(r)).replace("{time}",a.format(r))}catch(t){return new Date(e).toLocaleString(this.locale)}}},{key:"getMeridiemMarker",value:function(e){var t=this.config.timeFormat;return null!=t&&t.meridiem?e<12?t.meridiem.ante:t.meridiem.post:null}},{key:"isRTL",value:function(){return"rtl"===this.config.direction}},{key:"getCulturalPreferences",value:function(){var e,t,n,r;return{direction:this.config.direction,timeFormat:this.config.timeFormat,dateFormat:this.config.dateFormat,dateTimeFormat:this.config.dateTimeFormat,numberFormat:this.config.numberFormat,calendar:{firstDayOfWeek:null!==(e=null===(t=this.config.calendar)||void 0===t?void 0:t.firstDayOfWeek)&&void 0!==e?e:0,weekendDays:null!==(n=null===(r=this.config.calendar)||void 0===r?void 0:r.weekendDays)&&void 0!==n?n:[0,6]},measurement:this.config.measurement||"metric"}}}],t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();e.exports&&(e.exports=l),window.CulturalConfig=l},2744:(e,t,n)=>{"use strict";var r={name:"Agents Control Room",number:"1.6",buildDate:(new Date).toISOString()};window.APP_VERSION=r;var i=n(1982);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var a=r&&r.prototype instanceof l?r:l,u=Object.create(a.prototype);return s(u,"_invoke",function(n,r,i){var o,a,s,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,a=0,s=e,f.n=n,c}};function h(n,r){for(a=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,o=u[t],h=f.p,p=o[2];n>3?(i=p===r)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(a=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,a=0))}if(i||n>1)return c;throw d=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),a=u,s=p;(t=a<2?e:s)||!d;){o||(a?a<3?(a>1&&(f.n=-1),h(a,s)):f.n=s:f.v=s);try{if(l=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((t=(d=f.n<0)?s:n.call(r,f))!==c)break}catch(t){o=e,a=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,i,o),!0),u}var c={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(s(t={},r,function(){return this}),t),h=d.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e}return u.prototype=d,s(h,"constructor",d),s(d,"constructor",u),u.displayName="GeneratorFunction",s(d,i,"GeneratorFunction"),s(h),s(h,i,"Generator"),s(h,r,function(){return this}),s(h,"toString",function(){return"[object Generator]"}),(a=function(){return{w:o,m:p}})()}function s(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}s=function(e,t,n,r){function o(t,n){s(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},s(e,t,n,r)}function c(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)})}}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var p=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.client=null,this.isInitialized=!1,this.subscribedTopics=new Set,this.messageHandlers=new Map,this.defaultQoS=1,this.errorHandler=window.ChatErrorHandler||null,this.errorCodes=window.ChatErrorCodes||null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.healthCheckInterval=null},t=[{key:"handleError",value:function(e,t){var n;if(this.errorHandler){var r={initialization:this.errorCodes.MQTT_ERROR,connection:this.errorCodes.NETWORK_ERROR,subscription:this.errorCodes.MQTT_ERROR,publish:this.errorCodes.SEND_FAILED}[t]||this.errorCodes.UNEXPECTED_ERROR;(n=this.errorHandler).showError.apply(n,u(r))}}},{key:"initialize",value:function(){var e=l(a().m(function e(){var t,n;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,this.config.hostname&&this.config.port){e.n=1;break}throw new Error("Invalid MQTT configuration");case 1:if(!this.client){e.n=2;break}return e.n=2,this.cleanup(!1);case 2:return t="".concat(this.config.protocol).concat(this.config.hostname),this.client=mqtt.connect(t,{username:this.config.username,password:this.config.password,port:this.config.port,keepalive:60,connectTimeout:3e4,reconnectPeriod:1e3}),e.n=3,this.waitForConnection();case 3:return this.setupEventHandlers(),this.isInitialized=!0,this.reconnectAttempts=0,this.startHealthCheck(),e.a(2,!0);case 4:throw e.p=4,n=e.v,this.handleError(n,"initialization"),this.isInitialized=!1,n;case 5:return e.a(2)}},e,this,[[0,4]])}));return function(){return e.apply(this,arguments)}}()},{key:"startHealthCheck",value:function(){var e=this;this.healthCheckInterval&&clearInterval(this.healthCheckInterval),this.healthCheckInterval=setInterval(function(){e.checkConnection().catch(function(e){})},12e4)}},{key:"checkConnection",value:(p=l(a().m(function e(){var t;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.client&&this.client.connected){e.n=6;break}return utils.debugLog("MQTT connection lost - attempting to reconnect"),this.isInitialized=!1,e.p=1,e.n=2,this.initialize();case 2:if(!(this.subscribedTopics.size>0)){e.n=4;break}return t=Array.from(this.subscribedTopics),utils.debugLog("Resubscribing to ".concat(t.length," topics")),e.n=3,this.resubscribeToTopics(t);case 3:utils.debugLog("Successfully resubscribed to all topics"),"function"==typeof showMessage&&showMessage("Connection restored successfully","success",3e3);case 4:return e.a(2,!0);case 5:return e.p=5,e.v,e.a(2,!1);case 6:return utils.debugLog("MQTT connection health check passed"),e.a(2,!0);case 7:return e.a(2)}},e,this,[[1,5]])})),function(){return p.apply(this,arguments)})},{key:"resubscribeToTopics",value:(h=l(a().m(function e(t){var n,r=this;return a().w(function(e){for(;;)if(0===e.n)return n=t.map(function(e){return new Promise(function(t,n){r.client.subscribe(e,{qos:r.defaultQoS},function(r){r?n(r):t(e)})})}),e.a(2,Promise.all(n))},e)})),function(e){return h.apply(this,arguments)})},{key:"setupEventHandlers",value:function(){var e=this;this.client.on("message",function(t,n){(e.messageHandlers.get(t)||[]).forEach(function(r){try{r(t,n)}catch(t){e.handleError(t,"message_handling")}})}),this.client.on("error",function(t){e.handleError(t,"connection"),e.isInitialized=!1}),this.client.on("reconnect",function(){utils.debugLog("MQTT client reconnecting...")}),this.client.on("disconnect",function(){utils.debugLog("MQTT client disconnected"),e.isInitialized=!1,setTimeout(function(){return e.checkConnection()},5e3)}),this.client.on("offline",function(){utils.debugLog("MQTT client offline"),e.isInitialized=!1,setTimeout(function(){return e.checkConnection()},5e3)}),this.client.on("connect",function(){if(utils.debugLog("MQTT client connected successfully"),e.isInitialized=!0,e.reconnectAttempts=0,e.subscribedTopics.size>0){var t=Array.from(e.subscribedTopics);utils.debugLog("Resubscribing to ".concat(t.length," topics after connect")),e.resubscribeToTopics(t).catch(function(e){})}})}},{key:"waitForConnection",value:(d=l(a().m(function e(){var t=this;return a().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e,n){var r=setTimeout(function(){n(new Error("MQTT connection timeout"))},3e4);t.client.once("connect",function(){clearTimeout(r),e(!0)}),t.client.once("error",function(e){clearTimeout(r),n(e)})}))},e)})),function(){return d.apply(this,arguments)})},{key:"subscribe",value:(c=l(a().m(function e(t,n){var r,i,o,s,c,l,u,d=this,f=arguments;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=f.length>2&&void 0!==f[2]?f[2]:{qos:this.defaultQoS},i=f.length>3&&void 0!==f[3]?f[3]:0,o=3,e.p=1,this.isInitialized&&this.client&&this.client.connected){e.n=2;break}return utils.debugLog("MQTT not connected before subscribe, reconnecting..."),e.n=2,this.initialize();case 2:return s=Array.isArray(t)?t:[t],c=s.map(function(e){return new Promise(function(t,i){d.client.subscribe(e,r,function(r){if(r)d.handleError(r,"subscription"),i(r);else{if(d.subscribedTopics.add(e),n){var o=d.messageHandlers.get(e)||[];o.push(n),d.messageHandlers.set(e,o)}t(e)}})})}),e.n=3,Promise.all(c);case 3:return e.a(2,e.v);case 4:if(e.p=4,u=e.v,!(i<o)){e.n=6;break}return l=Math.min(100*Math.pow(2,i),2e3),utils.debugLog("MQTT subscribe failed, retrying in ".concat(l,"ms (attempt ").concat(i+1,"/").concat(o,")")),e.n=5,new Promise(function(e){return setTimeout(e,l)});case 5:return this.isInitialized=!1,e.a(2,this.subscribe(t,n,r,i+1));case 6:throw utils.debugLog("MQTT subscribe failed after ".concat(o," retries")),u;case 7:return e.a(2)}},e,this,[[1,4]])})),function(e,t){return c.apply(this,arguments)})},{key:"unsubscribe",value:(s=l(a().m(function e(t){var n,r,i,o,s,c,l=this,u=arguments;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:0,r=3,this.client&&t&&(!Array.isArray(t)||0!==t.length)){e.n=1;break}return e.a(2,[]);case 1:if(e.p=1,this.isInitialized&&this.client.connected){e.n=2;break}return utils.debugLog("MQTT not connected before unsubscribe, reconnecting..."),e.n=2,this.initialize();case 2:return i=Array.isArray(t)?t:[t],o=i.map(function(e){return new Promise(function(t,n){l.client.unsubscribe(e,function(r){r?(l.handleError(r,"subscription"),n(r)):(l.subscribedTopics.delete(e),l.messageHandlers.delete(e),t(e))})})}),e.n=3,Promise.all(o);case 3:return e.a(2,e.v);case 4:if(e.p=4,c=e.v,!(n<r)){e.n=6;break}return s=Math.min(100*Math.pow(2,n),2e3),utils.debugLog("MQTT unsubscribe failed, retrying in ".concat(s,"ms (attempt ").concat(n+1,"/").concat(r,")")),e.n=5,new Promise(function(e){return setTimeout(e,s)});case 5:return this.isInitialized=!1,e.a(2,this.unsubscribe(t,n+1));case 6:throw utils.debugLog("MQTT unsubscribe failed after ".concat(r," retries")),c;case 7:return e.a(2)}},e,this,[[1,4]])})),function(e){return s.apply(this,arguments)})},{key:"publish",value:(o=l(a().m(function e(t,n){var r,i,o,s,c,l,u=this,d=arguments;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=d.length>2&&void 0!==d[2]?d[2]:{qos:this.defaultQoS},i=d.length>3&&void 0!==d[3]?d[3]:0,o=3,e.p=1,this.isInitialized&&this.client&&this.client.connected){e.n=2;break}return utils.debugLog("MQTT not connected before publish, reconnecting..."),e.n=2,this.initialize();case 2:return s="string"==typeof n?n:JSON.stringify(n),e.n=3,new Promise(function(e,n){u.client.publish(t,s,r,function(t){t?(u.handleError(t,"publish"),n(t)):e()})});case 3:return e.a(2,e.v);case 4:if(e.p=4,l=e.v,!(i<o)){e.n=6;break}return c=Math.min(100*Math.pow(2,i),2e3),utils.debugLog("MQTT publish failed, retrying in ".concat(c,"ms (attempt ").concat(i+1,"/").concat(o,")")),e.n=5,new Promise(function(e){return setTimeout(e,c)});case 5:return this.isInitialized=!1,e.a(2,this.publish(t,n,r,i+1));case 6:throw utils.debugLog("MQTT publish failed after ".concat(o," retries")),l;case 7:return e.a(2)}},e,this,[[1,4]])})),function(e,t){return o.apply(this,arguments)})},{key:"verifyConnection",value:(i=l(a().m(function e(t){var n,r,i,o,s,c=this,l=arguments;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:1e4,r="ping",e.p=1,this.isInitialized&&this.client.connected){e.n=2;break}return e.n=2,this.initialize();case 2:return e.n=3,this.subscribe(t);case 3:return i=new Promise(function(e,n){c.messageHandlers.set(t,[function(n,i){n===t&&i.toString()===r&&e(!0)}])}),o=new Promise(function(e,t){setTimeout(function(){return t(new Error("Verification timeout"))},n)}),e.n=4,this.publish(t,r);case 4:return e.n=5,Promise.race([i,o]);case 5:return e.n=6,this.unsubscribe(t);case 6:return e.a(2,!0);case 7:return e.p=7,s=e.v,this.handleError(s,"connection"),e.a(2,!1)}},e,this,[[1,7]])})),function(e){return i.apply(this,arguments)})},{key:"cleanup",value:(r=l(a().m(function e(){var t,n,r=arguments;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=!(r.length>0&&void 0!==r[0])||r[0],this.client){e.n=1;break}return e.a(2);case 1:if(e.p=1,this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=null),!(this.subscribedTopics.size>0)){e.n=2;break}return e.n=2,this.unsubscribe(Array.from(this.subscribedTopics));case 2:t&&this.messageHandlers.clear(),this.client.end(),this.client=null,this.isInitialized=!1,e.n=4;break;case 3:throw e.p=3,n=e.v,this.handleError(n,"cleanup"),n;case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return r.apply(this,arguments)})},{key:"isConnected",value:function(){var e;return(null===(e=this.client)||void 0===e?void 0:e.connected)||!1}}],t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,i,o,s,c,d,h,p}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}window.MQTTConnectionManager=p;var g,y,v,b={FETCH_AGENTS:{neo4j:"\n            MATCH (ai:AgentInstance)-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n            CALL {\n                WITH ai\n                OPTIONAL MATCH (ai)-[:CREATED]->(m:Memory)\n                RETURN count(DISTINCT m) AS memoryCount\n            }\n            CALL {\n                WITH ai\n                OPTIONAL MATCH (ai)-[:MADE]->(d:Decision)\n                RETURN count(DISTINCT d) AS decisionCount\n            }\n            CALL {\n                WITH ai\n                OPTIONAL MATCH (ai)-[:MADE]->(:Decision)-[:RESULTED_IN]->(a:Artifact)\n                RETURN count(DISTINCT a) AS artifactCount\n            }\n            WITH ai.agent_id AS agentId, \n                 ai.name AS agentName, \n                 memoryCount + decisionCount + artifactCount AS totalCount\n            RETURN agentId, \n                   agentName, \n                   totalCount AS memoryCount,\n                   CASE WHEN totalCount > 0 THEN 1 ELSE 0 END AS hasMemories\n            ORDER BY hasMemories DESC, agentId ASC\n        ",cosmosdb:"\n            g.V().hasLabel('AgentInstance')\n            .where(out('MEMBER_OF').has('Team', 'team_id', teamId))\n            .as('ai')\n            .map(\n                select('ai').union(\n                    out('CREATED').hasLabel('Memory'),\n                    out('MADE').hasLabel('Decision'),\n                    out('MADE').out('RESULTED_IN').hasLabel('Artifact')\n                ).count().fold()\n            ).as('memoryCount')\n            .select('ai', 'memoryCount')\n            .project('agentId', 'agentName', 'memoryCount', 'hasMemories')\n            .by(values('agent_id'))\n            .by(values('name'))\n            .by(select('memoryCount').unfold())\n            .by(select('memoryCount').unfold().is(gt(0)).fold().coalesce(unfold(), constant(0)))\n            .order().by(select('hasMemories'), decr).by(select('agentId'))\n        "},FETCH_TIMELINE_MEMORIES:{neo4j:"\n            CALL {\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:CREATED]->(m:Memory)\n                WHERE ($olderThanDate IS NULL OR m.created_date < $olderThanDate)\n                RETURN m.id AS id, m.type AS type, m.content AS content, \n                       m.created_date AS created_at, 'Memory' AS nodeType\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:MADE]->(d:Decision)\n                WHERE ($olderThanDate IS NULL OR d.created_date < $olderThanDate)\n                RETURN d.id AS id, d.type AS type, d.content AS content, \n                       d.created_date AS created_at, 'Decision' AS nodeType\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:MADE]->(:Decision)-[:RESULTED_IN]->(a:Artifact)\n                WHERE ($olderThanDate IS NULL OR a.created_date < $olderThanDate)\n                RETURN a.id AS id, a.type AS type, a.content AS content, \n                       a.created_date AS created_at, 'Artifact' AS nodeType\n            }\n            ORDER BY created_at DESC\n            LIMIT toInteger($recordLimit)\n            RETURN id, type, content, created_at, nodeType\n        ",cosmosdb:"\n            g.V().has('AgentInstance', 'agent_id', agentId)\n            .union(\n                out('CREATED').hasLabel('Memory'),\n                out('MADE').hasLabel('Decision'),\n                out('MADE').out('RESULTED_IN').hasLabel('Artifact')\n            )\n            .where(\n                or(\n                    constant(olderThanDate).is(null),\n                    has('created_date', lt(olderThanDate))\n                )\n            )\n            .order().by('created_date', decr)\n            .limit(recordLimit)\n            .project('id', 'type', 'content', 'created_at', 'nodeType')\n            .by(id())\n            .by(values('type'))\n            .by(values('content'))\n            .by(values('created_date'))\n            .by(label())\n        "},FETCH_ACTIVITY_TYPES:{neo4j:"\n        CALL {\n            MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n            MATCH (ai)-[:CREATED]->(m:Memory)\n            RETURN DISTINCT m.type AS type\n            \n            UNION\n            \n            MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n            MATCH (ai)-[:MADE]->(d:Decision)\n            RETURN DISTINCT d.type AS type\n            \n            UNION\n            \n            MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n            MATCH (ai)-[:MADE]->(:Decision)-[:RESULTED_IN]->(a:Artifact)\n            RETURN DISTINCT a.type AS type\n        }\n        WITH type\n        WHERE type IS NOT NULL\n        RETURN type\n        ORDER BY type\n        ",cosmosdb:"\n            g.V().has('AgentInstance', 'agent_id', agentId)\n            .union(\n                out('CREATED').hasLabel('Memory'),\n                out('MADE').hasLabel('Decision'),\n                out('MADE').out('RESULTED_IN').hasLabel('Artifact')\n            )\n            .has('type')\n            .values('type')\n            .dedup()\n            .order()\n        "},FETCH_MEMORIES_BY_TYPE:{neo4j:"\n            MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n            MATCH (ai)-[:CREATED]->(m:Memory)\n            WHERE m.type = $type AND ($olderThanDate IS NULL OR m.created_date < datetime($olderThanDate))\n            WITH m\n            ORDER BY m.created_date DESC\n            LIMIT toInteger($recordLimit)\n            RETURN m as node, m.type as type, 'Memory' as category\n        ",cosmosdb:"\n            g.V().has('AgentInstance', 'agent_id', agentId)\n            .out('CREATED').hasLabel('Memory').has('type', type)\n            .where(or(constant(olderThanDate).is(null), has('created_date', lt(olderThanDate))))\n            .order().by('created_date', decr)\n            .limit(recordLimit)\n            .project('node', 'type', 'category')\n            .by(elementMap())\n            .by(values('type'))\n            .by(constant('Memory'))\n        "},FETCH_CONVERSATION_CONTENT:{neo4j:"\n            MATCH (c:Artifact {type: 'Conversation', id: $conversationId})-[:HAS_ENTRY]->(e:Entry)\n            RETURN e.user_query as query,\n                   e.reply as response,\n                   e.timestamp as timestamp\n            ORDER BY e.timestamp ASC\n            LIMIT 1000\n        ",cosmosdb:"\n            g.V().has('Artifact', 'type', 'Conversation').has('id', conversationId)\n            .out('HAS_ENTRY').hasLabel('Entry')\n            .project('query', 'response', 'timestamp')\n            .by(values('user_query'))\n            .by(values('reply'))\n            .by(values('timestamp'))\n            .order().by('timestamp')\n        "},CHECK_NEW_MEMORIES:(g={neo4j:"\n            CALL {\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:CREATED]->(m:Memory)\n                WHERE m.created_date > datetime($newerThanDate)\n                RETURN m AS node, m.type AS nodeType, 'Memory' AS category,\n                       m.created_date AS createdDate, COALESCE(m.importance, 0.0) AS importance\n                ORDER BY m.created_date DESC\n                LIMIT toInteger($recordLimit)\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:MADE]->(d:Decision)\n                WHERE d.created_date > datetime($newerThanDate)\n                  AND (d.type IS NULL OR d.type <> 'Communication')\n                RETURN d AS node, COALESCE(d.type, 'Decision') AS nodeType, 'Decision' AS category,\n                       d.created_date AS createdDate, COALESCE(d.importance, 0.0) AS importance\n                ORDER BY d.created_date DESC\n                LIMIT toInteger($recordLimit)\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:MADE]->(:Decision)-[:RESULTED_IN]->(a:Artifact)\n                WHERE a.type <> 'Conversation' AND a.created_date > datetime($newerThanDate)\n                RETURN a AS node, 'Artifact' AS nodeType, 'Artifact' AS category,\n                       a.created_date AS createdDate, COALESCE(a.importance, 0.0) AS importance\n                ORDER BY a.created_date DESC\n                LIMIT toInteger($recordLimit)\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:PARTICIPATED_IN]-(c:Artifact)\n                WHERE c.type = 'Conversation' AND c.created_date > datetime($newerThanDate)\n                RETURN c AS node, 'Conversation' AS nodeType, 'Artifact' AS category,\n                       c.created_date AS createdDate, COALESCE(c.importance, 0.0) AS importance\n                ORDER BY c.created_date DESC\n                LIMIT toInteger($recordLimit)\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:CREATED]->(:Memory)-[:MADE]->(d:Decision {type: 'Communication'})\n                WHERE d.created_date > datetime($newerThanDate)\n                WITH ai, d,\n                     CASE \n                       WHEN d.target_agents IS NOT NULL AND d.target_agents <> '' \n                         THEN split(d.target_agents, ',')[0]\n                       ELSE null\n                     END AS firstTarget\n\n                OPTIONAL MATCH (recipientAgent:AgentInstance)-[:MEMBER_OF]->(t2:Team {team_id: $teamId})\n                WHERE recipientAgent.agent_id <> $agentId\n                OPTIONAL MATCH (recipientAgent)-[:CREATED]->(:Memory)-[:MADE]->(prevDecision:Decision {trigger_reason: 'Agent Communication Response'})\n                WHERE firstTarget IS NULL\n                  AND d.trigger_context IS NOT NULL AND prevDecision.content IS NOT NULL\n                  AND prevDecision.created_date <= d.created_date\n                  AND prevDecision.created_date >= d.created_date - duration({hours: 48})\n                  AND d.trigger_context CONTAINS prevDecision.content\n\n                WITH ai, d, firstTarget,\n                     CASE \n                       WHEN recipientAgent IS NOT NULL THEN recipientAgent.agent_id\n                       ELSE firstTarget\n                     END AS resolvedRecipient\n\n                RETURN d {.*,\n                          sender_id: ai.agent_id,\n                          recipient_id: resolvedRecipient\n                       } AS node, \n                       'Communication (Outgoing)' AS nodeType, 'Outgoing' AS category,\n                       d.created_date AS createdDate, COALESCE(d.importance, 0.0) AS importance\n                ORDER BY d.created_date DESC\n                LIMIT toInteger($recordLimit)\n\n                UNION\n\n                MATCH (sender:AgentInstance)\n                MATCH (sender)-[:CREATED]->(:Memory)-[:MADE]->(d:Decision {type: 'Communication'})\n                WHERE sender.agent_id <> $agentId\n                  AND d.created_date > datetime($newerThanDate)\n                  AND (\n                    (d.communication_type = 'Team' AND EXISTS((sender)-[:MEMBER_OF]->(:Team {team_id: $teamId})))\n                    OR \n                    (d.target_agents IS NOT NULL AND d.target_agents CONTAINS $agentId)\n                  )\n                RETURN d {.*, sender_id: sender.agent_id, recipient_id: $agentId} AS node, \n                       'Communication (Incoming)' AS nodeType, 'Incoming' AS category,\n                       d.created_date AS createdDate, COALESCE(d.importance, 0.0) AS importance\n                ORDER BY d.created_date DESC\n                LIMIT toInteger($recordLimit)\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:CREATED]->(:Memory)-[:MADE]->(originalMsg:Decision {type: 'Communication'})\n                WHERE originalMsg.created_date > datetime($newerThanDate)\n                WITH originalMsg.content AS originalContent, ai\n\n                MATCH (responder:AgentInstance)\n                MATCH (responder)-[:CREATED]->(:Memory)-[:MADE]->(response:Decision {type: 'Communication', trigger_reason: 'Agent Communication Response'})\n                WHERE responder.agent_id <> $agentId\n                  AND response.created_date > datetime($newerThanDate)\n                  AND response.created_date <= datetime($newerThanDate) + duration({hours: 48})\n                  AND response.trigger_context IS NOT NULL\n                  AND originalContent IS NOT NULL\n                  AND response.trigger_context CONTAINS originalContent\n\n                RETURN response {.*, sender_id: responder.agent_id} AS node, \n                       'Communication (Incoming)' AS nodeType, 'Incoming' AS category,\n                       response.created_date AS createdDate, COALESCE(response.importance, 0.0) AS importance\n                ORDER BY response.created_date DESC\n                LIMIT toInteger($recordLimit)\n            }\n            WITH node, nodeType, category, createdDate, importance\n            ORDER BY createdDate DESC\n            LIMIT toInteger($recordLimit)\n\n            RETURN node, nodeType, category, createdDate, importance\n        ",cosmosdb:"\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:CREATED]->(:Memory)-[:MADE]->(d:Decision {type: 'Communication'})\n                WHERE d.created_date > datetime($newerThanDate)\n                WITH ai, d,\n                     CASE \n                       WHEN d.target_agents IS NOT NULL AND d.target_agents <> '' \n                         THEN split(d.target_agents, ',')[0]\n                       ELSE null\n                     END AS firstTarget\n\n                OPTIONAL MATCH (recipientAgent:AgentInstance)-[:CREATED]->(:Memory)-[:MADE]->(prevDecision:Decision {trigger_reason: 'Agent Communication Response'})\n                WHERE firstTarget IS NULL\n                  AND d.trigger_context IS NOT NULL AND prevDecision.content IS NOT NULL\n                  AND prevDecision.created_date <= d.created_date\n                  AND prevDecision.created_date >= d.created_date - duration({hours: 48})\n                  AND d.trigger_context CONTAINS prevDecision.content\n\n                WITH ai, d, firstTarget,\n                     CASE \n                       WHEN recipientAgent IS NOT NULL THEN recipientAgent.agent_id\n                       ELSE firstTarget\n                     END AS resolvedRecipient\n\n                RETURN d {.*,\n                          sender_id: ai.agent_id,\n                          recipient_id: resolvedRecipient\n                       } AS node, \n                       'Communication (Outgoing)' AS nodeType, 'Outgoing' AS category,\n                       d.created_date AS createdDate, COALESCE(d.importance, 0.0) AS importance\n                ORDER BY d.created_date DESC\n                LIMIT toInteger($recordLimit)\n\n                UNION\n\n                MATCH (sender:AgentInstance)-[:CREATED]->(:Memory)-[:MADE]->(d:Decision {type: 'Communication'})\n                WHERE sender.agent_id <> $agentId\n                  AND d.created_date > datetime($newerThanDate)\n                  AND (d.communication_type = 'Team' OR (d.target_agents IS NOT NULL AND d.target_agents CONTAINS $agentId))\n                RETURN d {.*, sender_id: sender.agent_id, recipient_id: $agentId} AS node, \n                       'Communication (Incoming)' AS nodeType, 'Incoming' AS category,\n                       d.created_date AS createdDate, COALESCE(d.importance, 0.0) AS importance\n                ORDER BY d.created_date DESC\n                LIMIT toInteger($recordLimit)\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:CREATED]->(:Memory)-[:MADE]->(originalMsg:Decision {type: 'Communication'})\n                WHERE originalMsg.created_date > datetime($newerThanDate)\n                WITH originalMsg.content AS originalContent, ai\n\n                MATCH (responder:AgentInstance)-[:CREATED]->(:Memory)-[:MADE]->(response:Decision {type: 'Communication', trigger_reason: 'Agent Communication Response'})\n                WHERE responder.agent_id <> $agentId\n                  AND response.created_date > datetime($newerThanDate)\n                  AND response.created_date <= datetime($newerThanDate) + duration({hours: 48})\n                  AND response.trigger_context IS NOT NULL\n                  AND originalContent IS NOT NULL\n                  AND response.trigger_context CONTAINS originalContent\n\n                RETURN response {.*, sender_id: responder.agent_id} AS node, \n                       'Communication (Incoming)' AS nodeType, 'Incoming' AS category,\n                       response.created_date AS createdDate, COALESCE(response.importance, 0.0) AS importance\n                ORDER BY response.created_date DESC\n                LIMIT toInteger($recordLimit)\n            }\n            WITH node, nodeType, category, createdDate, importance\n            ORDER BY createdDate DESC\n            LIMIT toInteger($recordLimit)\n\n            RETURN node, nodeType, category, createdDate, importance\n        "},y="cosmosdb",v="\n\n            g.V().has('AgentInstance', 'agent_id', agentId).as('ai')\n            .union(\n\n                out('CREATED').hasLabel('Memory').has('created_date', gt(newerThanDate)),\n                out('MADE').hasLabel('Decision').has('created_date', gt(newerThanDate))\n                    .not(has('type', 'Communication')),\n                out('MADE').out('RESULTED_IN').hasLabel('Artifact')\n                    .has('type', neq('Conversation'))\n                    .has('created_date', gt(newerThanDate)),\n                out('PARTICIPATED_IN').hasLabel('Artifact')\n                    .has('type', 'Conversation')\n                    .has('created_date', gt(newerThanDate))\n            )\n            .project('node', 'nodeType', 'category', 'createdDate', 'importance')\n            .by(elementMap())\n            .by(choose(\n                has('type'),\n                values('type'),\n                label()\n            ))\n            .by(choose(\n                label().is('Decision'),\n                constant('Decision'),\n                choose(\n                    label().is('Memory'),\n                    constant('Memory'),\n                    constant('Artifact')\n                )\n            ))\n            .by(values('created_date'))\n            .by(coalesce(values('importance'), constant(0.0)))\n\n            .union(\n\n                identity(),\n\n                select('ai')\n                .out('CREATED').hasLabel('Memory')\n                .out('MADE').hasLabel('Decision')\n                .has('type', 'Communication')\n                .has('created_date', gt(newerThanDate))\n                .as('outcomm')\n                .project('node', 'nodeType', 'category', 'createdDate', 'importance')\n                .by(\n                    select('outcomm').elementMap()\n                    .map(unfold()\n                        .group()\n                        .by(keys)\n                        .by(values)\n                    )\n                    .map(addLocal('sender_id', select('ai').values('agent_id')))\n\n                    .map(addLocal('recipient_id',\n                        coalesce(\n                            select('outcomm').values('target_agents').split(',').limit(1),\n                            constant(null)\n                        )\n                    ))\n                )\n                .by(constant('Communication (Outgoing)'))\n                .by(constant('Outgoing'))\n                .by(select('outcomm').values('created_date'))\n                .by(coalesce(select('outcomm').values('importance'), constant(0.0))),\n\n                V().hasLabel('AgentInstance')\n                .where(values('agent_id').is(neq(agentId)))\n                .as('sender')\n                .out('CREATED').hasLabel('Memory')\n                .out('MADE').hasLabel('Decision')\n                .has('type', 'Communication')\n                .has('created_date', gt(newerThanDate))\n                .as('incomm')\n                .where(\n                    or(\n                        values('communication_type').is('Team'),\n                        values('target_agents').contains(agentId)\n                    )\n                )\n                .project('node', 'nodeType', 'category', 'createdDate', 'importance')\n                .by(\n                    select('incomm').elementMap()\n                    .map(unfold()\n                        .group()\n                        .by(keys)\n                        .by(values)\n                    )\n                    .map(addLocal('sender_id', select('sender').values('agent_id')))\n                    .map(addLocal('recipient_id', constant(agentId)))\n                )\n                .by(constant('Communication (Incoming)'))\n                .by(constant('Incoming'))\n                .by(select('incomm').values('created_date'))\n                .by(coalesce(select('incomm').values('importance'), constant(0.0)))\n            )\n\n            .order().by('createdDate', decr)\n            .limit(recordLimit)\n        ",(y=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(y))in g?Object.defineProperty(g,y,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[y]=v,g),CHECK_NEW_ACTIVITIES:{neo4j:"\n            MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n\n            WITH ai, $type as memoryType\n            CALL {\n                WITH ai, memoryType\n                MATCH (ai)-[:CREATED]->(m:Memory)\n                WHERE m.type = memoryType\n                AND m.created_date > datetime($newerThanDate)\n                RETURN m as node, 'Memory' as category, properties(m) as allProperties\n\n                UNION\n\n                WITH ai, memoryType\n                MATCH (ai)-[:MADE]->(d:Decision)\n                WHERE memoryType = 'Decision'\n                AND d.created_date > datetime($newerThanDate)\n                RETURN d as node, 'Decision' as category, properties(d) as allProperties\n\n                UNION\n\n                WITH ai, memoryType\n                MATCH (ai)-[:MADE]->(:Decision)-[:RESULTED_IN]->(a:Artifact)\n                WHERE memoryType = 'Artifact'\n                AND a.created_date > datetime($newerThanDate)\n                RETURN a as node, 'Artifact' as category, properties(a) as allProperties\n            }\n\n            WITH node, category, allProperties\n            ORDER BY node.created_date DESC\n            LIMIT toInteger($recordLimit)\n\n            RETURN category, allProperties, node.type as type, node.created_date as created_date, COALESCE(node.importance, 0.0) as importance\n        ",cosmosdb:"\n            g.V().has('AgentInstance', 'agent_id', agentId)\n            .union(\n                out('CREATED').hasLabel('Memory').has('type', type).has('created_date', gt(newerThanDate)),\n                choose(constant(type).is('Decision'), \n                    out('MADE').hasLabel('Decision').has('created_date', gt(newerThanDate)),\n                    choose(constant(type).is('Artifact'),\n                        out('MADE').out('RESULTED_IN').hasLabel('Artifact').has('created_date', gt(newerThanDate)),\n                        constant(null)\n                    )\n                )\n            )\n            .where(not(eq(null)))\n            .order().by('created_date', decr)\n            .limit(recordLimit)\n            .project('category', 'allProperties', 'type', 'created_date', 'importance')\n            .by(choose(label().is('Decision'), constant('Decision'), choose(label().is('Memory'), constant('Memory'), constant('Artifact'))))\n            .by(elementMap())\n            .by(values('type'))\n            .by(values('created_date'))\n            .by(coalesce(values('importance'), constant(0.0)))\n        "},FETCH_ALL_ACTIVITY_TYPES:{neo4j:"\n            CALL {\n                WITH $agentId AS agentIdParam, $teamId AS teamIdParam\n                MATCH (ai:AgentInstance {agent_id: agentIdParam})-[:MEMBER_OF]->(t:Team {team_id: teamIdParam})\n                MATCH (ai)-[:CREATED]->(m:Memory {type: 'Observation'})\n                RETURN m AS node, 'Observation' AS nodeType, 'Memory' AS nodeCategory,\n                       m.created_date AS nodeDate, COALESCE(m.importance, 0.0) AS nodeImportance\n                ORDER BY m.created_date DESC\n                LIMIT 6\n\n                UNION\n                WITH $agentId AS agentIdParam, $teamId AS teamIdParam\n                MATCH (ai:AgentInstance {agent_id: agentIdParam})-[:MEMBER_OF]->(t:Team {team_id: teamIdParam})\n                MATCH (ai)-[:CREATED]->(m:Memory {type: 'Reflection'})\n                RETURN m AS node, 'Reflection' AS nodeType, 'Memory' AS nodeCategory,\n                       m.created_date AS nodeDate, COALESCE(m.importance, 0.0) AS nodeImportance\n                ORDER BY m.created_date DESC\n                LIMIT 6\n\n                UNION\n\n                WITH $agentId AS agentIdParam, $teamId AS teamIdParam\n                MATCH (ai:AgentInstance {agent_id: agentIdParam})-[:MEMBER_OF]->(t:Team {team_id: teamIdParam})\n                MATCH (ai)-[:CREATED]->(m:Memory {type: 'Memory'})\n                RETURN m AS node, 'Memory' AS nodeType, 'Memory' AS nodeCategory,\n                       m.created_date AS nodeDate, COALESCE(m.importance, 0.0) AS nodeImportance\n                ORDER BY m.created_date DESC\n                LIMIT 6\n\n                UNION\n\n                WITH $agentId AS agentIdParam, $teamId AS teamIdParam\n                MATCH (ai:AgentInstance {agent_id: agentIdParam})-[:MEMBER_OF]->(t:Team {team_id: teamIdParam})\n                MATCH (ai)-[:CREATED]->(m:Memory {type: 'Planning'})\n                RETURN m AS node, 'Planning' AS nodeType, 'Memory' AS nodeCategory,\n                       m.created_date AS nodeDate, COALESCE(m.importance, 0.0) AS nodeImportance\n                ORDER BY m.created_date DESC\n                LIMIT 6\n\n                UNION\n\n                WITH $agentId AS agentIdParam, $teamId AS teamIdParam\n                MATCH (ai:AgentInstance {agent_id: agentIdParam})-[:MEMBER_OF]->(t:Team {team_id: teamIdParam})\n                MATCH (ai)-[:MADE]->(:Decision)-[:RESULTED_IN]->(a:Artifact {type: 'Plan'})\n                RETURN a AS node, 'Plan' AS nodeType, 'Artifact' AS nodeCategory,\n                       a.created_date AS nodeDate, COALESCE(a.importance, 0.0) AS nodeImportance\n                ORDER BY a.created_date DESC\n                LIMIT 6\n\n                UNION\n\n                WITH $agentId AS agentIdParam, $teamId AS teamIdParam\n                MATCH (ai:AgentInstance {agent_id: agentIdParam})-[:MEMBER_OF]->(t:Team {team_id: teamIdParam})\n                MATCH (ai)-[:MADE]->(d:Decision)\n                WHERE d.type IS NULL OR d.type <> 'Communication'\n                RETURN d AS node, COALESCE(d.type, 'Decision') AS nodeType, 'Decision' AS nodeCategory,\n                       d.created_date AS nodeDate, COALESCE(d.importance, 0.0) AS nodeImportance\n                ORDER BY d.created_date DESC\n                LIMIT 6\n\n                UNION\n\n                WITH $agentId AS agentIdParam, $teamId AS teamIdParam\n                MATCH (ai:AgentInstance {agent_id: agentIdParam})-[:MEMBER_OF]->(t:Team {team_id: teamIdParam})\n                MATCH (ai)-[:MADE]->(:Decision)-[:RESULTED_IN]->(a:Artifact)\n                WHERE a.type IS NULL OR a.type <> 'Conversation'\n                RETURN a AS node, 'Artifact' AS nodeType, 'Artifact' AS nodeCategory,\n                       a.created_date AS nodeDate, COALESCE(a.importance, 0.0) AS nodeImportance\n                ORDER BY a.created_date DESC\n                LIMIT 6\n\n                UNION\n\n                WITH $agentId AS agentIdParam, $teamId AS teamIdParam\n                MATCH (ai:AgentInstance {agent_id: agentIdParam})-[:MEMBER_OF]->(t:Team {team_id: teamIdParam})\n                MATCH (ai)-[:PARTICIPATED_IN]-(c:Artifact {type: 'Conversation'})\n                RETURN c AS node, 'Conversation' AS nodeType, 'Artifact' AS nodeCategory,\n                       c.created_date AS nodeDate, COALESCE(c.importance, 0.0) AS nodeImportance\n                ORDER BY c.created_date DESC\n                LIMIT 6\n\n                UNION\n\n                WITH $agentId AS agentIdParam, $teamId AS teamIdParam\n                MATCH (ai:AgentInstance {agent_id: agentIdParam})-[:MEMBER_OF]->(t:Team {team_id: teamIdParam})\n                MATCH (ai)-[:CREATED]->(:Memory)-[:MADE]->(d:Decision {type: 'Communication'})\n                WITH ai, d,\n                     CASE \n                       WHEN d.target_agents IS NOT NULL AND d.target_agents <> '' \n                         THEN split(d.target_agents, ',')[0]\n                       ELSE null\n                     END AS firstTarget\n                RETURN d {.*,\n                          sender_id: ai.agent_id,\n                          recipient_id: firstTarget\n                       } AS node, \n                       'Communication (Outgoing)' AS nodeType, 'Outgoing' AS nodeCategory,\n                       d.created_date AS nodeDate, COALESCE(d.importance, 0.0) AS nodeImportance\n                ORDER BY d.created_date DESC\n                LIMIT 6\n\n                UNION\n\n                WITH $agentId AS agentIdParam, $teamId AS teamIdParam\n                MATCH (sender:AgentInstance)\n                MATCH (sender)-[:CREATED]->(:Memory)-[:MADE]->(d:Decision {type: 'Communication'})\n                WHERE sender.agent_id <> agentIdParam\n                  AND (\n                    (d.communication_type = 'Team' AND EXISTS((sender)-[:MEMBER_OF]->(:Team {team_id: teamIdParam})))\n                    OR \n                    (d.target_agents IS NOT NULL AND d.target_agents CONTAINS agentIdParam)\n                  )\n                RETURN d {.*, sender_id: sender.agent_id, recipient_id: agentIdParam} AS node, \n                       'Communication (Incoming)' AS nodeType, 'Incoming' AS nodeCategory,\n                       d.created_date AS nodeDate, COALESCE(d.importance, 0.0) AS nodeImportance\n                ORDER BY d.created_date DESC\n                LIMIT 6\n\n                UNION\n\n                WITH $agentId AS agentIdParam, $teamId AS teamIdParam\n                MATCH (ai:AgentInstance {agent_id: agentIdParam})-[:MEMBER_OF]->(t:Team {team_id: teamIdParam})\n                MATCH (ai)-[:CREATED]->(m:Memory {type: 'Consensus'})\n                RETURN m AS node, 'Consensus' AS nodeType, 'Memory' AS nodeCategory,\n                       m.created_date AS nodeDate, COALESCE(m.importance, 0.0) AS nodeImportance\n                ORDER BY m.created_date DESC\n                LIMIT 6\n            }\n            WITH node, nodeType, nodeCategory, nodeDate, nodeImportance\n            ORDER BY nodeDate DESC\n            RETURN node, nodeType, nodeCategory, nodeDate, nodeImportance\n        ",cosmosdb:"\n\n            g.V().has('AgentInstance', 'agent_id', agentId).as('ai')\n            .union(\n\n                out('CREATED').hasLabel('Memory'),\n                out('MADE').hasLabel('Decision').not(has('type', 'Communication')),\n                out('MADE').out('RESULTED_IN').hasLabel('Artifact').has('type', neq('Conversation')),\n\n                out('PARTICIPATED_IN').hasLabel('Artifact').has('type', 'Conversation').as('conv')\n                .project('node', 'nodeType', 'nodeCategory', 'nodeDate', 'nodeImportance')\n                .by(\n                    select('conv').elementMap()\n                    .map(unfold()\n                        .group()\n                        .by(keys)\n                        .by(values)\n                    )\n\n                    .map(addLocal('entry_count',\n                        coalesce(\n                            select('conv').out('HAS_ENTRY').count(),\n                            constant(0)\n                        )\n                    ))\n                    .map(addLocal('total_token_usage',\n                        coalesce(\n                            select('conv').values('total_token_usage'),\n                            constant(0)\n                        )\n                    ))\n                )\n                .by(constant('Conversation'))\n                .by(constant('Artifact'))\n                .by(select('conv').values('created_date'))\n                .by(coalesce(select('conv').values('importance'), constant(0.0))),\n\n                select('ai')\n                .out('CREATED').hasLabel('Memory')\n                .out('MADE').hasLabel('Decision')\n                .has('type', 'Communication')\n                .as('outcomm')\n                .project('node', 'nodeType', 'nodeCategory', 'nodeDate', 'nodeImportance')\n                .by(\n                    select('outcomm').elementMap()\n                    .map(unfold()\n                        .group()\n                        .by(keys)\n                        .by(values)\n                    )\n                    .map(addLocal('sender_id', select('ai').values('agent_id')))\n                    .map(addLocal('recipient_id',\n                        coalesce(\n                            select('outcomm').values('target_agents').split(',').limit(1),\n                            constant(null)\n                        )\n                    ))\n                )\n                .by(constant('Communication (Outgoing)'))\n                .by(constant('Outgoing'))\n                .by(select('outcomm').values('created_date'))\n                .by(coalesce(select('outcomm').values('importance'), constant(0.0))),\n\n                V().hasLabel('AgentInstance')\n                .where(values('agent_id').is(neq(agentId)))\n                .as('sender')\n                .out('CREATED').hasLabel('Memory')\n                .out('MADE').hasLabel('Decision')\n                .has('type', 'Communication')\n                .as('incomm')\n                .where(\n                    or(\n                        values('communication_type').is('Team'),\n                        values('target_agents').contains(agentId)\n                    )\n                )\n                .project('node', 'nodeType', 'nodeCategory', 'nodeDate', 'nodeImportance')\n                .by(\n                    select('incomm').elementMap()\n                    .map(unfold()\n                        .group()\n                        .by(keys)\n                        .by(values)\n                    )\n                    .map(addLocal('sender_id', select('sender').values('agent_id')))\n                    .map(addLocal('recipient_id', constant(agentId)))\n                )\n                .by(constant('Communication (Incoming)'))\n                .by(constant('Incoming'))\n                .by(select('incomm').values('created_date'))\n                .by(coalesce(select('incomm').values('importance'), constant(0.0)))\n            )\n\n            .order().by('nodeDate', decr)\n            .limit(recordLimit)\n        "},FETCH_DECISIONS_BY_TYPE:{neo4j:"\n            MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n            MATCH (ai)-[:MADE]->(d:Decision)\n            WHERE ($olderThanDate IS NULL OR d.created_date < datetime($olderThanDate))\n            WITH d\n            ORDER BY d.created_date DESC\n            LIMIT toInteger($recordLimit)\n            RETURN d as node, 'Decision' as type, 'Decision' as category\n        ",cosmosdb:"\n            g.V().has('AgentInstance', 'agent_id', agentId)\n            .out('MADE').hasLabel('Decision')\n            .where(or(constant(olderThanDate).is(null), has('created_date', lt(olderThanDate))))\n            .order().by('created_date', decr)\n            .limit(recordLimit)\n            .project('node', 'type', 'category')\n            .by(elementMap())\n            .by(constant('Decision'))\n            .by(constant('Decision'))\n        "},FETCH_ARTIFACTS_BY_TYPE:{neo4j:"\n            MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n            MATCH (ai)-[:MADE]->(:Decision)-[:RESULTED_IN]->(a:Artifact)\n            WHERE a.type <> 'Conversation' AND ($olderThanDate IS NULL OR a.created_date < datetime($olderThanDate))\n            WITH a\n            ORDER BY a.created_date DESC\n            LIMIT toInteger($recordLimit)\n            RETURN a as node, 'Artifact' as type, 'Artifact' as category\n        ",cosmosdb:"\n            g.V().has('AgentInstance', 'agent_id', agentId)\n            .out('MADE').out('RESULTED_IN').hasLabel('Artifact')\n            .has('type', neq('Conversation'))\n            .where(or(constant(olderThanDate).is(null), has('created_date', lt(olderThanDate))))\n            .order().by('created_date', decr)\n            .limit(recordLimit)\n            .project('node', 'type', 'category')\n            .by(elementMap())\n            .by(constant('Artifact'))\n            .by(constant('Artifact'))\n        "},FETCH_CONVERSATIONS_BY_TYPE:{neo4j:"\n            MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n            MATCH (ai)-[:PARTICIPATED_IN]-(c:Artifact)\n            WHERE c.type = 'Conversation' AND ($olderThanDate IS NULL OR c.created_date < datetime($olderThanDate))\n            WITH c\n            ORDER BY c.created_date DESC\n            LIMIT 6\n            RETURN c AS node, 'Conversation' AS type, 'Artifact' AS category\n        ",cosmosdb:"\n            g.V().has('AgentInstance', 'agent_id', agentId)\n            .out('PARTICIPATED_IN').hasLabel('Artifact')\n            .has('type', 'Conversation')\n            .where(or(constant(olderThanDate).is(null), has('created_date', lt(olderThanDate))))\n            .as('conv')\n\n            .project('node', 'type', 'category')\n            .by(\n                select('conv').elementMap()\n                .map(unfold()\n                    .group()\n                    .by(keys)\n                    .by(values)\n                )\n\n                .map(addLocal('total_token_usage',\n                    coalesce(\n                        select('conv').values('total_token_usage'),\n                        select('conv').out('HAS_ENTRY').sum('total_token_usage'),\n                        constant(0)\n                    )\n                ))\n                .map(addLocal('response_time',\n                    coalesce(\n                        select('conv').values('response_time'),\n                        select('conv').out('HAS_ENTRY').mean('response_time'),\n                        constant(0)\n                    )\n                ))\n                .map(addLocal('max_response_time',\n                    coalesce(\n                        select('conv').values('max_response_time'),\n                        select('conv').out('HAS_ENTRY').max('response_time'),\n                        constant(0)\n                    )\n                ))\n                .map(addLocal('model_provider',\n                    coalesce(\n                        select('conv').values('model_provider'),\n                        select('conv').out('HAS_ENTRY').values('model_provider').dedup().limit(1),\n                        constant('')\n                    )\n                ))\n                .map(addLocal('model_name',\n                    coalesce(\n                        select('conv').values('model_name'),\n                        select('conv').out('HAS_ENTRY').values('model_name').dedup().limit(1),\n                        constant('')\n                    )\n                ))\n                .map(addLocal('token_usage',\n                    coalesce(\n                        select('conv').values('token_usage'),\n                        select('conv').out('HAS_ENTRY').mean('token_usage'),\n                        constant(0)\n                    )\n                ))\n                .map(addLocal('entry_count',\n                    select('conv').out('HAS_ENTRY').count()\n                ))\n            )\n            .by(constant('Conversation'))\n            .by(constant('Artifact'))\n            .order().by(select('node').select('created_date'), decr)\n            .limit(recordLimit)\n        "},FETCH_TIMELINE_FOR_INITIAL_LOAD:{neo4j:"\n            CALL {\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:CREATED]->(m:Memory)\n                RETURN m AS node, m.type AS nodeType, 'Memory' AS category,\n                       m.created_date AS createdDate, COALESCE(m.importance, 0.0) AS importance\n                ORDER BY m.created_date DESC\n                LIMIT 6\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:MADE]->(d:Decision)\n                WHERE d.type IS NULL OR d.type <> 'Communication'\n                RETURN d AS node, COALESCE(d.type, 'Decision') AS nodeType, 'Decision' AS category,\n                       d.created_date AS createdDate, COALESCE(d.importance, 0.0) AS importance\n                ORDER BY d.created_date DESC\n                LIMIT 6\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:MADE]->(:Decision)-[:RESULTED_IN]->(a:Artifact)\n                WHERE a.type <> 'Conversation'\n                RETURN a AS node, 'Artifact' AS nodeType, 'Artifact' AS category,\n                       a.created_date AS createdDate, COALESCE(a.importance, 0.0) AS importance\n                ORDER BY a.created_date DESC\n                LIMIT 6\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:PARTICIPATED_IN]-(c:Artifact)\n                WHERE c.type = 'Conversation'\n                RETURN c AS node, 'Conversation' AS nodeType, 'Artifact' AS category,\n                       c.created_date AS createdDate, COALESCE(c.importance, 0.0) AS importance\n                ORDER BY c.created_date DESC\n                LIMIT 6\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:CREATED]->(:Memory)-[:MADE]->(d:Decision {type: 'Communication'})\n                WITH ai, d,\n                     CASE \n                       WHEN d.target_agents IS NOT NULL AND d.target_agents <> '' \n                         THEN split(d.target_agents, ',')[0]\n                       ELSE null\n                     END AS firstTarget\n\n                OPTIONAL MATCH (recipientAgent:AgentInstance)-[:MEMBER_OF]->(t2:Team {team_id: $teamId})\n                WHERE recipientAgent.agent_id <> $agentId\n                OPTIONAL MATCH (recipientAgent)-[:CREATED]->(:Memory)-[:MADE]->(prevDecision:Decision {trigger_reason: 'Agent Communication Response'})\n                WHERE firstTarget IS NULL\n                  AND d.trigger_context IS NOT NULL AND prevDecision.content IS NOT NULL\n                  AND prevDecision.created_date <= d.created_date\n                  AND prevDecision.created_date >= d.created_date - duration({hours: 48})\n                  AND d.trigger_context CONTAINS prevDecision.content\n\n                WITH ai, d, firstTarget,\n                     CASE \n                       WHEN recipientAgent IS NOT NULL THEN recipientAgent.agent_id\n                       ELSE firstTarget\n                     END AS resolvedRecipient\n\n                RETURN d {.*,\n                          sender_id: ai.agent_id,\n                          recipient_id: resolvedRecipient\n                       } AS node, \n                       'Communication (Outgoing)' AS nodeType, 'Outgoing' AS category,\n                       d.created_date AS createdDate, COALESCE(d.importance, 0.0) AS importance\n                ORDER BY d.created_date DESC\n                LIMIT 6\n\n                UNION\n\n                MATCH (sender:AgentInstance)-[:MEMBER_OF]->(senderTeam:Team {team_id: $teamId})\n                MATCH (sender)-[:CREATED]->(:Memory)-[:MADE]->(d:Decision {type: 'Communication'})\n                WHERE sender.agent_id <> $agentId\n                  AND (\n                    d.communication_type = 'Team'\n                    OR \n                    (d.target_agents IS NOT NULL AND d.target_agents CONTAINS $agentId)\n                  )\n                RETURN d {.*, sender_id: sender.agent_id, recipient_id: $agentId} AS node, \n                       'Communication (Incoming)' AS nodeType, 'Incoming' AS category,\n                       d.created_date AS createdDate, COALESCE(d.importance, 0.0) AS importance\n                ORDER BY d.created_date DESC\n                LIMIT 6\n            }\n            WITH node, nodeType, category, createdDate, importance\n            ORDER BY createdDate DESC\n            LIMIT 20\n\n            RETURN node, nodeType, category, createdDate, importance\n        ",cosmosdb:"\n\n            g.V().has('AgentInstance', 'agent_id', agentId).as('ai')\n            .union(\n\n                out('CREATED').hasLabel('Memory'),\n\n                out('MADE').hasLabel('Decision')\n                    .not(has('type', 'Communication')),\n\n                out('MADE').out('RESULTED_IN').hasLabel('Artifact')\n                    .has('type', neq('Conversation')),\n\n                out('PARTICIPATED_IN').hasLabel('Artifact')\n                    .has('type', 'Conversation')\n                    .as('conv')\n                    .project('node', 'nodeType', 'category', 'createdDate', 'importance')\n                    .by(\n                        select('conv').elementMap()\n                        .map(unfold()\n                            .group()\n                            .by(keys)\n                            .by(values)\n                        )\n\n                        .map(addLocal('total_token_usage',\n                            coalesce(\n                                select('conv').values('total_token_usage'),\n                                select('conv').out('HAS_ENTRY').sum('total_token_usage'),\n                                constant(0)\n                            )\n                        ))\n                        .map(addLocal('response_time',\n                            coalesce(\n                                select('conv').values('response_time'),\n                                select('conv').out('HAS_ENTRY').mean('response_time'),\n                                constant(0)\n                            )\n                        ))\n                        .map(addLocal('max_response_time',\n                            coalesce(\n                                select('conv').values('max_response_time'),\n                                select('conv').out('HAS_ENTRY').max('response_time'),\n                                constant(0)\n                            )\n                        ))\n                        .map(addLocal('model_provider',\n                            coalesce(\n                                select('conv').values('model_provider'),\n                                select('conv').out('HAS_ENTRY').values('model_provider').dedup().limit(1),\n                                constant('')\n                            )\n                        ))\n                        .map(addLocal('model_name',\n                            coalesce(\n                                select('conv').values('model_name'),\n                                select('conv').out('HAS_ENTRY').values('model_name').dedup().limit(1),\n                                constant('')\n                            )\n                        ))\n                        .map(addLocal('token_usage',\n                            coalesce(\n                                select('conv').values('token_usage'),\n                                select('conv').out('HAS_ENTRY').mean('token_usage'),\n                                constant(0)\n                            )\n                        ))\n                        .map(addLocal('entry_count',\n                            select('conv').out('HAS_ENTRY').count()\n                        ))\n                    )\n                    .by(constant('Conversation'))\n                    .by(constant('Artifact'))\n                    .by(select('conv').values('created_date'))\n                    .by(coalesce(select('conv').values('importance'), constant(0.0))),\n\n                select('ai')\n                .out('CREATED').hasLabel('Memory')\n                .out('MADE').hasLabel('Decision')\n                .has('type', 'Communication')\n                .as('outcomm')\n                .project('node', 'nodeType', 'category', 'createdDate', 'importance')\n                .by(\n                    select('outcomm').elementMap()\n                    .map(unfold()\n                        .group()\n                        .by(keys)\n                        .by(values)\n                    )\n                    .map(addLocal('sender_id', select('ai').values('agent_id')))\n\n                    .map(addLocal('recipient_id',\n                        coalesce(\n                            select('outcomm').values('target_agents').split(',').limit(1),\n                            constant(null)\n                        )\n                    ))\n                )\n                .by(constant('Communication (Outgoing)'))\n                .by(constant('Outgoing'))\n                .by(select('outcomm').values('created_date'))\n                .by(coalesce(select('outcomm').values('importance'), constant(0.0))),\n\n                V().hasLabel('AgentInstance')\n                .where(values('agent_id').is(neq(agentId)))\n                .as('sender')\n                .out('CREATED').hasLabel('Memory')\n                .out('MADE').hasLabel('Decision')\n                .has('type', 'Communication')\n                .as('incomm')\n                .where(\n                    or(\n                        values('communication_type').is('Team'),\n                        values('target_agents').contains(agentId)\n                    )\n                )\n                .project('node', 'nodeType', 'category', 'createdDate', 'importance')\n                .by(\n                    select('incomm').elementMap()\n                    .map(unfold()\n                        .group()\n                        .by(keys)\n                        .by(values)\n                    )\n                    .map(addLocal('sender_id', select('sender').values('agent_id')))\n                    .map(addLocal('recipient_id', constant(agentId)))\n                )\n                .by(constant('Communication (Incoming)'))\n                .by(constant('Incoming'))\n                .by(select('incomm').values('created_date'))\n                .by(coalesce(select('incomm').values('importance'), constant(0.0)))\n            )\n\n            .order().by('createdDate', decr)\n            .limit(recordLimit)\n        "},FETCH_TIMELINE_MEMORIES_WITH_PAGINATION:{neo4j:"\n            CALL {\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:CREATED]->(m:Memory)\n                WHERE ($olderThanDate IS NULL OR m.created_date < datetime($olderThanDate))\n                RETURN m AS node, m.type AS nodeType, 'Memory' AS category,\n                       m.created_date AS createdDate, COALESCE(m.importance, 0.0) AS importance\n                ORDER BY m.created_date DESC\n                LIMIT toInteger($recordLimit)\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:MADE]->(d:Decision)\n                WHERE ($olderThanDate IS NULL OR d.created_date < datetime($olderThanDate))\n                  AND (d.type IS NULL OR d.type <> 'Communication')\n                RETURN d AS node, COALESCE(d.type, 'Decision') AS nodeType, 'Decision' AS category,\n                       d.created_date AS createdDate, COALESCE(d.importance, 0.0) AS importance\n                ORDER BY d.created_date DESC\n                LIMIT toInteger($recordLimit)\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:MADE]->(:Decision)-[:RESULTED_IN]->(a:Artifact)\n                WHERE a.type <> 'Conversation' AND ($olderThanDate IS NULL OR a.created_date < datetime($olderThanDate))\n                RETURN a AS node, 'Artifact' AS nodeType, 'Artifact' AS category,\n                       a.created_date AS createdDate, COALESCE(a.importance, 0.0) AS importance\n                ORDER BY a.created_date DESC\n                LIMIT toInteger($recordLimit)\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:PARTICIPATED_IN]-(c:Artifact)\n                WHERE c.type = 'Conversation' AND ($olderThanDate IS NULL OR c.created_date < datetime($olderThanDate))\n                WITH c\n                ORDER BY c.created_date DESC\n                LIMIT toInteger($recordLimit)\n                RETURN c AS node, 'Conversation' AS nodeType, 'Artifact' AS category,\n                       c.created_date AS createdDate, COALESCE(c.importance, 0.0) AS importance\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:CREATED]->(:Memory)-[:MADE]->(d:Decision {type: 'Communication'})\n                WHERE ($olderThanDate IS NULL OR d.created_date < datetime($olderThanDate))\n                WITH ai, d,\n                     CASE \n                       WHEN d.target_agents IS NOT NULL AND d.target_agents <> '' \n                         THEN split(d.target_agents, ',')[0]\n                       ELSE null\n                     END AS firstTarget\n\n                OPTIONAL MATCH (recipientAgent:AgentInstance)-[:MEMBER_OF]->(t2:Team {team_id: $teamId})\n                WHERE recipientAgent.agent_id <> $agentId\n                OPTIONAL MATCH (recipientAgent)-[:CREATED]->(:Memory)-[:MADE]->(prevDecision:Decision {trigger_reason: 'Agent Communication Response'})\n                WHERE firstTarget IS NULL\n                  AND d.trigger_context IS NOT NULL AND prevDecision.content IS NOT NULL\n                  AND ($olderThanDate IS NULL OR prevDecision.created_date < datetime($olderThanDate))\n                  AND prevDecision.created_date <= d.created_date\n                  AND prevDecision.created_date >= d.created_date - duration({hours: 48})\n                  AND d.trigger_context CONTAINS prevDecision.content\n\n                WITH ai, d, firstTarget,\n                     CASE \n                       WHEN recipientAgent IS NOT NULL THEN recipientAgent.agent_id\n                       ELSE firstTarget\n                     END AS resolvedRecipient\n\n                RETURN d {.*,\n                          sender_id: ai.agent_id,\n                          recipient_id: resolvedRecipient\n                       } AS node, \n                       'Communication (Outgoing)' AS nodeType, 'Outgoing' AS category,\n                       d.created_date AS createdDate, COALESCE(d.importance, 0.0) AS importance\n                ORDER BY d.created_date DESC\n                LIMIT toInteger($recordLimit)\n\n                UNION\n\n                MATCH (sender:AgentInstance)-[:MEMBER_OF]->(senderTeam:Team)\n                MATCH (sender)-[:CREATED]->(:Memory)-[:MADE]->(d:Decision {type: 'Communication'})\n                WHERE sender.agent_id <> $agentId\n                  AND ($olderThanDate IS NULL OR d.created_date < datetime($olderThanDate))\n                  AND (\n                    (d.communication_type = 'Team' AND senderTeam.team_id = $teamId)\n                    OR \n                    (d.target_agents IS NOT NULL AND d.target_agents CONTAINS $agentId)\n                  )\n                RETURN d {.*, sender_id: sender.agent_id, recipient_id: $agentId} AS node, 'Communication (Incoming)' AS nodeType, 'Incoming' AS category,\n                       d.created_date AS createdDate, COALESCE(d.importance, 0.0) AS importance\n                ORDER BY d.created_date DESC\n                LIMIT toInteger($recordLimit)\n\n                UNION\n\n                MATCH (ai:AgentInstance {agent_id: $agentId})-[:MEMBER_OF]->(t:Team {team_id: $teamId})\n                MATCH (ai)-[:CREATED]->(:Memory)-[:MADE]->(originalMsg:Decision {type: 'Communication'})\n                WHERE ($olderThanDate IS NULL OR originalMsg.created_date < datetime($olderThanDate))\n                WITH originalMsg.content AS originalContent, originalMsg.created_date AS originalCreated, ai\n\n                MATCH (responder:AgentInstance)\n                MATCH (responder)-[:CREATED]->(:Memory)-[:MADE]->(response:Decision {type: 'Communication', trigger_reason: 'Agent Communication Response'})\n                WHERE responder.agent_id <> $agentId\n                  AND ($olderThanDate IS NULL OR response.created_date < datetime($olderThanDate))\n                  AND response.created_date >= originalCreated\n                  AND response.created_date <= originalCreated + duration({hours: 48})\n                  AND response.trigger_context IS NOT NULL\n                  AND originalContent IS NOT NULL\n                  AND response.trigger_context CONTAINS originalContent\n                RETURN response {.*, sender_id: responder.agent_id} AS node, 'Communication (Incoming)' AS nodeType, 'Incoming' AS category,\n                       response.created_date AS createdDate, COALESCE(response.importance, 0.0) AS importance\n                ORDER BY response.created_date DESC\n                LIMIT toInteger($recordLimit)\n            }\n            WITH node, nodeType, category, createdDate, importance\n            ORDER BY createdDate DESC\n            LIMIT toInteger($recordLimit)\n\n            RETURN node, nodeType, category, createdDate, importance\n        ",cosmosdb:"\n\n            g.V().has('AgentInstance', 'agent_id', agentId).as('ai')\n            .union(\n\n                out('CREATED').hasLabel('Memory')\n                    .where(or(constant(olderThanDate).is(null), has('created_date', lt(olderThanDate)))),\n\n                out('MADE').hasLabel('Decision')\n                    .not(has('type', 'Communication'))\n                    .where(or(constant(olderThanDate).is(null), has('created_date', lt(olderThanDate)))),\n\n                out('MADE').out('RESULTED_IN').hasLabel('Artifact')\n                    .has('type', neq('Conversation'))\n                    .where(or(constant(olderThanDate).is(null), has('created_date', lt(olderThanDate)))),\n\n                out('PARTICIPATED_IN').hasLabel('Artifact')\n                    .has('type', 'Conversation')\n                    .where(or(constant(olderThanDate).is(null), has('created_date', lt(olderThanDate))))\n                    .as('conv')\n                    .project('node', 'nodeType', 'category', 'createdDate', 'importance')\n                    .by(\n                        select('conv').elementMap()\n                        .map(unfold()\n                            .group()\n                            .by(keys)\n                            .by(values)\n                        )\n\n                        .map(addLocal('total_token_usage',\n                            coalesce(\n                                select('conv').values('total_token_usage'),\n                                select('conv').out('HAS_ENTRY').sum('total_token_usage'),\n                                constant(0)\n                            )\n                        ))\n                        .map(addLocal('response_time',\n                            coalesce(\n                                select('conv').values('response_time'),\n                                select('conv').out('HAS_ENTRY').mean('response_time'),\n                                constant(0)\n                            )\n                        ))\n                        .map(addLocal('max_response_time',\n                            coalesce(\n                                select('conv').values('max_response_time'),\n                                select('conv').out('HAS_ENTRY').max('response_time'),\n                                constant(0)\n                            )\n                        ))\n                        .map(addLocal('model_provider',\n                            coalesce(\n                                select('conv').values('model_provider'),\n                                select('conv').out('HAS_ENTRY').values('model_provider').dedup().limit(1),\n                                constant('')\n                            )\n                        ))\n                        .map(addLocal('model_name',\n                            coalesce(\n                                select('conv').values('model_name'),\n                                select('conv').out('HAS_ENTRY').values('model_name').dedup().limit(1),\n                                constant('')\n                            )\n                        ))\n                        .map(addLocal('token_usage',\n                            coalesce(\n                                select('conv').values('token_usage'),\n                                select('conv').out('HAS_ENTRY').mean('token_usage'),\n                                constant(0)\n                            )\n                        ))\n                        .map(addLocal('entry_count',\n                            select('conv').out('HAS_ENTRY').count()\n                        ))\n                    )\n                    .by(constant('Conversation'))\n                    .by(constant('Artifact'))\n                    .by(select('conv').values('created_date'))\n                    .by(coalesce(select('conv').values('importance'), constant(0.0))),\n\n                select('ai')\n                .out('CREATED').hasLabel('Memory')\n                .out('MADE').hasLabel('Decision')\n                .has('type', 'Communication')\n                .where(or(constant(olderThanDate).is(null), has('created_date', lt(olderThanDate))))\n                .as('outcomm')\n                .project('node', 'nodeType', 'category', 'createdDate', 'importance')\n                .by(\n                    select('outcomm').elementMap()\n                    .map(unfold()\n                        .group()\n                        .by(keys)\n                        .by(values)\n                    )\n                    .map(addLocal('sender_id', select('ai').values('agent_id')))\n                    .map(addLocal('recipient_id',\n                        coalesce(\n                            select('outcomm').values('target_agents').split(',').limit(1),\n                            constant(null)\n                        )\n                    ))\n                )\n                .by(constant('Communication (Outgoing)'))\n                .by(constant('Outgoing'))\n                .by(select('outcomm').values('created_date'))\n                .by(coalesce(select('outcomm').values('importance'), constant(0.0))),\n\n                V().hasLabel('AgentInstance')\n                .where(values('agent_id').is(neq(agentId)))\n                .as('sender')\n                .out('CREATED').hasLabel('Memory')\n                .out('MADE').hasLabel('Decision')\n                .has('type', 'Communication')\n                .where(or(constant(olderThanDate).is(null), has('created_date', lt(olderThanDate))))\n                .as('incomm')\n                .where(\n                    or(\n                        values('communication_type').is('Team'),\n                        values('target_agents').contains(agentId)\n                    )\n                )\n                .project('node', 'nodeType', 'category', 'createdDate', 'importance')\n                .by(\n                    select('incomm').elementMap()\n                    .map(unfold()\n                        .group()\n                        .by(keys)\n                        .by(values)\n                    )\n                    .map(addLocal('sender_id', select('sender').values('agent_id')))\n                    .map(addLocal('recipient_id', constant(agentId)))\n                )\n                .by(constant('Communication (Incoming)'))\n                .by(constant('Incoming'))\n                .by(select('incomm').values('created_date'))\n                .by(coalesce(select('incomm').values('importance'), constant(0.0))),\n\n                select('ai')\n                .out('CREATED').hasLabel('Memory')\n                .out('MADE').hasLabel('Decision')\n                .has('type', 'Communication')\n                .as('origMsg')\n                .V().hasLabel('AgentInstance')\n                .where(values('agent_id').is(neq(agentId)))\n                .as('responder')\n                .out('CREATED').hasLabel('Memory')\n                .out('MADE').hasLabel('Decision')\n                .has('type', 'Communication')\n                .has('trigger_reason', 'Agent Communication Response')\n                .where(\n                    and(\n                        values('trigger_context').contains(select('origMsg').values('content')),\n                        or(constant(olderThanDate).is(null), has('created_date', lt(olderThanDate)))\n                    )\n                )\n                .as('response')\n                .project('node', 'nodeType', 'category', 'createdDate', 'importance')\n                .by(\n                    select('response').elementMap()\n                    .map(unfold()\n                        .group()\n                        .by(keys)\n                        .by(values)\n                    )\n                    .map(addLocal('sender_id', select('responder').values('agent_id')))\n                    .map(addLocal('recipient_id', select('ai').values('agent_id')))\n                )\n                .by(constant('Communication (Incoming)'))\n                .by(constant('Incoming'))\n                .by(select('response').values('created_date'))\n                .by(coalesce(select('response').values('importance'), constant(0.0)))\n            )\n\n            .order().by('createdDate', decr)\n            .limit(recordLimit)\n        "}},w=(n(6893),n(3469));function S(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(E(e)+" is not iterable")}function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function _(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return T(l,"_invoke",function(n,r,i){var o,s,c,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,c=e,f.n=n,a}};function h(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,o=u[t],h=f.p,p=o[2];n>3?(i=p===r)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,c=p;(t=s<2?e:c)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,c)):f.n=c:f.v=c);try{if(l=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){o=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,o),!0),l}var a={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(T(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,T(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,T(d,"constructor",l),T(l,"constructor",c),c.displayName="GeneratorFunction",T(l,i,"GeneratorFunction"),T(d),T(d,i,"Generator"),T(d,r,function(){return this}),T(d,"toString",function(){return"[object Generator]"}),(_=function(){return{w:o,m:f}})()}function T(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}T=function(e,t,n,r){function o(t,n){T(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},T(e,t,n,r)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=x(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function D(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return C(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function R(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){O(o,r,i,a,s,"next",e)}function s(e){O(o,r,i,a,s,"throw",e)}a(void 0)})}}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){L(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function L(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M,P,j,z={SHOW_SIMULATION_CONTROLS:!1,DEBUG:!1,TEAM_ID:"",LANGUAGE:"en-US",NEO4J_CONFIG:{uri:"",username:"",password:"",neo4j_serverauth:""},COSMOSDB_CONFIG:{endpoint:"",key:"",db:"",graph:"",partitionkeyproperty:"",partitionkeyvalue:""},DATABASETYPE:"neo4j-https",MQTT_CONFIG:{hostname:"",port:1883,protocol:"",username:"",password:""},CURRENT_USER:"",THEME:"light",CACHE:{TTL:3e4,MEMORY_TTL:3e5},PAGINATION:{TIMELINE_BATCH_SIZE:20,ACTIVITIES_BATCH_SIZE:10}},U=["Observation","Reflection","Memory","Planning","Plan","Decision","Artifact","Conversation","Communication","Consensus"],B=!1,F=!0,H=null,$={},q=new Set,W=!1,G=new Map,V=new Map,Y=new Map,Q=new Map,X=new Map,J=new Map,K=!1,Z=(Date.now(),new Map),ee=new Set,te=[],ne=new Map,re=new Map,ie=new Map,oe=new Map;function ae(e,t){try{var n=JSON.parse(t.toString());if(!n.agent_id||!n.sender_id||!n.team_id)return;if(n.team_id!==z.TEAM_ID)return;utils.debugLog("Agent communication received:",n);var r=k(k({},n),{},{timestamp:Date.now(),id:utils.generateUUID()});if(te.push(r),n.decision_id){var i=Z.get(n.decision_id);i?(i.messages.push(r),i.lastActivity=r.timestamp):Z.set(n.decision_id,{decisionId:n.decision_id,participants:new Set([n.sender_id,n.agent_id]),messages:[r],startTime:r.timestamp,lastActivity:r.timestamp}),ee.add(n.decision_id)}ne.has(n.sender_id)||ne.set(n.sender_id,new Set),ne.get(n.sender_id).add(n.agent_id),ne.has(n.agent_id)||ne.set(n.agent_id,new Set),ne.get(n.agent_id).add(n.sender_id),function(e){utils.debugLog("Communication visual update:",{from:e.sender_id,to:e.agent_id,decision:e.decision_id,timestamp:new Date(e.timestamp).toLocaleTimeString()});var t=document.querySelector('.agent-card[data-agent-id="'.concat(e.sender_id,'"]')),n=document.querySelector('.agent-card[data-agent-id="'.concat(e.agent_id,'"]'));t&&n&&(function(e,t,n){var r,i,o=(null===(r=e.querySelector(".agent-title"))||void 0===r?void 0:r.textContent)||n.sender_id,a=(null===(i=t.querySelector(".agent-title"))||void 0===i?void 0:i.textContent)||n.agent_id,s="".concat(e.dataset.agentId,"-outgoing"),c="".concat(t.dataset.agentId,"-incoming");re.delete(s),re.delete(c),e.classList.add("communicating"),t.classList.add("communicating");var l=se(e,"outgoing",a),u=se(t,"incoming",o);if(ce(e,"outgoing"),ce(t,"incoming"),null!==H||document.querySelector(".agent-card.expanded"))return;var d,f,h,p,m=e.getBoundingClientRect(),g=t.getBoundingClientRect(),y=l.getBoundingClientRect(),v=u.getBoundingClientRect(),b=document.querySelector(".message-section").getBoundingClientRect();if(re.has(s)){var w=re.get(s);d=w.x,f=w.y}else d=y.left+y.width/2,f=y.top+y.height/2,re.set(s,{x:d,y:f});if(re.has(c)){var S=re.get(c);h=S.x,p=S.y}else h=v.left+v.width/2,p=v.top+v.height/2,re.set(c,{x:h,y:p});var E=b.bottom+10,_=Math.min(m.top,g.top)-10,T=(d+h)/2,A=Math.abs(h-d),I=_-E,D=Math.max(60,Math.min(.7*I,.4*A)),x=Math.min(f,p)-D,C=n.sender_id,O=function(e){for(var t=0,n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}var r=["#009fde","#00a698","#E8C268","#79a681","#9370DB","#CB715E","#FF6B9D","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD"];return r[Math.abs(t)%r.length]}(C),R=document.querySelector(".agent-communication-overlay");R||((R=document.createElement("div")).className="agent-communication-overlay",R.style.position="fixed",R.style.top="0",R.style.left="0",R.style.width="100%",R.style.height="100%",R.style.pointerEvents="none",R.style.zIndex="85",document.body.appendChild(R));var N=document.createElementNS("http://www.w3.org/2000/svg","svg");N.classList.add("communication-line-svg"),N.style.position="absolute",N.style.top="0",N.style.left="0",N.style.width="100%",N.style.height="100%",N.style.pointerEvents="none",N.style.zIndex="80";var k=document.createElementNS("http://www.w3.org/2000/svg","path"),L="M ".concat(d," ").concat(f," Q ").concat(T," ").concat(x," ").concat(h," ").concat(p);k.setAttribute("d",L),k.setAttribute("stroke",O),k.setAttribute("stroke-width","2"),k.setAttribute("fill","none"),k.setAttribute("opacity","0.7"),k.setAttribute("stroke-dasharray","4 8"),k.classList.add("communication-arc"),k.style.opacity="0",k.style.transition="opacity 0.5s ease-in",requestAnimationFrame(function(){k.style.opacity="0.7"}),N.appendChild(k),R.appendChild(N);var M=document.createElement("div");M.className="communication-particle",M.style.position="absolute",M.style.width="8px",M.style.height="8px",M.style.background=O,M.style.borderRadius="50%",M.style.pointerEvents="none",M.style.zIndex="79",function(e,t,n,r,i,o,a,s){var c=performance.now();function l(u){var d=u-c,f=Math.min(d/s,1),h=f,p=Math.pow(1-h,2)*t+2*(1-h)*h*r+Math.pow(h,2)*o,m=Math.pow(1-h,2)*n+2*(1-h)*h*i+Math.pow(h,2)*a;e.style.left="".concat(p-4,"px"),e.style.top="".concat(m-4,"px"),e.style.opacity=f<.1?10*f:f>.9?10*(1-f):1,f<1&&requestAnimationFrame(l)}requestAnimationFrame(l)}(M,d,f,T,x,h,p,3e3),R.appendChild(M),setTimeout(function(){N.parentNode&&N.remove(),M.parentNode&&M.remove()},5e3)}(t,n,e),function(e,t){ce(e,"outgoing"),ce(t,"incoming")}(t,n));!function(e){if(!e||0===e.length)return;e.forEach(function(e){var t=document.querySelector('.agent-card[data-agent-id="'.concat(e,'"]'));if(t){var n=$[e],r=t.querySelector('.view-button[data-view="communication"]');(r&&r.classList.contains("active")||"communication"===n)&&de(e)}})}([e.sender_id,e.agent_id])}(r),te.length>100&&te.splice(0,te.length-100)}catch(e){}}function se(e,t,n){var r="communication-status-".concat(t),i=e.querySelector(".".concat(r));i||((i=document.createElement("div")).className="communication-status ".concat(r),i.dataset.agents="",i.style.zIndex="100",e.appendChild(i));var o=i.dataset.agents?i.dataset.agents.split(",").filter(function(e){return e.trim()}):[];if(!o.includes(n)){o.push(n),i.dataset.agents=o.join(",");var a="outgoing"===t?"To":"From";1===o.length?i.textContent="".concat(a," ").concat(n):i.textContent="".concat(a," ").concat(o.length," ").concat(i18n.translate("agents"))}return i}function ce(e,t){var n="communication-status-".concat(t),r=e.querySelector(".".concat(n));r&&(r._cleanupTimeout&&clearTimeout(r._cleanupTimeout),r._cleanupTimeout=setTimeout(function(){r&&r.parentNode&&(r.remove(),0===e.querySelectorAll(".communication-status-outgoing, .communication-status-incoming").length&&e.classList.remove("communicating"))},5e3))}function le(){return ue.apply(this,arguments)}function ue(){return(ue=R(_().m(function e(){var t,n;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(P&&z.TEAM_ID){e.n=1;break}return e.a(2);case 1:if(P.isInitialized&&P.isConnected){e.n=2;break}return setTimeout(function(){le()},2e3),e.a(2);case 2:if((t=z.AGENT_IDS)&&0!==t.length){e.n=6;break}return e.p=3,e.n=4,Be();case 4:n=e.v,t=n.map(function(e){return e.agentId}),utils.debugLog("Retrieved agent IDs from database for communication subscription:",t),e.n=6;break;case 5:return e.p=5,e.v,e.a(2);case 6:t.forEach(function(e){var t="XMAGS/".concat(z.TEAM_ID,"/DATA/communication/").concat(e);try{P.subscribe(t,function(e,t){ae(0,t)})}catch(e){}}),window._agentCommunicationSubscribed=!0;case 7:return e.a(2)}},e,null,[[3,5]])}))).apply(this,arguments)}function de(e){return fe.apply(this,arguments)}function fe(){return fe=R(_().m(function e(t){var n,r,i,o,a,s,c;return _().w(function(e){for(;;)switch(e.n){case 0:if(n=document.querySelector('.agent-card[data-agent-id="'.concat(t,'"] .communication-view'))){e.n=1;break}return e.a(2);case 1:if(r=n.querySelector(".communication-history-container")){e.n=2;break}return e.a(2);case 2:if(i=te.filter(function(e){return e.sender_id===t||e.agent_id===t}),o=ne.get(t)||new Set,0!==i.length||0!==o.size){e.n=3;break}return r.innerHTML='<div class="no-communications" data-i18n="noCommunications">'.concat(i18n.translate("noCommunications")||"No communications yet","</div>"),e.a(2);case 3:a="",o.size>0&&(s=Array.from(o).map(function(e){var t,n=document.querySelector('.agent-card[data-agent-id="'.concat(e,'"]'));return(null==n||null===(t=n.querySelector(".agent-title"))||void 0===t?void 0:t.textContent)||e}),a+='\n            <div class="communication-summary">\n                <h4>Connected Agents ('.concat(o.size,')</h4>\n                <div class="connected-agents">\n                    ').concat(s.map(function(e){return'<span class="agent-tag">'.concat(e,"</span>")}).join(""),"\n                </div>\n            </div>\n        ")),i.length>0&&(c=i.sort(function(e,t){return t.timestamp-e.timestamp}).slice(0,20),a+='\n            <div class="communication-history">\n                <h4>Recent Communications ('.concat(i.length,')</h4>\n                <div class="communication-list">\n                    ').concat(c.map(function(e){var n,r,i=e.sender_id===t,o=i?e.agent_id:e.sender_id,a=document.querySelector('.agent-card[data-agent-id="'.concat(o,'"]')),s=(null==a||null===(n=a.querySelector(".agent-title"))||void 0===n?void 0:n.textContent)||o,c=i?"outgoing":"incoming",l=i?"":"",u=new Date(e.timestamp).toLocaleTimeString();return'\n                            <div class="communication-item '.concat(c,'">\n                                <div class="communication-header">\n                                    <span class="communication-direction">\n                                        ').concat(i?"To ".concat(s):"From ".concat(s)," ").concat(l,'\n                                    </span>\n                                    <span class="communication-time">').concat(u,'</span>\n                                </div>\n                                <div class="communication-details">\n                                    <span class="decision-id">Decision: ').concat((null===(r=e.decision_id)||void 0===r?void 0:r.substring(0,8))||"N/A","</span>\n                                    ").concat(e.message_type?'<span class="message-type">Type: '.concat(e.message_type,"</span>"):"","\n                                </div>\n                            </div>\n                        ")}).join(""),"\n                </div>\n            </div>\n        ")),r.innerHTML=a||'<div class="no-communications" data-i18n="noCommunications">No communications yet</div>',Me(r);case 4:return e.a(2)}},e)})),fe.apply(this,arguments)}function he(e,t){try{var n=JSON.parse(t.toString()),r=n.process_id,i=n.initiator_id,o=n.agent_id,a=n.team_id;if(!r||!o||!a)return;if(a!==z.TEAM_ID)return;if(utils.debugLog("Consensus draft plan received:",n),ie.has(r)){var s=ie.get(r);s.participants.add(o),s.primary_agent_id||(s.primary_agent_id=o,me(o),ye(o))}else ie.set(r,{process_id:r,primary_agent_id:o,initiator_id:i,participants:new Set([o]),messages:[],status:"draft-collection",created_at:Date.now()}),me(o),ye(o);oe.has(o)||oe.set(o,{activeProcesses:new Set,totalMessages:0}),oe.get(o).activeProcesses.add(r)}catch(e){}}function pe(e,t){try{var n=JSON.parse(t.toString()),r=n.process_id;n.timestamp;if(!r)return;utils.debugLog("Consensus progress received:",n);var i=ie.get(r);if(i||(i={process_id:r,primary_agent_id:null,initiator_id:null,participants:new Set,messages:[],status:n.stage||n.status||"unknown",created_at:Date.now(),last_activity:Date.now()},ie.set(r,i)),i.messages.push(k(k({},n),{},{received_at:Date.now()})),i.status=n.status||n.stage||i.status,i.last_activity=Date.now(),!i.primary_agent_id){var o=Array.from(document.querySelectorAll(".agent-card")).map(function(e){return e.dataset.agentId}).find(function(e){return document.querySelector('.agent-card[data-agent-id="'.concat(e,'"]'))});o&&(utils.debugLog("Setting primary agent for consensus process ".concat(r," to ").concat(o)),i.primary_agent_id=o,me(o),ye(o))}if(i.primary_agent_id?(utils.debugLog("Updating consensus tab for agent ".concat(i.primary_agent_id,", process ").concat(r)),function(e,t){var n=document.querySelector('.agent-card[data-agent-id="'.concat(e,'"]'));if(!n)return;n.querySelector(".consensus-view");var r=ie.get(t);if(!r)return;var i=n.querySelector('.view-button[data-view="consensus"]');i&&i.classList.contains("active")&&(utils.debugLog("Updating consensus view for agent ".concat(e,", process ").concat(t)),ge(e))}(i.primary_agent_id,r),ye(i.primary_agent_id)):utils.debugLog("No primary agent found for consensus process ".concat(r,", message stored but not displayed")),i.primary_agent_id)oe.has(i.primary_agent_id)||oe.set(i.primary_agent_id,{activeProcesses:new Set,totalMessages:0}),oe.get(i.primary_agent_id).totalMessages++}catch(e){}}function me(e){var t=document.querySelector('.agent-card[data-agent-id="'.concat(e,'"]'));if(t){var n=t.querySelector(".view-toggle");if(n&&!n.querySelector('.view-button[data-view="consensus"]')){var r=document.createElement("button");r.className="view-button",r.dataset.view="consensus",r.innerHTML='\n        <span data-i18n="consensus">Consensus</span>\n        <span class="consensus-pill" style="display: none;"></span>\n    ';var i=n.querySelector('.view-button[data-view="visualization"]');i?n.insertBefore(r,i):n.appendChild(r);var o=t.querySelector(".agent-content"),a=document.createElement("div");a.className="view-content consensus-view",a.dataset.view="consensus",a.innerHTML='\n        <div class="consensus-container">\n            <div class="consensus-header">\n                <div class="consensus-controls">\n                    <label class="sort-toggle">\n                        <input type="checkbox" id="consensus-sort-'.concat(e,'" onchange="toggleConsensusSort(\'').concat(e,'\')">\n                        <span data-i18n="newestFirst">Newest First</span>\n                    </label>\n                </div>\n            </div>\n            <div class="consensus-processes-container"></div>\n            <div class="consensus-disclaimer">\n                <i class="fas fa-info-circle"></i>\n                <span data-i18n="consensusDisclaimer">Note: Consensus data is only available during this session and will be lost when the page is refreshed.</span>\n            </div>\n        </div>\n    '),o.appendChild(a),mt(t,e),Me(a)}}}function ge(e){var t,n=document.querySelector('.agent-card[data-agent-id="'.concat(e,'"]')),r=null==n?void 0:n.querySelector(".consensus-view");if(r){var i=r.querySelector(".consensus-processes-container");if(i){var o=Array.from(ie.values()).filter(function(t){return t.primary_agent_id===e});if(0!==o.length){var a=r.querySelector("#consensus-sort-".concat(e)),s=null!==(t=null==a?void 0:a.checked)&&void 0!==t&&t,c=o.map(function(e){var t=D(e.messages).sort(function(e,t){var n=new Date(e.timestamp).getTime(),r=new Date(t.timestamp).getTime();return s?r-n:n-r});return'\n            <div class="consensus-process" data-process-id="'.concat(e.process_id,'">\n                <div class="consensus-process-header">\n                    <div class="process-info">\n                        <h4 data-i18n="consensusProcess">Consensus Process</h4>\n                        <span class="process-id">ID: ').concat(e.process_id.substring(0,8),'...</span>\n                    </div>\n                    <span class="consensus-status status-').concat(e.status.replace(/\s+/g,"-").toLowerCase(),'">\n                        ').concat(e.status,'\n                    </span>\n                </div>\n                \n                <div class="consensus-timeline">\n                    ').concat(t.map(function(e){return'\n                        <div class="consensus-message">\n                            <div class="message-timestamp">\n                                '.concat(i18n.culturalConfig.formatDateTime(new Date(e.timestamp),"medium"),'\n                            </div>\n                            <div class="message-content">').concat(e.message,"</div>\n                            ").concat(e.status?'<div class="message-status-badge">'.concat(e.status,"</div>"):"","\n                            ").concat(void 0!==e.current_round?'<div class="round-info">Round '.concat(e.current_round,"/").concat(e.max_rounds,"</div>"):"","\n                        </div>\n                    ")}).join(""),"\n                </div>\n            </div>\n        ")}).join("");i.innerHTML=c,Me(i)}else i.innerHTML='\n            <div class="no-consensus-processes">\n                <p data-i18n="noConsensusProcesses">No consensus processes found for this agent.</p>\n            </div>\n        '}}}function ye(e){var t=document.querySelector('.agent-card[data-agent-id="'.concat(e,'"]')),n=null==t?void 0:t.querySelector(".agent-header");if(n){!function(){var e,t=Date.now(),n=3e4,r=I(ie.entries());try{for(r.s();!(e=r.n()).done;){var i=A(e.value,2),o=i[0],a=i[1];if(t-(a.last_activity||a.created_at)>n&&(utils.debugLog("Cleaning up old consensus process: ".concat(o)),ie.delete(o),a.primary_agent_id&&oe.has(a.primary_agent_id))){var s=oe.get(a.primary_agent_id);s.activeProcesses.delete(o),0===s.activeProcesses.size&&oe.delete(a.primary_agent_id)}}}catch(e){r.e(e)}finally{r.f()}}();var r=n.querySelector(".consensus-indicator");r&&r.remove();var i=Array.from(ie.values()).filter(function(t){return t.primary_agent_id===e&&!["completed","failed","consensus reached"].includes(t.status)}).length;if(i>0){var o=document.createElement("div");o.className="consensus-indicator",o.innerHTML='\n            <i class="fas fa-users"></i>\n            <span data-i18n="consensusInProgress">Consensus in Progress</span>\n            <span class="consensus-count">'.concat(i,"</span>\n        "),n.querySelector(".agent-title").insertAdjacentElement("afterend",o),Me(o)}!function(e){var t=document.querySelector('.agent-card[data-agent-id="'.concat(e,'"]')),n=null==t?void 0:t.querySelector('.view-button[data-view="consensus"]'),r=null==n?void 0:n.querySelector(".consensus-pill");if(!r)return;var i=Array.from(ie.values()).filter(function(t){return t.primary_agent_id===e&&!["completed","failed","consensus reached"].includes(t.status)}).length;i>0?(r.textContent=i,r.style.display="inline-flex",r.className="consensus-pill consensus-active"):r.style.display="none"}(e)}}function ve(){return be.apply(this,arguments)}function be(){return(be=R(_().m(function e(){var t,n,r;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(P&&z.TEAM_ID){e.n=1;break}return e.a(2);case 1:if(P.isInitialized&&P.isConnected){e.n=2;break}return setTimeout(function(){ve()},2e3),e.a(2);case 2:if(e.p=2,t="XMAGS/".concat(z.TEAM_ID,"/EVT/consensus/progress/+"),P.subscribe(t,function(e,t){pe(0,t)}),(n=z.AGENT_IDS)&&0!==n.length){e.n=6;break}return e.p=3,e.n=4,Be();case 4:r=e.v,n=r.map(function(e){return e.agentId}),utils.debugLog("Retrieved agent IDs from database for consensus subscriptions:",n),e.n=6;break;case 5:return e.p=5,e.v,e.a(2);case 6:n.forEach(function(e){var t="XMAGS/".concat(z.TEAM_ID,"/DATA/consensus/draftplan/").concat(e);P.subscribe(t,function(e,t){he(0,t)})}),utils.debugLog(" Consensus MQTT subscriptions established"),e.n=8;break;case 7:e.p=7,e.v;case 8:return e.a(2)}},e,null,[[3,5],[2,7]])}))).apply(this,arguments)}function we(e){ge(e)}function Se(e){try{var t={DEBUG:e.debug||!1,CURRENT_USER:e.current_user||"",TEAM_ID:e.team_id||"",THEME:e.theme||"light",DATABASETYPE:e.dbtype||"neo4j",SHOW_SIMULATION_CONTROLS:e.show_simulation_controls||!1},n=e.locale;n&&(t.LANGUAGE=n),Object.assign(t,{NEO4J_CONFIG:{uri:e.neo4j_uri||"",username:e.neo4j_user||"",password:e.neo4j_password||"",neo4j_serverauth:e.neo4j_serverauth||""}}),Object.assign(t,{COSMOSDB_CONFIG:{endpoint:e.cosmosdb_endpoint||"",key:e.cosmosdb_key||"",db:e.cosmosdb_db||"",graph:e.cosmosdb_graph||"",partitionkeyproperty:e.cosmosdb_partitionkeyproperty||"",partitionkeyvalue:e.cosmosdb_partitionkeyvalue||""}}),Object.assign(t,{MQTT_CONFIG:{hostname:e.mqtt_host||"",port:parseInt(e.mqtt_port)||1883,protocol:e.mqtt_protocol||"ws://",username:e.mqtt_username||"",password:e.mqtt_password||""}});var r=[];e.agent_ids?("string"==typeof e.agent_ids?r=e.agent_ids.split(",").map(function(e){return e.trim()}).filter(function(e){return e}):Array.isArray(e.agent_ids)&&(r=e.agent_ids.filter(function(e){return e&&"string"==typeof e})),utils.debugLog("Loaded agent IDs from metablock properties:",r)):utils.debugLog("No agent_ids found in metablock properties, will get agents from database using team_id"),t.AGENT_IDS=r,Object.assign(z,t),utils.initialize(z),window.i18n&&!window.i18n.initialized&&z.LANGUAGE&&window.i18n.initialize(z.LANGUAGE)}catch(e){throw e}}function Ee(e,t){var n;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(n),n=setTimeout(function(){clearTimeout(n),e.apply(void 0,i)},t)}}function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)return t+"null";if(void 0!==e.id&&null!==e.id&&""!==e.id)try{return t+String(e.id)}catch(e){}return t+function(e){var t=0;if(0===e.length)return t.toString();for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return Math.abs(t).toString()}([e.type||("Decision"===e.category?"Decision":e.category||""),e.createdDate?new Date(e.createdDate).toISOString():"",e.sender_id||"",e.recipient_id||"",e.decision_id||"",e.title||"",(e.content||e.decision_text||e.response||"").substring(0,200)].join("|"))}function Te(){utils.debugLog("Theme in use is: ".concat(z.THEME)),document.documentElement.setAttribute("data-theme",z.THEME)}function Ae(e){return!!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])||(!e||!e.lastRefresh||Date.now()-e.lastRefresh>z.CACHE.TTL)}function Ie(){var e,t=document.querySelector(".send-button"),n=document.querySelector(".send-button-dropdown"),r=document.querySelector(".message-input"),i=F||!r.value.trim();(t&&(t.disabled=i),n&&(n.disabled=i),i)&&(null===(e=document.querySelector(".send-options-dropdown"))||void 0===e||e.classList.remove("show"))}function De(e){return xe.apply(this,arguments)}function xe(){return xe=R(_().m(function e(t){var n,r,i,o,a,s,c,l,u,d,f,h,p,m,g,y,v,b,w,S,E,T,A;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=document.querySelector(".message-input"),r=n.value.trim(),i=document.querySelector(".split-button-group .send-button"),o=document.querySelector(".split-button-group .send-button-dropdown"),a=document.querySelector(".send-options-dropdown .send-option"),s=document.querySelector(".recipient-select"),c=[i,o,a],d=null==(u=(l="observation"===t)?a:i)?void 0:u.querySelector("i"),f=null==u?void 0:u.querySelector(".spinner"),r){e.n=1;break}return(h=ControlRoomErrorHandler).showError.apply(h,D(ControlRoomErrorCodes.MESSAGE_EMPTY)),e.a(2);case 1:if(p=!0,e.p=2,P&&P.isInitialized){e.n=3;break}throw new Error("MQTT manager not initialized");case 3:if(c.forEach(function(e){e&&(e.disabled=!0,e.setAttribute("aria-disabled","true"),e.style.pointerEvents="none",e.style.opacity="0.7")}),s&&(s.disabled=!0,s.style.opacity="0.7"),d&&d.classList.add("hide"),f&&f.classList.remove("hide"),n.disabled=!0,n.style.opacity="0.7",(m=function(){p&&(c.forEach(function(e){e&&!e.disabled&&(e.disabled=!0,e.setAttribute("aria-disabled","true"),e.style.pointerEvents="none",e.style.opacity="0.7")}),setTimeout(m,100))})(),g=[],"entire-team"==s.value?g=Array.from(s.options).filter(function(e){return"entire-team"!==e.value}).map(function(e){return{id:e.value,name:e.textContent}}):(y=s.options[s.selectedIndex],g.push({id:y.value,name:y.textContent})),Ie(),v=[],!l){e.n=5;break}return b=g.map(function(){var e=R(_().m(function e(n){var i,o,a;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,i="XMAGS/".concat(z.TEAM_ID,"/DATA/observation/").concat(n.id),o={agent_id:n.id,content:r},e.n=1,P.publish(i,JSON.stringify(o));case 1:if(!window._agentCommunicationSubscribed)try{le(),window._agentCommunicationSubscribed=!0}catch(e){}return Oe(t,n.name),e.a(2,{success:!0,agent:n});case 2:return e.p=2,a=e.v,e.a(2,{success:!1,agent:n,error:a.message||"Unknown error"})}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),e.n=4,Promise.all(b);case 4:e.v.forEach(function(e){e.success||v.push("Failed to send observation to agent ".concat(e.agent.name,": ").concat(e.error))}),e.n=8;break;case 5:return w=g.map(function(e){var t=utils.generateUUID(),n=new Date;return{agent:e,conversationId:t,conversationTitle:"Conversation at ".concat(n.toLocaleString()),initialized:!1,error:null}}),S=w.map(function(e){return new Promise(function(){var t=R(_().m(function t(n){var r,i,o,a,s,c,l;return _().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,r="XMAGS/".concat(z.TEAM_ID,"/EVT/chat/progress/").concat(e.agent.id,"/").concat(e.conversationId),i="XMAGS/".concat(z.TEAM_ID,"/EVT/error/").concat(e.agent.id),o=new Promise(function(t,n){var o=setTimeout(function(){try{P.unsubscribe(r),P.unsubscribe(i)}catch(e){}n(new Error("Conversation initialization timeout"))},3e4);P.subscribe(r,function(n,a){try{var s=JSON.parse(a.toString());s.conversation_id===e.conversationId&&s.status&&"initialized"===s.status.toLowerCase()&&(clearTimeout(o),P.unsubscribe(r),P.unsubscribe(i),t())}catch(e){}}),P.subscribe(i,function(t,a){try{var s=JSON.parse(a.toString());s.conversation_id===e.conversationId&&(clearTimeout(o),P.unsubscribe(r),P.unsubscribe(i),n(new Error(s.message||"Error initializing conversation")))}catch(e){}})}),a="XMAGS/".concat(z.TEAM_ID,"/CMD/chat/new/").concat(e.agent.id),s={agent_id:e.agent.id,conversation_id:e.conversationId,content:e.conversationTitle,author:z.CURRENT_USER,language:z.LANGUAGE},t.n=1,P.publish(a,JSON.stringify(s));case 1:return t.n=2,o;case 2:e.initialized=!0,n(e),t.n=4;break;case 3:t.p=3,l=t.v,(c=l.message||"Unknown error").includes("timeout")?e.error="Conversation initialization timed out for ".concat(e.agent.name):e.error=c,n(e);case 4:return t.a(2)}},t,null,[[0,3]])}));return function(e){return t.apply(this,arguments)}}())}),e.n=6,Promise.all(S);case 6:return E=w.map(function(){var e=R(_().m(function e(t){var n,i,o;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!t.initialized){e.n=5;break}return e.p=1,n="XMAGS/".concat(z.TEAM_ID,"/DATA/chat/").concat(t.agent.id,"/").concat(t.conversationId),i={agent_id:t.agent.id,conversation_id:t.conversationId,content:r},e.n=2,P.publish(n,JSON.stringify(i));case 2:Oe("message",t.agent.name),e.n=4;break;case 3:e.p=3,o=e.v,t.error="Message send failed: ".concat(o.message||"Unknown error");case 4:e.n=6;break;case 5:t.error&&v.push("Failed to initialize conversation for agent ".concat(t.agent.name,": ").concat(t.error));case 6:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}()),e.n=7,Promise.all(E);case 7:w.forEach(function(e){e.error&&!v.includes("Failed to initialize conversation for agent ".concat(e.agent.name,": ").concat(e.error))&&(e.error.includes("timeout")?v.push("".concat(e.error)):v.push("Error with agent ".concat(e.agent.name,": ").concat(e.error)))});case 8:v.length>0&&ControlRoomErrorHandler.showDirectMessage(v.join("; "),"error"),setTimeout(function(){return Tt(!0)},1e3),e.n=10;break;case 9:e.p=9,e.v,(T=ControlRoomErrorHandler).showError.apply(T,D(ControlRoomErrorCodes.SEND_FAILED));case 10:return e.p=10,p=!1,c.forEach(function(e){e&&(e.disabled=!1,e.removeAttribute("aria-disabled"),e.style.pointerEvents="",e.style.opacity="")}),s&&(s.disabled=!1,s.style.opacity=""),d&&d.classList.remove("hide"),f&&f.classList.add("hide"),n.disabled=!1,n.style.opacity="",n.value="",Ie(),l&&(A=document.querySelector(".send-options-dropdown"))&&A.classList.remove("show"),e.f(10);case 11:return e.a(2)}},e,null,[[2,9,10,11]])})),xe.apply(this,arguments)}function Ce(){var e=document.getElementById("toast-container");if(e)return e;var t=document.createElement("div");return t.id="toast-container",document.body.appendChild(t),t}function Oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;utils.debugLog("displaying toast");var i=Ce(),o=document.createElement("div");o.className="toast ".concat(n);var a="".concat("observation"===e?"Observation":"Message"," sent to ").concat(t);o.textContent=a,o.style.opacity="1",o.style.transform="translateX(0)",i.appendChild(o),setTimeout(function(){o.style.opacity="0",o.style.transform="translateX(100%)",o.style.transition="opacity 0.3s ease, transform 0.3s ease",setTimeout(function(){return o.remove()},300)},r)}function Re(e){var t,n=document.querySelector('.agent-card[data-agent-id="'.concat(e,'"]')),r=(null==n||null===(t=n.querySelector(".agent-title"))||void 0===t?void 0:t.textContent)||e;return{card:n,name:r}}function Ne(e){if(!V.has(e)){var t={};U.forEach(function(e){t[e]=0}),V.set(e,{timeline:0,activities:t})}}function ke(e){if(Y.has(e)){var t=Y.get(e),n=Q.get(e);U.forEach(function(e){t.activities[e]||(t.activities[e]=[]),n&&!n.activities.hasOwnProperty(e)&&(n.activities[e]=!1)})}else{var r={},i={};U.forEach(function(e){r[e]=[],i[e]=!1}),Y.set(e,{timeline:[],activities:r,lastRefresh:Date.now()}),Q.set(e,{timeline:!1,activities:i})}}function Le(){var e=document.querySelector(".send-button-dropdown"),t=document.querySelector(".send-options-dropdown"),n=document.querySelector(".send-button"),r=document.querySelector(".send-option"),i=document.querySelector(".message-input");Ie(),i.addEventListener("input",Ie),e.addEventListener("click",function(e){e.stopPropagation(),t.classList.toggle("show")}),document.addEventListener("click",function(){t.classList.remove("show")}),n.addEventListener("click",function(){De("message")}),r.addEventListener("click",function(){De("observation"),t.classList.remove("show")}),i.addEventListener("keypress",function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),De("message"))}),window.i18n&&i18n.on("localeChanged",function(){if(i){var t=i18n.translate("typeMessage");i.placeholder=t,i.setAttribute("aria-label",t)}if(n.querySelector(".fa-paper-plane")){var o=i18n.translate("sendMessage");n.title=o,n.setAttribute("aria-label",o)}if(e.querySelector(".fa-chevron-down")){var a=i18n.translate("moreOptions");e.title=a,e.setAttribute("aria-label",a)}if(r.querySelector(".fa-eye")){var s=i18n.translate("sendObservation");r.title=s,r.setAttribute("aria-label",s)}Me(document)});var o=function(){var e=R(_().m(function e(){return _().w(function(e){for(;;)switch(e.n){case 0:if(!M){e.n=1;break}return e.n=1,M.close();case 1:if(!P){e.n=2;break}return e.n=2,P.cleanup();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();window.addEventListener("pagehide",o),window.addEventListener("beforeunload",o),window.addEventListener("unload",o)}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.querySelectorAll("[data-i18n]").forEach(function(e){var t=e.getAttribute("data-i18n");t&&(e.textContent=i18n.translate(t))}),e.querySelectorAll(".date").forEach(function(e){var t=e.textContent.trim();if(t)try{var n=new Date(t);isNaN(n)||(e.textContent=i18n.culturalConfig.formatDateTime(n,"medium"))}catch(e){}}),e.querySelectorAll(".date[data-time]").forEach(function(e){var t=Number(e.getAttribute("data-time"));if(!isNaN(t))try{var n=new Date(t);isNaN(n)||(e.textContent=i18n.culturalConfig.formatDateTime(n,"medium"))}catch(e){}}),e.querySelectorAll(".date[data-relative-date]").forEach(function(e){var t=e.getAttribute("data-relative-date");if(t){var n=new Date(t);e.textContent="today"==t||"yesterday"==t?i18n.translate(t):i18n.culturalConfig.formatDate(n,"medium")}}),e.querySelectorAll(".last-updated").forEach(function(e){var t=e.getAttribute("data-date");if(t)try{var n=new Date(t);if(!isNaN(n)){var r=i18n.culturalConfig.formatDateTime(n,"medium");e.innerHTML='<i class="fa-solid fa-arrows-rotate spinning"></i>'.concat(r)}}catch(e){}})}function Pe(e,t){var n={direction:"unknown",text:""},r=e.type||e.category||"",i="Communication (Outgoing)"===r||"Outgoing"===e.category,o="Communication (Incoming)"===r||"Incoming"===e.category,a=e.recipient_id||e.agent_id||(e.target_agents?e.target_agents.split(",")[0].trim():null),s=e.sender_id;i?n.direction="outgoing":o?n.direction="incoming":t&&(s&&s===t?n.direction="outgoing":(a&&a===t||e.agent_id&&e.agent_id===t)&&(n.direction="incoming"));var c="Team"===e.communication_type||"broadcast"===e.message_type;if("outgoing"===n.direction)if(c)n.text=" To Everyone";else if(a){var l=Re(a).name;n.text=" To ".concat(l)}else n.text=" Outgoing";else if("incoming"===n.direction)if(s){var u=Re(s).name;n.text=" From ".concat(u)}else n.text=" Incoming";else c&&(n.text=" Team Broadcast");return n}function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return i18n.translate("noContent")||"No data available";var n="",r="",i=e.type||("Decision"===e.category?"Decision":"Unknown");switch("Communication"===i&&e.category&&("Incoming"===e.category?i="Communication (Incoming)":"Outgoing"===e.category&&(i="Communication (Outgoing)")),i){case"Observation":case"Reflection":case"Memory":n=e.content?marked.parse(e.content):e.response?marked.parse(e.response):i18n.translate("noContent"),e.prompt&&(r+='\n                    <div class="collapsible-section">\n                        <button class="collapsible-toggle" onclick="toggleCollapsibleSection(event)">\n                            <i class="fas fa-chevron-right"></i>\n                            <span class="node-field-label">'.concat(i18n.translate("prompt")||"Prompt",'</span>\n                        </button>\n                        <div class="collapsible-content">\n                            <div class="code-block">').concat(marked.parse(e.prompt),"</div>\n                        </div>\n                    </div>\n                "));break;case"Planning":case"Decision":n=e.goal||e.reasoning?'\n                    <span class="node-field-label">'.concat(i18n.translate("goal"),":</span><p />").concat(e.goal?marked.parse(e.goal):"N/A",'\n                    <span class="node-field-label">').concat(i18n.translate("reasoning"),":</span><p />").concat(e.reasoning?marked.parse(e.reasoning):"N/A","\n                "):e.content?marked.parse(e.content):e.decision_text?marked.parse(e.decision_text):i18n.translate("noContent");[{key:"goals_prompt",label:"Goals Prompt",translationKey:"goalsPrompt"},{key:"goals_response",label:"Goals Response",translationKey:"goalsResponse"},{key:"trigger_reason",label:"Trigger Reason",translationKey:"triggerReason"},{key:"trigger_context",label:"Trigger Context",translationKey:"triggerContext"},{key:"trigger_response",label:"Trigger Response",translationKey:"triggerResponse"}].forEach(function(t){e[t.key]&&(r+='\n                        <div class="collapsible-section">\n                            <button class="collapsible-toggle" onclick="toggleCollapsibleSection(event)">\n                                <i class="fas fa-chevron-right"></i>\n                                <span class="node-field-label">'.concat(i18n.translate(t.translationKey)||t.label,'</span>\n                            </button>\n                            <div class="collapsible-content">\n                                <div class="code-block">').concat(marked.parse(e[t.key]),"</div>\n                            </div>\n                        </div>\n                    "))});break;case"Conversation":var o=e.title?e.title:"Conversation",a=e.author?e.author:"Unknown";n='\n                    <p><span class="node-field-label">Title:</span> '.concat(o,'</p>\n                    <p><span class="node-field-label">Author:</span> ').concat(a,"</p>\n                "),e.conversation_content&&e.conversation_content.length>0?(n+='<div class="conversation-messages">',e.conversation_content.forEach(function(e){if(e.query){var t=e.timestamp?i18n.culturalConfig.formatDateTime(1e3*e.timestamp,"medium"):"";n+='\n                                <div class="conversation-message user-message">\n                                    <div class="conversation-message-header">\n                                        <span class="conversation-sender">User</span>\n                                        '.concat(t?'<span class="conversation-time">'.concat(t,"</span>"):"",'\n                                    </div>\n                                    <div class="conversation-content markdown-content">').concat(marked.parse(e.query),"</div>\n                                </div>\n                            ")}if(e.response){var r=e.timestamp?i18n.culturalConfig.formatDateTime(1e3*e.timestamp,"medium"):"";n+='\n                                <div class="conversation-message assistant-message">\n                                    <div class="conversation-message-header">\n                                        <span class="conversation-sender">Assistant</span>\n                                        '.concat(r?'<span class="conversation-time">'.concat(r,"</span>"):"",'\n                                    </div>\n                                    <div class="conversation-content markdown-content">').concat(marked.parse(e.response),"</div>\n                                </div>\n                            ")}}),n+="</div>"):e.id&&(n+='\n                        <div class="conversation-loading" data-conversation-id="'.concat(e.id,'">\n                            <div class="spinner"></div>\n                        </div>\n                        <div class="conversation-messages" style="display:none;"></div>\n                    '));break;case"Plan":case"Artifact":e.pddl_domain&&(n+='<span class="node-field-label">'.concat(i18n.translate("pddlDomain")||"PDDL Domain",":</span><p /><pre>").concat(e.pddl_domain,"</pre>")),e.pddl_problem&&(n+='<span class="node-field-label">'.concat(i18n.translate("pddlProblem")||"PDDL Problem",":</span><p /><pre>").concat(e.pddl_problem,"</pre>")),e.pddl_plan&&(n+='<span class="node-field-label">'.concat(i18n.translate("pddlPlan")||"PDDL Plan",":</span><p /><pre>").concat(e.pddl_plan,"</pre>")),n||(n=e.content?marked.parse(e.content):e.artifact_content?"<pre>".concat(e.artifact_content,"</pre>"):i18n.translate("noContent"));[{key:"goal",label:"Goal"},{key:"prompt",label:"Prompt"},{key:"response",label:"Response"}].forEach(function(t){e[t.key]&&(r+='\n                        <div class="collapsible-section">\n                            <button class="collapsible-toggle" onclick="toggleCollapsibleSection(event)">\n                                <i class="fas fa-chevron-right"></i>\n                                <span class="node-field-label">'.concat(i18n.translate(t.key)||t.label,'</span>\n                            </button>\n                            <div class="collapsible-content">\n                                <div class="code-block">').concat(marked.parse(e[t.key]),"</div>\n                            </div>\n                        </div>\n                    "))});break;case"Communication":case"Communication (Outgoing)":case"Communication (Incoming)":if("Communication (Outgoing)"===i)n="";else if("Communication (Incoming)"===i)n="";else if(e.sender_id||e.agent_id||e.recipient_id){var s=Pe(e,t);n=s.text?'\n                            <div class="communication-direction '.concat(s.direction,'">\n                                <span class="direction-text">').concat(s.text,"</span>\n                            </div>\n                        "):'\n                            <p><span class="node-field-label">From:</span> '.concat(e.sender_id||"",'</p>\n                            <p><span class="node-field-label">To:</span> ').concat(e.recipient_id||e.agent_id||"","</p>\n                        ")}if(e.decision_id&&(n+='<p><span class="node-field-label">Decision ID:</span> '.concat(e.decision_id,"</p>")),(e.message_type||e.communication_type)&&(n+='<p><span class="node-field-label">Message Type:</span> '.concat(e.message_type||e.communication_type,"</p>")),"Communication (Incoming)"===i&&e.sender_id){var c,l=document.querySelector('.agent-card[data-agent-id="'.concat(e.sender_id,'"]')),u=(null==l||null===(c=l.querySelector(".agent-title"))||void 0===c?void 0:c.textContent)||e.sender_id;n+='<p><span class="node-field-label">From:</span> '.concat(u,"</p>")}else if("Communication (Outgoing)"===i)if("Team"===e.communication_type)n+='<p><span class="node-field-label">To:</span> Everyone</p>';else if(e.recipient_id||e.agent_id||e.target_agents){var d=e.recipient_id||e.agent_id||(e.target_agents?e.target_agents.split(",")[0].trim():null);if(d){var f,h=document.querySelector('.agent-card[data-agent-id="'.concat(d,'"]')),p=(null==h||null===(f=h.querySelector(".agent-title"))||void 0===f?void 0:f.textContent)||d;n+='<p><span class="node-field-label">To:</span> '.concat(p,"</p>")}}e.content?n+='<div class="communication-content">'.concat(marked.parse(e.content),"</div>"):e.message?n+='<div class="communication-content">'.concat(marked.parse(e.message),"</div>"):n=i18n.translate("noCommunicationData")||"No communication data available";break;case"Consensus":n=e.result_description?'\n                    <span class="node-field-label">'.concat(i18n.translate("consensusResult")||"Consensus Result",":</span><p />\n                    ").concat(marked.parse(e.result_description),"\n                "):e.content?marked.parse(e.content):"No consensus result available",(e.protocol||e.status||e.topic||e.selected_method||void 0!==e.ci_rounds_completed)&&(n+='<div class="consensus-summary">',e.protocol&&(n+="<p><strong>Protocol:</strong> ".concat(e.protocol,"</p>")),e.status&&(n+="<p><strong>Status:</strong> ".concat(e.status,"</p>")),e.topic&&(n+="<p><strong>Topic:</strong> ".concat(e.topic,"</p>")),e.selected_method&&(n+="<p><strong>Method:</strong> ".concat(e.selected_method,"</p>")),void 0!==e.ci_rounds_completed&&(n+="<p><strong>Rounds:</strong> ".concat(e.ci_rounds_completed,"</p>")),n+="</div>"),e.reasoning&&(r+='\n                    <div class="collapsible-section">\n                        <button class="collapsible-toggle" onclick="toggleCollapsibleSection(event)">\n                            <i class="fas fa-chevron-right"></i>\n                            <span class="node-field-label">'.concat(i18n.translate("reasoning")||"Reasoning",'</span>\n                        </button>\n                        <div class="collapsible-content">\n                            <div class="code-block">').concat(marked.parse(e.reasoning),"</div>\n                        </div>\n                    </div>\n                "));break;default:n=e.content?marked.parse(e.content):e.decision_text?marked.parse(e.decision_text):e.response?marked.parse(e.response):i18n.translate("unknownType")||"Unknown Type: "+i}return n+(r?'<div class="additional-fields">'.concat(r,"</div>"):"")}function ze(e,t){return e&&0!==e.length?e.map(function(e){var n=_e(e,"".concat(t,"_"));return q.has(n)?e.isNew=!1:(e.isNew=!0,q.add(n)),e.type||("Decision"===e.category?e.type="Decision":"Artifact"===e.category?e.type="Artifact":e.type="Memory"),e}):[]}function Ue(e){var t=new Map;return e.forEach(function(e){var n=_e(e);t.has(n)||t.set(n,e)}),Array.from(t.values())}function Be(){return Fe.apply(this,arguments)}function Fe(){return Fe=R(_().m(function e(){var t,n,r,i,o,a,s;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n={teamId:t=z.TEAM_ID},r=M.getQuery("FETCH_AGENTS"),utils.debugLog("[fetchAgents] Executing query with teamId: ".concat(t)),utils.debugLog("[fetchAgents] Query params:",n),utils.debugLog("[fetchAgents] Query string:",r),e.n=1,M.executeRead(r,n);case 1:return i=e.v,utils.debugLog("[fetchAgents] Raw database result:",i),utils.debugLog("[fetchAgents] Result type:",E(i)),utils.debugLog("[fetchAgents] Result is array:",Array.isArray(i)),utils.debugLog("[fetchAgents] Query returned ".concat((null==i?void 0:i.length)||0," agents")),i&&i.length>0?(utils.debugLog("[fetchAgents] First raw record:",i[0]),utils.debugLog("[fetchAgents] Agent details:",i.map(function(e){return{agentId:e.agentId,name:e.agentName,memoryCount:e.memoryCount,hasMemories:e.hasMemories,rawRecord:e}}))):(utils.debugLog("[fetchAgents] No agents found or empty result"),utils.debugLog("[fetchAgents] Team ID being searched:",t)),o=i.map(function(e){return{agentId:e.agentId,name:e.agentName||e.agentId,memoryCount:e.memoryCount||0,hasMemories:e.hasMemories||0}}),utils.debugLog("[fetchAgents] Processed agents:",o),utils.debugLog("[fetchAgents] Returning ".concat(o.length," agents")),e.a(2,o);case 2:return e.p=2,s=e.v,utils.debugLog("[fetchAgents] Error: ".concat(s.message)),utils.debugLog("[fetchAgents] Error stack:",s.stack),(a=ControlRoomErrorHandler).showError.apply(a,D(ControlRoomErrorCodes.AGENTS_ERROR)),e.a(2,[])}},e,null,[[0,2]])})),Fe.apply(this,arguments)}function He(e){return $e.apply(this,arguments)}function $e(){return($e=R(_().m(function e(t){var n,r,i,o,a,s,c,l,u,d,f,h,p,m,g;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=t.agentId,r=t.agentName,i=t.isExpanded,o=void 0!==i&&i,a=t.activeView,s=t.timelineMemories,c=void 0===s?null:s,Ne(n),ke(n),G.set(n,!1),(l=document.createElement("div")).className="agent-card",l.dataset.agentId=n,o&&(l.classList.add("expanded"),H=n),e.p=1,!c){e.n=2;break}u=c,e.n=4;break;case 2:return e.n=3,qe(n);case 3:d=e.v,(f=Y.get(n)).timeline=d,f.lastRefresh=Date.now(),Q.get(n).timeline=!0,V.get(n).timeline=d.length,u=ze(d,n);case 4:return h=u.filter(function(e){return e.isNew}).length,p=r||"Agent ".concat(n),m=1===h?"memoryTypesSingular":"memoryTypesPlural",g=i18n.translate("newMemoryTooltip").replace("{count}",h).replace("{memoryType}",i18n.translate(m)),l.innerHTML='\n            <div class="agent-header">\n                <div class="agent-title">'.concat(p,'</div>\n                <button class="expand-button" onclick="toggleCardExpansion(event, this)">\n                    <i class="fa-solid ').concat(o?"fa-down-left-and-up-right-to-center":"fa-up-right-and-down-left-from-center",'"></i>\n                </button>\n            </div>\n            <div class="agent-content">\n                <div class="view-toggle">\n                    <button class="view-button active" data-view="timeline">\n                        <span data-i18n="timeline">Timeline</span>\n                        ').concat(h>0?'<span class="memory-count hide" title="'.concat(g,'" aria-label="').concat(g,'">').concat(h,"</span>"):"",'\n                    </button>\n                    <button class="view-button" data-i18n="recentActivities" data-view="activities">Recent Activities</button>\n                    ').concat(n===H?'<button class="view-button" data-i18n="visualization" data-view="visualization">Visualization</button>':"",'\n                </div>\n                \n                <div class="view-content timeline-view active" data-view="timeline">\n                    <div class="timeline-entries-container">\n                        ').concat(Ge(u,n),'\n                    </div>\n                </div>\n                \n                <div class="view-content activities-view" data-view="activities">\n                    <div class="loading-container activities-loading">\n                        <div class="spinner"></div>\n                    </div>\n                </div>\n                \n                <div class="view-content visualization-view" data-view="visualization">\n                    <div id="visualization-container-').concat(n,'" class="visualization-container"></div>\n                    <button id="load-more-').concat(n,'" class="load-more-button" style="display: none;">\n                        <span data-i18n="loadMore">Load More</span>\n                        <div class="spinner" style="display: none;"></div>\n                    </button>\n                </div>\n            </div>\n        '),mt(l,n),Me(l),e.a(2,l);case 5:return e.p=5,e.v,l.innerHTML='<div class="error" data-i18n="loadingError">Error loading content</div>',e.a(2,l)}},e,null,[[1,5]])}))).apply(this,arguments)}function qe(e){return We.apply(this,arguments)}function We(){return(We=R(_().m(function e(t){var n,r,i,o,a;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n={agentId:t,teamId:z.TEAM_ID,recordLimit:z.PAGINATION.TIMELINE_BATCH_SIZE},r=b.FETCH_TIMELINE_FOR_INITIAL_LOAD.neo4j,e.n=1,M.executeRead(r,n);case 1:return i=e.v,e.a(2,i.map(function(e){var t=e.node,n=(null==t?void 0:t.properties)||t||{};return k({type:n.type||e.nodeType,category:e.category,createdDate:e.createdDate,importance:e.importance||0},n)}));case 2:throw e.p=2,a=e.v,(o=ControlRoomErrorHandler).showError.apply(o,D(ControlRoomErrorCodes.TIMELINE_LOAD_ERROR)),a;case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function Ge(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.forEach(function(e){e.createdDate instanceof Date?e.createdDateObj=e.createdDate:e.createdDateObj=new Date(e.createdDate)}),e.sort(function(e,t){return t.createdDateObj-e.createdDateObj});var i={},o=new Date;o.setHours(0,0,0,0);var a=new Date(o);a.setDate(a.getDate()-1),((null===(n=document.querySelector('.agent-card[data-agent-id="'.concat(t,'"] .timeline-entries-container')))||void 0===n?void 0:n.querySelectorAll(".timeline-date-group"))||[]).forEach(function(e){var t=e.querySelector(".timeline-date-header").getAttribute("data-relative-date");t&&(i[t]=[])}),e.forEach(function(e){var t=new Date(e.createdDate);t.setHours(0,0,0,0);var n=t.toISOString();i[n]||(i[n]=[]),i[n].push(e)});var s=Object.entries(i).sort(function(e,t){var n=A(e,1)[0],r=A(t,1)[0];return new Date(r)-new Date(n)}).map(function(e){var n,i,s=A(e,2),c=s[0],l=s[1],u=new Date(c);u.getTime()===o.getTime()?(n="today",i=i18n.translate("today")):u.getTime()===a.getTime()?(n="yesterday",i=i18n.translate("yesterday")):(n=c,i=i18n.culturalConfig.formatDate(u,"medium"));var d=l.sort(function(e,t){return new Date(t.createdDate)-new Date(e.createdDate)}).map(function(e){var n=dt(e),i=e.type||("Decision"===e.category?"Decision":"Artifact"===e.category?"Artifact":"Unknown"),o=r&&e.isNew?"new-memory":"",a=void 0!==e.importance&&null!==e.importance&&"Memory"===e.category,s=void 0!==e.surprise&&null!==e.surprise&&"Memory"===e.category;return'\n                        <div class="timeline-entry '.concat(o,'" \n                            data-type="').concat(i,'" \n                            data-created-date="').concat(e.createdDate,'"\n                            data-timestamp="').concat(new Date(e.createdDate).getTime(),'"\n                            data-category="').concat(e.category||"",'">\n                            <div class="timeline-content">\n                                <div class="timeline-header" onclick="toggleTimelineEntry(this.closest(\'.timeline-entry\'))">\n                                    <div class="timeline-header-title">\n                                        <div class="timeline-header-row">\n                                            <span class="timeline-type" data-i18n="').concat(i.toLowerCase(),'">').concat(i18n.translate(i.toLowerCase())||i,'</span>\n                                            <i class="fas fa-chevron-down timeline-toggle-icon"></i>\n                                        </div>\n                                        <span class="date timeline-date" data-time="').concat(e.createdDate,'">\n                                            ').concat(i18n.culturalConfig.formatTime(new Date(e.createdDate),"medium"),'\n                                        </span>\n                                    </div>\n                                    <div>\n                                        <div class="timeline-category" data-i18n="').concat(e.category.toLowerCase(),'">').concat(i18n.translate(e.category.toLowerCase()),'</div>\n                                        <div class="memory-metrics">\n                                            ').concat(a?'<span class="importance" title="Importance" data-i18n-title="importance"><i class="fas fa-star"></i>'.concat(e.importance.toFixed(1),"</span>"):"","\n                                            ").concat(s?'<span class="surprise" title="Surprise" data-i18n-title="surprise"><i class="fas fa-bolt"></i>'.concat(e.surprise.toFixed(1),"</span>"):"",'\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="timeline-content-body">\n                                    ').concat(je(e,t),"\n                                </div>\n                                ").concat(n?'\n                                <div class="action-buttons">\n                                    <button class="action-button stats-icon" tabindex="-1" aria-label="'.concat(i18n.translate("statistics")||"Statistics",'" title="').concat(i18n.translate("statistics")||"Statistics",'" onclick="toggleNodeStats(event, this)">\n                                        <i class="fas fa-chart-simple" aria-hidden="true"></i>\n                                        <div class="stats-tooltip" style="display: none;">\n                                            ').concat(ht(e),"\n                                        </div>\n                                    </button>\n                                </div>"):"","\n                            </div>\n                        </div>\n                    ")}).join("");return'\n                <div class="timeline-date-group">\n                    <div class="date timeline-date-header" data-relative-date="'.concat(n,'">').concat(i,"</div>\n                    ").concat(d,"\n                </div>\n            ")}).join("");return s+='\n        <div class="timeline-loading" style="display: none">\n            <div data-i18n="loadingMoreMemories">Loading more memories...</div>\n            <div class="spinner"></div>\n        </div>\n    '}function Ve(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=R(_().m(function e(t){var n,r,i,o,a;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=z.PAGINATION.ACTIVITIES_BATCH_SIZE,r={agentId:t,teamId:z.TEAM_ID,recordLimit:n},i=M.getQuery("FETCH_ALL_ACTIVITY_TYPES"),e.n=1,M.executeRead(i,r);case 1:return o=e.v,a={},U.forEach(function(e){a[e]=[]}),o.forEach(function(e){var t=e.node,n=t.properties||t,r=n.type||e.nodeType,i=r;"Communication (Outgoing)"!==r&&"Communication (Incoming)"!==r||(i="Communication");var o=k({type:r,category:e.nodeCategory,createdDate:e.nodeDate,importance:e.nodeImportance||0},n);a[i]?a[i].push(o):utils.debugLog("[DEBUG] Unknown nodeType: ".concat(r," (mapped to ").concat(i,") - not in activityResults"))}),utils.debugLog("[DEBUG] Final activityResults:",Object.keys(a).map(function(e){return"".concat(e,": ").concat(a[e].length)}).join(", ")),Object.keys(a).forEach(function(e){a[e].sort(function(e,t){return new Date(t.createdDate)-new Date(e.createdDate)});var t=[],r=new Set;a[e].forEach(function(e){var n,i;r.has(null===(n=e.createdDate)||void 0===n?void 0:n.toString())||(r.add(null===(i=e.createdDate)||void 0===i?void 0:i.toString()),t.push(e))}),a[e]=t.slice(0,n)}),e.a(2,{activityMemories:a});case 2:throw e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function Qe(e,t){return Xe.apply(this,arguments)}function Xe(){return Xe=R(_().m(function e(t,n){var r,i,o,a,s,c,l,u,d,f=arguments;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:z.PAGINATION.ACTIVITIES_BATCH_SIZE,i=f.length>3&&void 0!==f[3]?f[3]:null,e.p=1,o={agentId:t,type:n,recordLimit:r},i&&(o.olderThanDate=new Date(i).toISOString()),a="Decision"===n?"FETCH_DECISIONS_BY_TYPE":"Artifact"===n?"FETCH_ARTIFACTS_BY_TYPE":"Conversation"===n?"FETCH_CONVERSATIONS_BY_TYPE":"FETCH_MEMORIES_BY_TYPE",s=M.getQuery(a),e.n=2,M.executeRead(s,o);case 2:return c=e.v,l=c.map(function(e){var t=e.node,n=t.properties||t;return k({type:e.type,category:e.category,createdDate:n.created_date,importance:n.importance||0},n)}),u=[],d=new Set,l.forEach(function(e){var t,n;d.has(null===(t=e.createdDate)||void 0===t?void 0:t.toString())||(d.add(null===(n=e.createdDate)||void 0===n?void 0:n.toString()),u.push(e))}),e.a(2,u);case 3:throw e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])})),Xe.apply(this,arguments)}function Je(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=R(_().m(function e(t){var n,r,i,o,a,s,c,l,u;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=document.querySelector('.agent-card[data-agent-id="'.concat(t,'"] .activities-view'))){e.n=1;break}return e.a(2);case 1:if((r=n.querySelector(".activities-loading"))&&(r.style.display="flex"),e.p=2,i=Y.get(t),o={},a=!1,(!i||Object.values(i.activities).every(function(e){return 0===e.length})||Date.now()-i.lastRefresh>3e4)&&(a=!0),!a){e.n=4;break}return e.n=3,Ve(t);case 3:s=e.v,c=s.activityMemories,Object.entries(c).forEach(function(e){var n=A(e,2),r=n[0],o=n[1];i.activities[r]=o,V.get(t).activities[r]=o.length,Q.get(t).activities[r]=!0}),i.lastRefresh=Date.now(),o=c,e.n=5;break;case 4:o=i.activities,Object.entries(o).forEach(function(e){var n=A(e,2),r=n[0];n[1].length>0&&(Q.get(t).activities[r]=!0)});case 5:l=Ze(o,t),n.innerHTML=l,Me(n),e.n=7;break;case 6:e.p=6,e.v,(u=ControlRoomErrorHandler).showError.apply(u,D(ControlRoomErrorCodes.ACTIVITIES_LOAD_ERROR)),n.innerHTML='<div class="error" data-i18n="activitiesLoadingError">Failed to load activities</div>';case 7:return e.a(2)}},e,null,[[2,6]])}))).apply(this,arguments)}function Ze(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object.entries(e).filter(function(e){var t=A(e,2),n=(t[0],t[1]);return n&&n.length>0}).map(function(e){var r=A(e,2),i=r[0],o=D(r[1]).sort(function(e,t){return new Date(t.createdDate)-new Date(e.createdDate)}),a=o.length,s=o.length>0?new Date(o[0].createdDate):new Date;V.has(t)||Ne(t),V.get(t).activities[i]=o.length;var c=i;"Artifact"===i&&(c="Plan");var l=1===a?"memoryTypesSingular":"memoryTypesPlural",u=i18n.translate("memoryCountTooltip").replace("{count}",a).replace("{memoryType}","".concat(i18n.translate(i.toLowerCase())," ").concat(i18n.translate(l)));return'\n                <div class="memory-group" data-type="'.concat(i,'">\n                    <div class="memory-group-header-wrapper" data-type="').concat(i,'" onclick="toggleMemoryGroup(this)">\n                        <div class="memory-group-header">\n                            <div class="memory-group-title">\n                                <span data-i18n="').concat(c.toLowerCase(),'">').concat(i18n.translate(c.toLowerCase())||c,'</span>\n                                <span class="memory-count hide" title="').concat(u,'" aria-label="').concat(u,'">').concat(a,'</span>\n                            </div>\n                            <i class="fa-solid fa-chevron-down"></i>\n                        </div>\n                        <div class="date latest-date" data-time="').concat(s,'">\n                            ').concat(i18n.culturalConfig.formatDateTime(s,"medium"),'\n                        </div>\n                    </div>\n                    <div class="memory-list">\n                        ').concat(o.map(function(e){var r=n&&e.isNew?"new-memory":"",o=dt(e),a=void 0!==e.importance&&null!==e.importance&&"Memory"===e.category,s=void 0!==e.surprise&&null!==e.surprise&&"Memory"===e.category,c="";"Communication"!==i&&"Communication (Outgoing)"!==i&&"Communication (Incoming)"!==i||(c=Pe(e,t).text||"");return'\n                                <div class="memory-item '.concat(r,'" \n                                     data-created-date="').concat(e.createdDate,'">\n                                    <div class="memory-header" onclick="toggleMemoryDetails(this.closest(\'.memory-item\'))">\n                                        <div class="memory-header-content">\n                                            <div class="date" data-time="').concat(e.createdDate,'">\n                                                ').concat(i18n.culturalConfig.formatDateTime(new Date(e.createdDate),"medium"),"\n                                            </div>\n                                            ").concat(c?'<div class="communication-info">'.concat(c,"</div>"):"",'\n                                            <i class="fas fa-chevron-down memory-toggle-icon"></i>\n                                        </div>\n                                        <div class="memory-metrics">\n                                            ').concat(a?'<span class="importance" title="Importance" data-i18n-title="importance"><i class="fas fa-star"></i>'.concat(e.importance.toFixed(1),"</span>"):"","\n                                            ").concat(s?'<span class="surprise" title="Surprise" data-i18n-title="surprise"><i class="fas fa-bolt"></i>'.concat(e.surprise.toFixed(1),"</span>"):"",'\n                                        </div>\n                                    </div>\n                                    <div class="memory-details">\n                                        ').concat(je(e,t),"\n                                        ").concat(o?'\n                                        <div class="action-buttons">\n                                            <button class="action-button stats-icon" aria-label="'.concat(i18n.translate("statistics")||"Statistics",'" title="').concat(i18n.translate("statistics")||"Statistics",'" onclick="toggleNodeStats(event, this)">\n                                                <i class="fas fa-chart-simple" aria-hidden="true"></i>\n                                                <div class="stats-tooltip" style="display: none;">\n                                                    ').concat(ht(e),"\n                                                </div>\n                                            </button>\n                                        </div>"):"","\n                                    </div>\n                                </div>\n                            ")}).join(""),"\n                        ").concat(function(e,t){return'\n        <button class="load-more-button" onclick="loadMoreMemories(\''.concat(e,"', '").concat(t,'\')">\n            <span data-i18n="loadMore">Load More</span>\n            <div class="spinner" style="display: none"></div>\n        </button>\n    ')}(t,i),"\n                    </div>\n                </div>\n            ")}).join("")}function et(e){return tt.apply(this,arguments)}function tt(){return(tt=R(_().m(function e(t){var n,r,i,o,a,s,c;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=Y.get(t),r=null!=n&&n.timeline&&n.timeline.length?new Date(n.timeline[n.timeline.length-1].createdDate):null,i={agentId:t,teamId:z.TEAM_ID,olderThanDate:r?r.toISOString():null,recordLimit:z.PAGINATION.TIMELINE_BATCH_SIZE||20},o=M.getQuery("FETCH_TIMELINE_MEMORIES_WITH_PAGINATION"),e.n=1,M.executeRead(o,i);case 1:if((a=e.v)&&0!==a.length){e.n=2;break}return e.a(2);case 2:s=a.map(function(e){var t=e.node,n=t.properties||t,r=k({type:e.nodeType,category:e.category,createdDate:e.createdDate,importance:e.importance||0},n);return t.sender_id&&!r.sender_id&&(r.sender_id=t.sender_id),t.recipient_id&&!r.recipient_id&&(r.recipient_id=t.recipient_id),r}),n&&(n.timeline=Ue([].concat(D(n.timeline),D(s))),n.lastRefresh=Date.now()),(c=document.querySelector('.agent-card[data-agent-id="'.concat(t,'"]')))&&Ot(c,t,s),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)}function nt(){return(nt=R(_().m(function e(t,n){var r,i,o,a,s,c,l,u,d,f,h,p,m,g;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,r=document.querySelector('.agent-card[data-agent-id="'.concat(t,'"] .memory-group[data-type="').concat(n,'"]'))){e.n=1;break}return e.a(2);case 1:return i=r.querySelector(".load-more-button"),o=i.querySelector(".spinner"),a=r.querySelector(".memory-list"),s=null,(c=a.querySelectorAll(".memory-item")).length>0&&(l=Array.from(c).map(function(e){return{element:e,date:e.dataset.createdDate}}).sort(function(e,t){return new Date(e.date)-new Date(t.date)})).length>0&&(s=l[0].date),i.disabled=!0,o.style.display="inline-block",e.n=2,Qe(t,n,z.PAGINATION.ACTIVITIES_BATCH_SIZE,s);case 2:u=e.v,(d=Y.get(t))&&d.activities[n]&&(d.activities[n]=[].concat(D(d.activities[n]),D(u))),rt(a,i,u,t,n),e.n=4;break;case 3:e.p=3,e.v,f=document.querySelector('.agent-card[data-agent-id="'.concat(t,'"] .memory-group[data-type="').concat(n,'"]')),(h=null==f?void 0:f.querySelector(".load-more-button"))&&(h.textContent=i18n.translate("errorLoadingMemoriesRetry"),h.disabled=!1);case 4:return e.p=4,p=document.querySelector('.agent-card[data-agent-id="'.concat(t,'"] .memory-group[data-type="').concat(n,'"]')),m=null==p?void 0:p.querySelector(".load-more-button"),g=null==m?void 0:m.querySelector(".spinner"),m&&(m.disabled=!1),g&&(g.style.display="none"),e.f(4);case 5:return e.a(2)}},e,null,[[0,3,4,5]])}))).apply(this,arguments)}function rt(e,t,n,r,i){if(0!==n.length){var o=n.map(function(e){return e.isNew=!1,e}).map(function(e){var t=dt(e),n=void 0!==e.importance&&null!==e.importance&&"Memory"===e.category,i=void 0!==e.surprise&&null!==e.surprise&&"Memory"===e.category;return'\n            <div class="memory-item" \n                 data-created-date="'.concat(e.createdDate,'">\n                <div class="memory-header" onclick="toggleMemoryDetails(this.closest(\'.memory-item\'))">\n                    <div class="memory-header-content">\n                        <div class="date" data-time="').concat(e.createdDate,'">\n                            ').concat(i18n.culturalConfig.formatDateTime(new Date(e.createdDate),"medium"),'\n                        </div>\n                        <i class="fas fa-chevron-down memory-toggle-icon"></i>\n                    </div>\n                    <div class="memory-metrics">\n                        ').concat(n?'<span class="importance" title="Importance" data-i18n-title="importance"><i class="fas fa-star"></i>'.concat(e.importance.toFixed(1),"</span>"):"","\n                        ").concat(i?'<span class="surprise" title="Surprise" data-i18n-title="surprise"><i class="fas fa-bolt"></i>'.concat(e.surprise.toFixed(1),"</span>"):"",'\n                    </div>\n                </div>\n                <div class="memory-details">\n                    ').concat(je(e,r),"\n                    ").concat(t?'\n                    <div class="action-buttons">\n                        <button class="action-button stats-icon" aria-label="'.concat(i18n.translate("statistics")||"Statistics",'" title="').concat(i18n.translate("statistics")||"Statistics",'" onclick="toggleNodeStats(event, this)">\n                            <i class="fas fa-chart-simple"></i>\n                            <div class="stats-tooltip">\n                                ').concat(ht(e),"\n                            </div>\n                        </button>\n                    </div>"):"","\n                </div>\n            </div>\n        ")}).join("");t.insertAdjacentHTML("beforebegin",o),Me(e);var a=e.closest(".memory-group");if(a){var s=i||a.dataset.type,c=e.querySelectorAll(".memory-item").length,l=a.querySelector(".memory-group-title"),u=null==l?void 0:l.querySelector(".memory-count");if(l&&c>0){var d=1===c?"memoryTypesSingular":"memoryTypesPlural",f=i18n.translate("memoryCountTooltip").replace("{count}",c).replace("{memoryType}","".concat(i18n.translate(s.toLowerCase())," ").concat(i18n.translate(d)));if(u)u.textContent=c,u.title=f,u.setAttribute("aria-label",f);else{var h=document.createElement("span");h.className="memory-count hide",h.textContent=c,h.title=f,h.setAttribute("aria-label",f),l.appendChild(h)}}}}else t.style.display="none"}function it(e){return ot.apply(this,arguments)}function ot(){return(ot=R(_().m(function e(t){var n,r,i,o,a;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=M.getQuery("FETCH_CONVERSATION_CONTENT"),r={conversationId:t},e.n=1,M.executeRead(n,r);case 1:if((i=e.v)&&0!==i.length){e.n=2;break}return e.a(2,{success:!1,error:"No conversation content found"});case 2:return o=i.map(function(e){var t=e.timestamp?Number(e.timestamp):null;return{query:e.query,response:e.response,timestamp:t}}),e.a(2,{success:!0,messages:o});case 3:return e.p=3,a=e.v,e.a(2,{success:!1,error:a.message})}},e,null,[[0,3]])}))).apply(this,arguments)}function at(e,t){return st.apply(this,arguments)}function st(){return st=R(_().m(function e(t,n){var r,i,o,a,s,c,l,u,d,f,h,p,m,g,y,v,b,w,S,E,T,A,I,D,x=arguments;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=x.length>2&&void 0!==x[2]?x[2]:0,i=x.length>3&&void 0!==x[3]?x[3]:5,o=t.classList.contains("timeline-entry"),a=o?t.querySelector(".timeline-content-body"):t.querySelector(".memory-details")){e.n=1;break}return e.a(2);case 1:if(s=a.querySelector(".conversation-loading"),c=a.querySelector(".conversation-messages"),s&&c){e.n=2;break}return e.a(2);case 2:if(!(r>=i)){e.n=3;break}return c.innerHTML='<div class="error-message" data-i18n="conversationLoadFailed">Unable to load conversation. Please try again later.</div>',c.style.display="block",s.style.display="none",e.a(2);case 3:if(function(){c.querySelector(".initializing-message")||(c.innerHTML='\n                <div class="initializing-message">\n                    <div class="spinner"></div>\n                    <div class="initializing-text">Message is currently initializing. Please wait...</div>\n                </div>\n            '),c.style.display="block",s.style.display="none"}(),e.p=4,l="conversation-".concat(n),!(u=sessionStorage.getItem(l))){e.n=5;break}d=JSON.parse(u),ut(c,d,s),e.n=8;break;case 5:return e.n=6,it(n);case 6:if(!((f=e.v).success&&f.messages&&f.messages.length>0)){e.n=7;break}try{sessionStorage.setItem(l,JSON.stringify(f.messages))}catch(e){}ut(c,f.messages,s),o?(p=t.dataset.type,m=t.dataset.createdDate,(g=null===(h=t.closest(".agent-card"))||void 0===h?void 0:h.dataset.agentId)&&(y=Y.get(g))&&y.timeline&&(v=y.timeline.find(function(e){return e.type===p&&e.createdDate===m&&e.id===n}))&&(v.conversation_content=f.messages)):(b=t.closest(".memory-group"))&&(S=b.dataset.type,E=t.dataset.createdDate,(T=null===(w=t.closest(".agent-card"))||void 0===w?void 0:w.dataset.agentId)&&S&&(A=Y.get(T))&&A.activities&&A.activities[S]&&(I=A.activities[S].find(function(e){return e.createdDate===E&&e.id===n}))&&(I.conversation_content=f.messages)),e.n=8;break;case 7:return e.n=8,ct(t,n,r,i,f);case 8:e.n=10;break;case 9:return e.p=9,D=e.v,e.n=10,ct(t,n,r,i,{success:!1,error:D.message});case 10:return e.a(2)}},e,null,[[4,9]])})),st.apply(this,arguments)}function ct(e,t,n,r,i){return lt.apply(this,arguments)}function lt(){return(lt=R(_().m(function e(t,n,r,i,o){var a,s,c,l,u,d;return _().w(function(e){for(;;)switch(e.n){case 0:if(a=t.classList.contains("timeline-entry"),s=a?t.querySelector(".timeline-content-body"):t.querySelector(".memory-details")){e.n=1;break}return e.a(2);case 1:if(c=s.querySelector(".conversation-loading"),l=s.querySelector(".conversation-messages"),c&&l){e.n=2;break}return e.a(2);case 2:if("number"==typeof i&&null!=i||(i=5),!(r>=i)){e.n=3;break}return l.innerHTML='<div class="error-message" data-i18n="conversationLoadFailed">Unable to load conversation. Please try again later.</div>',l.style.display="block",c.style.display="none",e.a(2);case 3:return u=Math.min(1e3*Math.pow(2,r+1),8e3),(d=function(){l.querySelector(".initializing-message")||(l.innerHTML='\n                <div class="initializing-message">\n                    <div class="spinner"></div>\n                    <div class="initializing-text">Message is currently initializing. Please wait...</div>\n                </div>\n            '),l.style.display="block",c.style.display="none"})(),e.n=4,new Promise(function(e){return setTimeout(e,u)});case 4:return d(),e.n=5,at(t,n,r+1,i);case 5:return e.a(2)}},e)}))).apply(this,arguments)}function ut(e,t,n){if(!t||0===t.length)return e.innerHTML='<div class="error-message" data-i18n="noContent">No conversation content available</div>',e.style.display="block",void(n.style.display="none");var r="";t.forEach(function(e){if(e.query){var t=e.timestamp?i18n.culturalConfig.formatDateTime(1e3*e.timestamp,"medium"):"",n=marked.parse(e.query);r+='\n                <div class="conversation-message user-message">\n                    <div class="conversation-message-header">\n                        <span class="conversation-sender">User</span>\n                        '.concat(t?'<span class="conversation-time">'.concat(t,"</span>"):"",'\n                    </div>\n                    <div class="conversation-content markdown-content">').concat(n,"</div>\n                </div>\n            ")}if(e.response){var i=e.timestamp?i18n.culturalConfig.formatDateTime(1e3*e.timestamp,"medium"):"",o=marked.parse(e.response);r+='\n                <div class="conversation-message assistant-message">\n                    <div class="conversation-message-header">\n                        <span class="conversation-sender">Assistant</span>\n                        '.concat(i?'<span class="conversation-time">'.concat(i,"</span>"):"",'\n                    </div>\n                    <div class="conversation-content markdown-content">').concat(o,"</div>\n                </div>\n            ")}}),e.innerHTML=r,e.style.display="block",n.style.display="none",Me(e)}function dt(e){return void 0!==e.importance&&null!==e.importance||void 0!==e.token_usage||void 0!==e.max_tokens||void 0!==e.model_provider||void 0!==e.model_name||void 0!==e.response_time||void 0!==e.rag_query_time||void 0!==e.total_api_calls||void 0!==e.total_response_time||void 0!==e.total_token_usage}function ft(e){return null==e?NaN:"object"===E(e)&&e.hasOwnProperty("low")&&e.hasOwnProperty("high")?e.low:Number(e)}function ht(e){var t="";switch(t+="<table>",e.type||("Decision"===e.category?"Decision":"Unknown")){case"Plan":case"Artifact":if(void 0!==e.total_api_calls){var n=ft(e.total_api_calls);isNaN(n)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("totalApiCalls")||"Total API Calls",":</td>\n                            <td>").concat(i18n.formatNumber(n,0),"</td>\n                        </tr>"))}if(void 0!==e.total_response_time){var r=ft(e.total_response_time);isNaN(r)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("totalResponseTime")||"Total Response Time",":</td>\n                            <td>").concat(i18n.formatNumber(r,2),"ms</td>\n                        </tr>"))}if(void 0!==e.total_token_usage){var i=ft(e.total_token_usage);isNaN(i)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("totalTokenUsage")||"Total Token Usage",":</td>\n                            <td>").concat(i18n.formatNumber(i,0),"</td>\n                        </tr>"))}break;case"Planning":case"Decision":if(e.model_provider&&(t+="\n                    <tr>\n                        <td>".concat(i18n.translate("modelProvider")||"Model Provider",":</td>\n                        <td>").concat(e.model_provider,"</td>\n                    </tr>")),void 0!==e.token_usage){var o=ft(e.token_usage);isNaN(o)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("tokenUsage")||"Token Usage",":</td>\n                            <td>").concat(i18n.formatNumber(o,0),"</td>\n                        </tr>"))}if(void 0!==e.total_token_usage){var a=ft(e.total_token_usage);isNaN(a)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("tokens")||"Tokens",":</td>\n                            <td>").concat(i18n.formatNumber(a,0),"</td>\n                        </tr>"))}else if(void 0!==e.max_tokens){var s=ft(e.max_tokens);isNaN(s)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("tokens")||"Tokens",":</td>\n                            <td>").concat(i18n.formatNumber(s,0),"</td>\n                        </tr>"))}if(void 0!==e.response_time){var c=ft(e.response_time);isNaN(c)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("responseTime")||"Response Time",":</td>\n                            <td>").concat(i18n.formatNumber(c,2),"ms</td>\n                        </tr>"))}break;case"Communication":case"Communication (Outgoing)":case"Communication (Incoming)":if(e.model_provider&&(t+="\n                    <tr>\n                        <td>".concat(i18n.translate("modelProvider")||"Model Provider",":</td>\n                        <td>").concat(e.model_provider,"</td>\n                    </tr>")),e.model_name&&(t+="\n                    <tr>\n                        <td>".concat(i18n.translate("modelName")||"Model Name",":</td>\n                        <td>").concat(e.model_name,"</td>\n                    </tr>")),void 0!==e.token_usage){var l=ft(e.token_usage);isNaN(l)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("tokenUsage")||"Token Usage",":</td>\n                            <td>").concat(i18n.formatNumber(l,0),"</td>\n                        </tr>"))}if(void 0!==e.total_token_usage){var u=ft(e.total_token_usage);isNaN(u)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("tokens")||"Tokens",":</td>\n                            <td>").concat(i18n.formatNumber(u,0),"</td>\n                        </tr>"))}else if(void 0!==e.max_tokens){var d=ft(e.max_tokens);isNaN(d)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("tokens")||"Tokens",":</td>\n                            <td>").concat(i18n.formatNumber(d,0),"</td>\n                        </tr>"))}if(void 0!==e.response_time){var f=ft(e.response_time);isNaN(f)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("responseTime")||"Response Time",":</td>\n                            <td>").concat(i18n.formatNumber(f,2),"ms</td>\n                        </tr>"))}break;case"Conversation":var h=e.model_provider||e.modelProvider||e.provider,p=e.model_name||e.modelName||e.model;if(h&&(t+="\n                    <tr>\n                        <td>".concat(i18n.translate("modelProvider")||"Model Provider",":</td>\n                        <td>").concat(h,"</td>\n                    </tr>")),p&&(t+="\n                    <tr>\n                        <td>".concat(i18n.translate("modelName")||"Model Name",":</td>\n                        <td>").concat(p,"</td>\n                    </tr>")),void 0!==e.token_usage){var m=ft(e.token_usage);isNaN(m)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("tokenUsage")||"Token Usage",":</td>\n                            <td>").concat(i18n.formatNumber(m,0),"</td>\n                        </tr>"))}if(void 0!==e.total_token_usage){var g=ft(e.total_token_usage);isNaN(g)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("tokens")||"Tokens",":</td>\n                            <td>").concat(i18n.formatNumber(g,0),"</td>\n                        </tr>"))}else if(void 0!==e.max_tokens){var y=ft(e.max_tokens);isNaN(y)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("tokens")||"Tokens",":</td>\n                            <td>").concat(i18n.formatNumber(y,0),"</td>\n                        </tr>"))}if(void 0!==e.response_time){var v=ft(e.response_time);isNaN(v)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("responseTime")||"Response Time",":</td>\n                            <td>").concat(i18n.formatNumber(v,2),"ms</td>\n                        </tr>"))}break;default:if(e.model_provider&&(t+="\n                    <tr>\n                        <td>".concat(i18n.translate("modelProvider")||"Model Provider",":</td>\n                        <td>").concat(e.model_provider,"</td>\n                    </tr>")),e.model_name&&(t+="\n                    <tr>\n                        <td>".concat(i18n.translate("modelName")||"Model Name",":</td>\n                        <td>").concat(e.model_name,"</td>\n                    </tr>")),void 0!==e.token_usage){var b=ft(e.token_usage);isNaN(b)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("tokenUsage")||"Token Usage",":</td>\n                            <td>").concat(i18n.formatNumber(b,0),"</td>\n                        </tr>"))}if(void 0!==e.total_token_usage){var w=ft(e.total_token_usage);isNaN(w)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("tokens")||"Tokens",":</td>\n                            <td>").concat(i18n.formatNumber(w,0),"</td>\n                        </tr>"))}else if(void 0!==e.max_tokens){var S=ft(e.max_tokens);isNaN(S)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("tokens")||"Tokens",":</td>\n                            <td>").concat(i18n.formatNumber(S,0),"</td>\n                        </tr>"))}if(void 0!==e.rag_query_time){var E=ft(e.rag_query_time);isNaN(E)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("ragQueryTime")||"RAG Query Time",":</td>\n                            <td>").concat(i18n.formatNumber(E,2),"ms</td>\n                        </tr>"))}if(void 0!==e.response_time){var _=ft(e.response_time);isNaN(_)||(t+="\n                        <tr>\n                            <td>".concat(i18n.translate("responseTime")||"Response Time",":</td>\n                            <td>").concat(i18n.formatNumber(_,2),"ms</td>\n                        </tr>"))}}return t+="</table>"}function pt(e){var t=e.classList.contains("expanded");if(t)e.classList.remove("expanded");else{e.classList.add("expanded"),e.classList.contains("new-memory")&&(e.classList.remove("new-memory"),e.classList.add("new-memory-complete"));var n=e.closest(".memory-group");if(n&&"Conversation"===n.dataset.type){var r=e.querySelector(".memory-details"),i=null==r?void 0:r.querySelector(".conversation-loading");if(i){var o=i.dataset.conversationId;o&&at(e,o)}}}if(W=null!==document.querySelector(".memory-item.expanded"),_t(),!t&&H)bt();else if(t){vt()||(utils.debugLog("Memory item closed - returning to normal refresh mode"),Tt(!1))}}function mt(e,t){var n=e.querySelectorAll(".view-button"),r=Ee(function(){var n=R(_().m(function n(r,i){return _().w(function(n){for(;;)switch(n.n){case 0:$[t]=r,e.querySelectorAll(".view-button").forEach(function(e){e.classList.remove("active")}),i.classList.add("active"),e.querySelectorAll(".view-content").forEach(function(e){if(e.dataset.view===r)if(e.classList.add("active"),"visualization"===r)kt(t);else if("activities"===r){var n=Q.get(t);Object.values(n.activities).some(function(e){return!e})&&Je(t)}else"communication"===r?de(t):"consensus"===r?we(t):"timeline"===r&&gt(t);else e.classList.remove("active"),"visualization"===e.dataset.view&&Bt(t)});case 1:return n.a(2)}},n)}));return function(e,t){return n.apply(this,arguments)}}(),300);n.forEach(function(e){e.addEventListener("click",function(){var t=e.dataset.view;r(t,e)})});var i=e.querySelector(".timeline-view");if(i){var o=Ee(function(e){return function(e,t){var n=e.target,r=n.scrollTop,i=n.scrollHeight;r+n.clientHeight>=i-100&&!G.get(t)&&et(t)}(e,t)},250);i.addEventListener("scroll",o)}var a=$[t];if(a){var s=e.querySelector('.view-button[data-view="'.concat(a,'"]'));s&&r(a,s)}}function gt(e){var t=document.querySelector('.agent-card[data-agent-id="'.concat(e,'"]'));if(t){var n=t.querySelector(".timeline-view .timeline-entries-container");if(n){var r=n.querySelectorAll(".timeline-entry"),i=r.length,o=Array.from(r).map(function(e){return new Date(e.dataset.createdDate)}),a=Y.get(e);if(a&&a.timeline&&a.timeline.length>i){utils.debugLog("Synchronizing timeline for agent ".concat(e,": ").concat(i," displayed vs ").concat(a.timeline.length," in cache"));o.length>0&&new Date(Math.min.apply(Math,D(o.map(function(e){return e.getTime()}))));var s=a.timeline;s.sort(function(e,t){return new Date(t.createdDate)-new Date(e.createdDate)});var c=ze(s,e);n.innerHTML=Ge(c,e),Me(n);var l=V.get(e);l&&(l.timeline=a.timeline.length),utils.debugLog("Timeline synchronized with ".concat(c.length," memories"))}}}}function yt(){var e={hasExpandedAgent:null!==H,hasExpandedTimelineEntries:document.querySelectorAll(".timeline-entry.expanded").length>0,hasExpandedMemoryItems:document.querySelectorAll(".memory-item.expanded").length>0,hasOpenVisualizationDetails:document.querySelectorAll(".node-details-panel").length>0,hasExpandedActivitiesGroups:document.querySelectorAll(".memory-list.expanded").length>0};return utils.debugLog("Node States:",{expandedAgentId:H,hasExpandedAgent:e.hasExpandedAgent,timelineEntriesCount:document.querySelectorAll(".timeline-entry.expanded").length,memoryItemsCount:document.querySelectorAll(".memory-item.expanded").length,visualizationDetailsCount:document.querySelectorAll(".node-details-panel").length,activitiesGroupsCount:document.querySelectorAll(".memory-list.expanded").length}),e}function vt(){var e=yt();return e.hasExpandedAgent&&(e.hasExpandedTimelineEntries||e.hasExpandedMemoryItems||e.hasOpenVisualizationDetails||e.hasExpandedActivitiesGroups)}function bt(){return wt.apply(this,arguments)}function wt(){return(wt=R(_().m(function e(){var t,n,r,i,o,a,s,c,l,u,d;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(vt()&&H){e.n=1;break}return utils.debugLog("Smart refresh conditions not met, skipping background check"),e.a(2);case 1:return e.p=1,utils.debugLog("Checking for background updates for agent: ".concat(H)),e.n=2,It(H);case 2:if((t=e.v).length>0&&(utils.debugLog("Found ".concat(t.length," new memories for agent ").concat(H)),J.set(H,{hasNewData:!0,newCount:t.length,newData:t}),St(H)),!yt().hasExpandedActivitiesGroups||!H){e.n=11;break}if(n=document.querySelector('.agent-card[data-agent-id="'.concat(H,'"]')),!(r=null==n?void 0:n.querySelector(".activities-view.active"))){e.n=11;break}i=r.querySelectorAll(".memory-list.expanded"),o=!1,a=I(i),e.p=3,a.s();case 4:if((s=a.n()).done){e.n=7;break}if(c=s.value,l=c.closest(".memory-group"),!(u=null==l?void 0:l.dataset.type)){e.n=6;break}return e.n=5,xt(H,u);case 5:if(!(e.v.length>0)){e.n=6;break}return o=!0,e.a(3,7);case 6:e.n=4;break;case 7:e.n=9;break;case 8:e.p=8,d=e.v,a.e(d);case 9:return e.p=9,a.f(),e.f(9);case 10:o&&!J.has(H)&&(J.set(H,{hasNewData:!0,newCount:1,newData:[],hasNewActivities:!0}),St(H));case 11:utils.debugLog("Background update check completed for agent ".concat(H)),e.n=13;break;case 12:e.p=12,e.v;case 13:return e.a(2)}},e,null,[[3,8,9,10],[1,12]])}))).apply(this,arguments)}function St(e){utils.debugLog("Showing update pill for agent: ".concat(e));var t=document.querySelector('.agent-card[data-agent-id="'.concat(e,'"]'));if(t){var n=t.querySelector(".agent-header");if(n){var r=n.querySelector(".update-available-pill");r&&r.remove();var i=document.createElement("button");i.className="update-available-pill",i.textContent=i18n&&i18n.translate&&i18n.translate("newDataAvailable")||"New Data Available",i.title=i18n&&i18n.translate&&i18n.translate("newDataAvailableTitle")||"New data available  click to refresh",i.setAttribute("aria-label",i.title),i.onclick=function(){return function(e){Tt(!0),J.delete(e),function(e){var t=document.querySelector('.agent-card[data-agent-id="'.concat(e,'"]'));if(!t)return;var n=t.querySelector(".update-available-pill");n&&n.remove()}(e)}(e)},n.appendChild(i),utils.debugLog("Update pill successfully added for agent: ".concat(e))}else utils.debugLog("No agent header found for agent: ".concat(e))}else utils.debugLog("No agent card found for agent: ".concat(e))}function Et(){J.clear(),document.querySelectorAll(".update-available-pill").forEach(function(e){e.remove()})}function _t(){var e=document.getElementById("refreshStatusIndicator");if(e){var t=vt();yt();t?(e.innerHTML='\n            <i class="fas fa-pause-circle" style="color: var(--yellow); margin-right: 0.5rem;"></i>\n            <span>Data refresh paused - node is open</span>\n        ',e.style.display="flex"):(e.innerHTML='\n            <i class="fas fa-sync-alt" style="color: var(--green); margin-right: 0.5rem;"></i>\n            <span>Data refreshing normally</span>\n        ',e.style.display="flex",setTimeout(function(){vt()||(e.style.display="none")},3e3))}}function Tt(){return At.apply(this,arguments)}function At(){return At=R(_().m(function e(){var t,n,r,i,o,a,s,c,l,u,d,f,h,p,m,g,y,v,b,w,T,x=arguments;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=x.length>0&&void 0!==x[0]&&x[0],utils.debugLog("[updateDashboard] Called with forceFresh: ".concat(t)),utils.debugLog("[updateDashboard] isInitialLoad: ".concat(F)),n=vt(),r=yt(),utils.debugLog("Smart refresh check:",{currentState:n,expandedAgent:r.hasExpandedAgent,expandedAgentId:H,expandedTimelineEntries:r.hasExpandedTimelineEntries,expandedMemoryItems:r.hasExpandedMemoryItems,openVisualizationDetails:r.hasOpenVisualizationDetails,expandedActivitiesGroups:r.hasExpandedActivitiesGroups,forceFresh:t}),n!==K&&(utils.debugLog("Smart refresh state changed: ".concat(K," -> ").concat(n)),K=n,Date.now()),!n||t){e.n=2;break}return utils.debugLog("Using smart refresh mode - checking for background updates"),e.n=1,bt();case 1:return Date.now(),e.a(2);case 2:return Et(),utils.debugLog("Proceeding with full dashboard refresh"),i=document.getElementById("agentGrid"),o=document.querySelector(".legend"),a=new Map,s=new Map,c=new Map,l=new Map,document.querySelectorAll(".agent-card").forEach(function(e){var t,n=e.dataset.agentId;if(n){var r=e.querySelector(".timeline-view");r&&a.set(n,r.scrollTop),s.set(n,{isExpanded:e.classList.contains("expanded"),activeView:null===(t=e.querySelector(".view-button.active"))||void 0===t?void 0:t.dataset.view});var i=Array.from(e.querySelectorAll(".timeline-entry.expanded")).map(function(e){return e.dataset.createdDate}),o=Array.from(e.querySelectorAll(".memory-item.expanded")).map(function(e){var t;return null===(t=e.querySelector(".date"))||void 0===t?void 0:t.dataset.time});c.set(n,{timeline:i,memory:o});var u=Array.from(e.querySelectorAll(".timeline-entry")).map(function(e){return e.dataset.createdDate}),d=Array.from(e.querySelectorAll(".memory-item")).map(function(e){return e.dataset.createdDate});l.set(n,{timeline:new Set(u),memory:new Set(d)})}}),F&&(i.innerHTML='<div class="loading-container"><div class="spinner"></div></div>'),e.p=3,e.n=4,Be();case 4:if(u=e.v,d=document.querySelector(".recipient-select")){for(f=d.value,h=d.querySelector('option[value="entire-team"]');d.firstChild;)d.removeChild(d.firstChild);h?d.appendChild(h):((p=document.createElement("option")).value="entire-team",p.textContent=i18n.translate("entireTeam")||"Entire Team",d.appendChild(p)),u.forEach(function(e){var t=document.createElement("option");t.value=e.agentId,t.textContent=e.name||"Agent ".concat(e.agentId),d.appendChild(t)}),Array.from(d.options).some(function(e){return e.value===f})&&(d.value=f)}if(!F){e.n=6;break}return e.n=5,Promise.all(u.map(function(){var e=R(_().m(function e(t){var n,r,i,o,a;return _().w(function(e){for(;;)switch(e.n){case 0:return Ne(t.agentId),ke(t.agentId),G.set(t.agentId,!1),e.n=1,qe(t.agentId);case 1:return i=e.v,(o=Y.get(t.agentId)).timeline=i,o.lastRefresh=Date.now(),Q.get(t.agentId).timeline=!0,V.get(t.agentId).timeline=i.length,a=ze(i,t.agentId),e.a(2,He({agentId:t.agentId,agentName:t.name,isExpanded:(null===(n=s.get(t.agentId))||void 0===n?void 0:n.isExpanded)||!1,activeView:null===(r=s.get(t.agentId))||void 0===r?void 0:r.activeView,timelineMemories:a}))}},e)}));return function(t){return e.apply(this,arguments)}}()));case 5:m=e.v,i.innerHTML="",m.forEach(function(e,t){e.dataset.memoryCount=u[t].memoryCount,e.dataset.hasMemories=u[t].hasMemories,i.appendChild(e)}),e.n=13;break;case 6:g=u.map(function(e){return e.agentId}),Array.from(i.children).forEach(function(e){e.dataset.agentId&&(g.includes(e.dataset.agentId)||e.remove())}),y=I(u),e.p=7,b=_().m(function e(){var n,r,o,l,u,d,f,h,p,m,g,y,b,w,S,T,x,C,O,R,N,k,L,M,P,j,z,U,B,F,H,$,q;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=v.value,r=n.agentId,!(o=i.querySelector('.agent-card[data-agent-id="'.concat(r,'"]')))){e.n=12;break}if((f=o.querySelector(".agent-title"))&&n.name&&(f.textContent=n.name),o.dataset.memoryCount=n.memoryCount,o.dataset.hasMemories=n.hasMemories,h=Y.get(r),!(p=Ae(h,t))||W&&"timeline"===(null===(l=s.get(r))||void 0===l?void 0:l.activeView)){e.n=2;break}return e.n=1,It(r);case 1:(m=e.v).length>0&&(h&&(y=[].concat(D(m),D(h.timeline)),h.timeline=Ue(y),h.lastRefresh=Date.now()),Ot(o,r,m),"visualization"===(null===(g=s.get(r))||void 0===g?void 0:g.activeView)&&(b=X.get(r))&&b.isInitialized&&(S=(null===(w=document.querySelector('.agent-card[data-agent-id="'.concat(r,'"] .agent-title')))||void 0===w?void 0:w.textContent)||"Agent ".concat(r),T=Mt(m,r,S),x=new Set(b.nodes.map(function(e){return e.id})),(C=T.nodes.filter(function(e){return!x.has(e.id)})).length>0&&(O=T.links.filter(function(e){var t="object"===E(e.source)?e.source.id:e.source,n="object"===E(e.target)?e.target.id:e.target,r=x.has(t)||C.some(function(e){return e.id===t}),i=x.has(n)||C.some(function(e){return e.id===n});return r&&i}),b.addNodesAndLinks({newNodes:C,newLinks:O}),b.simulation&&(b.simulation.alpha(.3).restart(),setTimeout(function(){var e,t=new Set(C.map(function(e){return e.id})),n=(b.nodes.find(function(e){return e.isAgentNode}),b.config.width,b.config.height,!0),r=-100,i=b.config.width+100,o=-100,a=b.config.height+100,s=I(b.nodes);try{for(s.s();!(e=s.n()).done;){var c=e.value;if(t.has(c.id)&&(c.x<r||c.x>i||c.y<o||c.y>a)){n=!1;break}}}catch(e){s.e(e)}finally{s.f()}(!n||C.length>3)&&b.fitToView()},800)))));case 2:if(!(p&&"activities"===(null===(u=s.get(r))||void 0===u?void 0:u.activeView)&&null!==(d=Q.get(r))&&void 0!==d&&d.activities&&Object.values(Q.get(r).activities).some(function(e){return e}))){e.n=11;break}R=Object.entries(Q.get(r).activities).filter(function(e){var t=A(e,2);t[0];return t[1]}).map(function(e){return A(e,1)[0]}),N=!1,k=I(R),e.p=3,k.s();case 4:if((L=k.n()).done){e.n=7;break}return M=L.value,e.n=5,xt(r,M);case 5:(P=e.v).length>0&&(N=!0,h&&h.activities[M]&&(h.activities[M]=[].concat(D(P),D(h.activities[M]))),Rt(o,r,M,P));case 6:e.n=4;break;case 7:e.n=9;break;case 8:e.p=8,q=e.v,k.e(q);case 9:return e.p=9,k.f(),e.f(9);case 10:!N&&h&&(h.lastRefresh=Date.now());case 11:(j=c.get(r))&&(j.timeline.forEach(function(e){var t=o.querySelector('.timeline-entry[data-created-date="'.concat(e,'"]'));t&&t.classList.add("expanded")}),j.memory.forEach(function(e){var t,n=null===(t=o.querySelector('.memory-item .date[data-time="'.concat(e,'"]')))||void 0===t?void 0:t.closest(".memory-item");n&&n.classList.add("expanded")})),void 0!==(z=a.get(r))&&(U=o.querySelector(".timeline-view"))&&requestAnimationFrame(function(){U.scrollTop=z}),e.n=14;break;case 12:return e.n=13,He({agentId:r,agentName:n.name,isExpanded:(null===(B=s.get(r))||void 0===B?void 0:B.isExpanded)||!1,activeView:null===(F=s.get(r))||void 0===F?void 0:F.activeView});case 13:(H=e.v).dataset.memoryCount=n.memoryCount,H.dataset.hasMemories=n.hasMemories,-1===($=Array.from(i.children).findIndex(function(e){var t=parseInt(e.dataset.hasMemories||"0"),i=n.hasMemories;return i>t||i===t&&r<e.dataset.agentId}))?i.appendChild(H):i.insertBefore(H,i.children[$]);case 14:return e.a(2)}},e,null,[[3,8,9,10]])}),y.s();case 8:if((v=y.n()).done){e.n=10;break}return e.d(S(b()),9);case 9:e.n=8;break;case 10:e.n=12;break;case 11:e.p=11,T=e.v,y.e(T);case 12:return e.p=12,y.f(),e.f(12);case 13:H&&(i.classList.add("single-expanded"),document.querySelectorAll(".agent-card").forEach(function(e){e.dataset.agentId&&e.dataset.agentId!==H&&e.classList.add("hidden")})),u.length>0?o.classList.remove("hide"):o.classList.add("hide"),Me(i),F=!1,Nt(),e.n=15;break;case 14:e.p=14,e.v,(w=ControlRoomErrorHandler).showError.apply(w,D(ControlRoomErrorCodes.UNEXPECTED_ERROR)),i.innerHTML='<div class="error" data-i18n="agentLoadingError">Failed to load agents</div>',F=!1;case 15:return e.a(2)}},e,null,[[7,11,12,13],[3,14]])})),At.apply(this,arguments)}function It(e){return Dt.apply(this,arguments)}function Dt(){return(Dt=R(_().m(function e(t){var n,r,i,o,a,s,c,l;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,(r=Y.get(t))&&r.timeline&&0!==r.timeline.length){e.n=2;break}return e.n=1,qe(t);case 1:case 3:case 5:return e.a(2,e.v);case 2:if(i=D(r.timeline).sort(function(e,t){return new Date(t.createdDate)-new Date(e.createdDate)}),o=null===(n=i[0])||void 0===n?void 0:n.createdDate){e.n=4;break}return e.n=3,qe(t);case 4:if(a=new Date(o),!isNaN(a.getTime())){e.n=6;break}return e.n=5,qe(t);case 6:return s={agentId:t,teamId:z.TEAM_ID,newerThanDate:a.toISOString(),recordLimit:100},c=M.getQuery("CHECK_NEW_MEMORIES"),e.n=7,M.executeRead(c,s);case 7:if((l=e.v)&&0!==l.length){e.n=8;break}return e.a(2,[]);case 8:return e.a(2,l.map(function(e){var t=e.node,n=t.properties||t,r=k({type:e.nodeType,category:e.category,createdDate:e.createdDate,importance:e.importance||0},n);return t.sender_id&&!r.sender_id&&(r.sender_id=t.sender_id),t.recipient_id&&!r.recipient_id&&(r.recipient_id=t.recipient_id),r}));case 9:return e.p=9,e.v,e.a(2,[])}},e,null,[[0,9]])}))).apply(this,arguments)}function xt(e,t){return Ct.apply(this,arguments)}function Ct(){return(Ct=R(_().m(function e(t,n){var r,i,o,a,s,c,l,u,d;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,(i=Y.get(t))&&i.activities&&i.activities[n]&&0!==i.activities[n].length){e.n=1;break}return e.a(2,[]);case 1:if(o=D(i.activities[n]).sort(function(e,t){return new Date(t.createdDate)-new Date(e.createdDate)}),a=null===(r=o[0])||void 0===r?void 0:r.createdDate){e.n=2;break}return e.a(2,[]);case 2:if(s=new Date(a),!isNaN(s.getTime())){e.n=3;break}return e.a(2,[]);case 3:return c={agentId:t,type:n,newerThanDate:s.toISOString(),recordLimit:100,teamId:z.TEAM_ID},l=M.getQuery("CHECK_NEW_ACTIVITIES"),e.n=4,M.executeRead(l,c);case 4:return u=e.v,d=u.map(function(e){return k({type:e.type||n,category:e.category,createdDate:e.created_date,importance:e.importance},e.allProperties)}),e.a(2,d);case 5:return e.p=5,e.v,e.a(2,[])}},e,null,[[0,5]])}))).apply(this,arguments)}function Ot(e,t,n){if(n&&0!==n.length){var r=e.querySelector(".timeline-entries-container");if(r){var i=Ue(ze(n,t));i.sort(function(e,t){return new Date(t.createdDate)-new Date(e.createdDate)});var o={};i.forEach(function(e){var t=new Date(e.createdDate);t.setHours(0,0,0,0);var n=t.toISOString();o[n]||(o[n]=[]),o[n].push(e)}),Object.entries(o).forEach(function(e){var t,n=A(e,2),i=n[0],o=n[1],a=new Date(i),s=new Date;s.setHours(0,0,0,0);var c,l,u=new Date(s);u.setDate(u.getDate()-1),a.getTime()===s.getTime()?(c="today",l=i18n.translate("today")):a.getTime()===u.getTime()?(c="yesterday",l=i18n.translate("yesterday")):(c=i,l=i18n.culturalConfig.formatDate(a,"medium"));var d=null===(t=r.querySelector('.timeline-date-header[data-relative-date="'.concat(c,'"]')))||void 0===t?void 0:t.closest(".timeline-date-group");d||((d=document.createElement("div")).className="timeline-date-group",d.innerHTML='\n                <div class="date timeline-date-header" data-relative-date="'.concat(c,'">').concat(l,"</div>\n            "),r.insertBefore(d,r.firstChild)),o.sort(function(e,t){return new Date(t.createdDate)-new Date(e.createdDate)}),o.forEach(function(e){var t=void 0!==e.importance&&null!==e.importance&&"Memory"===e.category,n=void 0!==e.surprise&&null!==e.surprise&&"Memory"===e.category,r=dt(e),i=document.createElement("div");i.className="timeline-entry new-memory",i.dataset.type=e.type,i.dataset.createdDate=e.createdDate,i.dataset.timestamp=new Date(e.createdDate).getTime(),i.dataset.category=e.category||"",i.innerHTML='\n                                <div class="timeline-content">\n                                    <div class="timeline-header" onclick="toggleTimelineEntry(this.closest(\'.timeline-entry\'))">\n                                        <div class="timeline-header-title">\n                                            <div class="timeline-header-row">\n                                                <span class="timeline-type" data-i18n="'.concat(e.type.toLowerCase(),'"></span>\n                                            </div>\n                                            <span class="date timeline-date" data-time="').concat(e.createdDate,'">\n                                                ').concat(i18n.culturalConfig.formatTime(new Date(e.createdDate),"medium"),'\n                                            </span>\n                                        </div>\n                                        <div>\n                                            <div class="timeline-category" data-i18n="').concat(e.category.toLowerCase(),'"></div>\n                                            <div class="memory-metrics">\n                                                ').concat(t?'<span class="importance" title="Importance" data-i18n-title="importance"><i class="fas fa-star"></i>'.concat(e.importance.toFixed(1),"</span>"):"","\n                                                ").concat(n?'<span class="surprise" title="Surprise" data-i18n-title="surprise"><i class="fas fa-bolt"></i>'.concat(e.surprise.toFixed(1),"</span>"):"",'\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="timeline-content-body">\n                                        ').concat(je(e),"\n                                    </div>\n                                    ").concat(r?'\n                                    <div class="action-buttons">\n                                        <button class="action-button stats-icon" aria-label="'.concat(i18n.translate("statistics")||"Statistics",'" title="').concat(i18n.translate("statistics")||"Statistics",'" onclick="toggleNodeStats(event, this)">\n                                            <i class="fas fa-chart-simple"></i>\n                                            <div class="stats-tooltip" style="display: none;">\n                                                ').concat(ht(e),"\n                                            </div>\n                                        </button>\n                                    </div>"):"","\n                                </div>\n                            ");for(var o=Array.from(d.querySelectorAll(".timeline-entry")),a=null,s=0;s<o.length;s++){var c=o[s],l=parseInt(c.dataset.timestamp||0);if(new Date(e.createdDate).getTime()>l){a=c;break}}if(a)d.insertBefore(i,a);else{var u=d.querySelector(".timeline-date-header");u?d.insertBefore(i,u.nextSibling):d.appendChild(i)}setTimeout(function(){i&&i.classList.contains("new-memory")&&(i.classList.remove("new-memory"),i.classList.add("new-memory-complete"))},6e4)});var f=Array.from(d.querySelectorAll(".timeline-entry"));f.sort(function(e,t){var n=parseInt(e.dataset.timestamp||0);return parseInt(t.dataset.timestamp||0)-n});var h=d.querySelector(".timeline-date-header");d.innerHTML="",d.appendChild(h),f.forEach(function(e){return d.appendChild(e)})}),Me(r);var a=e.querySelector('.view-button[data-view="timeline"]');if(a){var s=e.querySelectorAll(".timeline-entry.new-memory").length,c=a.querySelector(".memory-count");if(s>0){var l=1===s?"memoryTypesSingular":"memoryTypesPlural",u=i18n.translate("newMemoryTooltip").replace("{count}",s).replace("{memoryType}",i18n.translate(l));if(c)c.textContent=s,c.title=u,c.setAttribute("aria-label",u);else{var d=document.createElement("span");d.className="memory-count hide",d.textContent=s,d.title=u,d.setAttribute("aria-label",u),a.appendChild(d)}}else c&&c.remove()}}}}function Rt(e,t,n,r){if(r&&0!==r.length){var i=e.querySelector('.memory-group[data-type="'.concat(n,'"]'));if(i){var o=i.querySelector(".memory-list");if(o){var a=ze(r,t);a.forEach(function(e){var t=document.createElement("div");t.className="memory-item new-memory",t.dataset.createdDate=e.createdDate,t.innerHTML='\n            <div class="date" data-time="'.concat(e.createdDate,'">\n                ').concat(i18n.culturalConfig.formatDateTime(new Date(e.createdDate),"medium"),'\n            </div>\n            <div class="memory-details">\n                ').concat(je(e),"\n            </div>\n        "),t.addEventListener("click",function(){return pt(t)});var n=o.querySelector(".memory-item");if(n)o.insertBefore(t,n);else{var r=o.querySelector(".load-more-button");r?o.insertBefore(t,r):o.appendChild(t)}}),Me(o);var s=o.querySelectorAll(".memory-item").length,c=i.querySelector(".memory-group-header-wrapper"),l=null==c?void 0:c.querySelector(".memory-group-title"),u=null==l?void 0:l.querySelector(".memory-count");if(l){var d=1===s?"memoryTypesSingular":"memoryTypesPlural",f=i18n.translate("memoryCountTooltip").replace("{count}",s).replace("{memoryType}","".concat(i18n.translate(n.toLowerCase())," ").concat(i18n.translate(d)));if(u)u.textContent=s,u.title=f,u.setAttribute("aria-label",f);else{var h=document.createElement("span");h.className="memory-count hide",h.textContent=s,h.title=f,h.setAttribute("aria-label",f),l.appendChild(h)}}var p=new Date(a[0].createdDate),m=null==c?void 0:c.querySelector(".latest-date");m&&(m.textContent=i18n.culturalConfig.formatDateTime(p,"medium"),m.dataset.time=p.toISOString())}}}}function Nt(){var e=document.getElementById("lastUpdated");if(e){var t=new Date;e.setAttribute("data-date",t.getTime());var n=i18n.culturalConfig.formatDateTime(t,"medium");e.innerHTML='<i class="fa-solid fa-arrows-rotate spinning"></i>'.concat(n);var r=e.querySelector("i");r.addEventListener("animationend",function(){r.classList.remove("spinning")},{once:!0})}}function kt(e){return Lt.apply(this,arguments)}function Lt(){return(Lt=R(_().m(function e(t){var n,r,i,o,a,s,c,l,u,d,f,h,p,m,g,y;return _().w(function(e){for(;;)switch(e.n){case 0:if((n=document.querySelector('.agent-card[data-agent-id="'.concat(t,'"]')))&&n.classList.contains("expanded")){e.n=1;break}return e.a(2);case 1:if((r=n.querySelector(".visualization-view"))&&r.classList.contains("active")){e.n=2;break}return e.a(2);case 2:if(i="visualization-container-".concat(t),document.getElementById(i)||(r.innerHTML='\n            <div id="'.concat(i,'" class="visualization-container"></div>\n            <button id="load-more-').concat(t,'" class="load-more-button" style="display: none;">\n                <span data-i18n="loadMore">Load More</span>\n                <div class="spinner" style="display: none;"></div>\n            </button>\n        ')),o=document.getElementById(i)){e.n=3;break}return e.a(2);case 3:try{(a=X.get(t))?(a.initialize(),(f=document.getElementById("load-more-".concat(t)))&&(f.replaceWith(f.cloneNode(!0)),(h=document.getElementById("load-more-".concat(t))).addEventListener("click",R(_().m(function e(){return _().w(function(e){for(;;)switch(e.n){case 0:if(!h.disabled){e.n=1;break}return e.a(2);case 1:return e.n=2,zt(t);case 2:return e.a(2)}},e)}))),h.style.display="flex"),(p=Y.get(t))&&p.timeline&&(g=(null===(m=document.querySelector('.agent-card[data-agent-id="'.concat(t,'"] .agent-title')))||void 0===m?void 0:m.textContent)||"Agent ".concat(t),y=Mt(p.timeline,t,g),a.updateData(y))):((a=new GraphVisualization(i)).setNodeClickCallback(function(e){e.isAgentNode||Pt(t,e)}),(s=document.getElementById("load-more-".concat(t)))&&(s.addEventListener("click",R(_().m(function e(){return _().w(function(e){for(;;)switch(e.n){case 0:if(!s.disabled){e.n=1;break}return e.a(2);case 1:return e.n=2,zt(t);case 2:return e.a(2)}},e)}))),s.style.display="flex"),X.set(t,a),(c=Y.get(t))&&c.timeline&&(u=(null===(l=document.querySelector('.agent-card[data-agent-id="'.concat(t,'"] .agent-title')))||void 0===l?void 0:l.textContent)||"Agent ".concat(t),d=Mt(c.timeline,t,u),a.updateData(d),setTimeout(function(){a.fitToView()},500)))}catch(e){o.innerHTML='<div class="error" data-i18n="visualizationError">Failed to load visualization</div>'}case 4:return e.a(2)}},e)}))).apply(this,arguments)}function Mt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||0===e.length)return{nodes:[],links:[]};var r=e.filter(function(e){return e}),i=n||"Agent ".concat(t),o=[{id:"agent-".concat(t),type:"Agent",label:i,created_date:null,category:"Agent",importance:1,isAgentNode:!0}],a=function(e){return e.id||_e(e)};r.forEach(function(e){var t=e.id||_e(e),n="";e.title?n=e.title.substring(0,30):e.content?n=e.content.substring(0,30)+(e.content.length>30?"...":""):e.decision_text&&(n=e.decision_text.substring(0,30)+(e.decision_text.length>30?"...":"")),o.push({id:t,type:e.type||("Decision"===e.category?"Decision":"Unknown"),label:n,created_date:e.createdDate,category:e.category||"Memory",importance:e.importance||0,properties:e})});var s=new Map;o.forEach(function(e){return s.set(e.id,e)});for(var c=[],l=new Set,u=D(r).sort(function(e,t){return new Date(e.createdDate)-new Date(t.createdDate)}),d=new Set,f=function(){var e=u[h],t=a(e);if(h>0){var n=u[h-1],r=a(n);if(n.type===e.type||"Observation"===n.type&&"Reflection"===e.type||"Reflection"===n.type&&"Planning"===e.type||"Planning"===n.type&&"Decision"===e.type){var i="".concat(r,"_").concat(t);l.has(i)||(c.push({source:r,target:t,type:"SEQUENTIAL",id:i}),l.add(i),d.add(t))}}if("Reflection"===e.type){var o=u.filter(function(t){return"Observation"===t.type&&new Date(t.createdDate)<new Date(e.createdDate)}).sort(function(e,t){return new Date(t.createdDate)-new Date(e.createdDate)});if(o.length>0){var s=o[0],f=a(s),p="".concat(f,"_").concat(t);l.has(p)||(c.push({source:f,target:t,type:"REFLECTS_ON",id:p}),l.add(p),d.add(t))}}if("Decision"===e.type&&h<u.length-1){var m=u[h+1],g=a(m);if("Artifact"===m.type||"Plan"===m.type){var y="".concat(t,"_").concat(g);l.has(y)||(c.push({source:t,target:g,type:"RESULTED_IN",id:y}),l.add(y),d.add(g))}}if("Conversation"===e.type)for(var v=h-1;v>=Math.max(0,h-5);v--){var b=u[v],w=a(b),S="".concat(w,"_").concat(t);l.has(S)||(c.push({source:w,target:t,type:"RELATED_TO",id:S}),l.add(S),d.add(t));break}},h=0;h<u.length;h++)f();var p,m="agent-".concat(t),g=I(u);try{for(g.s();!(p=g.n()).done;){var y=p.value,v=a(y);if(!d.has(v)){var b="".concat(m,"_").concat(v);l.has(b)||(c.push({source:m,target:v,type:"CREATED",id:b}),l.add(b))}}}catch(e){g.e(e)}finally{g.f()}return{nodes:o,links:c}}function Pt(e,t){var n=document.getElementById("visualization-container-".concat(e));if(n){var r=n.querySelector(".node-details-panel"),i=k(k({},t.properties),{},{content:t.properties.content||t.properties.response||t.properties.decision_text}),o=void 0!==i.importance&&null!==i.importance,a=void 0!==i.surprise&&null!==i.surprise,s="";if(i.createdDate)try{s=new Date(i.createdDate).toLocaleString()}catch(e){}var c=dt(i)?'\n        <div class="action-buttons">\n            <button class="action-button stats-icon" aria-label="Statistics" onclick="toggleNodeStats(event, this)">\n                <i class="fas fa-chart-simple"></i>\n                <div class="stats-tooltip" style="display: none;">\n                    '.concat(ht(i),"\n                </div>\n            </button>\n        </div>\n    "):"",l='\n        <div class="node-details-header">\n            <div>\n                <div class="node-details-title-wrapper">\n                    <span class="node-details-title" data-type="'.concat(t.type,'">').concat(t.type,"</span>\n                    ").concat(o?'<span class="importance" title="Importance" data-i18n-title="importance"><i class="fas fa-star"></i>'.concat(i.importance.toFixed(1),"</span>"):"","\n                    ").concat(a?'<span class="surprise" title="Surprise" data-i18n-title="surprise"><i class="fas fa-bolt"></i>'.concat(i.surprise.toFixed(1),"</span>"):"","\n                </div>\n                ").concat(s?'<div class="date timeline-date">'.concat(s,"</div>"):"",'\n            </div>\n            <button class="close-button node-details-close-button"><i class="fas fa-times"></i></button>\n        </div>\n        <div class="node-details-content">\n            ').concat(je(i,e),"\n            ").concat(c,"\n        </div>\n    ");r?r.innerHTML=l:((r=document.createElement("div")).className="node-details-panel",r.innerHTML=l,n.appendChild(r)),r.querySelector(".node-details-close-button").addEventListener("click",function(){r.remove()}),Me(r),"Conversation"===t.type&&i.id&&!i.conversation_content&&function(e,t,n){jt.apply(this,arguments)}(e,i.id,r)}}function jt(){return(jt=R(_().m(function e(t,n,r){var i,o,a,s,c,l;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,(i=r.querySelector(".conversation-loading"))&&(i.style.display="flex"),e.n=1,it(n);case 1:(o=e.v).success&&o.messages&&o.messages.length>0?(a={type:"Conversation",id:n,conversation_content:o.messages},(s=r.querySelector(".node-details-content"))&&(s.innerHTML=je(a,t),Me(s)),i&&(i.style.display="none")):((c=r.querySelector(".conversation-messages"))&&(c.innerHTML='<div class="error-message" data-i18n="noContent">No conversation content available</div>',c.style.display="block"),i&&(i.style.display="none")),e.n=3;break;case 2:e.p=2,e.v,(l=r.querySelector(".conversation-loading"))&&(l.innerHTML='<span style="color: var(--error-color);">Error loading conversation</span>');case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function zt(e){return Ut.apply(this,arguments)}function Ut(){return(Ut=R(_().m(function e(t){var n,r,i,o,a,s,c,l,u,d,f,h,p,m,g;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=document.getElementById("load-more-".concat(t)),r=null==n?void 0:n.querySelector(".spinner"),i=null==n?void 0:n.querySelector("span"),e.p=1,n){e.n=2;break}return e.a(2);case 2:if(n.disabled=!0,r&&(r.style.display="inline-block"),a=X.get(t)){e.n=3;break}return e.a(2);case 3:return s=new Set(a.nodes.map(function(e){return e.id})),c=Y.get(t),l=(null==c||null===(o=c.timeline)||void 0===o?void 0:o.length)||0,e.n=4,et(t);case 4:u=Y.get(t),(d=(null==u?void 0:u.timeline)||[]).length>l?(h=(null===(f=document.querySelector('.agent-card[data-agent-id="'.concat(t,'"] .agent-title')))||void 0===f?void 0:f.textContent)||"Agent ".concat(t),p=Mt(d,t,h),m=p.nodes.filter(function(e){return!s.has(e.id)}),g=p.links.filter(function(e){var t="object"===E(e.source)?e.source.id:e.source,n="object"===E(e.target)?e.target.id:e.target;return!s.has(t)||!s.has(n)}),m.length>0||g.length>0?(a.addNodesAndLinks({newNodes:m,newLinks:g}),setTimeout(function(){a.simulation&&a.simulation.alpha(.3).restart(),(m.filter(function(e){if(!e.x||!e.y)return!1;var t=100;return e.x>=-100&&e.x<=a.config.width+t&&e.y>=-100&&e.y<=a.config.height+t}).length<m.length||m.length>5)&&setTimeout(function(){a.fitToView()},1e3)},300)):n.style.display="none"):n.style.display="none",e.n=6;break;case 5:e.p=5,e.v;case 6:return e.p=6,n&&(n.disabled=!1,r&&(r.style.display="none"),i&&(i.textContent="Load More")),e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])}))).apply(this,arguments)}function Bt(e){var t=X.get(e);t&&t.simulation&&t.simulation.stop()}function Ft(){var e=!1;document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&e?(utils.debugLog("Page visibility restored - refreshing dashboard"),e=!1,Tt(!0),P&&P.checkConnection()):"hidden"===document.visibilityState&&(e=!0,utils.debugLog("Page visibility changed to hidden"))}),window.addEventListener("focus",function(){e&&(utils.debugLog("Window focus restored - refreshing dashboard"),e=!1,Tt(!0),P&&P.checkConnection())})}function Ht(){return(Ht=R(_().m(function e(){var t,n,r,o;return _().w(function(e){for(;;)switch(e.p=e.n){case 0:return utils.debugLog("Initializing application"),e.p=1,Te(),M=i.M.classFactory(z,b,w),e.n=2,M.initialize();case 2:return utils.debugLog("Database service initialized successfully"),P=new p(z.MQTT_CONFIG),e.n=3,P.initialize();case 3:return utils.debugLog("MQTT initialized successfully"),le(),ve(),marked.setOptions({breaks:!0}),Le(),Ft(),z.SHOW_SIMULATION_CONTROLS&&(document.createElement("script"),t=["./src/consensus-simulator.js","../src/consensus-simulator.js","./consensus-simulator.js","src/consensus-simulator.js","consensus-simulator.js"],n=0,(r=function(){if(n>=t.length)$t();else{var e=t[n];utils.debugLog(" Trying to load simulator from: ".concat(e));var i=document.createElement("script");i.src=e,i.onload=function(){if(utils.debugLog(" Script loaded successfully from:",e),window.ConsensusSimulator)try{j=new window.ConsensusSimulator(P,z.TEAM_ID),utils.debugLog(" Consensus simulator initialized successfully:",j)}catch(e){}else utils.debugLog(" ConsensusSimulator not found on window object after loading"),utils.debugLog(" Available on window:",Object.keys(window).filter(function(e){return e.includes("Consensus")}));$t()},i.onerror=function(t){utils.debugLog(" Failed to load from ".concat(e,", trying next path...")),n++,r()},document.head.appendChild(i)}})()),e.n=4,Tt(!0);case 4:Ie(),setInterval(function(){W||"visible"!==document.visibilityState||Tt(!1)},3e4),e.n=6;break;case 5:e.p=5,e.v,(o=ControlRoomErrorHandler).showError.apply(o,D(ControlRoomErrorCodes.INIT_FAILED));case 6:utils.debugLog("Application initialized");case 7:return e.a(2)}},e,null,[[1,5]])}))).apply(this,arguments)}function $t(){if(utils.debugLog(" addSimulatorButton() called, Show Controls:",z.SHOW_SIMULATION_CONTROLS),z.SHOW_SIMULATION_CONTROLS)if(document.getElementById("consensusSimulatorButton")||document.getElementById("communicationSimulatorButton"))utils.debugLog(" Buttons already exist, skipping");else{var e=document.querySelector("#footer");if(utils.debugLog(" Footer found:",e),e){var t=document.createElement("div");t.className="simulation-controls",t.style.position="absolute",t.style.bottom="10px",t.style.right="10px",t.style.display="flex",t.style.gap="10px",t.style.zIndex="1000";var n=document.createElement("button");n.id="consensusSimulatorButton",n.className="simulator-button",n.innerHTML=" Simulate Consensus",n.title="Run consensus simulation for testing",n.style.padding="8px 12px",n.style.backgroundColor="#363d4d",n.style.color="white",n.style.border="none",n.style.borderRadius="4px",n.style.cursor="pointer",n.style.fontSize="12px",n.style.minWidth="140px",n.addEventListener("click",function(){if(j){switch(prompt("Choose consensus simulation type:\n".concat(["Successful Consensus","Failed Consensus","Reset Consensus Data"].map(function(e,t){return"".concat(t+1,". ").concat(e)}).join("\n")))){case"1":j.simulateConsensusFlow();break;case"2":j.simulateFailedConsensus();break;case"3":j.resetConsensusData();break;default:return}}else alert("Consensus simulator not loaded - but you can still test the UI!")});var r=document.createElement("button");r.id="communicationSimulatorButton",r.className="simulator-button",r.innerHTML=" Simulate Communication",r.title="Simulate agent communication for demonstration",r.style.padding="8px 12px",r.style.backgroundColor="#007bff",r.style.color="white",r.style.border="none",r.style.borderRadius="4px",r.style.cursor="pointer",r.style.fontSize="12px",r.style.minWidth="140px",r.addEventListener("click",function(){switch(prompt("Choose communication simulation type:\n".concat(["Agent to Agent Communication","Team Broadcast","Clear Communication Visuals"].map(function(e,t){return"".concat(t+1,". ").concat(e)}).join("\n")))){case"1":!function(){var e=z.AGENT_IDS;if((!e||0===e.length)&&0===(e=Array.from(document.querySelectorAll(".agent-card")).map(function(e){return e.dataset.agentId}).filter(function(e){return e})).length)return;var t=e[Math.floor(Math.random()*e.length)],n=e[Math.floor(Math.random()*e.length)];for(;n===t&&e.length>1;)n=e[Math.floor(Math.random()*e.length)];var r={agent_id:n,sender_id:t,team_id:z.TEAM_ID,decision_id:"decision-".concat(Date.now()),message_type:"coordination",content:"This is a simulated agent-to-agent communication for testing purposes.",timestamp:Date.now()};ae(0,JSON.stringify(r))}();break;case"2":!function(){var e=z.AGENT_IDS;if((!e||0===e.length)&&0===(e=Array.from(document.querySelectorAll(".agent-card")).map(function(e){return e.dataset.agentId}).filter(function(e){return e})).length)return;var t=e[Math.floor(Math.random()*e.length)];e.forEach(function(e){if(e!==t){var n={agent_id:e,sender_id:t,team_id:z.TEAM_ID,decision_id:"broadcast-".concat(Date.now()),message_type:"broadcast",communication_type:"Team",content:"This is a simulated team broadcast communication for testing purposes.",timestamp:Date.now()};setTimeout(function(){ae(0,JSON.stringify(n))},500*Math.random())}})}();break;case"3":!function(){var e=document.querySelector(".agent-communication-overlay");e&&e.remove();var t=document.querySelector(".communication-feed");t&&t.remove(),document.querySelectorAll(".agent-card.communicating").forEach(function(e){e.classList.remove("communicating");var t=e.querySelector(".communication-status");t&&t.remove()}),utils.debugLog("Communication visuals cleared")}();break;default:return}}),t.appendChild(n),t.appendChild(r),e.style.position="relative",e.appendChild(t),utils.debugLog(" Simulation control buttons added successfully")}}else utils.debugLog(" Simulation controls disabled, skipping button creation")}window.loadConfig=Se,window.onValueMappingLoaded=function(e){if(B)return;B=!0,Se(e),function(){Ht.apply(this,arguments)}()},window.toggleCardExpansion=function(e,t){e.stopPropagation();var n=t.closest(".agent-card"),r=t.querySelector("i"),i=document.getElementById("agentGrid"),o=n.dataset.agentId;if(n.classList.contains("expanded")){n.classList.remove("expanded"),r.classList.remove("fa-down-left-and-up-right-to-center"),r.classList.add("fa-up-right-and-down-left-from-center"),i.classList.remove("single-expanded"),H=null,Bt(o);var a="visualization"===$[o],s=n.querySelector('.view-button[data-view="visualization"]');if(s&&s.remove(),a){var c=n.querySelector('.view-button[data-view="timeline"]');if(c){n.querySelectorAll(".view-button").forEach(function(e){e.classList.remove("active")}),c.classList.add("active"),$[o]="timeline",n.querySelectorAll(".view-content").forEach(function(e){e.classList.remove("active")});var l=n.querySelector(".timeline-view");l&&l.classList.add("active")}}document.querySelectorAll(".agent-card").forEach(function(e){e!==n&&e.classList.remove("hidden")})}else{n.classList.add("expanded"),r.classList.remove("fa-up-right-and-down-left-from-center"),r.classList.add("fa-down-left-and-up-right-to-center"),i.classList.add("single-expanded"),H=o;var u=n.querySelector(".view-toggle");if(u&&!u.querySelector('.view-button[data-view="visualization"]')){var d=document.createElement("button");d.className="view-button",d.dataset.view="visualization",d.dataset.i18n="visualization",d.textContent=i18n.translate("visualization"),d.addEventListener("click",function(){u.querySelectorAll(".view-button").forEach(function(e){e.classList.remove("active")}),d.classList.add("active"),$[o]="visualization",n.querySelectorAll(".view-content").forEach(function(e){e.classList.remove("active")});var e=n.querySelector(".visualization-view");e&&(e.classList.add("active"),kt(o))}),u.appendChild(d)}document.querySelectorAll(".agent-card").forEach(function(e){e!==n&&e.classList.add("hidden")})}},window.toggleTimelineEntry=function(e){var t=e.classList.contains("expanded");if(t)e.classList.remove("expanded");else if(e.classList.add("expanded"),e.classList.contains("new-memory")&&(e.classList.remove("new-memory"),e.classList.add("new-memory-complete")),"Conversation"===e.dataset.type){var n=e.querySelector(".timeline-content-body"),r=null==n?void 0:n.querySelector(".conversation-loading");if(r){var i=r.dataset.conversationId;i&&at(e,i)}}if(W=null!==document.querySelector(".timeline-entry.expanded"),_t(),!t&&H)bt();else if(t){vt()||(utils.debugLog("Node closed - returning to normal refresh mode"),Tt(!1))}},window.toggleMemoryGroup=function(e){var t=e.closest(".memory-group");if(!t)return;var n=t.querySelector(".memory-list"),r=e.querySelector("i.fa-chevron-down");if(!n||!r)return;n.classList.toggle("expanded"),r.classList.toggle("rotated");var i=n.classList.contains("expanded");e.setAttribute("aria-expanded",i.toString())},window.toggleMemoryDetails=pt,window.loadMoreMemories=function(e,t){return nt.apply(this,arguments)},window.loadConversationContent=at,window.toggleCollapsibleSection=function(e){e.stopPropagation();var t=e.currentTarget,n=t.closest(".collapsible-section"),r=t.nextElementSibling;n.classList.toggle("expanded"),n.classList.contains("expanded")?r.style.maxHeight=r.scrollHeight+"px":r.style.maxHeight="0"},window.toggleNodeStats=function(e,t){e.stopPropagation();var n=t.querySelector(".stats-tooltip");if(!n)return;var r="none"!==n.style.display;n.style.display=r?"none":"block",t.setAttribute("aria-expanded",(!r).toString()),document.querySelectorAll(".stats-tooltip").forEach(function(e){e!==n&&"none"!==e.style.display&&(e.style.display="none",e.closest(".stats-icon").setAttribute("aria-expanded","false"))})},window.showError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",n=Ce(),r=document.createElement("div");r.className="toast ".concat(t),r.textContent=e,r.setAttribute("role","alert"),r.setAttribute("aria-live","error"===t?"assertive":"polite"),r.style.opacity="1",r.style.transform="translateX(0)",n.appendChild(r),setTimeout(function(){r.style.opacity="0",r.style.transform="translateX(100%)",r.style.transition="opacity 0.3s ease, transform 0.3s ease",setTimeout(function(){return r.remove()},300)},5e3)},window.databaseService=function(){return M},window.handleConsensusDraftPlan=he,window.handleConsensusProgress=pe,window.toggleConsensusSort=function(e){ge(e)},window.consensusProcesses=ie,window.agentConsensusData=oe,window.checkAgentCommunicationSubscription=function(){var e,t="XMAGS/".concat(z.TEAM_ID,"/DATA/communication/#");P&&P.isConnected;var n=te.length;if(n>0)te[n-1];return{topic:t,teamId:z.TEAM_ID,subscribed:window._agentCommunicationSubscribed,mqttConnected:null===(e=P)||void 0===e?void 0:e.isConnected,messageCount:n,latestMessage:n>0?te[n-1]:null}}},2831:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return c.default}});var r=f(n(3518)),i=f(n(4948)),o=f(n(5073)),a=f(n(7186)),s=f(n(4808)),c=f(n(7775)),l=f(n(7037)),u=f(n(9910)),d=f(n(6792));function f(e){return e&&e.__esModule?e:{default:e}}},2858:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};const r=new Uint8Array(16)},2861:(e,t,n)=>{var r=n(8287),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},3095:(e,t,n)=>{"use strict";const{ArrayPrototypePop:r,Promise:i}=n(4134),{isIterable:o,isNodeStream:a,isWebStream:s}=n(6115),{pipelineImpl:c}=n(7758),{finished:l}=n(6238);n(5506),e.exports={finished:l,pipeline:function(...e){return new i((t,n)=>{let i,l;const u=e[e.length-1];if(u&&"object"==typeof u&&!a(u)&&!o(u)&&!s(u)){const t=r(e);i=t.signal,l=t.end}c(e,(e,r)=>{e?n(e):t(r)},{signal:i,end:l})})}}},3141:(e,t,n)=>{"use strict";var r=n(2861).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(i=a(t[r]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(i=a(t[r]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},3203:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e}readResponse(e){if(null==e)throw new Error("Buffer is missing.");if(!(e instanceof r))throw new Error("Not an instance of Buffer.");if(e.length<1)throw new Error("Buffer is empty.");const t={status:{},result:{}};let n,i=e;const o=i[0];if(129!==o)throw new Error(`Unsupported version '${o}'.`);return i=i.slice(1),({v:t.requestId,len:n}=this.ioc.uuidSerializer.deserialize(i,!1,!0)),i=i.slice(n),({v:t.status.code,len:n}=this.ioc.intSerializer.deserialize(i,!1)),i=i.slice(n),({v:t.status.message,len:n}=this.ioc.stringSerializer.deserialize(i,!1,!0)),i=i.slice(n),({v:t.status.attributes,len:n}=this.ioc.mapSerializer.deserialize(i,!1)),i=i.slice(n),({v:t.result.meta,len:n}=this.ioc.mapSerializer.deserialize(i,!1)),i=i.slice(n),({v:t.result.data}=this.ioc.anySerializer.deserialize(i)),t}}},3321:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BOOLEAN]=this}canBeUsedFor(e){return"boolean"==typeof e}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.BOOLEAN,1]):r.from([0]);const n=[];return t&&n.push(r.from([this.ioc.DataType.BOOLEAN,0])),n.push(r.from([e?1:0])),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.BOOLEAN)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<1)throw new Error("unexpected {value} length");n+=1;let o=i.readUInt8();if(0!==o&&1!==o)throw new Error(`unexpected boolean byte=${o}`);return o=1===o,{v:o,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},3335:(e,t,n)=>{"use strict";const r=n(1545).Traversal;class i{constructor(e,t={}){this.fqcn=e,this.configuration=t}apply(e){}}e.exports={TraversalStrategies:class{constructor(e){this.strategies=e?[...e.strategies]:[]}addStrategy(e){this.strategies.push(e)}removeStrategy(e){const t=this.strategies.findIndex(t=>t.fqcn===e.fqcn);if(-1!==t)return this.strategies.splice(t,1)[0]}applyStrategies(e){return this.strategies.reduce((t,n)=>t.then(()=>n.apply(e)),Promise.resolve())}},TraversalStrategy:i,ConnectiveStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.ConnectiveStrategy")}},ElementIdStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.ElementIdStrategy")}},HaltedTraverserStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.HaltedTraverserStrategy"),void 0!==e&&(this.configuration.haltedTraverserFactory=e)}},OptionsStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.OptionsStrategy",e)}},PartitionStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.PartitionStrategy",e)}},SeedStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.SeedStrategy",{seed:e.seed})}},SubgraphStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.SubgraphStrategy",e),this.configuration.vertices instanceof r&&(this.configuration.vertices=this.configuration.vertices.bytecode),this.configuration.edges instanceof r&&(this.configuration.edges=this.configuration.edges.bytecode),this.configuration.vertexProperties instanceof r&&(this.configuration.vertexProperties=this.configuration.vertexProperties.bytecode)}},VertexProgramStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.computer.traversal.strategy.decoration.VertexProgramStrategy",e)}},MatchAlgorithmStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.finalization.MatchAlgorithmStrategy"),void 0!==e&&(this.configuration.matchAlgorithm=e)}},AdjacentToIncidentStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.AdjacentToIncidentStrategy")}},FilterRankingStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.FilterRankingStrategy")}},IdentityRemovalStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.IdentityRemovalStrategy")}},IncidentToAdjacentStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.IncidentToAdjacentStrategy")}},InlineFilterStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.InlineFilterStrategy")}},LazyBarrierStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.LazyBarrierStrategy")}},MatchPredicateStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.MatchPredicateStrategy")}},OrderLimitStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.OrderLimitStrategy")}},PathProcessorStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.PathProcessorStrategy")}},PathRetractionStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.PathRetractionStrategy")}},ProductiveByStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.ProductiveByStrategy",e)}},CountStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.CountStrategy")}},RepeatUnrollStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.RepeatUnrollStrategy")}},GraphFilterStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.GraphFilterStrategy")}},EarlyLimitStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.EarlyLimitStrategy")}},EdgeLabelVerificationStrategy:class extends i{constructor(e=!1,t=!1){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.verification.EdgeLabelVerificationStrategy",{logWarnings:e,throwException:t})}},LambdaRestrictionStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.verification.LambdaRestrictionStrategy")}},ReadOnlyStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.verification.ReadOnlyStrategy")}},ReservedKeysVerificationStrategy:class extends i{constructor(e=!1,t=!1,n=["id","label"]){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.verification.ReservedKeysVerificationStrategy",{logWarnings:e,throwException:t,keys:n})}}}},3370:(e,t,n)=>{"use strict";const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:o,ObjectSetPrototypeOf:a}=n(4134);e.exports=l;const s=n(7576),c=n(8584);a(l.prototype,s.prototype),a(l,s);{const e=o(c.prototype);for(let t=0;t<e.length;t++){const n=e[t];l.prototype[n]||(l.prototype[n]=c.prototype[n])}}function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),c.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let u,d;function f(){return void 0===u&&(u={}),u}r(l.prototype,{writable:{__proto__:null,...i(c.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(c.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(c.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(c.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(c.prototype,"writableLength")},writableFinished:{__proto__:null,...i(c.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(c.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(c.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(c.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),l.fromWeb=function(e,t){return f().newStreamDuplexFromReadableWritablePair(e,t)},l.toWeb=function(e){return f().newReadableWritablePairFromDuplex(e)},l.from=function(e){return d||(d=n(6706)),d(e,"body")}},3434:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Neo4jHTTPSDatabaseService:()=>I});var r=n(1982);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function s(n,r,i,o){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return a(u,"_invoke",function(n,r,i){var o,a,s,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,a=0,s=e,f.n=n,c}};function h(n,r){for(a=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,o=u[t],h=f.p,p=o[2];n>3?(i=p===r)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(a=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,a=0))}if(i||n>1)return c;throw d=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),a=u,s=p;(t=a<2?e:s)||!d;){o||(a?a<3?(a>1&&(f.n=-1),h(a,s)):f.n=s:f.v=s);try{if(l=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((t=(d=f.n<0)?s:n.call(r,f))!==c)break}catch(t){o=e,a=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,i,o),!0),u}var c={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(a(t={},r,function(){return this}),t),h=d.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e}return u.prototype=d,a(h,"constructor",d),a(d,"constructor",u),u.displayName="GeneratorFunction",a(d,i,"GeneratorFunction"),a(h),a(h,i,"Generator"),a(h,r,function(){return this}),a(h,"toString",function(){return"[object Generator]"}),(o=function(){return{w:s,m:p}})()}function a(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}a=function(e,t,n,r){function o(t,n){a(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},a(e,t,n,r)}function s(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,c,"next",e)}function c(e){s(o,r,i,a,c,"throw",e)}a(void 0)})}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var d=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.uri)throw new Error("Invalid Neo4j configuration: URI is required");if(!(t.neo4j_serverauth||t.username&&t.password))throw new Error("Invalid Neo4j configuration: Either neo4j_serverauth OR both username and password must be provided");if(this.config=t,this.connectionRetryCount=0,this.maxRetries=3,this.baseUrl=this.config.uri,t.neo4j_serverauth)this.authHeader="Basic ".concat(t.neo4j_serverauth);else{var n="".concat(this.config.username,":").concat(this.config.password);this.authHeader="Basic ".concat(btoa(n))}},t=[{key:"executeQuery",value:(a=c(o().m(function e(t,n,r){var i,a,s,c,l,u,d;return o().w(function(e){for(;;)switch(e.n){case 0:return i={statement:t.replaceAll("\n"," "),parameters:n},a={Authorization:this.authHeader,"Content-Type":"application/json",Accept:"application/json"},r&&r.clusterAffinity&&(a["neo4j-cluster-affinity"]=r.clusterAffinity),s=r&&r.id?"".concat(this.baseUrl).concat(this.baseUrl.endsWith("/")?"":"/","tx/").concat(r.id):this.baseUrl,e.n=1,fetch(s,{method:"POST",headers:a,body:JSON.stringify(i)});case 1:if((c=e.v).ok){e.n=3;break}return e.n=2,c.text();case 2:throw l=e.v,new Error("Neo4j Query API Error: ".concat(c.status," ").concat(c.statusText," - ").concat(l));case 3:return e.n=4,c.json();case 4:if(!((u=e.v).errors&&Array.isArray(u.errors)&&u.errors.length>0)){e.n=5;break}throw d=u.errors[0],new Error("Neo4j Error [".concat(d.code,"]: ").concat(d.message));case 5:return e.a(2,u.data?u.data:null)}},e,this)})),function(e,t,n){return a.apply(this,arguments)})},{key:"startTransaction",value:(i=c(o().m(function e(){var t,n,r,i;return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fetch("".concat(this.baseUrl).concat(this.baseUrl.endsWith("/")?"":"/","tx"),{method:"POST",headers:{Authorization:this.authHeader,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({})});case 1:if((t=e.v).ok){e.n=3;break}return e.n=2,t.text();case 2:throw n=e.v,new Error("Neo4j Transaction Error: ".concat(t.status," ").concat(t.statusText," - ").concat(n));case 3:return e.n=4,t.json();case 4:return r=e.v,i=t.headers.get("neo4j-cluster-affinity"),e.a(2,{id:r.transaction.id,expires:r.transaction.expires,clusterAffinity:i,open:!0})}},e,this)})),function(){return i.apply(this,arguments)})},{key:"commitTransaction",value:(r=c(o().m(function e(t){var n,r;return o().w(function(e){for(;;)switch(e.n){case 0:if(t&&t.id){e.n=1;break}throw new Error("Invalid transaction information");case 1:if(t.open){e.n=2;break}return e.a(2);case 2:return e.n=3,fetch("".concat(this.baseUrl).concat(this.baseUrl.endsWith("/")?"":"/","tx/").concat(t.id,"/commit"),{method:"POST",headers:{Authorization:this.authHeader,"Content-Type":"application/json",Accept:"application/json","neo4j-cluster-affinity":t.clusterAffinity||""},body:JSON.stringify({})});case 3:if((n=e.v).ok){e.n=5;break}return e.n=4,n.text();case 4:throw r=e.v,new Error("Neo4j Commit Error: ".concat(n.status," ").concat(n.statusText," - ").concat(r));case 5:return e.n=6,n.json();case 6:e.v,t.open=!1;case 7:return e.a(2)}},e,this)})),function(e){return r.apply(this,arguments)})}],t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,i,a}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return y(l,"_invoke",function(n,r,i){var o,s,c,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,c=e,f.n=n,a}};function h(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,o=u[t],h=f.p,p=o[2];n>3?(i=p===r)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,c=p;(t=s<2?e:c)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,c)):f.n=c:f.v=c);try{if(l=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){o=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,o),!0),l}var a={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(y(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,y(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,y(d,"constructor",l),y(l,"constructor",c),c.displayName="GeneratorFunction",y(l,i,"GeneratorFunction"),y(d),y(d,i,"Generator"),y(d,r,function(){return this}),y(d,"toString",function(){return"[object Generator]"}),(g=function(){return{w:o,m:f}})()}function y(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}y=function(e,t,n,r){function o(t,n){y(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},y(e,t,n,r)}function v(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function b(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){v(o,r,i,a,s,"next",e)}function s(e){v(o,r,i,a,s,"throw",e)}a(void 0)})}}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}function E(e,t,n){return t=T(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_()?Reflect.construct(t,n||[],T(e).constructor):t.apply(e,n))}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_=function(){return!!e})()}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}var I=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=E(this,t,[e])).config=e,n.connectionManager=new d(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(t,e),n=t,r=[{key:"initialize",value:(h=b(g().m(function e(){return g().w(function(e){for(;;)switch(e.n){case 0:this.dbtype="neo4j";case 1:return e.a(2)}},e,this)})),function(){return h.apply(this,arguments)})},{key:"close",value:(f=b(g().m(function e(){return g().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),function(){return f.apply(this,arguments)})},{key:"startTransaction",value:(u=b(g().m(function e(){return g().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.connectionManager.startTransaction();case 1:return e.a(2,e.v)}},e,this)})),function(){return u.apply(this,arguments)})},{key:"endTransaction",value:(l=b(g().m(function e(){var t,n=arguments;return g().w(function(e){for(;;)switch(e.n){case 0:if(null==(t=n.length>0&&void 0!==n[0]?n[0]:null)){e.n=1;break}return e.n=1,this.connectionManager.commitTransaction(t);case 1:return e.a(2)}},e,this)})),function(){return l.apply(this,arguments)})},{key:"executeInTransaction",value:(c=b(g().m(function e(t,n){var r;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n(t);case 1:return r=e.v,e.n=2,this.connectionManager.commitTransaction(t);case 2:return e.a(2,r);case 3:throw e.p=3,e.v;case 4:return e.a(2)}},e,this,[[0,3]])})),function(e,t){return c.apply(this,arguments)})},{key:"executeRead",value:(s=b(g().m(function e(t,n){var r,i,o,a,s=arguments;return g().w(function(e){for(;;)switch(e.n){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:null,i=s.length>3&&void 0!==s[3]&&s[3],o=s.length>4&&void 0!==s[4]?s[4]:0,a=s.length>5&&void 0!==s[5]?s[5]:0,e.n=1,this.executeInternal(t,p(p({},n),{},{skip:o,limit:a}),r,i);case 1:return e.a(2,e.v)}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"executeWrite",value:(a=b(g().m(function e(t,n){var r,i=arguments;return g().w(function(e){for(;;)switch(e.n){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:null,e.n=1,this.executeInternal(t,n,r,!0);case 1:return e.a(2,e.v)}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"executeInternal",value:(o=b(g().m(function e(t,n,r,i){var o,a;return g().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!r||r.id){e.n=1;break}throw new Error("Invalid transaction information");case 1:return e.p=1,utils.debugLog("Executing Neo4j query:\n".concat(t)),e.n=2,this.connectionManager.executeQuery(t,n,r);case 2:o=e.v,e.n=4;break;case 3:throw e.p=3,e.v;case 4:if(a=this.normaliseData(o),!i){e.n=6;break}if(!Array.isArray(a)){e.n=5;break}if(!(a.length>0)){e.n=5;break}return e.a(2,a[0]);case 5:return e.a(2,a);case 6:if(!Array.isArray(a)){e.n=7;break}return e.a(2,a);case 7:if(null==a){e.n=8;break}return e.a(2,[a]);case 8:return e.a(2,[]);case 9:return e.a(2)}},e,this,[[1,3]])})),function(e,t,n,r){return o.apply(this,arguments)})},{key:"normaliseData",value:function(e){var t,n,r=this;return e.fields&&e.fields.length>0?(n=e.fields.map(function(e){var t=e.lastIndexOf(".");return-1===t?e:e.substring(t+1)}),e.values&&(t=0===e.values.length?null:1===e.values.length?this.normaliseRecord(e.values[0],n):e.values.map(function(e){return r.normaliseRecord(e,n)})),t):null}},{key:"normaliseRecord",value:function(e,t){var n,r={};for(n=0;n<e.length;n++)null==e[n]?r[t[n]]=null:this.isDate(e[n])?r[t[n]]=new Date(e[n]):r[t[n]]=e[n];return r}},{key:"isDate",value:function(e){return"string"==typeof e&&/^\d{4}-\d{2}-\d{2}.*$/.test(e)}}],r&&w(n.prototype,r),i&&w(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o,a,s,c,l,u,f,h}(r.M)},3469:(e,t,n)=>{"use strict";const r=n(1545),i=n(5332),o=n(3335),a=n(163),s=n(9449),c=n(5737),l=n(9032),u=n(2029),d=n(1104),f=n(7240),h=n(7286),p=n(7545),m=n(74),g=n(2468),y=n(1893),v=n(6665);e.exports={driver:{RemoteConnection:c.RemoteConnection,RemoteStrategy:c.RemoteStrategy,RemoteTraversal:c.RemoteTraversal,ResponseError:h,DriverRemoteConnection:f,Client:p,ResultSet:m,auth:{Authenticator:g,PlainTextSaslAuthenticator:y}},process:{Bytecode:l,EnumValue:r.EnumValue,P:r.P,TextP:r.TextP,Traversal:r.Traversal,TraversalSideEffects:r.TraversalSideEffects,TraversalStrategies:o.TraversalStrategies,TraversalStrategy:o.TraversalStrategy,Traverser:r.Traverser,barrier:r.barrier,cardinality:r.cardinality,column:r.column,direction:r.direction,dt:r.dt,merge:r.merge,operator:r.operator,order:r.order,pick:r.pick,pop:r.pop,scope:r.scope,t:r.t,GraphTraversal:i.GraphTraversal,GraphTraversalSource:i.GraphTraversalSource,statics:i.statics,Translator:u,traversal:v.traversal,AnonymousTraversalSource:v,withOptions:r.withOptions},structure:{io:s,Edge:a.Edge,Graph:a.Graph,Path:a.Path,Property:a.Property,Vertex:a.Vertex,VertexProperty:a.VertexProperty,toLong:d.toLong}}},3518:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2858))&&r.__esModule?r:{default:r},o=n(9910);let a,s,c=0,l=0;var u=function(e,t,n){let r=t&&n||0;const u=t||new Array(16);let d=(e=e||{}).node||a,f=void 0!==e.clockseq?e.clockseq:s;if(null==d||null==f){const t=e.random||(e.rng||i.default)();null==d&&(d=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==f&&(f=s=16383&(t[6]<<8|t[7]))}let h=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:l+1;const m=h-c+(p-l)/1e4;if(m<0&&void 0===e.clockseq&&(f=f+1&16383),(m<0||h>c)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=h,l=p,s=f,h+=122192928e5;const g=(1e4*(268435455&h)+p)%4294967296;u[r++]=g>>>24&255,u[r++]=g>>>16&255,u[r++]=g>>>8&255,u[r++]=255&g;const y=h/4294967296*1e4&268435455;u[r++]=y>>>8&255,u[r++]=255&y,u[r++]=y>>>24&15|16,u[r++]=y>>>16&255,u[r++]=f>>>8|128,u[r++]=255&f;for(let e=0;e<6;++e)u[r+e]=d[e];return t||(0,o.unsafeStringify)(u)};t.default=u},3676:e=>{var t;function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a={"en-US":{name:"English (US)",nativeName:"English (US)",flag:"",direction:"ltr",numberFormat:{decimal:".",group:",",currency:"USD",currencyDisplay:"$"},timeFormat:{system:"12h",hour12:!0,short:"h:mm A",medium:"h:mm:ss A",long:"h:mm:ss A z",meridiem:{ante:"AM",post:"PM"}},dateTimeFormat:{short:{pattern:"{date} {time}"},medium:{pattern:"{date} {time}"},long:{pattern:"{date} {time}"}},calendar:{firstDayOfWeek:0,weekendDays:[0,6],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},measurement:"imperial",translations:(t={loading:{text:"Loading content..."},entireTeam:{text:"Entire Team"},agent:{text:"Agent"},noContent:{text:"No content available"},loadAgentsFailed:{text:"Failed to load agents"},observation:{text:"Observation"},reflection:{text:"Reflection"},memory:{text:"Memory"},planning:{text:"Planning"},plan:{text:"Plan"},artifact:{text:"Artifact"},decision:{text:"Decision"},conversation:{text:"Conversation"},communication:{text:"Communication"},consensus:{text:"Consensus"},outgoing:{text:"Outgoing"},incoming:{text:"Incoming"},importance:{text:"Importance"},surprise:{text:"Surprise"},importanceScore:{text:"Importance score"},surpriseScore:{text:"Surprise score"},reasoning:{text:"Reasoning"},pddlDomain:{text:"PDDL Domain"},pddlProblem:{text:"PDDL Problem"},pddlPlan:{text:"PDDL Plan:"},unknownType:{text:"Unknown node type"},statistics:{text:"Statistics"},tokenUsage:{text:"Token Usage"},tokens:{text:"Tokens"},maxTokens:{text:"Max Tokens"},modelProvider:{text:"Model Provider"},modelName:{text:"Model Name"},responseTime:{text:"Response Time"},ragQueryTime:{text:"RAG Query Time"},totalApiCalls:{text:"Total API Calls"},totalResponseTime:{text:"Total Response Time"},totalTokenUsage:{text:"Total Token Usage"},viewDetails:{text:"View Details"},prompt:{text:"Prompt"},goal:{text:"Goal"},response:{text:"Response"},goalsPrompt:{text:"Goals Prompt"},triggerResponse:{text:"Trigger Response"},triggerReason:{text:"Trigger Reason"},triggerContext:{text:"Trigger Context"},goalsResponse:{text:"Goals Response"},consensusResult:{text:"Consensus Result"},consensusProtocol:{text:"Protocol"},consensusStatus:{text:"Status"},consensusTopic:{text:"Topic"},consensusMethod:{text:"Method"},consensusRounds:{text:"Rounds Completed"},consensusVotes:{text:"Vote Count"},consensusWeightedVotes:{text:"Weighted Votes"},consensusConfidence:{text:"Confidence Score"},decisionId:{text:"Decision ID"},planningId:{text:"Planning ID"},resultTimestamp:{text:"Result Timestamp"},lastModified:{text:"Last Modified"},consensusInProgress:{text:"Consensus in Progress"},consensusProcess:{text:"Consensus Process"},consensusDisclaimer:{text:"Note: Consensus data is only available during this session and will be lost when the page is refreshed."},noConsensusProcesses:{text:"No consensus processes found for this agent."},newestFirst:{text:"Newest First"},typeMessage:{text:"Type message to team"},sendMessage:{text:"Send message"},moreOptions:{text:"More options"},selectRecipient:{text:"Select recipient"},sendObservation:{text:"Send an Observation"},timeline:{text:"Timeline"},recentActivities:{text:"Recent Activities"},visualization:{text:"Visualization"},loadingMore:{text:"Loading more..."},loadMore:{text:"Load More"},noMoreMemories:{text:"No more memories to load"},retryLoading:{text:"Error loading memories. Click to retry."},loadingMoreMemories:{text:"Loading more memories..."},failedToLoadConversation:{text:"Failed to load conversation content"},newDataAvailable:{text:"New Data Available"},newDataAvailableTitle:{text:"New data available  click to refresh"},newMemoryTooltip:{text:"{count} new {memoryType}"},memoryCountTooltip:{text:"{count} {memoryType}"},memoryTypesSingular:{text:"memory"},memoryTypesPlural:{text:"memories"},today:{text:"Today"},yesterday:{text:"Yesterday"},lastUpdated:{text:"Last Updated"},unknownDate:{text:"Unknown date"},newMemories:{text:"new"},memoryCount:{text:"{count} memories"},noMemoriesFound:{text:"No memories found for this agent"},agentPrefix:{text:"Agent"},expanded:{text:"Expanded"},collapsed:{text:"Collapsed"},loadingError:{text:"Error loading content"},retryError:{text:"Click to retry"},visualizationError:{text:"Failed to load visualization"},connectionError:{text:"Connection error. Please check your network"},noAgentsFound:{text:"No agents found"},noCommunications:{text:"No communications yet"},noCommunicationData:{text:"No communication data available"},agents:{text:"agents"},connectedAgents:{text:"Connected Agents"},recentCommunications:{text:"Recent Communications"},outgoingMessage:{text:"Outgoing Message"},incomingMessage:{text:"Incoming Message"},to:{text:"To"},from:{text:"From"},everyone:{text:"Everyone"}},o(o(o(o(o(o(o(o(o(o(t,"decisionId",{text:"Decision ID"}),"messageType",{text:"Message Type"}),"conversationTitle",{text:"Title"}),"conversationAuthor",{text:"Author"}),"user",{text:"User"}),"assistant",{text:"Assistant"}),"initializingMessage",{text:"Message is currently initializing. Please wait..."}),"noConversationContent",{text:"No conversation content available"}),"failedToLoadConversation",{text:"Failed to load conversation content"}),"unknown",{text:"Unknown"}),o(o(o(o(o(o(o(o(o(o(t,"notAvailable",{text:"N/A"}),"protocol",{text:"Protocol"}),"status",{text:"Status"}),"topic",{text:"Topic"}),"method",{text:"Method"}),"rounds",{text:"Rounds"}),"noConsensusResult",{text:"No consensus result available"}),"errorLoadingMemoriesRetry",{text:"Error loading memories. Click to retry."}),"errorLoadingConversation",{text:"Error loading conversation"}),"activitiesLoadingError",{text:"Failed to load activities"}),o(o(o(o(o(o(o(o(t,"agentLoadingError",{text:"Failed to load agents"}),"expandCard",{text:"Expand agent card"}),"collapseCard",{text:"Collapse agent card"}),"toggleMemoryGroup",{text:"Toggle memory group"}),"toggleMemoryDetails",{text:"Toggle memory details"}),"toggleTimelineEntry",{text:"Toggle timeline entry"}),"simulateCommunication",{text:"Simulate Communication"}),"simulateCommunicationTitle",{text:"Simulate agent communication for demonstration"})),errors:{system:{initializationError:{text:"Initialization error: {error}",severity:"error"},initializationFailed:{text:"Failed to initialize application",severity:"error"},unexpectedError:{text:"An unexpected error occurred",severity:"error"},somethingBroke:{text:"Something broke!",severity:"error"}},network:{neo4jQueryError:{text:"Database error occurred while querying. Please try again.",severity:"error"},databaseError:{text:"Database connection error. Please try again.",severity:"error"},neo4jError:{text:"Neo4j database error. Please try again.",severity:"error"},fetchAgentsError:{text:"Error retrieving agents. Please try again.",severity:"error"},agentsError:{text:"Failed to load agents. Please try again.",severity:"error"},timelineLoadError:{text:"Failed to load timeline data. Please try again.",severity:"error"},timelineMemoriesLoadError:{text:"Failed to load timeline memories. Please try again.",severity:"error"},activitiesLoadError:{text:"Failed to load activities data. Please try again.",severity:"error"},sendFailed:{text:"Failed to send message. Please try again.",severity:"error"},mqttError:{text:"Message delivery error. Please try again.",severity:"error"}},validation:{messageEmpty:{text:"Message cannot be empty",severity:"warning"}},application:{dashboardUpdateError:{text:"Error updating dashboard: {error}",severity:"error"},loadAgentsFailed:{text:"Failed to load agents",severity:"error"},noContentError:{text:"No content available",severity:"warning"},operationInProgress:{text:"Operation already in progress",severity:"warning"},loadTimelineFailed:{text:"Failed to load timeline",severity:"error"},loadTimelineMemoriesFailed:{text:"Failed to load more memories",severity:"error"},loadActivitiesFailed:{text:"Failed to load activities",severity:"error"}}}},"fr-FR":{name:"Franais",nativeName:"Franais",flag:"",direction:"ltr",numberFormat:{decimal:",",group:" ",currency:"EUR",currencyDisplay:""},timeFormat:{system:"24h",hour12:!1,short:"HH:mm",medium:"HH:mm:ss",long:"HH:mm:ss z",meridiem:{ante:"matin",post:"aprs-midi"}},dateTimeFormat:{short:{pattern:"{date} {time}"},medium:{pattern:"{date} {time}"},long:{pattern:"{date} {time}"}},calendar:{firstDayOfWeek:1,weekendDays:[0,6],months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortMonths:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."]},measurement:"metric",translations:{loading:{text:"Chargement du contenu..."},entireTeam:{text:"quipe entire"},agent:{text:"Agent"},idle:{text:"Inactif"},noContent:{text:"Aucun contenu disponible"},loadAgentsFailed:{text:"chec du chargement des agents"},observation:{text:"Observation"},reflection:{text:"Rflexion"},memory:{text:"Mmoire"},planning:{text:"Planification"},plan:{text:"Plan"},artifact:{text:"Artfact"},decision:{text:"Dcision"},conversation:{text:"Conversation"},communication:{text:"Communication"},consensus:{text:"Consensus"},outgoing:{text:"Sortant"},incoming:{text:"Entrant"},importance:{text:"Importance"},surprise:{text:"Surprise"},importanceScore:{text:"Score d'importance"},surpriseScore:{text:"Score de surprise"},goal:{text:"Objectif"},reasoning:{text:"Raisonnement"},pddlDomain:{text:"Domaine PDDL"},pddlProblem:{text:"Problme PDDL"},pddlPlan:{text:"Plan PDDL"},unknownType:{text:"Type de nud inconnu"},consensusDecision:{text:"Dcision de consensus"},participatingAgents:{text:"Agents participants"},consensusType:{text:"Type de consensus"},planChangeTrigger:{text:"Dclencheur de changement de plan"},agreementStatus:{text:"Statut d'accord"},votingDetails:{text:"Dtails du vote"},dissentingOpinions:{text:"Opinions dissidentes"},finalOutcome:{text:"Rsultat final"},nextActions:{text:"Prochaines actions"},typeMessage:{text:"Tapez un message pour l'quipe"},sendMessage:{text:"Envoyer le message"},moreOptions:{text:"Plus d'options"},selectRecipient:{text:"Slectionner le destinataire"},sendObservation:{text:"Envoyer une observation"},timeline:{text:"Chronologie"},recentActivities:{text:"Activits rcentes"},visualization:{text:"Visualisation"},loadingMore:{text:"Chargement..."},loadMore:{text:"Charger plus"},noMoreMemories:{text:"Plus de mmoires  charger"},retryLoading:{text:"Erreur de chargement. Cliquez pour ressayer."},loadingMoreMemories:{text:"Chargement de plus de mmoires..."},today:{text:"Aujourd'hui"},yesterday:{text:"Hier"},lastUpdated:{text:"Dernire mise  jour"},unknownDate:{text:"Date inconnue"},newMemories:{text:"nouveau"},memoryCount:{text:"{count} mmoires"},noMemoriesFound:{text:"Aucune mmoire trouve pour cet agent"},agentPrefix:{text:"Agent"},expanded:{text:"Dvelopp"},collapsed:{text:"Rduit"},loadingError:{text:"Erreur de chargement du contenu"},retryError:{text:"Cliquez pour ressayer"},visualizationError:{text:"chec du chargement de la visualisation"},connectionError:{text:"Erreur de connexion. Veuillez vrifier votre rseau"},noAgentsFound:{text:"Aucun agent trouv"},noCommunications:{text:"Aucune communication pour l'instant"},noCommunicationData:{text:"Aucune donne de communication disponible"},agents:{text:"agents"},connectedAgents:{text:"Agents connects"},recentCommunications:{text:"Communications rcentes"},outgoingMessage:{text:"Message sortant"},incomingMessage:{text:"Message entrant"},to:{text:""},from:{text:"De"},everyone:{text:"Tout le monde"},messageType:{text:"Type de message"},conversationTitle:{text:"Titre"},conversationAuthor:{text:"Auteur"},user:{text:"Utilisateur"},assistant:{text:"Assistant"},initializingMessage:{text:"Le message est en cours d'initialisation. Veuillez patienter..."},noConversationContent:{text:"Aucun contenu de conversation disponible"},unknown:{text:"Inconnu"},notAvailable:{text:"N/D"},protocol:{text:"Protocole"},status:{text:"Statut"},topic:{text:"Sujet"},method:{text:"Mthode"},rounds:{text:"Tours"},noConsensusResult:{text:"Aucun rsultat de consensus disponible"},statistics:{text:"Statistiques"},tokenUsage:{text:"Utilisation des jetons"},tokens:{text:"Jetons"},maxTokens:{text:"Jetons maximum"},modelProvider:{text:"Fournisseur de modle"},modelName:{text:"Nom du modle"},responseTime:{text:"Temps de rponse"},ragQueryTime:{text:"Temps de requte RAG"},totalApiCalls:{text:"Total des appels API"},totalResponseTime:{text:"Temps de rponse total"},totalTokenUsage:{text:"Utilisation totale des jetons"},prompt:{text:"Invite"},response:{text:"Rponse"},goalsPrompt:{text:"Invite d'objectifs"},triggerResponse:{text:"Rponse de dclenchement"},triggerReason:{text:"Raison de dclenchement"},triggerContext:{text:"Contexte de dclenchement"},goalsResponse:{text:"Rponse d'objectifs"},consensusResult:{text:"Rsultat du consensus"},errorLoadingMemoriesRetry:{text:"Erreur de chargement des mmoires. Cliquez pour ressayer."},errorLoadingConversation:{text:"Erreur de chargement de la conversation"},activitiesLoadingError:{text:"chec du chargement des activits"},agentLoadingError:{text:"chec du chargement des agents"},failedToLoadConversation:{text:"chec du chargement du contenu de la conversation"},newDataAvailable:{text:"Nouvelles donnes disponibles"},newDataAvailableTitle:{text:"Nouvelles donnes disponibles  cliquez pour actualiser"},newMemoryTooltip:{text:"{count} nouveau {memoryType}"},memoryCountTooltip:{text:"{count} {memoryType}"},memoryTypesSingular:{text:"mmoire"},memoryTypesPlural:{text:"mmoires"},expandCard:{text:"Dvelopper la carte de l'agent"},collapseCard:{text:"Rduire la carte de l'agent"},toggleMemoryGroup:{text:"Basculer le groupe de mmoires"},toggleMemoryDetails:{text:"Basculer les dtails de la mmoire"},toggleTimelineEntry:{text:"Basculer l'entre de la chronologie"}},errors:{system:{initializationError:{text:"Erreur d'initialisation: {error}",severity:"error"},somethingBroke:{text:"Quelque chose s'est cass!",severity:"error"}},network:{neo4jQueryError:{text:"Une erreur de base de donnes s'est produite lors de la requte. Veuillez ressayer.",severity:"error"},fetchAgentsError:{text:"Erreur lors de la rcupration des agents. Veuillez ressayer.",severity:"error"}},application:{dashboardUpdateError:{text:"Erreur de mise  jour du tableau de bord: {error}",severity:"error"},loadAgentsFailed:{text:"chec du chargement des agents",severity:"error"},noContentError:{text:"Aucun contenu disponible",severity:"warning"}}}},"ar-SA":{name:"",nativeName:"",flag:"",direction:"rtl",numberFormat:{decimal:"",group:"",currency:"SAR",currencyDisplay:".."},timeFormat:{hour12:!0,short:"h:mm a",medium:"h:mm:ss a",long:"h:mm:ss a z",meridiem:{ante:"",post:""}},dateTimeFormat:{short:{pattern:"{date} {time}"},medium:{pattern:"{date} {time}"},long:{pattern:"{date} {time}"}},calendar:{firstDayOfWeek:6,weekendDays:[5,6],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""],days:["","","","","","",""],shortDays:["","","","","","",""]},measurement:"metric",translations:{loading:{text:"  ..."},entireTeam:{text:" "},agent:{text:""},idle:{text:""},noContent:{text:"   "},loadAgentsFailed:{text:"  "},observation:{text:""},reflection:{text:""},memory:{text:""},planning:{text:""},plan:{text:""},artifact:{text:""},decision:{text:""},conversation:{text:""},communication:{text:""},consensus:{text:""},outgoing:{text:""},incoming:{text:""},importance:{text:""},surprise:{text:""},importanceScore:{text:" "},surpriseScore:{text:" "},goal:{text:""},reasoning:{text:""},pddlDomain:{text:" PDDL"},pddlProblem:{text:" PDDL"},pddlPlan:{text:" PDDL"},unknownType:{text:"   "},consensusDecision:{text:" "},participatingAgents:{text:" "},consensusType:{text:" "},planChangeTrigger:{text:"  "},agreementStatus:{text:" "},votingDetails:{text:" "},dissentingOpinions:{text:" "},finalOutcome:{text:" "},nextActions:{text:" "},typeMessage:{text:"  "},sendMessage:{text:" "},moreOptions:{text:" "},selectRecipient:{text:" "},sendObservation:{text:" "},timeline:{text:" "},recentActivities:{text:" "},visualization:{text:" "},loadingMore:{text:" ..."},loadMore:{text:" "},noMoreMemories:{text:"     "},retryLoading:{text:"  .    ."},loadingMoreMemories:{text:"    ..."},today:{text:""},yesterday:{text:""},lastUpdated:{text:" "},unknownDate:{text:"  "},newMemories:{text:""},memoryCount:{text:"{count} "},noMemoriesFound:{text:"      "},agentPrefix:{text:""},expanded:{text:""},collapsed:{text:""},loadingError:{text:"   "},retryError:{text:"   "},visualizationError:{text:"    "},connectionError:{text:"  .    "},noAgentsFound:{text:"    "},noCommunications:{text:"    "},noCommunicationData:{text:"    "},agents:{text:""},connectedAgents:{text:" "},recentCommunications:{text:" "},outgoingMessage:{text:" "},incomingMessage:{text:" "},to:{text:""},from:{text:""},everyone:{text:""},messageType:{text:" "},conversationTitle:{text:""},conversationAuthor:{text:""},user:{text:""},assistant:{text:""},initializingMessage:{text:"   .  ..."},noConversationContent:{text:"    "},unknown:{text:" "},notAvailable:{text:"/"},protocol:{text:""},status:{text:""},topic:{text:""},method:{text:""},rounds:{text:""},noConsensusResult:{text:"    "},statistics:{text:""},tokenUsage:{text:" "},tokens:{text:""},maxTokens:{text:"  "},modelProvider:{text:" "},modelName:{text:" "},responseTime:{text:" "},ragQueryTime:{text:"  RAG"},totalApiCalls:{text:"    "},totalResponseTime:{text:"  "},totalTokenUsage:{text:"  "},prompt:{text:""},response:{text:""},goalsPrompt:{text:" "},triggerResponse:{text:" "},triggerReason:{text:" "},triggerContext:{text:" "},goalsResponse:{text:" "},consensusResult:{text:" "},errorLoadingMemoriesRetry:{text:"   .    ."},errorLoadingConversation:{text:"   "},activitiesLoadingError:{text:"   "},agentLoadingError:{text:"   "},failedToLoadConversation:{text:"    "},newDataAvailable:{text:"  "},newDataAvailableTitle:{text:"     "},newMemoryTooltip:{text:"{count} {memoryType} "},memoryCountTooltip:{text:"{count} {memoryType}"},memoryTypesSingular:{text:""},memoryTypesPlural:{text:""},expandCard:{text:"  "},collapseCard:{text:"  "},toggleMemoryGroup:{text:"  "},toggleMemoryDetails:{text:"  "},toggleTimelineEntry:{text:"   "}},errors:{system:{initializationError:{text:"  : {error}",severity:"error"},somethingBroke:{text:"  !",severity:"error"}},network:{neo4jQueryError:{text:"      .    .",severity:"error"},fetchAgentsError:{text:"   .    .",severity:"error"}},application:{dashboardUpdateError:{text:"    : {error}",severity:"error"},loadAgentsFailed:{text:"  ",severity:"error"},noContentError:{text:"   ",severity:"warning"}}}}};a["en-UK"]=i(i({},a["en-US"]),{},{name:"English (UK)",nativeName:"English (UK)",flag:"",numberFormat:i(i({},a["en-US"].numberFormat),{},{currency:"GBP",currencyDisplay:""}),timeFormat:{system:"24h",hour12:!1,short:"HH:mm",medium:"HH:mm:ss",long:"HH:mm:ss z",meridiem:{ante:"",post:""}},dateTimeFormat:{short:{pattern:"{date} {time}"},medium:{pattern:"{date} {time}"},long:{pattern:"{date} {time}"}},translations:i(i({},a["en-US"].translations),{},{visualization:{text:"Visualisation"},artifact:{text:"Artefact"}}),errors:{system:{initializationError:{text:"Initialisation error: {error}",severity:"error"},somethingBroke:{text:"Something broke!",severity:"error"}}}}),e.exports&&(e.exports=a),window.localeConfigs=a},3920:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.PROPERTY]=this}canBeUsedFor(e){return e instanceof i.Property}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.PROPERTY,1]):r.concat([this.ioc.stringSerializer.serialize("",!1),this.ioc.unspecifiedNullSerializer.serialize(null),this.ioc.unspecifiedNullSerializer.serialize(null)]);const n=[];return t&&n.push(r.from([this.ioc.DataType.PROPERTY,0])),n.push(this.ioc.stringSerializer.serialize(e.key,!1)),n.push(this.ioc.anySerializer.serialize(e.value)),n.push(this.ioc.unspecifiedNullSerializer.serialize(null)),r.concat(n)}deserialize(e,t=!0){let n=0,o=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(n++,e!==this.ioc.DataType.PROPERTY)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,c,l,u;try{({v:a,len:s}=this.ioc.stringSerializer.deserialize(o,!1)),n+=s}catch(e){throw e.message="{key}: "+e.message,e}o=o.slice(s);try{({v:c,len:l}=this.ioc.anySerializer.deserialize(o)),n+=l}catch(e){throw e.message="{value}: "+e.message,e}o=o.slice(l);try{({len:u}=this.ioc.unspecifiedNullSerializer.deserialize(o)),n+=u}catch(e){throw e.message="{parent}: "+e.message,e}o=o.slice(u);return{v:new i.Property(a,c),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},3933:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(1545);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.P]=this}canBeUsedFor(e){return e instanceof i.P}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.P,1]);const e=[0,0,0,0],n=[0,0,0,0];return r.from([...e,...n])}const n=[];let i;return t&&n.push(r.from([this.ioc.DataType.P,0])),n.push(this.ioc.stringSerializer.serialize(e.operator,!1)),i=void 0===e.other||null===e.other?Array.isArray(e.value)?e.value:[e.value]:[e.value,e.other],n.push(this.ioc.listSerializer.serialize(i,!1)),r.concat(n)}deserialize(e,t=!0){let n=0,o=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(n++,e!==this.ioc.DataType.P)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,c,l,u;try{({v:a,len:s}=this.ioc.stringSerializer.deserialize(o,!1)),n+=s}catch(e){throw e.message="{name}: "+e.message,e}o=o.slice(s);try{({v:c,len:l}=this.ioc.listSerializer.deserialize(o,!1)),n+=l}catch(e){throw e.message="{values}: "+e.message,e}if(o=o.slice(l),c.length<1)return{v:new i.P(""),len:n};const d=i.P[a];return u="function"==typeof d?d(...c):new i.P(a,...c),{v:u,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},4074:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(228),o=n(9198),a=n(1104),{DeferredPromise:s}=a,c=n(9449),{graphBinaryReader:l,graphBinaryWriter:u}=n(1421),d=n(74),f=n(7286),h=204,p=206,m=407,g="application/vnd.gremlin-v2.0+json",y="application/vnd.graphbinary-v1.0",v="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}";e.exports=class extends i{constructor(e,t){super(),this.url=e,this.options=t=t||{},this.mimeType=t.mimeType||"application/vnd.gremlin-v3.0+json",this._responseHandlers={},this._reader=t.reader||this.#e(this.mimeType),this._writer=t.writer||this.#t(this.mimeType),this._openPromise=null,this._openCallback=null,this._closePromise=null,this._closeCallback=null,this._header=String.fromCharCode(this.mimeType.length)+this.mimeType,this._header_buf=r.from(this._header),this.isOpen=!1,this.traversalSource=t.traversalSource||"g",this._authenticator=t.authenticator,this._enableUserAgentOnConnect=!1!==t.enableUserAgentOnConnect,this._enableCompression=this.options.enableCompression||!1}async open(){if(this.isOpen)return;if(this._openPromise)return this._openPromise;this._openPromise=s(),this.emit("log","ws open");let e=this.options.headers;if(this._enableUserAgentOnConnect){e||(e=[]);void 0!==await a.getUserAgent()&&(e[a.getUserAgentHeader()]=await a.getUserAgent())}const t=new Set(["headers","ca","cert","pfx","rejectUnauthorized","agent","perMessageDeflate"]),r=!Object.entries(this.options).some(([e,n])=>t.has(e)&&![null,void 0].includes(n))&&globalThis.WebSocket,i=r||(await n.e(591).then(n.t.bind(n,1591,23))).default;return this._ws=new i(this.url,r?void 0:{headers:e,ca:this.options.ca,cert:this.options.cert,pfx:this.options.pfx,rejectUnauthorized:this.options.rejectUnauthorized,agent:this.options.agent,perMessageDeflate:this._enableCompression}),"binaryType"in this._ws&&(this._ws.binaryType="arraybuffer"),this._ws.addEventListener("open",this.#n),this._ws.addEventListener("error",this.#r),this._ws.on("unexpected-response",this.#i),this._ws.addEventListener("message",this.#o),this._ws.addEventListener("close",this.#a),await this._openPromise}submit(e,t,n,i){const o=(i||a.getUuid()).toLowerCase();if(!o.match(v))throw new Error('Provided requestId "'+o+'" is not a valid UUID.');return this.open().then(()=>new Promise((i,s)=>{"authentication"!==t&&(this._responseHandlers[o]={callback:(e,t)=>e?s(e):i(t),result:null});const c={requestId:o,op:t||"bytecode",processor:e||"eval"===t?e:"traversal",args:n||{}},l=this._writer.writeRequest(c),u=a.toArrayBuffer(r.concat([this._header_buf,l]));this._ws.send(u)}))}stream(e,t,n,i){const s=(i||a.getUuid()).toLowerCase();if(!s.match(v))throw new Error('Provided requestId "'+s+'" is not a valid UUID.');const c=new o.Readable({objectMode:!0,read(){}});return this._responseHandlers[s]={callback:e=>e?c.destroy(e):c.push(null),result:c},this.open().then(()=>{const i={requestId:s,op:t||"bytecode",processor:e||"eval"===t?e:"traversal",args:n||{}},o=this._writer.writeRequest(i),c=a.toArrayBuffer(r.concat([this._header_buf,o]));this._ws.send(c)}).catch(e=>c.destroy(e)),c}#e(e){return e===y?l:e===g?new c.GraphSON2Reader:new c.GraphSONReader}#t(e){return e===y?u:e===g?new c.GraphSON2Writer:new c.GraphSONWriter}#n=()=>{this._openPromise.resolve(),this.isOpen=!0};#i=async(e,t)=>{const n=await new Promise((e,n)=>{const i=[];t.on("data",e=>{i.push(e instanceof r?e:r.from(e))}),t.on("end",()=>{e(i.length?r.concat(i):null)}),t.on("error",n)}),i=`Unexpected server response code ${t.statusCode}`,o=n?`${i} with body:\n${n.toString()}`:i,a=new Error(o);this.#r({error:a,message:o,type:"unexpected-response",target:this._ws})};#r=({error:e})=>{this._openPromise.reject(e),this.emit("log",`ws error ${e}`),this.#s(e),this.emit("socketError",e)};#a=({code:e,message:t})=>{this.emit("log",`ws close code=${e} message=${t}`),this.#s(),this._closeCallback&&this._closeCallback(),this.emit("close",e,t)};#o=({data:e})=>{const t=e instanceof ArrayBuffer?r.from(e):e,n=this._reader.readResponse(t);if(null===n.requestId||void 0===n.requestId)return void Object.keys(this._responseHandlers).forEach(e=>{const t=this._responseHandlers[e];return this.#c(e),void 0!==n.status&&n.status.message?t.callback(new f(`Server error (no request information): ${n.status.message} (${n.status.code})`,n.status)):t.callback(new f(`Server error (no request information): ${JSON.stringify(n)}`,n.status))});n.requestId=n.requestId.toLowerCase();const i=this._responseHandlers[n.requestId];if(!i)return;if(n.status.code===m&&this._authenticator)return void this._authenticator.evaluateChallenge(n.result.data).then(e=>this.submit(void 0,"authentication",e,n.requestId)).catch(i.callback);if(n.status.code>=400)return this.#c(n.requestId),i.callback(new f(`Server error: ${n.status.message} (${n.status.code})`,n.status));const s=i.result instanceof o.Readable;switch(n.status.code){case h:return this.#c(n.requestId),s?(i.result.push(new d(a.emptyArray,n.status.attributes)),i.callback(null)):i.callback(null,new d(a.emptyArray,n.status.attributes));case p:if(s){i.result.push(new d(n.result.data,n.status.attributes));break}i.result=i.result||[],i.result.push.apply(i.result,n.result.data);break;default:return s?(i.result.push(new d(n.result.data,n.status.attributes)),i.callback(null)):(i.result?i.result.push.apply(i.result,n.result.data):i.result=n.result.data,this.#c(n.requestId),i.callback(null,new d(i.result,n.status.attributes)))}};#s(e){Object.keys(this._responseHandlers).forEach(t=>{const n=this._responseHandlers[t];if(n.result instanceof o.Readable)n.callback(null);else{const t=e||new Error("Connection has been closed.");n.callback(t)}}),this._ws.removeEventListener("open",this.#n),this._ws.removeEventListener("error",this.#r),this._ws.off("unexpected-response",this.#i),this._ws.removeEventListener("message",this.#o),this._ws.removeEventListener("close",this.#a),this._openPromise=null,this._closePromise=null,this.isOpen=!1}#c(e){delete this._responseHandlers[e]}close(){return!1===this.isOpen?Promise.resolve():(this._closePromise||(this._closePromise=new Promise(e=>{this._closeCallback=e,this._ws.close()})),this._closePromise)}}},4134:e=>{"use strict";class t extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let n=0;n<e.length;n++)t+=`    ${e[n].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:t,ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,n)=>e.slice(t,n),Error,FunctionPrototypeCall:(e,t,...n)=>e.call(t,...n),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,n)=>Object.defineProperty(e,t,n),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,n)=>e.then(t,n),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,n)=>e.slice(t,n),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,n)=>e.set(t,n),Boolean,Uint8Array}},4147:(e,t,n)=>{"use strict";const{SymbolDispose:r}=n(4134),{AbortError:i,codes:o}=n(6371),{isNodeStream:a,isWebStream:s,kControllerErrorFunction:c}=n(6115),l=n(6238),{ERR_INVALID_ARG_TYPE:u}=o;let d;e.exports.addAbortSignal=function(t,n){if(((e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new u(t,"AbortSignal",e)})(t,"signal"),!a(n)&&!s(n))throw new u("stream",["ReadableStream","WritableStream","Stream"],n);return e.exports.addAbortSignalNoValidate(t,n)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;const o=a(t)?()=>{t.destroy(new i(void 0,{cause:e.reason}))}:()=>{t[c](new i(void 0,{cause:e.reason}))};if(e.aborted)o();else{d=d||n(7760).addAbortListener;const i=d(e,o);l(t,i[r])}return t}},4194:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.UUID]=this}canBeUsedFor(e){}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.UUID,1]):r.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);const n=String(e).replace(/^urn:uuid:/,"").replace(/[{}-]/g,""),i=[];t&&i.push(r.from([this.ioc.DataType.UUID,0]));const o=r.alloc(16,0);for(let e=0;e<16&&2*e<n.length;e++)o[e]=parseInt(n.slice(2*e,2*e+2),16);return i.push(o),r.concat(i)}deserialize(e,t=!0,n=!1){let i=0,o=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(i++,e!==this.ioc.DataType.UUID)throw new Error("unexpected {type_code}");o=o.slice(1)}if(t||n){if(o.length<1)throw new Error("{value_flag} is missing");const e=o.readUInt8();if(i++,1===e)return{v:null,len:i};if(0!==e)throw new Error("unexpected {value_flag}");o=o.slice(1)}if(o.length<16)throw new Error("unexpected {value} length");i+=16;return{v:o.slice(0,4).toString("hex")+"-"+o.slice(4,6).toString("hex")+"-"+o.slice(6,8).toString("hex")+"-"+o.slice(8,10).toString("hex")+"-"+o.slice(10,16).toString("hex"),len:i}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},4253:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(1545);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.TRAVERSER]=this}canBeUsedFor(e){return e instanceof i.Traverser}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.TRAVERSER,1]);const e=[0,0,0,0,0,0,0,1],n=[254,1];return r.from([...e,...n])}const n=[];return t&&n.push(r.from([this.ioc.DataType.TRAVERSER,0])),n.push(this.ioc.longSerializer.serialize(e.bulk,!1)),n.push(this.ioc.anySerializer.serialize(e.object)),r.concat(n)}deserialize(e,t=!0){let n=0,o=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(n++,e!==this.ioc.DataType.TRAVERSER)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,c,l;try{({v:a,len:s}=this.ioc.longSerializer.deserialize(o,!1)),n+=s}catch(e){throw e.message="{bulk}: "+e.message,e}if(a<0)throw new Error("{bulk} is less than zero");o=o.slice(s);try{({v:c,len:l}=this.ioc.anySerializer.deserialize(o)),n+=l}catch(e){throw e.message="{value}: "+e.message,e}o=o.slice(l);return{v:new i.Traverser(c,a),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},4259:(e,t,n)=>{"use strict";const{ArrayIsArray:r,ObjectSetPrototypeOf:i}=n(4134),{EventEmitter:o}=n(7007);function a(e){o.call(this,e)}function s(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}i(a.prototype,o.prototype),i(a,o),a.prototype.pipe=function(e,t){const n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",c),n.on("close",l));let a=!1;function c(){a||(a=!0,e.end())}function l(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){d(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function d(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",c),n.removeListener("close",l),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return s(n,"error",u),s(e,"error",u),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e},e.exports={Stream:a,prependListener:s}},4423:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Neo4jDatabaseService:()=>U});var r=n(1982);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(i(e)+" is not iterable")}function l(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return u(l,"_invoke",function(n,r,i){var o,s,c,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,c=e,f.n=n,a}};function h(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,o=u[t],h=f.p,p=o[2];n>3?(i=p===r)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,c=p;(t=s<2?e:c)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,c)):f.n=c:f.v=c);try{if(l=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){o=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,o),!0),l}var a={};function s(){}function c(){}function d(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(u(t={},r,function(){return this}),t),h=d.prototype=s.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e}return c.prototype=d,u(h,"constructor",d),u(d,"constructor",c),c.displayName="GeneratorFunction",u(d,i,"GeneratorFunction"),u(h),u(h,i,"Generator"),u(h,r,function(){return this}),u(h,"toString",function(){return"[object Generator]"}),(l=function(){return{w:o,m:p}})()}function u(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}u=function(e,t,n,r){function o(t,n){u(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},u(e,t,n,r)}function d(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){d(o,r,i,a,s,"next",e)}function s(e){d(o,r,i,a,s,"throw",e)}a(void 0)})}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var m={READ:"READ",WRITE:"WRITE"},g=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.uri||!t.username||!t.password)throw new Error("Invalid Neo4j configuration");this.config=t,this.driver=null,this.isInitialized=!1,this.connectionRetryCount=0,this.maxRetries=3,this.poolConfig={maxConnectionPoolSize:1,connectionTimeout:15e3,maxTransactionRetryTime:15e3,connectionAcquisitionTimeout:15e3,maxConnectionLifetime:36e5,idleTimeoutMillis:18e5}},t=[{key:"isRetryableError",value:function(e){return["ServiceUnavailable","SessionExpired","TransientError","Neo.TransientError"].some(function(t){var n,r;return(null===(n=e.code)||void 0===n?void 0:n.includes(t))||(null===(r=e.message)||void 0===r?void 0:r.includes(t))})}},{key:"checkConnections",value:(p=f(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.driver){e.n=1;break}return debugLog("No driver found during health check - will initialize on next query"),this.isInitialized=!1,e.a(2);case 1:return e.p=1,e.n=2,this.driver.verifyConnectivity();case 2:utils.debugLog("Connection health check passed"),e.n=4;break;case 3:return e.p=3,t=e.v,utils.debugLog("Connection health check failed:",t),this.isInitialized=!1,e.n=4,this.cleanup();case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return p.apply(this,arguments)})},{key:"withRetry",value:(d=f(l().m(function e(t){var n,r,i,o,a=this,s=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:n=s.length>1&&void 0!==s[1]?s[1]:3,r=l().m(function e(){var r,i,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t();case 1:return i=e.v,e.a(2,{v:i});case 2:if(e.p=2,s=e.v,!(a.isRetryableError(s)&&o<n)){e.n=4;break}return r=Math.min(100*Math.pow(2,o),2e3),e.n=3,new Promise(function(e){return setTimeout(e,r)});case 3:return a.isInitialized=!1,e.a(2,0);case 4:throw s;case 5:return e.a(2)}},e,null,[[0,2]])}),o=1;case 1:if(!(o<=n)){e.n=5;break}return e.d(c(r()),2);case 2:if(0!==(i=e.v)){e.n=3;break}return e.a(3,4);case 3:if(!i){e.n=4;break}return e.a(2,i.v);case 4:o++,e.n=1;break;case 5:return e.a(2)}},e)})),function(e){return d.apply(this,arguments)})},{key:"executeQuery",value:(u=f(l().m(function e(t){var n,r,i=this,o=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},r=o.length>2&&void 0!==o[2]?o[2]:m.READ,utils.debugLog("Executing Neo4j query:",t,"Params:",n,"Mode:",r),this.isInitialized){e.n=1;break}return utils.debugLog("Connection not initialized or lost - reinitializing"),e.n=1,this.initialize();case 1:return e.a(2,this.withRetry(f(l().m(function e(){var o,a;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=i.driver.session({database:i.config.database,defaultAccessMode:r===m.WRITE?neo4j.session.WRITE:neo4j.session.READ}),e.p=1,r!==m.WRITE){e.n=3;break}return e.n=2,o.writeTransaction(function(){var e=f(l().m(function e(r){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.run(t,n);case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:a=e.v,e.n=5;break;case 3:return e.n=4,o.readTransaction(function(){var e=f(l().m(function e(r){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.run(t,n);case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:a=e.v;case 5:return e.a(2,a);case 6:return e.p=6,e.n=7,o.close().catch(function(e){});case 7:return e.f(6);case 8:return e.a(2)}},e,null,[[1,,6,8]])}))))}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"read",value:(s=f(l().m(function e(t){var n,r=arguments;return l().w(function(e){for(;;)if(0===e.n)return n=r.length>1&&void 0!==r[1]?r[1]:{},e.a(2,this.executeQuery(t,n,m.READ))},e,this)})),function(e){return s.apply(this,arguments)})},{key:"write",value:(o=f(l().m(function e(t){var n,r=arguments;return l().w(function(e){for(;;)if(0===e.n)return n=r.length>1&&void 0!==r[1]?r[1]:{},e.a(2,this.executeQuery(t,n,m.WRITE))},e,this)})),function(e){return o.apply(this,arguments)})},{key:"initialize",value:(i=f(l().m(function e(){var t,n,r,i=this;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!this.driver){e.n=1;break}return e.n=1,this.cleanup();case 1:return t=this.config.uri.startsWith("neo4j+s://")||this.config.uri.includes("?trust=")||this.config.uri.includes("&trust="),n=a({},this.poolConfig),t&&(delete n.encrypted,delete n.trust,delete n.trustStrategy),this.driver=neo4j.driver(this.config.uri,neo4j.auth.basic(this.config.username,this.config.password),n),e.n=2,this.driver.verifyConnectivity();case 2:return this.isInitialized=!0,utils.debugLog("Neo4j connection initialized successfully"),this.healthCheckInterval=setInterval(function(){i.checkConnections().catch(function(e){})},3e5),e.a(2,this.driver);case 3:throw e.p=3,r=e.v,this.isInitialized=!1,utils.debugLog("Connection initialization error:",r),r;case 4:return e.a(2)}},e,this,[[0,3]])})),function(){return i.apply(this,arguments)})},{key:"cleanup",value:(r=f(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=null),!this.driver){e.n=5;break}return e.p=1,e.n=2,this.driver.close();case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:this.driver=null;case 5:this.isInitialized=!1,this.connectionRetryCount=0;case 6:return e.a(2)}},e,this,[[1,3]])})),function(){return r.apply(this,arguments)})}],t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,i,o,s,u,d,p}();function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}window.Neo4jConnectionManager=g,window.NEO4J_SESSION_MODES=m;var w={toNeo4jDateTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{year:{low:e.getFullYear(),high:0},month:{low:e.getMonth()+1,high:0},day:{low:e.getDate(),high:0},hour:{low:e.getHours(),high:0},minute:{low:e.getMinutes(),high:0},second:{low:e.getSeconds(),high:0},nanosecond:{low:0,high:0},timeZoneOffsetSeconds:{low:0,high:0}}},fromNeo4jDateTime:function(e){if(!e)return null;if("string"==typeof e)return new Date(e);if(e instanceof Date)return e;try{var t;if(void 0!==(null===(t=e.year)||void 0===t?void 0:t.low)){var n,r,i,o,a="".concat(e.year.low,"-").concat(String(e.month.low).padStart(2,"0"),"-").concat(String(e.day.low).padStart(2,"0"),"T").concat(String((null===(n=e.hour)||void 0===n?void 0:n.low)||0).padStart(2,"0"),":").concat(String((null===(r=e.minute)||void 0===r?void 0:r.low)||0).padStart(2,"0"),":").concat(String((null===(i=e.second)||void 0===i?void 0:i.low)||0).padStart(2,"0"),".").concat(String((null===(o=e.nanosecond)||void 0===o?void 0:o.low)||0).padStart(3,"0"),"Z");return new Date(a)}return new Date(e)}catch(e){return null}},isNeo4jDateTime:function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return!1}if(!e||"object"!==b(e))return!1;return!!["year","month","day","hour","minute","second","nanosecond","timeZoneOffsetSeconds"].every(function(t){return e.hasOwnProperty(t)})&&Object.entries(e).every(function(e){var t=y(e,2),n=(t[0],t[1]);return n&&"object"===b(n)&&"low"in n&&"high"in n&&"number"==typeof n.low&&"number"==typeof n.high})},now:function(){return this.toNeo4jDateTime(new Date)}};function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){I(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function I(e,t,n){return(t=N(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return x(l,"_invoke",function(n,r,i){var o,s,c,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,c=e,f.n=n,a}};function h(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,o=u[t],h=f.p,p=o[2];n>3?(i=p===r)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),s=u,c=p;(t=s<2?e:c)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,c)):f.n=c:f.v=c);try{if(l=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){o=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,o),!0),l}var a={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(x(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,x(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,x(d,"constructor",l),x(l,"constructor",c),c.displayName="GeneratorFunction",x(l,i,"GeneratorFunction"),x(d),x(d,i,"Generator"),x(d,r,function(){return this}),x(d,"toString",function(){return"[object Generator]"}),(D=function(){return{w:o,m:f}})()}function x(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}x=function(e,t,n,r){function o(t,n){x(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},x(e,t,n,r)}function C(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function O(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){C(o,r,i,a,s,"next",e)}function s(e){C(o,r,i,a,s,"throw",e)}a(void 0)})}}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function N(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}function k(e,t,n){return t=M(t),function(e,t){if(t&&("object"==_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L()?Reflect.construct(t,n||[],M(e).constructor):t.apply(e,n))}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(L=function(){return!!e})()}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}window.Neo4jDate=w;var j="READ",z="WRITE",U=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=k(this,t,[e])).config=e,n.connectionManager=new g(e),n.session=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e),n=t,r=[{key:"initialize",value:(h=O(D().m(function e(){return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.connectionManager.initialize();case 1:return e.a(2)}},e,this)})),function(){return h.apply(this,arguments)})},{key:"close",value:(f=O(D().m(function e(){return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.connectionManager.cleanup();case 1:return e.a(2)}},e,this)})),function(){return f.apply(this,arguments)})},{key:"startTransaction",value:(d=O(D().m(function e(){var t,n=arguments;return D().w(function(e){for(;;)if(0===e.n)return t=n.length>0&&void 0!==n[0]?n[0]:"WRITE",e.a(2,this.connectionManager.driver.session({defaultAccessMode:t}))},e,this)})),function(){return d.apply(this,arguments)})},{key:"endTransaction",value:(u=O(D().m(function e(){var t,n=arguments;return D().w(function(e){for(;;)switch(e.n){case 0:null!=(t=n.length>0&&void 0!==n[0]?n[0]:null)&&t.close();case 1:return e.a(2)}},e)})),function(){return u.apply(this,arguments)})},{key:"executeInTransaction",value:(l=O(D().m(function e(t,n){return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.executeWrite(function(){var e=O(D().m(function e(t){return D().w(function(e){for(;;)if(0===e.n)return e.a(2,n(t))},e)}));return function(t){return e.apply(this,arguments)}}());case 1:return e.a(2,e.v)}},e)})),function(e,t){return l.apply(this,arguments)})},{key:"executeNeo4jQuery",value:(c=O(D().m(function e(t){var n,r,i,o=arguments;return D().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},r=o.length>2&&void 0!==o[2]?o[2]:j,null!=this.connectionManager){e.n=1;break}throw new Error("Neo4J connection manager has not been initialised.");case 1:return e.p=1,e.n=2,this.connectionManager.executeQuery(t,n,r);case 2:return i=e.v,e.a(2,i.records);case 3:throw e.p=3,e.v;case 4:return e.a(2)}},e,this,[[1,3]])})),function(e){return c.apply(this,arguments)})},{key:"executeRead",value:(s=O(D().m(function e(t,n){var r,i,o,a,s=arguments;return D().w(function(e){for(;;)switch(e.n){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:null,i=s.length>3&&void 0!==s[3]&&s[3],o=s.length>4&&void 0!==s[4]?s[4]:0,a=s.length>5&&void 0!==s[5]?s[5]:0,e.n=1,this.executeInternal(t,A(A({},n),{},{skip:o,limit:a}),r,i,j);case 1:return e.a(2,e.v)}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"executeWrite",value:(a=O(D().m(function e(t,n){var r,i=arguments;return D().w(function(e){for(;;)switch(e.n){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:null,e.n=1,this.executeInternal(t,n,r,!0,z);case 1:return e.a(2,e.v)}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"executeInternal",value:(o=O(D().m(function e(t,n,r,i,o){var a,s;return D().w(function(e){for(;;)switch(e.n){case 0:if(null==r){e.n=2;break}return e.n=1,r.run(t,n);case 1:a=e.v,e.n=4;break;case 2:return e.n=3,this.executeNeo4jQuery(t,n,o);case 3:a=e.v;case 4:if(s=this.normaliseData(a),!i){e.n=6;break}if(!Array.isArray(s)){e.n=5;break}if(!(s.length>0)){e.n=5;break}return e.a(2,s[0]);case 5:return e.a(2,s);case 6:if(!Array.isArray(s)){e.n=7;break}return e.a(2,s);case 7:if(null==s){e.n=8;break}return e.a(2,[s]);case 8:return e.a(2,[]);case 9:return e.a(2)}},e,this)})),function(e,t,n,r,i){return o.apply(this,arguments)})},{key:"normaliseData",value:function(e){var t=this;return e.records?0===e.records.length?null:1===e.records.length?this.normaliseRecord(e.records[0]):e.records.map(function(e){return t.normaliseRecord(e)}):0===e.length?null:1===e.length?this.normaliseNodeset(e[0]):e.map(function(e){return t.normaliseNodeset(e)})}},{key:"normaliseRecord",value:function(e){var t,n={};for(t=0;t<e.keys.length;t++){var r=e.keys[t],i=e._fields[t],o=r.lastIndexOf("."),a=-1===o?r:r.substring(o+1);"object"===_(i)&&this.isDate(i)?n[a]=w.fromNeo4jDateTime(i):"object"===_(i)&&null!=i.toNumber?n[a]=i.toNumber():n[a]=i}return n}},{key:"normaliseNodeset",value:function(e){var t,n={};for(t=0;t<e.length;t++){var r=e.keys[t],i=r.lastIndexOf("."),o=-1===i?r:r.substring(i+1);if(null!=e._fields[t])if(e._fields[t].properties)n[o]=this.normaliseNode(e._fields[t]);else{var a=e._fields[t];"object"===_(a)&&this.isDate(a)?n[o]=w.fromNeo4jDateTime(a):"object"===_(a)?null!=a.toNumber?n[o]=a.toNumber():n[o]=this.normaliseObject(a):n[o]=a}else n[o]=null}return n}},{key:"normaliseNode",value:function(e){for(var t={},n=0,r=Object.entries(e.properties);n<r.length;n++){var i=S(r[n],2),o=i[0],a=i[1];"object"===_(a)&&this.isDate(a)?t[o]=w.fromNeo4jDateTime(a):"object"===_(a)?null!=a.toNumber?t[o]=a.toNumber():t[o]=this.normaliseObject(a):t[o]=a}return t}},{key:"normaliseObject",value:function(e){var t,n=this;if(Array.isArray(e))t=[],e.forEach(function(e){return t.push(n.normaliseObject(e))});else if(this.isPrimitive(e))t=e;else{t={};for(var r=0,i=Object.entries(e);r<i.length;r++){var o=S(i[r],2),a=o[0],s=o[1];null!=s&&"object"===_(s)?this.isDate(s)?t[a]=w.fromNeo4jDateTime(s):t[a]=this.normaliseObject(s):t[a]=s}}return t}},{key:"isDate",value:function(e){if(e&&e.__isInteger__)return!1;var t=new Date(e);return!isNaN(t.getTime())}},{key:"isPrimitive",value:function(e){return e!==Object(e)}}],r&&R(n.prototype,r),i&&R(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o,a,s,c,l,u,d,f,h}(r.M)},4687:e=>{"use strict";e.exports=class{constructor(e){this.ioc=e}canBeUsedFor(e){return!(!Number.isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY)||("number"==typeof e||"bigint"==typeof e)}serialize(e,t=!0){return"number"==typeof e?Number.isNaN(e)||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY||!Number.isInteger(e)?this.ioc.doubleSerializer.serialize(e,t):e>=-2147483648&&e<=2147483647?this.ioc.intSerializer.serialize(e,t):this.ioc.longSerializer.serialize(e,t):"bigint"==typeof e?this.ioc.bigIntegerSerializer.serialize(e,t):void 0}}},4808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},4948:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(9025)),i=o(n(2311));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,r.default)("v3",48,i.default);t.default=a},4957:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BIGINTEGER]=this}canBeUsedFor(e){return"bigint"==typeof e}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.BIGINTEGER,1]):r.from([0,0,0,1,0]);const n=[];let i;if(t&&n.push(r.from([this.ioc.DataType.BIGINTEGER,0])),e>=0){let t=e.toString(16);t.length%2!=0&&(t="0"+t),Number.parseInt(t[0],16)>7&&(t="00"+t),i=r.from(t,"hex")}else{let t=(-e).toString(16);const n=(t.length+t.length%2)/2;let o=BigInt(n)*BigInt(8);e<-(BigInt(2)**(o-BigInt(1)))&&(o+=BigInt(8));t=(BigInt(2)**o+e).toString(16),t.length%2!=0&&(t="0"+t),i=r.from(t,"hex")}return n.push(this.ioc.intSerializer.serialize(i.length,!1)),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.BIGINTEGER)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let o,a;try{({v:o,len:a}=this.ioc.intSerializer.deserialize(i,!1)),n+=a}catch(e){throw e.message="{length}: "+e.message,e}if(o<1)throw new Error(`{length}=${o} is less than one`);i=i.slice(a),n+=o,i=i.slice(0,o);let s=BigInt(`0x${i.toString("hex")}`);return!(128&~i[0])&&(s=BigInt.asIntN(8*o,s)),{v:s,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},5073:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(6140)),i=a(n(2858)),o=n(9910);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();const a=(e=e||{}).random||(e.rng||i.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return(0,o.unsafeStringify)(a)};t.default=s},5094:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.PATH]=this}canBeUsedFor(e){return e instanceof i.Path}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.PATH,1]):r.concat([this.ioc.listSerializer.serialize([]),this.ioc.listSerializer.serialize([])]);const n=[];return t&&n.push(r.from([this.ioc.DataType.PATH,0])),n.push(this.ioc.listSerializer.serialize(e.labels)),n.push(this.ioc.listSerializer.serialize(e.objects)),r.concat(n)}deserialize(e,t=!0){let n=0,o=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(n++,e!==this.ioc.DataType.PATH)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,c,l;try{({v:a,len:s}=this.ioc.listSerializer.deserialize(o)),n+=s}catch(e){throw e.message="{labels}: "+e.message,e}o=o.slice(s);try{({v:c,len:l}=this.ioc.listSerializer.deserialize(o)),n+=l}catch(e){throw e.message="{objects}: "+e.message,e}o=o.slice(l);return{v:new i.Path(a,c),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},5118:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r(){var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function s(n,r,o,a){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return i(u,"_invoke",function(n,r,i){var o,a,s,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,a=0,s=e,f.n=n,c}};function h(n,r){for(a=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,o=u[t],h=f.p,p=o[2];n>3?(i=p===r)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(a=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,a=0))}if(i||n>1)return c;throw d=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),a=u,s=p;(t=a<2?e:s)||!d;){o||(a?a<3?(a>1&&(f.n=-1),h(a,s)):f.n=s:f.v=s);try{if(l=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((t=(d=f.n<0)?s:n.call(r,f))!==c)break}catch(t){o=e,a=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,o,a),!0),u}var c={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(i(t={},o,function(){return this}),t),h=d.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i(e,a,"GeneratorFunction")),e.prototype=Object.create(h),e}return u.prototype=d,i(h,"constructor",d),i(d,"constructor",u),u.displayName="GeneratorFunction",i(d,a,"GeneratorFunction"),i(h),i(h,a,"Generator"),i(h,o,function(){return this}),i(h,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:p}})()}function i(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}i=function(e,t,n,r){function a(t,n){i(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},i(e,t,n,r)}function o(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fallbackLocale="en-US",this.eventListeners=new Map,this.initialized=!1},n=[{key:"initializePluralRules",value:function(){var e=this;Object.keys(localeConfigs).forEach(function(t){try{e.pluralRules[t]=new Intl.PluralRules(t)}catch(n){e.pluralRules[t]=new Intl.PluralRules("en-US")}})}},{key:"interpolate",value:function(e,t){return e?t&&0!==Object.keys(t).length?e.replace(/\{(\w+)\}/g,function(e,n){return void 0!==t[n]?t[n]:e}):e:""}},{key:"getPlural",value:function(e,t){var n=this.getTranslation(e);if(!n)return e;if(!n.plural)return n.text||e;var r=this.pluralRules[this.currentLocale].select(t);return n.plural[r]||n.text}},{key:"initialize",value:function(e){if(!this.initialized){var t=e||this.fallbackLocale;this.setLocale(t),this.culturalConfig=new CulturalConfig(t),this.pluralRules={},this.initializePluralRules(),this.initialized=!0}}},{key:"setLocale",value:(s=r().m(function e(t){var n;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(localeConfigs[t]){e.n=1;break}return e.a(2,!1);case 1:if(e.p=1,this.currentLocale===t){e.n=3;break}if(null!=(n=localeConfigs[t])&&n.translations){e.n=2;break}throw new Error("Translations not found for locale: ".concat(t));case 2:this.currentLocale=t,this.culturalConfig=new CulturalConfig(t),document.documentElement.setAttribute("dir",this.culturalConfig.isRTL()?"rtl":"ltr"),document.documentElement.setAttribute("lang",t.split("-")[0]),this.emit("localeChanged",{locale:t,direction:this.culturalConfig.isRTL()?"rtl":"ltr",culturalPreferences:this.culturalConfig.getCulturalPreferences()});case 3:return e.a(2,!0);case 4:if(e.p=4,e.v,t===this.fallbackLocale){e.n=5;break}return e.a(2,this.setLocale(this.fallbackLocale));case 5:return e.a(2,!1)}},e,this,[[1,4]])}),c=function(){var e=this,t=arguments;return new Promise(function(n,r){var i=s.apply(e,t);function a(e){o(i,n,r,a,c,"next",e)}function c(e){o(i,n,r,a,c,"throw",e)}a(void 0)})},function(e){return c.apply(this,arguments)})},{key:"getTranslation",value:function(e){if(!e)return null;var t=e.split("."),n="errors"===t[0];return this.findTranslation(t,n)}},{key:"findTranslation",value:function(e,t){return this.getTranslationFromLocale(this.currentLocale,e,t)||this.getTranslationFromLocale(this.fallbackLocale,e,t)}},{key:"getTranslationFromLocale",value:function(e,t,n){var r,i=localeConfigs[e],o=n?null==i?void 0:i.errors:null==i?void 0:i.translations;return n?null==o||null===(r=o[t[1]])||void 0===r?void 0:r[t[2]]:t.reduce(function(e,t){return null==e?void 0:e[t]},o)}},{key:"translate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=this.getTranslation(e);if(!n)return e;var r=n.text;return"count"in t&&(r=this.getPlural(e,t.count)),this.interpolate(r,t)}catch(t){return e}}},{key:"translateError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var r="errors.".concat(e,".").concat(t),i=this.getTranslation(r);return i?{text:this.interpolate(i.text,n),severity:i.severity||"error"}:{text:"".concat(e,".").concat(t),severity:"error"}}catch(i){return{text:"".concat(e,".").concat(t),severity:"error"}}}},{key:"formatDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";return this.culturalConfig.formatDate(e,t)}},{key:"formatTime",value:function(e){return this.culturalConfig.formatDate(e,"time")}},{key:"formatRelativeTime",value:function(e){for(var n=new Intl.RelativeTimeFormat(this.currentLocale,{numeric:"auto"}),r=(new Date(e).getTime()-Date.now())/1e3,i=0,o=Object.entries({year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1});i<o.length;i++){var a=t(o[i],2),s=a[0],c=a[1];if(Math.abs(r)>=c||"second"===s){var l=Math.round(r/c);return n.format(l,s)}}}},{key:"formatNumber",value:function(e,t){return this.culturalConfig.formatNumber(e,t)}},{key:"formatCurrency",value:function(e,t){return this.culturalConfig.formatCurrency(e,t)}},{key:"on",value:function(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e).add(t)}},{key:"off",value:function(e,t){this.eventListeners.has(e)&&this.eventListeners.get(e).delete(t)}},{key:"emit",value:function(e,t){this.eventListeners.has(e)&&this.eventListeners.get(e).forEach(function(e){try{e(t)}catch(e){}})}}],i=[{key:"detectUserLocale",value:function(){var e=navigator.language;return localeConfigs[e]?e:"en-US"}}],n&&a(e.prototype,n),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i,s,c}();window.i18n=new c},5127:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.serializers=[e.unspecifiedNullSerializer,e.numberSerializationStrategy,e.booleanSerializer,e.dateSerializer,e.bytecodeSerializer,e.pSerializer,e.traverserSerializer,e.enumSerializer,e.listSerializer,e.uuidSerializer,e.edgeSerializer,e.pathSerializer,e.propertySerializer,e.vertexSerializer,e.vertexPropertySerializer,e.stringSerializer,e.textPSerializer,e.traversalStrategySerializer,e.byteBufferSerializer,e.lambdaSerializer,e.mapSerializer]}getSerializerCanBeUsedFor(e){for(let t=0;t<this.serializers.length;t++)if(this.serializers[t].canBeUsedFor(e))return this.serializers[t];throw new Error(`No serializer found to support item where typeof(item)='${typeof e}' and String(item)='${String(e)}'.`)}serialize(e,t=!0){return this.getSerializerCanBeUsedFor(e).serialize(e,t)}deserialize(e){try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");const t=e.readUInt8(),n=this.ioc.serializers[t];if(!n)throw new Error("unknown {type_code}");return n.deserialize(e)}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,err:e})}}}},5283:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}var i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"getError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var r=i18n.translateError(e,t,n);return{message:r.text,severity:r.severity}}catch(n){return{message:localeConfigs["en-US"].translations.errors[e][t].text,severity:localeConfigs["en-US"].translations.errors[e][t].severity}}}}],(t=null)&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();e.exports&&(e.exports={ErrorHandler:i}),window.ErrorHandler=i},5291:(e,t,n)=>{"use strict";const{MathFloor:r,NumberIsInteger:i}=n(4134),{validateInteger:o}=n(277),{ERR_INVALID_ARG_VALUE:a}=n(6371).codes;let s=16384,c=16;function l(e){return e?c:s}e.exports={getHighWaterMark:function(e,t,n,o){const s=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,o,n);if(null!=s){if(!i(s)||s<0){throw new a(o?`options.${n}`:"options.highWaterMark",s)}return r(s)}return l(e.objectMode)},getDefaultHighWaterMark:l,setDefaultHighWaterMark:function(e,t){o(t,"value",0),e?c=t:s=t}}},5332:(e,t,n)=>{"use strict";const{Traversal:r,cardinality:i}=n(1545),{Transaction:o}=n(9899),a=n(5737),s=n(9032),{TraversalStrategies:c,VertexProgramStrategy:l,OptionsStrategy:u}=n(3335);class d{constructor(e,t,n,r,i){this.graph=e,this.traversalStrategies=t,this.bytecode=n||new s,this.graphTraversalSourceClass=r||d,this.graphTraversalClass=i||f;const o=t.strategies.find(e=>"js:RemoteStrategy"===e.fqcn);this.remoteConnection=void 0!==o?o.connection:void 0}withRemote(e){const t=new c(this.traversalStrategies);return t.addStrategy(new a.RemoteStrategy(e)),new this.graphTraversalSourceClass(this.graph,t,new s(this.bytecode),this.graphTraversalSourceClass,this.graphTraversalClass)}tx(){if(this.remoteConnection&&this.remoteConnection.isSessionBound)throw new Error("This TraversalSource is already bound to a transaction - child transactions are not supported");return new o(this)}withComputer(e,t,n,r,i,o,a){const s={};return void 0!==e&&(s.graphComputer=e),void 0!==t&&(s.workers=t),void 0!==n&&(s.result=n),void 0!==r&&(s.graphComputer=r),void 0!==i&&(s.vertices=i),void 0!==o&&(s.edges=o),void 0!==a&&(s.configuration=a),this.withStrategies(new l(s))}with_(e,t=void 0){const n=void 0===t||t;let r=this.bytecode.sourceInstructions.find(e=>"withStrategies"===e[0]&&e[1]instanceof u);return void 0===r?(r=new u({[e]:n}),this.withStrategies(r)):(r[1].configuration[e]=n,new this.graphTraversalSourceClass(this.graph,new c(this.traversalStrategies),this.bytecode,this.graphTraversalSourceClass,this.graphTraversalClass))}toString(){return"graphtraversalsource["+this.graph.toString()+"]"}withBulk(...e){const t=new s(this.bytecode).addSource("withBulk",e);return new this.graphTraversalSourceClass(this.graph,new c(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withPath(...e){const t=new s(this.bytecode).addSource("withPath",e);return new this.graphTraversalSourceClass(this.graph,new c(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withSack(...e){const t=new s(this.bytecode).addSource("withSack",e);return new this.graphTraversalSourceClass(this.graph,new c(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withSideEffect(...e){const t=new s(this.bytecode).addSource("withSideEffect",e);return new this.graphTraversalSourceClass(this.graph,new c(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withStrategies(...e){const t=new s(this.bytecode).addSource("withStrategies",e);return new this.graphTraversalSourceClass(this.graph,new c(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withoutStrategies(...e){const t=new s(this.bytecode).addSource("withoutStrategies",e);return new this.graphTraversalSourceClass(this.graph,new c(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}E(...e){const t=new s(this.bytecode).addStep("E",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}V(...e){const t=new s(this.bytecode).addStep("V",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}addE(...e){const t=new s(this.bytecode).addStep("addE",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}mergeE(...e){const t=new s(this.bytecode).addStep("mergeE",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}addV(...e){const t=new s(this.bytecode).addStep("addV",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}mergeV(...e){const t=new s(this.bytecode).addStep("mergeV",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}inject(...e){const t=new s(this.bytecode).addStep("inject",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}io(...e){const t=new s(this.bytecode).addStep("io",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}call(...e){const t=new s(this.bytecode).addStep("call",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}union(...e){const t=new s(this.bytecode).addStep("union",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}}class f extends r{constructor(e,t,n){super(e,t,n)}clone(){return new f(this.graph,this.traversalStrategies,this.getBytecode())}V(...e){return this.bytecode.addStep("V",e),this}E(...e){return this.bytecode.addStep("E",e),this}addE(...e){return this.bytecode.addStep("addE",e),this}addV(...e){return this.bytecode.addStep("addV",e),this}aggregate(...e){return this.bytecode.addStep("aggregate",e),this}all(...e){return this.bytecode.addStep("all",e),this}and(...e){return this.bytecode.addStep("and",e),this}any(...e){return this.bytecode.addStep("any",e),this}as(...e){return this.bytecode.addStep("as",e),this}asDate(...e){return this.bytecode.addStep("asDate",e),this}asString(...e){return this.bytecode.addStep("asString",e),this}barrier(...e){return this.bytecode.addStep("barrier",e),this}both(...e){return this.bytecode.addStep("both",e),this}bothE(...e){return this.bytecode.addStep("bothE",e),this}bothV(...e){return this.bytecode.addStep("bothV",e),this}branch(...e){return this.bytecode.addStep("branch",e),this}by(...e){return this.bytecode.addStep("by",e),this}call(...e){return this.bytecode.addStep("call",e),this}cap(...e){return this.bytecode.addStep("cap",e),this}choose(...e){return this.bytecode.addStep("choose",e),this}coalesce(...e){return this.bytecode.addStep("coalesce",e),this}coin(...e){return this.bytecode.addStep("coin",e),this}combine(...e){return this.bytecode.addStep("combine",e),this}concat(...e){return this.bytecode.addStep("concat",e),this}conjoin(...e){return this.bytecode.addStep("conjoin",e),this}connectedComponent(...e){return this.bytecode.addStep("connectedComponent",e),this}constant(...e){return this.bytecode.addStep("constant",e),this}count(...e){return this.bytecode.addStep("count",e),this}cyclicPath(...e){return this.bytecode.addStep("cyclicPath",e),this}dateAdd(...e){return this.bytecode.addStep("dateAdd",e),this}dateDiff(...e){return this.bytecode.addStep("dateDiff",e),this}dedup(...e){return this.bytecode.addStep("dedup",e),this}difference(...e){return this.bytecode.addStep("difference",e),this}disjunct(...e){return this.bytecode.addStep("disjunct",e),this}drop(...e){return this.bytecode.addStep("drop",e),this}element(...e){return this.bytecode.addStep("element",e),this}elementMap(...e){return this.bytecode.addStep("elementMap",e),this}emit(...e){return this.bytecode.addStep("emit",e),this}fail(...e){return this.bytecode.addStep("fail",e),this}filter(...e){return this.bytecode.addStep("filter",e),this}flatMap(...e){return this.bytecode.addStep("flatMap",e),this}fold(...e){return this.bytecode.addStep("fold",e),this}format(...e){return this.bytecode.addStep("format",e),this}from_(...e){return this.bytecode.addStep("from",e),this}group(...e){return this.bytecode.addStep("group",e),this}groupCount(...e){return this.bytecode.addStep("groupCount",e),this}has(...e){return this.bytecode.addStep("has",e),this}hasId(...e){return this.bytecode.addStep("hasId",e),this}hasKey(...e){return this.bytecode.addStep("hasKey",e),this}hasLabel(...e){return this.bytecode.addStep("hasLabel",e),this}hasNot(...e){return this.bytecode.addStep("hasNot",e),this}hasValue(...e){return this.bytecode.addStep("hasValue",e),this}id(...e){return this.bytecode.addStep("id",e),this}identity(...e){return this.bytecode.addStep("identity",e),this}in_(...e){return this.bytecode.addStep("in",e),this}inE(...e){return this.bytecode.addStep("inE",e),this}inV(...e){return this.bytecode.addStep("inV",e),this}index(...e){return this.bytecode.addStep("index",e),this}inject(...e){return this.bytecode.addStep("inject",e),this}intersect(...e){return this.bytecode.addStep("intersect",e),this}is(...e){return this.bytecode.addStep("is",e),this}key(...e){return this.bytecode.addStep("key",e),this}label(...e){return this.bytecode.addStep("label",e),this}length(...e){return this.bytecode.addStep("length",e),this}limit(...e){return this.bytecode.addStep("limit",e),this}local(...e){return this.bytecode.addStep("local",e),this}loops(...e){return this.bytecode.addStep("loops",e),this}lTrim(...e){return this.bytecode.addStep("lTrim",e),this}map(...e){return this.bytecode.addStep("map",e),this}match(...e){return this.bytecode.addStep("match",e),this}math(...e){return this.bytecode.addStep("math",e),this}max(...e){return this.bytecode.addStep("max",e),this}mean(...e){return this.bytecode.addStep("mean",e),this}merge(...e){return this.bytecode.addStep("merge",e),this}mergeE(...e){return this.bytecode.addStep("mergeE",e),this}mergeV(...e){return this.bytecode.addStep("mergeV",e),this}min(...e){return this.bytecode.addStep("min",e),this}none(...e){return this.bytecode.addStep("none",e),this}not(...e){return this.bytecode.addStep("not",e),this}option(...e){return this.bytecode.addStep("option",e),this}optional(...e){return this.bytecode.addStep("optional",e),this}or(...e){return this.bytecode.addStep("or",e),this}order(...e){return this.bytecode.addStep("order",e),this}otherV(...e){return this.bytecode.addStep("otherV",e),this}out(...e){return this.bytecode.addStep("out",e),this}outE(...e){return this.bytecode.addStep("outE",e),this}outV(...e){return this.bytecode.addStep("outV",e),this}pageRank(...e){return this.bytecode.addStep("pageRank",e),this}path(...e){return this.bytecode.addStep("path",e),this}peerPressure(...e){return this.bytecode.addStep("peerPressure",e),this}product(...e){return this.bytecode.addStep("product",e),this}profile(...e){return this.bytecode.addStep("profile",e),this}program(...e){return this.bytecode.addStep("program",e),this}project(...e){return this.bytecode.addStep("project",e),this}properties(...e){return this.bytecode.addStep("properties",e),this}property(...e){return this.bytecode.addStep("property",e),this}propertyMap(...e){return this.bytecode.addStep("propertyMap",e),this}range(...e){return this.bytecode.addStep("range",e),this}read(...e){return this.bytecode.addStep("read",e),this}repeat(...e){return this.bytecode.addStep("repeat",e),this}replace(...e){return this.bytecode.addStep("replace",e),this}reverse(...e){return this.bytecode.addStep("reverse",e),this}rTrim(...e){return this.bytecode.addStep("rTrim",e),this}sack(...e){return this.bytecode.addStep("sack",e),this}sample(...e){return this.bytecode.addStep("sample",e),this}select(...e){return this.bytecode.addStep("select",e),this}shortestPath(...e){return this.bytecode.addStep("shortestPath",e),this}sideEffect(...e){return this.bytecode.addStep("sideEffect",e),this}simplePath(...e){return this.bytecode.addStep("simplePath",e),this}skip(...e){return this.bytecode.addStep("skip",e),this}split(...e){return this.bytecode.addStep("split",e),this}store(...e){return this.bytecode.addStep("store",e),this}subgraph(...e){return this.bytecode.addStep("subgraph",e),this}substring(...e){return this.bytecode.addStep("substring",e),this}sum(...e){return this.bytecode.addStep("sum",e),this}tail(...e){return this.bytecode.addStep("tail",e),this}timeLimit(...e){return this.bytecode.addStep("timeLimit",e),this}times(...e){return this.bytecode.addStep("times",e),this}to(...e){return this.bytecode.addStep("to",e),this}toE(...e){return this.bytecode.addStep("toE",e),this}toLower(...e){return this.bytecode.addStep("toLower",e),this}toUpper(...e){return this.bytecode.addStep("toUpper",e),this}toV(...e){return this.bytecode.addStep("toV",e),this}tree(...e){return this.bytecode.addStep("tree",e),this}trim(...e){return this.bytecode.addStep("trim",e),this}unfold(...e){return this.bytecode.addStep("unfold",e),this}union(...e){return this.bytecode.addStep("union",e),this}until(...e){return this.bytecode.addStep("until",e),this}value(...e){return this.bytecode.addStep("value",e),this}valueMap(...e){return this.bytecode.addStep("valueMap",e),this}values(...e){return this.bytecode.addStep("values",e),this}where(...e){return this.bytecode.addStep("where",e),this}with_(...e){return this.bytecode.addStep("with",e),this}write(...e){return this.bytecode.addStep("write",e),this}}class h extends s{constructor(e,t){super(),this.addSource("CardinalityValueTraversal",[e,t])}static single(e){return new h(i.single,e)}static list(e){return new h(i.list,e)}static set(e){return new h(i.set,e)}}function p(e,t){const n=new f(null,null,new s);return n[e].apply(n,t)}const m={E:(...e)=>p("E",e),V:(...e)=>p("V",e),addE:(...e)=>p("addE",e),addV:(...e)=>p("addV",e),aggregate:(...e)=>p("aggregate",e),all:(...e)=>p("all",e),and:(...e)=>p("and",e),any:(...e)=>p("any",e),as:(...e)=>p("as",e),asDate:(...e)=>p("asDate",e),asString:(...e)=>p("asString",e),barrier:(...e)=>p("barrier",e),both:(...e)=>p("both",e),bothE:(...e)=>p("bothE",e),bothV:(...e)=>p("bothV",e),branch:(...e)=>p("branch",e),call:(...e)=>p("call",e),cap:(...e)=>p("cap",e),choose:(...e)=>p("choose",e),coalesce:(...e)=>p("coalesce",e),coin:(...e)=>p("coin",e),concat:(...e)=>p("concat",e),constant:(...e)=>p("constant",e),count:(...e)=>p("count",e),cyclicPath:(...e)=>p("cyclicPath",e),dateAdd:(...e)=>p("dateAdd",e),dateDiff:(...e)=>p("dateDiff",e),dedup:(...e)=>p("dedup",e),disjunct:(...e)=>p("disjunct",e),drop:(...e)=>p("drop",e),element:(...e)=>p("element",e),elementMap:(...e)=>p("elementMap",e),emit:(...e)=>p("emit",e),fail:(...e)=>p("fail",e),filter:(...e)=>p("filter",e),flatMap:(...e)=>p("flatMap",e),fold:(...e)=>p("fold",e),format:(...e)=>p("format",e),group:(...e)=>p("group",e),groupCount:(...e)=>p("groupCount",e),has:(...e)=>p("has",e),hasId:(...e)=>p("hasId",e),hasKey:(...e)=>p("hasKey",e),hasLabel:(...e)=>p("hasLabel",e),hasNot:(...e)=>p("hasNot",e),hasValue:(...e)=>p("hasValue",e),id:(...e)=>p("id",e),identity:(...e)=>p("identity",e),in_:(...e)=>p("in_",e),inE:(...e)=>p("inE",e),inV:(...e)=>p("inV",e),index:(...e)=>p("index",e),inject:(...e)=>p("inject",e),is:(...e)=>p("is",e),key:(...e)=>p("key",e),label:(...e)=>p("label",e),length:(...e)=>p("length",e),limit:(...e)=>p("limit",e),local:(...e)=>p("local",e),loops:(...e)=>p("loops",e),lTrim:(...e)=>p("lTrim",e),map:(...e)=>p("map",e),match:(...e)=>p("match",e),math:(...e)=>p("math",e),max:(...e)=>p("max",e),mean:(...e)=>p("mean",e),mergeE:(...e)=>p("mergeE",e),mergeV:(...e)=>p("mergeV",e),min:(...e)=>p("min",e),none:(...e)=>p("none",e),not:(...e)=>p("not",e),optional:(...e)=>p("optional",e),or:(...e)=>p("or",e),order:(...e)=>p("order",e),otherV:(...e)=>p("otherV",e),out:(...e)=>p("out",e),outE:(...e)=>p("outE",e),outV:(...e)=>p("outV",e),path:(...e)=>p("path",e),project:(...e)=>p("project",e),properties:(...e)=>p("properties",e),property:(...e)=>p("property",e),propertyMap:(...e)=>p("propertyMap",e),range:(...e)=>p("range",e),repeat:(...e)=>p("repeat",e),replace:(...e)=>p("replace",e),reverse:(...e)=>p("reverse",e),rTrim:(...e)=>p("rTrim",e),sack:(...e)=>p("sack",e),sample:(...e)=>p("sample",e),select:(...e)=>p("select",e),sideEffect:(...e)=>p("sideEffect",e),simplePath:(...e)=>p("simplePath",e),skip:(...e)=>p("skip",e),split:(...e)=>p("split",e),store:(...e)=>p("store",e),subgraph:(...e)=>p("subgraph",e),substring:(...e)=>p("substring",e),sum:(...e)=>p("sum",e),tail:(...e)=>p("tail",e),timeLimit:(...e)=>p("timeLimit",e),times:(...e)=>p("times",e),to:(...e)=>p("to",e),toE:(...e)=>p("toE",e),toLower:(...e)=>p("toLower",e),toUpper:(...e)=>p("toUpper",e),toV:(...e)=>p("toV",e),tree:(...e)=>p("tree",e),trim:(...e)=>p("trim",e),unfold:(...e)=>p("unfold",e),union:(...e)=>p("union",e),until:(...e)=>p("until",e),value:(...e)=>p("value",e),valueMap:(...e)=>p("valueMap",e),values:(...e)=>p("values",e),where:(...e)=>p("where",e)};e.exports={GraphTraversal:f,GraphTraversalSource:d,CardinalityValue:h,statics:m}},5506:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),{ObjectDefineProperty:i,ObjectKeys:o,ReflectApply:a}=n(4134),{promisify:{custom:s}}=n(7760),{streamReturningOperators:c,promiseReturningOperators:l}=n(823),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=n(6371),d=n(7830),{setDefaultHighWaterMark:f,getDefaultHighWaterMark:h}=n(5291),{pipeline:p}=n(7758),{destroyer:m}=n(5896),g=n(6238),y=n(3095),v=n(6115),b=e.exports=n(4259).Stream;b.isDestroyed=v.isDestroyed,b.isDisturbed=v.isDisturbed,b.isErrored=v.isErrored,b.isReadable=v.isReadable,b.isWritable=v.isWritable,b.Readable=n(7576);for(const S of o(c)){const E=c[S];function _(...e){if(new.target)throw u();return b.Readable.from(a(E,this,e))}i(_,"name",{__proto__:null,value:E.name}),i(_,"length",{__proto__:null,value:E.length}),i(b.Readable.prototype,S,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}for(const T of o(l)){const A=l[T];function I(...e){if(new.target)throw u();return a(A,this,e)}i(I,"name",{__proto__:null,value:A.name}),i(I,"length",{__proto__:null,value:A.length}),i(b.Readable.prototype,T,{__proto__:null,value:I,enumerable:!1,configurable:!0,writable:!0})}b.Writable=n(8584),b.Duplex=n(3370),b.Transform=n(7382),b.PassThrough=n(6524),b.pipeline=p;const{addAbortSignal:w}=n(4147);b.addAbortSignal=w,b.finished=g,b.destroy=m,b.compose=d,b.setDefaultHighWaterMark=f,b.getDefaultHighWaterMark=h,i(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>y}),i(p,s,{__proto__:null,enumerable:!0,get:()=>y.pipeline}),i(g,s,{__proto__:null,enumerable:!0,get:()=>y.finished}),b.Stream=b,b._isUint8Array=function(e){return e instanceof Uint8Array},b._uint8ArrayToBuffer=function(e){return r.from(e.buffer,e.byteOffset,e.byteLength)}},5568:e=>{"use strict";const{AbortController:t,AbortSignal:n}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=t,e.exports.AbortSignal=n,e.exports.default=t},5606:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,c=[],l=!1,u=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):u=-1,c.length&&f())}function f(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(s=c,c=[];++u<t;)s&&s[u].run();u=-1,t=c.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},5737:(e,t,n)=>{"use strict";const r=n(1545),i=n(3335).TraversalStrategy;class o extends r.Traversal{constructor(e,t){super(null,null,null),this.traversers=e,this.sideEffects=t}}e.exports={RemoteConnection:class{constructor(e,t={}){this.url=e,this.options=t}open(){throw new Error("open() must be implemented")}get isOpen(){throw new Error("isOpen() must be implemented")}get isSessionBound(){return!1}submit(e){throw new Error("submit() must be implemented")}createSession(){throw new Error("createSession() must be implemented")}commit(){throw new Error("commit() must be implemented")}rollback(){throw new Error("rollback() must be implemented")}close(){throw new Error("close() must be implemented")}},RemoteStrategy:class extends i{constructor(e){super("js:RemoteStrategy"),this.connection=e}apply(e){return e.traversers?Promise.resolve():this.connection.submit(e.getBytecode()).then(function(t){e.sideEffects=t.sideEffects,e.traversers=t.traversers})}},RemoteTraversal:o}},5896:(e,t,n)=>{"use strict";const r=n(5606),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:a}=n(6371),{Symbol:s}=n(4134),{kIsDestroyed:c,isDestroyed:l,isFinished:u,isServerRequest:d}=n(6115),f=s("kDestroy"),h=s("kConstruct");function p(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function m(e,t,n){let i=!1;function o(t){if(i)return;i=!0;const o=e._readableState,a=e._writableState;p(t,a,o),a&&(a.closed=!0),o&&(o.closed=!0),"function"==typeof n&&n(t),t?r.nextTick(g,e,t):r.nextTick(y,e)}try{e._destroy(t||null,o)}catch(t){o(t)}}function g(e,t){v(e,t),y(e)}function y(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=n&&n.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function v(e,t){const n=e._readableState,r=e._writableState;null!=r&&r.errorEmitted||null!=n&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function b(e,t,n){const i=e._readableState,o=e._writableState;if(null!=o&&o.destroyed||null!=i&&i.destroyed)return this;null!=i&&i.autoDestroy||null!=o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),i&&!i.errored&&(i.errored=t),n?r.nextTick(v,e,t):v(e,t))}function w(e){let t=!1;function n(n){if(t)return void b(e,null!=n?n:new o);t=!0;const i=e._readableState,a=e._writableState,s=a||i;i&&(i.constructed=!0),a&&(a.constructed=!0),s.destroyed?e.emit(f,n):n?b(e,n,!0):r.nextTick(S,e)}try{e._construct(e=>{r.nextTick(n,e)})}catch(e){r.nextTick(n,e)}}function S(e){e.emit(h)}function E(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function _(e){e.emit("close")}function T(e,t){e.emit("error",t),r.nextTick(_,e)}e.exports={construct:function(e,t){if("function"!=typeof e._construct)return;const n=e._readableState,i=e._writableState;n&&(n.constructed=!1),i&&(i.constructed=!1),e.once(h,t),e.listenerCount(h)>1||r.nextTick(w,e)},destroyer:function(e,t){e&&!l(e)&&(t||u(e)||(t=new a),d(e)?(e.socket=null,e.destroy(t)):E(e)?e.abort():E(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?r.nextTick(T,e,t):r.nextTick(_,e),e.destroyed||(e[c]=!0))},destroy:function(e,t){const n=this._readableState,r=this._writableState,o=r||n;return null!=r&&r.destroyed||null!=n&&n.destroyed?("function"==typeof t&&t(),this):(p(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),o.constructed?m(this,e,t):this.once(f,function(n){m(this,i(n,e),t)}),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:b}},6078:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),{valueKey:i,LambdaSerializer:o}=n(474);e.exports=class{constructor(e){this.ioc=e,this.graphsonLambdaSerializer=new o}canBeUsedFor(e){return this.graphsonLambdaSerializer.canBeUsedFor(e)}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.LAMBDA,1]);const e=[0,0,0,0],n=[0,0,0,0],i=[0,0,0,0];return r.from([...e,...n,...i])}const n=[];t&&n.push(r.from([this.ioc.DataType.LAMBDA,0]));const o=this.graphsonLambdaSerializer.serialize(e),a=o[i].language,s=o[i].script,c=o[i].arguments;return n.push(this.ioc.stringSerializer.serialize(a,!1)),n.push(this.ioc.stringSerializer.serialize(s,!1)),n.push(this.ioc.intSerializer.serialize(c,!1)),r.concat(n)}}},6115:(e,t,n)=>{"use strict";const{SymbolAsyncIterator:r,SymbolIterator:i,SymbolFor:o}=n(4134),a=o("nodejs.stream.destroyed"),s=o("nodejs.stream.errored"),c=o("nodejs.stream.readable"),l=o("nodejs.stream.writable"),u=o("nodejs.stream.disturbed"),d=o("nodejs.webstream.isClosedPromise"),f=o("nodejs.webstream.controllerErrorFunction");function h(e,t=!1){var n;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(n=e._readableState)||void 0===n?void 0:n.readable)||e._writableState&&!e._readableState)}function p(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function m(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function g(e){return!(!e||m(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function y(e){return!(!e||m(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function v(e){return!(!e||m(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function b(e){if(!m(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[a]||null!=r&&r.destroyed)}function w(e){if(!p(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function S(e,t){if(!h(e))return null;const n=e._readableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.endEmitted)?null:!!(n.endEmitted||!1===t&&!0===n.ended&&0===n.length))}function E(e){return e&&null!=e[c]?e[c]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!b(e)&&(h(e)&&e.readable&&!S(e))}function _(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!b(e)&&(p(e)&&e.writable&&!w(e))}function T(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function A(e){return"boolean"==typeof e._sent100&&T(e)}e.exports={isDestroyed:b,kIsDestroyed:a,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[u])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:u,isErrored:function(e){var t,n,r,i,o,a,c,l,u,d;return!(!e||!(null!==(t=null!==(n=null!==(r=null!==(i=null!==(o=null!==(a=e[s])&&void 0!==a?a:e.readableErrored)&&void 0!==o?o:e.writableErrored)&&void 0!==i?i:null===(c=e._readableState)||void 0===c?void 0:c.errorEmitted)&&void 0!==r?r:null===(l=e._writableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==n?n:null===(u=e._readableState)||void 0===u?void 0:u.errored)&&void 0!==t?t:null===(d=e._writableState)||void 0===d?void 0:d.errored))},kIsErrored:s,isReadable:E,kIsReadable:c,kIsClosedPromise:d,kControllerErrorFunction:f,kIsWritable:l,isClosed:function(e){if(!m(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,n=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==n?void 0:n.closed)?(null==t?void 0:t.closed)||(null==n?void 0:n.closed):"boolean"==typeof e._closed&&T(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return m(e)?!!b(e)||(!1===(null==t?void 0:t.readable)||!E(e))&&(!1===(null==t?void 0:t.writable)||!_(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[r]:!1===t?"function"==typeof e[i]:"function"==typeof e[r]||"function"==typeof e[i])},isReadableNodeStream:h,isReadableStream:g,isReadableEnded:function(e){if(!h(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:S,isReadableErrored:function(e){var t,n;return m(e)?e.readableErrored?e.readableErrored:null!==(t=null===(n=e._readableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isNodeStream:m,isWebStream:function(e){return g(e)||y(e)||v(e)},isWritable:_,isWritableNodeStream:p,isWritableStream:y,isWritableEnded:w,isWritableFinished:function(e,t){if(!p(e))return null;if(!0===e.writableFinished)return!0;const n=e._writableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.finished)?null:!!(n.finished||!1===t&&!0===n.ended&&0===n.length))},isWritableErrored:function(e){var t,n;return m(e)?e.writableErrored?e.writableErrored:null!==(t=null===(n=e._writableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:A,willEmitClose:function(e){if(!m(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&A(e)||!!(r&&r.autoDestroy&&r.emitClose&&!1===r.closed)},isTransformStream:v}},6140:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=n},6238:(e,t,n)=>{"use strict";const r=n(5606),{AbortError:i,codes:o}=n(6371),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:s}=o,{kEmptyObject:c,once:l}=n(7760),{validateAbortSignal:u,validateFunction:d,validateObject:f,validateBoolean:h}=n(277),{Promise:p,PromisePrototypeThen:m,SymbolDispose:g}=n(4134),{isClosed:y,isReadable:v,isReadableNodeStream:b,isReadableStream:w,isReadableFinished:S,isReadableErrored:E,isWritable:_,isWritableNodeStream:T,isWritableStream:A,isWritableFinished:I,isWritableErrored:D,isNodeStream:x,willEmitClose:C,kIsClosedPromise:O}=n(6115);let R;const N=()=>{};function k(e,t,o){var h,p;if(2===arguments.length?(o=t,t=c):null==t?t=c:f(t,"options"),d(o,"callback"),u(t.signal,"options.signal"),o=l(o),w(e)||A(e))return function(e,t,o){let a=!1,s=N;if(t.signal)if(s=()=>{a=!0,o.call(e,new i(void 0,{cause:t.signal.reason}))},t.signal.aborted)r.nextTick(s);else{R=R||n(7760).addAbortListener;const r=R(t.signal,s),i=o;o=l((...t)=>{r[g](),i.apply(e,t)})}const c=(...t)=>{a||r.nextTick(()=>o.apply(e,t))};return m(e[O].promise,c,c),N}(e,t,o);if(!x(e))throw new a("stream",["ReadableStream","WritableStream","Stream"],e);const k=null!==(h=t.readable)&&void 0!==h?h:b(e),L=null!==(p=t.writable)&&void 0!==p?p:T(e),M=e._writableState,P=e._readableState,j=()=>{e.writable||B()};let z=C(e)&&b(e)===k&&T(e)===L,U=I(e,!1);const B=()=>{U=!0,e.destroyed&&(z=!1),(!z||e.readable&&!k)&&(k&&!F||o.call(e))};let F=S(e,!1);const H=()=>{F=!0,e.destroyed&&(z=!1),(!z||e.writable&&!L)&&(L&&!U||o.call(e))},$=t=>{o.call(e,t)};let q=y(e);const W=()=>{q=!0;const t=D(e)||E(e);return t&&"boolean"!=typeof t?o.call(e,t):k&&!F&&b(e,!0)&&!S(e,!1)?o.call(e,new s):!L||U||I(e,!1)?void o.call(e):o.call(e,new s)},G=()=>{q=!0;const t=D(e)||E(e);if(t&&"boolean"!=typeof t)return o.call(e,t);o.call(e)},V=()=>{e.req.on("finish",B)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?L&&!M&&(e.on("end",j),e.on("close",j)):(e.on("complete",B),z||e.on("abort",W),e.req?V():e.on("request",V)),z||"boolean"!=typeof e.aborted||e.on("aborted",W),e.on("end",H),e.on("finish",B),!1!==t.error&&e.on("error",$),e.on("close",W),q?r.nextTick(W):null!=M&&M.errorEmitted||null!=P&&P.errorEmitted?z||r.nextTick(G):(k||z&&!v(e)||!U&&!1!==_(e))&&(L||z&&!_(e)||!F&&!1!==v(e))?P&&e.req&&e.aborted&&r.nextTick(G):r.nextTick(G);const Y=()=>{o=N,e.removeListener("aborted",W),e.removeListener("complete",B),e.removeListener("abort",W),e.removeListener("request",V),e.req&&e.req.removeListener("finish",B),e.removeListener("end",j),e.removeListener("close",j),e.removeListener("finish",B),e.removeListener("end",H),e.removeListener("error",$),e.removeListener("close",W)};if(t.signal&&!q){const a=()=>{const n=o;Y(),n.call(e,new i(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)r.nextTick(a);else{R=R||n(7760).addAbortListener;const r=R(t.signal,a),i=o;o=l((...t)=>{r[g](),i.apply(e,t)})}}return Y}e.exports=k,e.exports.finished=function(e,t){var n;let r=!1;return null===t&&(t=c),null!==(n=t)&&void 0!==n&&n.cleanup&&(h(t.cleanup,"cleanup"),r=t.cleanup),new p((n,i)=>{const o=k(e,t,e=>{r&&o(),e?i(e):n()})})}},6284:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function i(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var o={_initialized:!1,_debugEnabled:!1,_config:null,initialize:function(e){var t;return this._initialized&&this._config?this._config=r(r({},this._config),e):this._config=e,this._debugEnabled=(null===(t=this._config)||void 0===t?void 0:t.DEBUG)||!1,this._initialized=!0,this.debugLog("Utils initialized with this locale:",this._config.LANGUAGE),this},debugLog:function(e){if(!this._initialized||this._debugEnabled){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;if(n.length>0)(i=console).log.apply(i,["[DEBUG]",e].concat(n))}},getConfig:function(){return this._config},isInitialized:function(){return this._initialized},loadScript:function(e){return new Promise(function(t,n){var r=document.createElement("script");r.src=e,r.async=!0,r.onload=function(){return t()},r.onerror=function(){return n(new Error("Failed to load script: ".concat(e)))},document.head.appendChild(r)})},generateUUID:function(){if("undefined"!=typeof crypto&&crypto.randomUUID)return crypto.randomUUID();if("undefined"!=typeof crypto&&crypto.getRandomValues){var e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128,Array.from(e).map(function(e){return e.toString(16).padStart(2,"0")}).join("").replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}for(var t=(new Date).getTime(),n="undefined"!=typeof performance&&performance.now?performance.now():0,r=function(){var e=1e4*Math.sin(t*n*Math.random());return Math.floor(256*(e-Math.floor(e)))},i=new Uint8Array(16),o=0;o<16;o++)i[o]=r();return i[6]=15&i[6]|64,i[8]=63&i[8]|128,Array.from(i).map(function(e){return e.toString(16).padStart(2,"0")}).join("").replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}};e.exports&&(e.exports=o),window.utils=o},6348:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(1545);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.TEXTP]=this}canBeUsedFor(e){return e instanceof i.TextP}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.TEXTP,1]);const e=[0,0,0,0],n=[0,0,0,0];return r.from([...e,...n])}const n=[];let i;return t&&n.push(r.from([this.ioc.DataType.TEXTP,0])),n.push(this.ioc.stringSerializer.serialize(e.operator,!1)),i=void 0===e.other||null===e.other?Array.isArray(e.value)?e.value:[e.value]:[e.value,e.other],n.push(this.ioc.listSerializer.serialize(i,!1)),r.concat(n)}deserialize(e,t=!0){let n=0,o=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(n++,e!==this.ioc.DataType.TEXTP)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,c,l,u;try{({v:a,len:s}=this.ioc.stringSerializer.deserialize(o,!1)),n+=s}catch(e){throw e.message="{name}: "+e.message,e}o=o.slice(s);try{({v:c,len:l}=this.ioc.listSerializer.deserialize(o,!1)),n+=l}catch(e){throw e.message="{values}: "+e.message,e}if(o=o.slice(l),c.length<1)return{v:new i.TextP(""),len:n};const d=i.TextP[a];return u="function"==typeof d?d(...c):new i.TextP(a,...c),{v:u,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},6371:(e,t,n)=>{"use strict";const{format:r,inspect:i}=n(9231),{AggregateError:o}=n(4134),a=globalThis.AggregateError||o,s=Symbol("kIsNodeError"),c=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,u={};function d(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function f(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function h(e,t,n){n||(n=Error);class i extends n{constructor(...n){super(function(e,t,n){if("function"==typeof t)return d(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);const i=(t.match(/%[dfijoOs]/g)||[]).length;return d(i===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${i}).`),0===n.length?t:r(t,...n)}(e,t,n))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=e,i.prototype[s]=!0,u[e]=i}function p(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class m extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new u.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}h("ERR_ASSERTION","%s",Error),h("ERR_INVALID_ARG_TYPE",(e,t,n)=>{d("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let r="The ";e.endsWith(" argument")?r+=`${e} `:r+=`"${e}" ${e.includes(".")?"property":"argument"} `,r+="must be ";const o=[],a=[],s=[];for(const e of t)d("string"==typeof e,"All expected entries have to be of type string"),c.includes(e)?o.push(e.toLowerCase()):l.test(e)?a.push(e):(d("object"!==e,'The value "object" should be written as "Object"'),s.push(e));if(a.length>0){const e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),a.push("Object"))}if(o.length>0){switch(o.length){case 1:r+=`of type ${o[0]}`;break;case 2:r+=`one of type ${o[0]} or ${o[1]}`;break;default:{const e=o.pop();r+=`one of type ${o.join(", ")}, or ${e}`}}(a.length>0||s.length>0)&&(r+=" or ")}if(a.length>0){switch(a.length){case 1:r+=`an instance of ${a[0]}`;break;case 2:r+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const e=a.pop();r+=`an instance of ${a.join(", ")}, or ${e}`}}s.length>0&&(r+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(r+="an "),r+=`${s[0]}`;break;case 2:r+=`one of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();r+=`one of ${s.join(", ")}, or ${e}`}}if(null==n)r+=`. Received ${n}`;else if("function"==typeof n&&n.name)r+=`. Received function ${n.name}`;else if("object"==typeof n){var u;if(null!==(u=n.constructor)&&void 0!==u&&u.name)r+=`. Received an instance of ${n.constructor.name}`;else{r+=`. Received ${i(n,{depth:-1})}`}}else{let e=i(n,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),r+=`. Received type ${typeof n} (${e})`}return r},TypeError),h("ERR_INVALID_ARG_VALUE",(e,t,n="is invalid")=>{let r=i(t);r.length>128&&(r=r.slice(0,128)+"...");return`The ${e.includes(".")?"property":"argument"} '${e}' ${n}. Received ${r}`},TypeError),h("ERR_INVALID_RETURN_VALUE",(e,t,n)=>{var r;return`Expected ${e} to be returned from the "${t}" function but got ${null!=n&&null!==(r=n.constructor)&&void 0!==r&&r.name?`instance of ${n.constructor.name}`:"type "+typeof n}.`},TypeError),h("ERR_MISSING_ARGS",(...e)=>{let t;d(e.length>0,"At least one arg needs to be specified");const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}}return`${t} must be specified`},TypeError),h("ERR_OUT_OF_RANGE",(e,t,n)=>{let r;if(d(t,'Missing "range" argument'),Number.isInteger(n)&&Math.abs(n)>2**32)r=f(String(n));else if("bigint"==typeof n){r=String(n);const e=BigInt(2)**BigInt(32);(n>e||n<-e)&&(r=f(r)),r+="n"}else r=i(n);return`The value of "${e}" is out of range. It must be ${t}. Received ${r}`},RangeError),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),h("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),h("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),h("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),h("ERR_STREAM_WRITE_AFTER_END","write after end",Error),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:m,aggregateTwoErrors:p(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new a([t,e],t.message);return n.code=t.code,n}return e||t}),hideStackFrames:p,codes:u}},6414:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.VERTEXPROPERTY]=this}canBeUsedFor(e){return e instanceof i.VertexProperty}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.VERTEXPROPERTY,1]):r.concat([this.ioc.unspecifiedNullSerializer.serialize(null),this.ioc.stringSerializer.serialize("",!1),this.ioc.unspecifiedNullSerializer.serialize(null),this.ioc.unspecifiedNullSerializer.serialize(null),this.ioc.unspecifiedNullSerializer.serialize(null)]);const n=[];return t&&n.push(r.from([this.ioc.DataType.VERTEXPROPERTY,0])),n.push(this.ioc.anySerializer.serialize(e.id)),n.push(this.ioc.stringSerializer.serialize(e.label,!1)),n.push(this.ioc.anySerializer.serialize(e.value)),n.push(this.ioc.unspecifiedNullSerializer.serialize(null)),n.push(this.ioc.anySerializer.serialize(e.properties)),r.concat(n)}deserialize(e,t=!0){let n=0,o=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(n++,e!==this.ioc.DataType.VERTEXPROPERTY)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,c,l,u,d,f,h,p;try{({v:a,len:s}=this.ioc.anySerializer.deserialize(o)),n+=s}catch(e){throw e.message="{id}: "+e.message,e}o=o.slice(s);try{({v:c,len:l}=this.ioc.stringSerializer.deserialize(o,!1)),n+=l}catch(e){throw e.message="{label}: "+e.message,e}o=o.slice(l);try{({v:u,len:d}=this.ioc.anySerializer.deserialize(o)),n+=d}catch(e){throw e.message="{value}: "+e.message,e}o=o.slice(d);try{({len:f}=this.ioc.unspecifiedNullSerializer.deserialize(o)),n+=f}catch(e){throw e.message="{parent}: "+e.message,e}o=o.slice(f);try{({v:h,len:p}=this.ioc.anySerializer.deserialize(o)),n+=p}catch(e){throw e.message="{properties}: "+e.message,e}o=o.slice(p);const m=h||[];return{v:new i.VertexProperty(a,c,u,m),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},6463:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}var d=console.error;console.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&t[0].includes("ResizeObserver loop completed with undelivered notifications")||d.apply(console,t)};var f=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=document.getElementById(t),this.container&&(this.config=Object.assign({width:this.container.clientWidth||800,height:this.container.clientHeight||600,nodeRadius:{default:12,selected:16},colors:{Observation:"var(--blue)",Reflection:"var(--teal)",Memory:"var(--teal)",Planning:"var(--yellow)",Decision:"var(--yellow)",Plan:"var(--light-gray)",Artifact:"var(--light-gray)",Conversation:"var(--dark-blue)",Agent:"var(--navy)"},linkDistance:80,agentLinkDistance:120,chargeStrength:-200,collisionRadius:25,animationDuration:500},n),this.svg=null,this.simulation=null,this.zoomGroup=null,this.nodesGroup=null,this.linksGroup=null,this.contextMenu=null,this.nodes=[],this.links=[],this.nodeElements=null,this.linkElements=null,this.selectedNode=null,this.highlightedNodes=new Set,this.highlightedLinks=new Set,this.agentNode=null,this.dragHandler=null,this.zoomHandler=null,this.resizeObserver=null,this.nodeClickCallback=null,this.loadMoreCallback=null,this.isInitialized=!1,this.isLoading=!1)},r=[{key:"initialize",value:function(){this.isInitialized||(this.createContextMenu(),this.initializeSVG(),this.setupResizeHandler(),this.isInitialized=!0)}},{key:"createContextMenu",value:function(){var e=this;document.getElementById("graph-context-menu")?this.contextMenu=document.getElementById("graph-context-menu"):(this.contextMenu=document.createElement("div"),this.contextMenu.id="graph-context-menu",this.contextMenu.className="graph-context-menu",this.contextMenu.style.display="none",this.contextMenu.style.position="absolute",this.contextMenu.style.backgroundColor="var(--white)",this.contextMenu.style.border="1px solid var(--border-color)",this.contextMenu.style.borderRadius="4px",this.contextMenu.style.padding="4px 0",this.contextMenu.style.zIndex="1001",this.contextMenu.style.minWidth="180px",this.contextMenu.style.boxShadow="0 2px 10px rgba(0,0,0,0.2)",this.contextMenu.innerHTML='\n            <div class="menu-item" data-action="inspect">\n                <i class="fa-solid fa-info-circle"></i> View node details\n            </div>\n            <div class="menu-item" data-action="center">\n                <i class="fa-solid fa-bullseye"></i> Center on node\n            </div>\n            <div class="menu-item" data-action="fit">\n                <i class="fa-solid fa-arrows-alt"></i> Fit to view\n            </div>\n        ',this.contextMenu.querySelectorAll(".menu-item").forEach(function(t){t.addEventListener("click",function(n){n.stopPropagation();var r=t.getAttribute("data-action");e.handleContextMenuAction(r),e.hideContextMenu()})}),document.addEventListener("click",function(){return e.hideContextMenu()}),document.body.appendChild(this.contextMenu))}},{key:"initializeSVG",value:function(){var e=this;this.container.innerHTML="",this.svg=d3.select(this.container).append("svg").attr("width",this.config.width).attr("height",this.config.height).attr("viewBox",[0,0,this.config.width,this.config.height]).attr("preserveAspectRatio","xMidYMid meet").style("max-width","100%").style("max-height","100%").style("display","block").attr("class","memory-graph"),this.svg.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 -3 6 6").attr("refX",15).attr("refY",0).attr("orient","auto").attr("markerWidth",4).attr("markerHeight",4).attr("xoverflow","visible").append("svg:path").attr("d","M 0,-3 L 6,0 L 0,3").attr("fill","var(--light-gray)").attr("stroke","none"),this.svg.append("rect").attr("width",this.config.width).attr("height",this.config.height).attr("fill","none").attr("pointer-events","all").on("click",function(){e.deselectNode(),e.hideContextMenu()}),this.zoomHandler=d3.zoom().scaleExtent([.2,5]).on("zoom",function(t){e.zoomGroup.attr("transform",t.transform),e.hideContextMenu()}),this.svg.call(this.zoomHandler),this.zoomGroup=this.svg.append("g").attr("class","zoom-group"),this.linksGroup=this.zoomGroup.append("g").attr("class","links"),this.nodesGroup=this.zoomGroup.append("g").attr("class","nodes")}},{key:"setupDragBehavior",value:function(){var e=this;this.dragHandler=d3.drag().on("start",function(t,n){t.active||e.simulation.alphaTarget(.3).restart(),n.fx=n.x,n.fy=n.y}).on("drag",function(e,t){t.fx=e.x,t.fy=e.y}).on("end",function(t,n){t.active||e.simulation.alphaTarget(0),n.isAgentNode||(n.fx=null,n.fy=null)})}},{key:"setupResizeHandler",value:function(){var e,t=this;this.resizeObserver&&this.resizeObserver.disconnect();var n=function(){clearTimeout(e),e=setTimeout(function(){t.handleResize()},16)};this.resizeObserver=new ResizeObserver(function(e){try{var r,i=a(e);try{for(i.s();!(r=i.n()).done;)if(r.value.target===t.container){n();break}}catch(e){i.e(e)}finally{i.f()}}catch(e){}}),this.resizeObserver.observe(this.container)}},{key:"handleResize",value:function(){var e=this.container.clientWidth,t=this.container.clientHeight;0!==e&&0!==t&&(Math.abs(e-this.config.width)<5&&Math.abs(t-this.config.height)<5||(this.config.width=e,this.config.height=t,this.svg&&(this.svg.attr("width",e).attr("height",t).attr("viewBox",[0,0,e,t]),this.svg.select("rect").attr("width",e).attr("height",t)),this.simulation&&(this.simulation.force("center",d3.forceCenter(e/2,t/2)),this.simulation.force("x",d3.forceX(e/2).strength(.1)),this.simulation.force("y",d3.forceY(t/2).strength(.1)),this.simulation.alpha()<.01&&this.simulation.alpha(.1).restart())))}},{key:"updateData",value:function(e){var t=this;if(this.isInitialized||this.initialize(),e){var r=(e.nodes||[]).filter(function(e){return e}),o=(e.links||[]).filter(function(e){return e}),a=new Set(this.nodes.map(function(e){return e.id})),s=new Set(this.links.map(function(e){return e.id||"".concat(e.source.id||e.source,"_").concat(e.target.id||e.target)})),c=r.filter(function(e){return!a.has(e.id)}),l=c.find(function(e){return e.isAgentNode});l&&(this.agentNode=l,l.x=this.config.width/2,l.y=this.config.height/2,l.fx=l.x,l.fy=l.y);var u=o.filter(function(e){var t=e.id||"".concat(e.source,"_").concat(e.target);return!s.has(t)}).map(function(e){return i(i({},e),{},{source:e.source.toString(),target:e.target.toString(),id:e.id||"".concat(e.source,"_").concat(e.target)})});this.nodes=[].concat(n(this.nodes),n(c)),this.links=[].concat(n(this.links),n(u)),this.simulation||this.setupSimulation(),this.updateVisualization(),this.nodes.length>0&&c.length>0&&setTimeout(function(){t.stabilizeGraph()},100)}}},{key:"addNodesAndLinks",value:function(e){var t=this;if(this.isInitialized&&e){var r=(e.newNodes||[]).filter(function(e){return e}),o=(e.newLinks||[]).filter(function(e){return e});if(0!==r.length||0!==o.length){var s=new Set(this.nodes.map(function(e){return e.id})),c=new Set(this.links.map(function(e){return e.id||"".concat(e.source.id||e.source,"_").concat(e.target.id||e.target)})),l=r.filter(function(e){return!s.has(e.id)}),u=l.find(function(e){return e.isAgentNode});u&&!this.agentNode&&(this.agentNode=u,u.x=this.config.width/2,u.y=this.config.height/2,u.fx=u.x,u.fy=u.y);var d=o.filter(function(e){var t=e.id||"".concat(e.source,"_").concat(e.target);return!c.has(t)}).map(function(e){return i(i({},e),{},{source:e.source.toString(),target:e.target.toString(),id:e.id||"".concat(e.source,"_").concat(e.target)})}).filter(function(e){var t=s.has(e.source)||l.some(function(t){return t.id===e.source}),n=s.has(e.target)||l.some(function(t){return t.id===e.target});return t&&n});if(0!==l.length||0!==d.length){var f=0,h=0;if(this.nodes.length>0){var p,m=a(this.nodes);try{for(m.s();!(p=m.n()).done;){var g=p.value;void 0!==g.x&&void 0!==g.y&&(f+=g.x,h+=g.y)}}catch(e){m.e(e)}finally{m.f()}f/=this.nodes.length,h/=this.nodes.length}else f=this.config.width/2,h=this.config.height/2;var y=this.nodes.find(function(e){return e.isAgentNode}),v=f,b=h;if(y&&void 0!==y.x&&void 0!==y.y&&(v=y.x,b=y.y),l.forEach(function(e){e.x=v+100*(Math.random()-.5),e.y=b+100*(Math.random()-.5);var n=d.filter(function(t){return t.source===e.id||t.target===e.id});if(n.length>0){var r=0,i=0,o=0;n.forEach(function(n){var a=n.source===e.id?n.target:n.source,s=t.nodes.find(function(e){return e.id===a});s&&void 0!==s.x&&void 0!==s.y&&(r+=s.x,i+=s.y,o++)}),o>0&&(r/=o,i/=o,e.x=r+40*(Math.random()-.5),e.y=i+40*(Math.random()-.5))}}),this.nodes=[].concat(n(this.nodes),n(l)),this.links=[].concat(n(this.links),n(d)),this.updateVisualization(),l.length>0){var w=new Set(l.map(function(e){return e.id}));if(this.simulation){for(var S=0;S<10;S++)this.simulation.tick();this.updatePositions(),setTimeout(function(){t.highlightNodes(w)},500)}}}}}}},{key:"stabilizeGraph",value:function(){if(this.simulation){for(var e=0;e<50;++e)this.simulation.tick();this.updatePositions(),this.simulation.alphaTarget(0).alpha(.05)}}},{key:"setupSimulation",value:function(){var e=this;this.setupDragBehavior();var n=d3.forceLink().id(function(e){return e.id}).distance(function(n){var r="object"===t(n.source)?n.source.id:n.source,i="object"===t(n.target)?n.target.id:n.target;return r.startsWith("agent-")||i.startsWith("agent-")?e.config.agentLinkDistance:e.config.linkDistance});this.simulation=d3.forceSimulation().force("link",n).force("charge",d3.forceManyBody().strength(this.config.chargeStrength)).force("center",d3.forceCenter(this.config.width/2,this.config.height/2)).force("collision",d3.forceCollide().radius(function(t){return t.isAgentNode?1.5*e.config.nodeRadius.default:e.config.collisionRadius})).force("x",d3.forceX(this.config.width/2).strength(.05)).force("y",d3.forceY(this.config.height/2).strength(.05)).alphaDecay(.1).velocityDecay(.8),this.simulation.on("tick",function(){return e.updatePositions()})}},{key:"updateVisualization",value:function(){var e=this;if(this.svg&&this.simulation){this.linkElements=this.linksGroup.selectAll("line.link").data(this.links,function(e){return e.id||"".concat(e.source.id||e.source,"_").concat(e.target.id||e.target)}),this.linkElements.exit().remove();var t=this.linkElements.enter().append("line").attr("class","link").attr("stroke","var(--light-gray)").attr("stroke-width",1).attr("stroke-opacity",.6).attr("marker-end","url(#arrowhead)");this.linkElements=t.merge(this.linkElements),this.nodeElements=this.nodesGroup.selectAll("circle.node").data(this.nodes,function(e){return e.id}),this.nodeElements.exit().remove();var n=this.nodeElements.enter().append("circle").attr("class",function(e){return e.isAgentNode?"node node-agent":"node node-".concat(e.type.toLowerCase())}).attr("r",this.config.nodeRadius.default).attr("fill",function(t){return e.getNodeColor(t)}).attr("stroke","none").attr("stroke-width",1).attr("cursor",function(e){return e.isAgentNode?"default":"pointer"}).call(this.dragHandler).on("click",function(t,n){t.stopPropagation(),e.handleNodeClick(t,n)}).on("contextmenu",function(t,n){n.isAgentNode?(t.preventDefault(),t.stopPropagation()):e.showContextMenu(t,n)});this.nodesGroup.selectAll("text.node-label").data(this.nodes,function(e){return e.id}).enter().append("text").attr("class",function(e){return e.isAgentNode?"node-label agent-label":"node-label"}).attr("text-anchor","middle").attr("dominant-baseline","text-after-edge").attr("dy",function(e){return e.isAgentNode?24:20}).attr("font-size","0.4rem").attr("font-weight",function(e){return e.isAgentNode?"bold":"normal"}).attr("pointer-events","none").attr("fill","var(--text-color)").text(function(e){return e.isAgentNode?e.label||e.type:e.label?e.label.substring(0,12):e.type}),this.nodeElements=n.merge(this.nodeElements),this.simulation.nodes(this.nodes),this.simulation.force("link").links(this.links),this.simulation.alpha()<.1&&this.simulation.alpha(.2).restart()}}},{key:"updatePositions",value:function(){this.nodeElements&&this.linkElements&&(this.nodeElements.attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}),this.nodesGroup.selectAll("text.node-label").attr("x",function(e){return e.x}).attr("y",function(e){return e.y}),this.linkElements.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}))}},{key:"handleNodeClick",value:function(e,t){e.stopPropagation(),2!==e.button&&(this.selectNode(t),this.nodeClickCallback&&this.nodeClickCallback(t))}},{key:"selectNode",value:function(e){var t=this;this.selectedNode&&this.nodeElements.filter(function(e){return e.id===t.selectedNode.id}).transition().duration(200).attr("r",this.config.nodeRadius.default).attr("stroke-width",1.5),this.selectedNode=e,e&&(this.nodeElements.filter(function(t){return t.id===e.id}).transition().duration(200).attr("r",this.config.nodeRadius.selected).attr("stroke-width",2.5),this.highlightConnectedNodes(e))}},{key:"deselectNode",value:function(){var e=this;this.selectedNode&&(this.nodeElements.filter(function(t){return t.id===e.selectedNode.id}).transition().duration(200).attr("r",this.config.nodeRadius.default).attr("stroke-width",1),this.nodeElements.transition().duration(200).attr("opacity",1),this.linkElements.transition().duration(200).attr("opacity",.6).attr("stroke","var(--light-gray)").attr("stroke-width",1),this.selectedNode=null,this.highlightedNodes.clear(),this.highlightedLinks.clear())}},{key:"highlightConnectedNodes",value:function(e){var t=this;this.highlightedNodes.clear(),this.highlightedLinks.clear(),this.highlightedNodes.add(e.id),e.isAgentNode?this.highlightAllChainsFromAgent():this.highlightPathToAgent(e.id),this.nodeElements.transition().duration(200).attr("opacity",function(e){return t.highlightedNodes.has(e.id)?1:.2}),this.linkElements.transition().duration(200).attr("opacity",function(e){var n=e.id||"".concat(e.source.id||e.source,"_").concat(e.target.id||e.target);return t.highlightedLinks.has(n)?1:.1}).attr("stroke",function(e){var n=e.id||"".concat(e.source.id||e.source,"_").concat(e.target.id||e.target);return t.highlightedLinks.has(n)?"var(--medium-gray)":"var(--light-gray)"}).attr("stroke-width",function(e){var n=e.id||"".concat(e.source.id||e.source,"_").concat(e.target.id||e.target);return t.highlightedLinks.has(n)?1.5:1})}},{key:"highlightAllChainsFromAgent",value:function(){var e,n=new Map,r=null===(e=this.nodes.find(function(e){return e.isAgentNode}))||void 0===e?void 0:e.id;if(r){this.links.forEach(function(e){var r="object"===t(e.source)?e.source.id:e.source,i="object"===t(e.target)?e.target.id:e.target;n.has(r)||n.set(r,[]),n.get(r).push({target:i,linkId:e.id||"".concat(r,"_").concat(i)})});var i=[r],o=new Set([r]);for(this.highlightedNodes.add(r);i.length>0;){var s,c=i.shift(),l=a(n.get(c)||[]);try{for(l.s();!(s=l.n()).done;){var u=s.value,d=u.target,f=u.linkId;this.highlightedLinks.add(f),this.highlightedNodes.add(d),o.has(d)||(o.add(d),i.push(d))}}catch(e){l.e(e)}finally{l.f()}}}}},{key:"highlightPathToAgent",value:function(e){var r,i=this,o=null===(r=this.nodes.find(function(e){return e.isAgentNode}))||void 0===r?void 0:r.id;if(o){var s=new Map;this.links.forEach(function(e){var n="object"===t(e.source)?e.source.id:e.source,r="object"===t(e.target)?e.target.id:e.target,i=e.id||"".concat(n,"_").concat(r);s.has(n)||s.set(n,[]),s.get(n).push({node:r,linkId:i,isForward:!0}),s.has(r)||s.set(r,[]),s.get(r).push({node:n,linkId:i,isForward:!1})});for(var c=[{id:e,path:[],linkPath:[]}],l=new Set([e]),u=null;c.length>0&&!u;){var d=c.shift(),f=d.id,h=d.path,p=d.linkPath;if(f===o){u={nodePath:[].concat(n(h),[f]),linkPath:n(p)};break}var m,g=a(s.get(f)||[]);try{for(g.s();!(m=g.n()).done;){var y=m.value,v=y.node,b=y.linkId,w=y.isForward;l.has(v)||(l.add(v),c.push({id:v,path:[].concat(n(h),[f]),linkPath:[].concat(n(p),[{id:b,isForward:w}])}))}}catch(e){g.e(e)}finally{g.f()}}u&&(u.nodePath.forEach(function(e){return i.highlightedNodes.add(e)}),u.linkPath.forEach(function(e){return i.highlightedLinks.add(e.id)}),this.highlightForwardChain(e,l))}}},{key:"highlightForwardChain",value:function(e){var n=this,r=(arguments.length>1&&void 0!==arguments[1]||new Set,new Map);this.links.forEach(function(e){var n="object"===t(e.source)?e.source.id:e.source,i="object"===t(e.target)?e.target.id:e.target,o=e.id||"".concat(n,"_").concat(i);r.has(n)||r.set(n,[]),r.get(n).push({node:i,linkId:o})});var i=function(e){var t,o=a(r.get(e)||[]);try{for(o.s();!(t=o.n()).done;){var s=t.value,c=s.node,l=s.linkId;n.highlightedLinks.add(l),n.highlightedNodes.add(c),i(c)}}catch(e){o.e(e)}finally{o.f()}};i(e)}},{key:"findConnectedNodesAndLinks",value:function(e,n,r){var i=new Map;this.links.forEach(function(e){var n="object"===t(e.source)?e.source.id:e.source,r="object"===t(e.target)?e.target.id:e.target,o=e.id||"".concat(n,"_").concat(r);i.has(n)||i.set(n,[]),i.get(n).push({node:r,linkId:o,isForward:!0}),i.has(r)||i.set(r,[]),i.get(r).push({node:n,linkId:o,isForward:!1})});for(var o=[{id:e,distance:0}],s=new Set([e]);o.length>0;){var c=o.shift(),l=c.id,u=c.distance;if(!(u>=2)){var d,f=a(i.get(l)||[]);try{for(f.s();!(d=f.n()).done;){var h=d.value,p=h.node,m=h.linkId;h.isForward,r.add(m),n.add(p),s.has(p)||(s.add(p),o.push({id:p,distance:u+1}))}}catch(e){f.e(e)}finally{f.f()}}}}},{key:"highlightNodes",value:function(e){var t=this;if(e&&0!==e.size){var n=this.nodeElements.filter(function(t){return e.has(t.id)});if(!n.empty()){this.nodeElements.classed("pulse-blue",!1),this.nodeElements.classed("pulse-teal",!1),this.nodeElements.classed("pulse-yellow",!1),this.nodeElements.classed("pulse-gray",!1),this.nodeElements.classed("pulse-dark-blue",!1);var r=new Set(e),i=new Set;e.forEach(function(e){r.add(e),t.findConnectedNodesAndLinks(e,r,i)}),n.each(function(e){var t=this;switch(e.type||"Unknown"){case"Observation":default:d3.select(this).classed("pulse-blue",!0);break;case"Reflection":case"Memory":d3.select(this).classed("pulse-teal",!0);break;case"Planning":case"Decision":d3.select(this).classed("pulse-yellow",!0);break;case"Plan":case"Artifact":d3.select(this).classed("pulse-gray",!0);break;case"Conversation":d3.select(this).classed("pulse-dark-blue",!0)}setTimeout(function(){d3.select(t).classed("pulse-blue",!1).classed("pulse-teal",!1).classed("pulse-yellow",!1).classed("pulse-gray",!1).classed("pulse-dark-blue",!1)},2e4)}),this.nodeElements.transition().duration(200).attr("opacity",function(e){return r.has(e.id)?1:.2}),this.linkElements.transition().duration(200).attr("opacity",function(e){var t=e.id||"".concat(e.source.id||e.source,"_").concat(e.target.id||e.target);return i.has(t)?1:.1}).attr("stroke",function(e){var t=e.id||"".concat(e.source.id||e.source,"_").concat(e.target.id||e.target);return i.has(t)?"var(--medium-gray)":"var(--light-gray)"}).attr("stroke-width",function(e){var t=e.id||"".concat(e.source.id||e.source,"_").concat(e.target.id||e.target);return i.has(t)?1.5:1}),setTimeout(function(){t.nodeElements.transition().duration(500).attr("opacity",1),t.linkElements.transition().duration(500).attr("opacity",.6).attr("stroke","var(--light-gray)").attr("stroke-width",1)},25e3),this.injectPulseAnimationCSS()}}}},{key:"injectPulseAnimationCSS",value:function(){if(!document.getElementById("graph-pulse-animations")){var e=document.createElement("style");e.id="graph-pulse-animations",e.textContent="\n            @keyframes pulseDot-blue {\n                0% {\n                    filter: drop-shadow(0 0 0 rgba(0, 159, 222, 0.4));\n                }\n                70% {\n                    filter: drop-shadow(0 0 6px rgba(0, 159, 222, 0.7));\n                }\n                100% {\n                    filter: drop-shadow(0 0 0 rgba(0, 159, 222, 0));\n                }\n            }\n            \n            @keyframes pulseDot-teal {\n                0% {\n                    filter: drop-shadow(0 0 0 rgba(0, 166, 152, 0.4));\n                }\n                70% {\n                    filter: drop-shadow(0 0 6px rgba(0, 166, 152, 0.7));\n                }\n                100% {\n                    filter: drop-shadow(0 0 0 rgba(0, 166, 152, 0));\n                }\n            }\n            \n            @keyframes pulseDot-yellow {\n                0% {\n                    filter: drop-shadow(0 0 0 rgba(232, 194, 104, 0.4));\n                }\n                70% {\n                    filter: drop-shadow(0 0 6px rgba(232, 194, 104, 0.7));\n                }\n                100% {\n                    filter: drop-shadow(0 0 0 rgba(232, 194, 104, 0));\n                }\n            }\n            \n            @keyframes pulseDot-gray {\n                0% {\n                    filter: drop-shadow(0 0 0 rgba(147, 147, 147, 0.4));\n                }\n                70% {\n                    filter: drop-shadow(0 0 6px rgba(147, 147, 147, 0.7));\n                }\n                100% {\n                    filter: drop-shadow(0 0 0 rgba(147, 147, 147, 0));\n                }\n            }\n            \n            @keyframes pulseDot-dark-blue {\n                0% {\n                    filter: drop-shadow(0 0 0 rgba(0, 57, 82, 0.4));\n                }\n                70% {\n                    filter: drop-shadow(0 0 6px rgba(0, 57, 82, 0.7));\n                }\n                100% {\n                    filter: drop-shadow(0 0 0 rgba(0, 57, 82, 0));\n                }\n            }\n            \n            .memory-graph .node.pulse-blue {\n                animation: pulseDot-blue 2s ease-in-out 10;\n            }\n            \n            .memory-graph .node.pulse-teal {\n                animation: pulseDot-teal 2s ease-in-out 10;\n            }\n            \n            .memory-graph .node.pulse-yellow {\n                animation: pulseDot-yellow 2s ease-in-out 10;\n            }\n            \n            .memory-graph .node.pulse-gray {\n                animation: pulseDot-gray 2s ease-in-out 10;\n            }\n            \n            .memory-graph .node.pulse-dark-blue {\n                animation: pulseDot-dark-blue 2s ease-in-out 10;\n            }\n        ",document.head.appendChild(e)}}},{key:"showContextMenu",value:function(e,t){e.preventDefault(),this.selectNode(t),this.container.getBoundingClientRect();var n=e.pageX,r=e.pageY;t.isAgentNode?this.contextMenu.querySelector('[data-action="inspect"]').style.display="none":this.contextMenu.querySelector('[data-action="inspect"]').style.display="flex",this.contextMenu.style.left="".concat(n,"px"),this.contextMenu.style.top="".concat(r,"px"),this.contextMenu.style.display="block"}},{key:"hideContextMenu",value:function(){this.contextMenu&&(this.contextMenu.style.display="none")}},{key:"handleContextMenuAction",value:function(e){if(this.selectedNode&&("inspect"!==e||!this.selectedNode.isAgentNode))switch(e){case"inspect":this.nodeClickCallback&&this.nodeClickCallback(this.selectedNode);break;case"center":this.centerOnNode(this.selectedNode.id);break;case"fit":this.fitToView()}}},{key:"fitToView",value:function(){if(this.svg&&this.zoomHandler&&0!==this.nodes.length){var e=1/0,t=1/0,n=-1/0,r=-1/0;this.nodes.forEach(function(i){i.x<e&&(e=i.x),i.y<t&&(t=i.y),i.x>n&&(n=i.x),i.y>r&&(r=i.y)});var i=(n+=50)-(e-=50),o=(r+=50)-(t-=50),a=Math.min(this.config.width/i,this.config.height/o,2),s=e+i/2,c=t+o/2,l=d3.zoomIdentity.translate(this.config.width/2,this.config.height/2).scale(a).translate(-s,-c);this.svg.transition().duration(750).call(this.zoomHandler.transform,l)}}},{key:"centerOnNode",value:function(e){var t=this.nodes.find(function(t){return t.id===e});if(t&&this.svg&&this.zoomHandler){var n=d3.zoomIdentity.translate(this.config.width/2,this.config.height/2).scale(1.5).translate(-t.x,-t.y);this.svg.transition().duration(750).call(this.zoomHandler.transform,n),this.selectNode(t)}}},{key:"getNodeColor",value:function(e){return e.isAgentNode?this.config.colors.Agent:this.config.colors[e.type]||"var(--gray, #303030)"}},{key:"lightenColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;if(e.startsWith("var("))return e.replace("var(--","var(--light-");if(e.startsWith("#")){var n=parseInt(e.substr(1,2),16),r=parseInt(e.substr(3,2),16),i=parseInt(e.substr(5,2),16);return n=Math.floor(n+(255-n)*t),r=Math.floor(r+(255-r)*t),i=Math.floor(i+(255-i)*t),"rgba(".concat(n,", ").concat(r,", ").concat(i,", 0.5)")}if(e.startsWith("rgb")){var o=e.startsWith("rgba"),a=e.match(/\d+/g).map(Number),s=Math.floor(a[0]+(255-a[0])*t),c=Math.floor(a[1]+(255-a[1])*t),l=Math.floor(a[2]+(255-a[2])*t);return o?"rgba(".concat(s,", ").concat(c,", ").concat(l,", ").concat(.5*a[3],")"):"rgba(".concat(s,", ").concat(c,", ").concat(l,", 0.5)")}return e}},{key:"setNodeClickCallback",value:function(e){this.nodeClickCallback=e}},{key:"setLoadMoreCallback",value:function(e){this.loadMoreCallback=e}},{key:"destroy",value:function(){this.simulation&&this.simulation.stop(),this.resizeObserver&&this.resizeObserver.disconnect(),this.svg&&this.svg.on(".zoom",null),this.container&&(this.container.innerHTML=""),this.contextMenu&&this.contextMenu.parentNode&&this.contextMenu.parentNode.removeChild(this.contextMenu)}}],r&&l(e.prototype,r),o&&l(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,o}();"undefined"!=typeof window&&(window.GraphVisualization=f),e.exports&&(e.exports={GraphVisualization:f})},6524:(e,t,n)=>{"use strict";const{ObjectSetPrototypeOf:r}=n(4134);e.exports=o;const i=n(7382);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}r(o.prototype,i.prototype),r(o,i),o.prototype._transform=function(e,t,n){n(null,e)}},6532:(e,t,n)=>{"use strict";const r=n(5606),{PromisePrototypeThen:i,SymbolAsyncIterator:o,SymbolIterator:a}=n(4134),{Buffer:s}=n(8287),{ERR_INVALID_ARG_TYPE:c,ERR_STREAM_NULL_VALUES:l}=n(6371).codes;e.exports=function(e,t,n){let u,d;if("string"==typeof t||t instanceof s)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});if(t&&t[o])d=!0,u=t[o]();else{if(!t||!t[a])throw new c("iterable",["Iterable"],t);d=!1,u=t[a]()}const f=new e({objectMode:!0,highWaterMark:1,...n});let h=!1;return f._read=function(){h||(h=!0,async function(){for(;;){try{const{value:e,done:t}=d?await u.next():u.next();if(t)f.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw h=!1,new l;if(f.push(t))continue;h=!1}}catch(e){f.destroy(e)}break}}())},f._destroy=function(e,t){i(async function(e){const t=null!=e,n="function"==typeof u.throw;if(t&&n){const{value:t,done:n}=await u.throw(e);if(await t,n)return}if("function"==typeof u.return){const{value:e}=await u.return();await e}}(e),()=>r.nextTick(t,e),n=>r.nextTick(t,n||e))},f}},6579:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e}writeRequest({requestId:e,op:t,processor:n,args:i}){const o=[r.from([129]),this.ioc.uuidSerializer.serialize(e,!1),this.ioc.stringSerializer.serialize(t,!1),this.ioc.stringSerializer.serialize(n,!1),this.ioc.mapSerializer.serialize(i,!1)];return r.concat(o)}}},6580:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{get INT32_MIN(){return-2147483648}get INT32_MAX(){return 2147483647}constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.INT]=this}canBeUsedFor(e){return"number"==typeof e&&!(e<this.INT32_MIN||e>this.INT32_MAX)}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.INT,1]):r.from([0,0,0,0]);const n=[];t&&n.push(r.from([this.ioc.DataType.INT,0]));const i=r.alloc(4);return i.writeInt32BE(e),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.INT)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<4)throw new Error("unexpected {value} length");n+=4;return{v:i.readInt32BE(),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},6665:(e,t,n)=>{"use strict";const r=n(5332),i=n(3335).TraversalStrategies,o=r.GraphTraversalSource,a=n(163).Graph;class s{constructor(e){this.traversalSourceClass=e}static traversal(e){return new s(e||o)}withRemote(e){return this.withGraph(new a).withRemote(e)}withGraph(e){return new this.traversalSourceClass(e,new i)}}e.exports=s},6706:(e,t,n)=>{const r=n(5606),i=n(8287),{isReadable:o,isWritable:a,isIterable:s,isNodeStream:c,isReadableNodeStream:l,isWritableNodeStream:u,isDuplexNodeStream:d,isReadableStream:f,isWritableStream:h}=n(6115),p=n(6238),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:y}}=n(6371),{destroyer:v}=n(5896),b=n(3370),w=n(7576),S=n(8584),{createDeferredPromise:E}=n(7760),_=n(6532),T=globalThis.Blob||i.Blob,A=void 0!==T?function(e){return e instanceof T}:function(e){return!1},I=globalThis.AbortController||n(5568).AbortController,{FunctionPrototypeCall:D}=n(4134);class x extends b{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function C(e){const t=e.readable&&"function"!=typeof e.readable.read?w.wrap(e.readable):e.readable,n=e.writable;let r,i,s,c,l,u=!!o(t),d=!!a(n);function f(e){const t=c;c=null,t?t(e):e&&l.destroy(e)}return l=new x({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==n||!n.writableObjectMode),readable:u,writable:d}),d&&(p(n,e=>{d=!1,e&&v(t,e),f(e)}),l._write=function(e,t,i){n.write(e,t)?i():r=i},l._final=function(e){n.end(),i=e},n.on("drain",function(){if(r){const e=r;r=null,e()}}),n.on("finish",function(){if(i){const e=i;i=null,e()}})),u&&(p(t,e=>{u=!1,e&&v(t,e),f(e)}),t.on("readable",function(){if(s){const e=s;s=null,e()}}),t.on("end",function(){l.push(null)}),l._read=function(){for(;;){const e=t.read();if(null===e)return void(s=l._read);if(!l.push(e))return}}),l._destroy=function(e,o){e||null===c||(e=new m),s=null,r=null,i=null,null===c?o(e):(c=o,v(n,e),v(t,e))},l}e.exports=function e(t,n){if(d(t))return t;if(l(t))return C({readable:t});if(u(t))return C({writable:t});if(c(t))return C({writable:!1,readable:!1});if(f(t))return C({readable:w.fromWeb(t)});if(h(t))return C({writable:S.fromWeb(t)});if("function"==typeof t){const{value:e,write:i,final:o,destroy:a}=function(e){let{promise:t,resolve:n}=E();const i=new I,o=i.signal,a=e(async function*(){for(;;){const e=t;t=null;const{chunk:i,done:a,cb:s}=await e;if(r.nextTick(s),a)return;if(o.aborted)throw new m(void 0,{cause:o.reason});({promise:t,resolve:n}=E()),yield i}}(),{signal:o});return{value:a,write(e,t,r){const i=n;n=null,i({chunk:e,done:!1,cb:r})},final(e){const t=n;n=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}(t);if(s(e))return _(x,e,{objectMode:!0,write:i,final:o,destroy:a});const c=null==e?void 0:e.then;if("function"==typeof c){let t;const n=D(c,e,e=>{if(null!=e)throw new y("nully","body",e)},e=>{v(t,e)});return t=new x({objectMode:!0,readable:!1,write:i,final(e){o(async()=>{try{await n,r.nextTick(e,null)}catch(t){r.nextTick(e,t)}})},destroy:a})}throw new y("Iterable, AsyncIterable or AsyncFunction",n,e)}if(A(t))return e(t.arrayBuffer());if(s(t))return _(x,t,{objectMode:!0,writable:!1});if(f(null==t?void 0:t.readable)&&h(null==t?void 0:t.writable))return x.fromWeb(t);if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable)){return C({readable:null!=t&&t.readable?l(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?u(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0})}const i=null==t?void 0:t.then;if("function"==typeof i){let e;return D(i,t,t=>{null!=t&&e.push(t),e.push(null)},t=>{v(e,t)}),e=new x({objectMode:!0,writable:!1,read(){}})}throw new g(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},6792:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(7037))&&r.__esModule?r:{default:r};var o=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};t.default=o},6893:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=null,r=[{key:"showError",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){try{var n=ErrorHandler.getError(e,t),r=n.text,i=n.severity;showError(r,i)}catch(e){showError("An unexpected error occurred","error")}})},{key:"showDirectMessage",value:function(e){showError(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error")}}],n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();window.ControlRoomErrorHandler=r,window.ControlRoomErrorCodes={INIT_FAILED:["system","initializationFailed"],UNEXPECTED_ERROR:["system","unexpectedError"],DB_ERROR:["network","databaseError"],NEO4J_ERROR:["network","neo4jError"],MESSAGE_EMPTY:["validation","messageEmpty"],SEND_FAILED:["network","sendFailed"],CONVERSATION_TIMEOUT:["network","conversationTimeout"],AGENTS_ERROR:["network","agentsError"],TIMELINE_LOAD_ERROR:["network","timelineLoadError"],TIMELINE_MEMORIES_LOAD_ERROR:["network","timelineMemoriesLoadError"],ACTIVITIES_LOAD_ERROR:["network","activitiesLoadError"]}},6980:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports={des_error:({serializer:e,args:t,cursor:n,err:i})=>{void 0===n&&(n=t[0]);let o="";n instanceof r&&(n.length>32&&(o="..."),n=n.slice(0,32).toString("hex"));const a=t[1],s=t[2];let c=`${e.constructor.name}.deserialize(cursor=${n}${o}`;return void 0!==a&&(c+=`, fullyQualifiedFormat=${a}`),void 0!==s&&(c+=`, nullable=${s}`),c+=`): ${i.message.replace(/\.$/,"")}.`,i.message=c,i}}},7007:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,n)}(e,i,{once:!0})})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,o,a;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,console&&console.warn}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):p(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,u=p(c,l);for(n=0;n<l;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7037:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(7656))&&r.__esModule?r:{default:r};var o=function(e){return"string"==typeof e&&i.default.test(e)};t.default=o},7092:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e}canBeUsedFor(){}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.LONG,1]):r.from([0,0,0,0,0,0,0,0]);const n=[];t&&n.push(r.from([this.ioc.DataType.LONG,0]));const i=r.alloc(8);return i.writeBigInt64BE(BigInt(e)),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.LONG)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<8)throw new Error("unexpected {value} length");n+=8;return{v:i.readBigInt64BE(),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},7100:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e,t){this.ioc=e,this.ID=t,this.ioc.serializers[t]=this}canBeUsedFor(e){return Array.isArray(e)}serialize(e,t=!0){if(null==e)return t?r.from([this.ID,1]):r.from([0,0,0,0]);const n=[];t&&n.push(r.from([this.ID,0]));let i=e.length;if(i<0&&(i=0),i>this.ioc.intSerializer.INT32_MAX)throw new Error(`Array length=${i} is greater than supported max_length=${this.ioc.intSerializer.INT32_MAX}.`);n.push(this.ioc.intSerializer.serialize(i,!1));for(let t=0;t<i;t++)n.push(this.ioc.anySerializer.serialize(e[t]));return r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ID)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let o,a;try{({v:o,len:a}=this.ioc.intSerializer.deserialize(i,!1)),n+=a}catch(e){throw e.message="{length}: "+e.message,e}if(o<0)throw new Error("{length} is less than zero");i=i.slice(a);const s=[];for(let e=0;e<o;e++){let t,r;try{({v:t,len:r}=this.ioc.anySerializer.deserialize(i)),n+=r}catch(t){throw t.message=`{item_${e}}: `+t.message,t}i=i.slice(r),s.push(t)}return{v:s,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},7135:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.UNSPECIFIED_NULL]=this}canBeUsedFor(e){return null==e}serialize(e){return r.from([this.ioc.DataType.UNSPECIFIED_NULL,1])}deserialize(e){let t=0,n=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");const i=n.readUInt8();if(t++,i!==this.ioc.DataType.UNSPECIFIED_NULL)throw new Error("unexpected {type_code}");if(n=n.slice(1),n.length<1)throw new Error("{value_flag} is missing");const o=n.readUInt8();if(t++,1!==o)throw new Error("unexpected {value_flag}");return n=n.slice(1),{v:null,len:t}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:n,err:e})}}}},7186:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(9025)),i=o(n(9042));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,r.default)("v5",80,i.default);t.default=a},7240:(e,t,n)=>{"use strict";const r=n(5737),i=r.RemoteConnection,o=r.RemoteTraversal,a=n(1104),s=n(7545),c=n(9032),l=n(3335).OptionsStrategy;class u extends i{constructor(e,t={}){super(e,t),this._client=new s(e,t)}open(){return this._client.open()}get isOpen(){return this._client.isOpen}submit(e){const t=e.sourceInstructions.find(e=>"withStrategies"===e[0]&&e[1]instanceof l),n=["evaluationTimeout","scriptEvaluationTimeout","batchSize","requestId","userAgent","materializeProperties"];let r;if(void 0!==t){r={};const e=t[1].configuration;for(const t in e)e.hasOwnProperty(t)&&n.indexOf(t)>-1&&(r[t]=e[t])}return this._client.submit(e,null,r).then(e=>new o(e.toArray()))}createSession(){if(this.isSessionBound)throw new Error("Connection is already bound to a session - child sessions are not allowed");const e=Object.assign({},this.options);return e.session=a.getUuid(),new u(this.url,e)}get isSessionBound(){return this.options.session}commit(){return this._client.submit(c.GraphOp.commit,null)}rollback(){return this._client.submit(c.GraphOp.rollback,null)}close(){return this._client.close()}addListener(...e){return this._client.addListener(...e)}removeListener(...e){return this._client.removeListener(...e)}}e.exports=u},7286:e=>{"use strict";class t extends Error{constructor(e,t){super(e),this.name="ResponseError",this.statusCode=t.code,this.statusMessage=t.message,this.statusAttributes=t.attributes||{}}}e.exports=t},7382:(e,t,n)=>{"use strict";const{ObjectSetPrototypeOf:r,Symbol:i}=n(4134);e.exports=l;const{ERR_METHOD_NOT_IMPLEMENTED:o}=n(6371).codes,a=n(3370),{getHighWaterMark:s}=n(5291);r(l.prototype,a.prototype),r(l,a);const c=i("kCallback");function l(e){if(!(this instanceof l))return new l(e);const t=e?s(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),a.call(this,e),this._readableState.sync=!1,this[c]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function u(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,n)=>{t?e?e(t):this.destroy(t):(null!=n&&this.push(n),this.push(null),e&&e())})}function d(){this._final!==u&&u.call(this)}l.prototype._final=u,l.prototype._transform=function(e,t,n){throw new o("_transform()")},l.prototype._write=function(e,t,n){const r=this._readableState,i=this._writableState,o=r.length;this._transform(e,t,(e,t)=>{e?n(e):(null!=t&&this.push(t),i.ended||o===r.length||r.length<r.highWaterMark?n():this[c]=n)})},l.prototype._read=function(){if(this[c]){const e=this[c];this[c]=null,e()}}},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=s(e),a=o[0],c=o[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,c)),u=0,d=c>0?a-4:a;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;2===c&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t);1===c&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t);return l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,c=r-i;s<c;s+=a)o.push(l(e,s,s+a>c?c:s+a));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function l(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(c(r));return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},7545:(e,t,n)=>{"use strict";const r=n(1104),i=n(4074),o=n(9032);e.exports=class{constructor(e,t={}){this._options=t,"session"===this._options.processor&&(this._options.session=t.session||r.getUuid()),this._options.session&&(this._options.processor=t.processor||"session"),this._connection=new i(e,t)}open(){return this._connection.open()}get isOpen(){return this._connection.isOpen}submit(e,t,n){const r=n&&n.requestId;r&&delete n.requestId;const i=Object.assign({gremlin:e,aliases:{g:this._options.traversalSource||"g"}},n);if(this._options.session&&"session"===this._options.processor&&(i.session=this._options.session),e instanceof o)return this._options.session&&"session"===this._options.processor?this._connection.submit("session","bytecode",i,r):this._connection.submit("traversal","bytecode",i,r);if("string"==typeof e)return i.bindings=t,i.language="gremlin-groovy",i.accept=this._connection.mimeType,this._connection.submit(this._options.processor||"","eval",i,r);throw new TypeError("message must be of type Bytecode or string")}stream(e,t,n){const r=n&&n.requestId;r&&delete n.requestId;const i=Object.assign({gremlin:e,aliases:{g:this._options.traversalSource||"g"}},n);if(this._options.session&&"session"===this._options.processor&&(i.session=this._options.session),e instanceof o)return this._options.session&&"session"===this._options.processor?this._connection.stream("session","bytecode",i,r):this._connection.stream("traversal","bytecode",i,r);if("string"==typeof e)return i.bindings=t,i.language="gremlin-groovy",i.accept=this._connection.mimeType,this._connection.stream(this._options.processor||"","eval",i,r);throw new TypeError("message must be of type Bytecode or string")}close(){if(this._options.session&&"session"===this._options.processor){const e={session:this._options.session};return this._connection.submit(this._options.processor,"close",e,null).then(()=>this._connection.close())}return this._connection.close()}addListener(e,t){this._connection.on(e,t)}removeListener(e,t){this._connection.removeListener(e,t)}}},7576:(e,t,n)=>{"use strict";const r=n(5606),{ArrayPrototypeIndexOf:i,NumberIsInteger:o,NumberIsNaN:a,NumberParseInt:s,ObjectDefineProperties:c,ObjectKeys:l,ObjectSetPrototypeOf:u,Promise:d,SafeSet:f,SymbolAsyncDispose:h,SymbolAsyncIterator:p,Symbol:m}=n(4134);e.exports=V,V.ReadableState=G;const{EventEmitter:g}=n(7007),{Stream:y,prependListener:v}=n(4259),{Buffer:b}=n(8287),{addAbortSignal:w}=n(4147),S=n(6238);let E=n(7760).debuglog("stream",e=>{E=e});const _=n(345),T=n(5896),{getHighWaterMark:A,getDefaultHighWaterMark:I}=n(5291),{aggregateTwoErrors:D,codes:{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:C,ERR_OUT_OF_RANGE:O,ERR_STREAM_PUSH_AFTER_EOF:R,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:N},AbortError:k}=n(6371),{validateObject:L}=n(277),M=m("kPaused"),{StringDecoder:P}=n(3141),j=n(6532);u(V.prototype,y.prototype),u(V,y);const z=()=>{},{errorOrDestroy:U}=T,B=1,F=16,H=32,$=2048,q=4096;function W(e){return{enumerable:!1,get(){return 0!==(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function G(e,t,r){"boolean"!=typeof r&&(r=t instanceof n(3370)),this.state=$|q|F|H,e&&e.objectMode&&(this.state|=B),r&&e&&e.readableObjectMode&&(this.state|=B),this.highWaterMark=e?A(this,e,"readableHighWaterMark",r):I(!1),this.buffer=new _,this.length=0,this.pipes=[],this.flowing=null,this[M]=null,e&&!1===e.emitClose&&(this.state&=~$),e&&!1===e.autoDestroy&&(this.state&=~q),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new P(e.encoding),this.encoding=e.encoding)}function V(e){if(!(this instanceof V))return new V(e);const t=this instanceof n(3370);this._readableState=new G(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&w(e.signal,this)),y.call(this,e),T.construct(this,()=>{this._readableState.needReadable&&Z(this,this._readableState)})}function Y(e,t,n,r){E("readableAddChunk",t);const i=e._readableState;let o;if(0===(i.state&B)&&("string"==typeof t?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?t=b.from(t,n).toString(i.encoding):(t=b.from(t,n),n=""))):t instanceof b?n="":y._isUint8Array(t)?(t=y._uint8ArrayToBuffer(t),n=""):null!=t&&(o=new x("chunk",["string","Buffer","Uint8Array"],t))),o)U(e,o);else if(null===t)i.state&=-9,function(e,t){if(E("onEofChunk"),t.ended)return;if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?J(e):(t.needReadable=!1,t.emittedReadable=!0,K(e))}(e,i);else if(0!==(i.state&B)||t&&t.length>0)if(r)if(4&i.state)U(e,new N);else{if(i.destroyed||i.errored)return!1;Q(e,i,t,!0)}else if(i.ended)U(e,new R);else{if(i.destroyed||i.errored)return!1;i.state&=-9,i.decoder&&!n?(t=i.decoder.write(t),i.objectMode||0!==t.length?Q(e,i,t,!1):Z(e,i)):Q(e,i,t,!1)}else r||(i.state&=-9,Z(e,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function Q(e,t,n,r){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(65536&t.state?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),64&t.state&&J(e)),Z(e,t)}c(G.prototype,{objectMode:W(B),ended:W(2),endEmitted:W(4),reading:W(8),constructed:W(F),sync:W(H),needReadable:W(64),emittedReadable:W(128),readableListening:W(256),resumeScheduled:W(512),errorEmitted:W(1024),emitClose:W($),autoDestroy:W(q),destroyed:W(8192),closed:W(16384),closeEmitted:W(32768),multiAwaitDrain:W(65536),readingMore:W(1<<17),dataEmitted:W(1<<18)}),V.prototype.destroy=T.destroy,V.prototype._undestroy=T.undestroy,V.prototype._destroy=function(e,t){t(e)},V.prototype[g.captureRejectionSymbol]=function(e){this.destroy(e)},V.prototype[h]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new k,this.destroy(e)),new d((t,n)=>S(this,r=>r&&r!==e?n(r):t(null)))},V.prototype.push=function(e,t){return Y(this,e,t,!1)},V.prototype.unshift=function(e,t){return Y(this,e,t,!0)},V.prototype.isPaused=function(){const e=this._readableState;return!0===e[M]||!1===e.flowing},V.prototype.setEncoding=function(e){const t=new P(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const n=this._readableState.buffer;let r="";for(const e of n)r+=t.write(e);return n.clear(),""!==r&&n.push(r),this._readableState.length=r.length,this};function X(e,t){return e<=0||0===t.length&&t.ended?0:0!==(t.state&B)?1:a(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function J(e){const t=e._readableState;E("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(E("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(K,e))}function K(e){const t=e._readableState;E("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ie(e)}function Z(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,r.nextTick(ee,e,t))}function ee(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const n=t.length;if(E("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function te(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[M]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function ne(e){E("readable nexttick read 0"),e.read(0)}function re(e,t){E("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ie(e),t.flowing&&!t.reading&&e.read(0)}function ie(e){const t=e._readableState;for(E("flow",t.flowing);t.flowing&&null!==e.read(););}function oe(e,t){"function"!=typeof e.read&&(e=V.wrap(e,{objectMode:!0}));const n=async function*(e,t){let n,r=z;function i(t){this===e?(r(),r=z):r=t}e.on("readable",i);const o=S(e,{writable:!1},e=>{n=e?D(n,e):null,r(),r=z});try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(n)throw n;if(null===n)return;await new d(i)}}}catch(e){throw n=D(n,e),n}finally{!n&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==n&&!e._readableState.autoDestroy?(e.off("readable",i),o()):T.destroyer(e,null)}}(e,t);return n.stream=e,n}function ae(e,t){if(0===t.length)return null;let n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n}function se(e){const t=e._readableState;E("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(ce,t,e))}function ce(e,t){if(E("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)r.nextTick(le,t);else if(e.autoDestroy){const e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function le(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let ue;function de(){return void 0===ue&&(ue={}),ue}V.prototype.read=function(e){E("read",e),void 0===e?e=NaN:o(e)||(e=s(e,10));const t=this._readableState,n=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new O("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return E("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?se(this):J(this),null;if(0===(e=X(e,t))&&t.ended)return 0===t.length&&se(this),null;let r,i=!!(64&t.state);if(E("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,E("length less than watermark",i)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)i=!1,E("reading, ended or constructing",i);else if(i){E("do read"),t.state|=8|H,0===t.length&&(t.state|=64);try{this._read(t.highWaterMark)}catch(e){U(this,e)}t.state&=~H,t.reading||(e=X(n,t))}return r=e>0?ae(e,t):null,null===r?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&se(this)),null===r||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",r)),r},V.prototype._read=function(e){throw new C("_read()")},V.prototype.pipe=function(e,t){const n=this,i=this._readableState;1===i.pipes.length&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new f(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(e),E("pipe count=%d opts=%j",i.pipes.length,t);const o=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?s:g;function a(t,r){E("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,function(){E("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),c&&e.removeListener("drain",c);e.removeListener("error",h),e.removeListener("unpipe",a),n.removeListener("end",s),n.removeListener("end",g),n.removeListener("data",d),l=!0,c&&i.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&c()}())}function s(){E("onend"),e.end()}let c;i.endEmitted?r.nextTick(o):n.once("end",o),e.on("unpipe",a);let l=!1;function u(){l||(1===i.pipes.length&&i.pipes[0]===e?(E("false write response, pause",0),i.awaitDrainWriters=e,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(e)&&(E("false write response, pause",i.awaitDrainWriters.size),i.awaitDrainWriters.add(e)),n.pause()),c||(c=function(e,t){return function(){const n=e._readableState;n.awaitDrainWriters===t?(E("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(E("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),n.awaitDrainWriters&&0!==n.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(n,e),e.on("drain",c))}function d(t){E("ondata");const n=e.write(t);E("dest.write",n),!1===n&&u()}function h(t){if(E("onerror",t),g(),e.removeListener("error",h),0===e.listenerCount("error")){const n=e._writableState||e._readableState;n&&!n.errorEmitted?U(e,t):e.emit("error",t)}}function p(){e.removeListener("finish",m),g()}function m(){E("onfinish"),e.removeListener("close",p),g()}function g(){E("unpipe"),n.unpipe(e)}return n.on("data",d),v(e,"error",h),e.once("close",p),e.once("finish",m),e.emit("pipe",n),!0===e.writableNeedDrain?u():i.flowing||(E("pipe resume"),n.resume()),e},V.prototype.unpipe=function(e){const t=this._readableState;if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const n=i(t.pipes,e);return-1===n||(t.pipes.splice(n,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},V.prototype.on=function(e,t){const n=y.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,E("on readable",i.length,i.reading),i.length?J(this):i.reading||r.nextTick(ne,this))),n},V.prototype.addListener=V.prototype.on,V.prototype.removeListener=function(e,t){const n=y.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(te,this),n},V.prototype.off=V.prototype.removeListener,V.prototype.removeAllListeners=function(e){const t=y.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(te,this),t},V.prototype.resume=function(){const e=this._readableState;return e.flowing||(E("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(re,e,t))}(this,e)),e[M]=!1,this},V.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[M]=!0,this},V.prototype.wrap=function(e){let t=!1;e.on("data",n=>{!this.push(n)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{U(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const n=l(e);for(let t=1;t<n.length;t++){const r=n[t];void 0===this[r]&&"function"==typeof e[r]&&(this[r]=e[r].bind(e))}return this},V.prototype[p]=function(){return oe(this)},V.prototype.iterator=function(e){return void 0!==e&&L(e,"options"),oe(this,e)},c(V.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),c(G.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[M]},set(e){this[M]=!!e}}}),V._fromList=ae,V.from=function(e,t){return j(V,e,t)},V.fromWeb=function(e,t){return de().newStreamReadableFromReadableStream(e,t)},V.toWeb=function(e,t){return de().newReadableStreamFromStreamReadable(e,t)},V.wrap=function(e,t){var n,r;return new V({objectMode:null===(n=null!==(r=e.readableObjectMode)&&void 0!==r?r:e.objectMode)||void 0===n||n,...t,destroy(t,n){T.destroyer(e,t),n(t)}}).wrap(e)}},7656:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},7758:(e,t,n)=>{const r=n(5606),{ArrayIsArray:i,Promise:o,SymbolAsyncIterator:a,SymbolDispose:s}=n(4134),c=n(6238),{once:l}=n(7760),u=n(5896),d=n(3370),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:p,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:y},AbortError:v}=n(6371),{validateFunction:b,validateAbortSignal:w}=n(277),{isIterable:S,isReadable:E,isReadableNodeStream:_,isNodeStream:T,isTransformStream:A,isWebStream:I,isReadableStream:D,isReadableFinished:x}=n(6115),C=globalThis.AbortController||n(5568).AbortController;let O,R,N;function k(e,t,n){let r=!1;e.on("close",()=>{r=!0});return{destroy:t=>{r||(r=!0,u.destroyer(e,t||new g("pipe")))},cleanup:c(e,{readable:t,writable:n},e=>{r=!e})}}function L(e){if(S(e))return e;if(_(e))return async function*(e){R||(R=n(7576));yield*R.prototype[a].call(e)}(e);throw new h("val",["Readable","Iterable","AsyncIterable"],e)}async function M(e,t,n,{end:r}){let i,a=null;const s=e=>{if(e&&(i=e),a){const e=a;a=null,e()}},l=()=>new o((e,t)=>{i?t(i):a=()=>{i?t(i):e()}});t.on("drain",s);const u=c(t,{readable:!1},s);try{t.writableNeedDrain&&await l();for await(const n of e)t.write(n)||await l();r&&(t.end(),await l()),n()}catch(e){n(i!==e?f(i,e):e)}finally{u(),t.off("drain",s)}}async function P(e,t,n,{end:r}){A(t)&&(t=t.writable);const i=t.getWriter();try{for await(const t of e)await i.ready,i.write(t).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(e){try{await i.abort(e),n(e)}catch(e){n(e)}}}function j(e,t,o){if(1===e.length&&i(e[0])&&(e=e[0]),e.length<2)throw new m("streams");const a=new C,c=a.signal,l=null==o?void 0:o.signal,u=[];function f(){B(new v)}let g,y,b;w(l,"options.signal"),N=N||n(7760).addAbortListener,l&&(g=N(l,f));const x=[];let R,j=0;function U(e){B(e,0===--j)}function B(e,n){var i;if(!e||y&&"ERR_STREAM_PREMATURE_CLOSE"!==y.code||(y=e),y||n){for(;x.length;)x.shift()(y);null===(i=g)||void 0===i||i[s](),a.abort(),n&&(y||u.forEach(e=>e()),r.nextTick(t,y,b))}}for(let q=0;q<e.length;q++){const W=e[q],G=q<e.length-1,V=q>0,Y=G||!1!==(null==o?void 0:o.end),Q=q===e.length-1;if(T(W)){if(Y){const{destroy:X,cleanup:J}=k(W,G,V);x.push(X),E(W)&&Q&&u.push(J)}function F(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&U(e)}W.on("error",F),E(W)&&Q&&u.push(()=>{W.removeListener("error",F)})}if(0===q)if("function"==typeof W){if(R=W({signal:c}),!S(R))throw new p("Iterable, AsyncIterable or Stream","source",R)}else R=S(W)||_(W)||A(W)?W:d.from(W);else if("function"==typeof W){var H;if(A(R))R=L(null===(H=R)||void 0===H?void 0:H.readable);else R=L(R);if(R=W(R,{signal:c}),G){if(!S(R,!0))throw new p("AsyncIterable",`transform[${q-1}]`,R)}else{var $;O||(O=n(6524));const K=new O({objectMode:!0}),Z=null===($=R)||void 0===$?void 0:$.then;if("function"==typeof Z)j++,Z.call(R,e=>{b=e,null!=e&&K.write(e),Y&&K.end(),r.nextTick(U)},e=>{K.destroy(e),r.nextTick(U,e)});else if(S(R,!0))j++,M(R,K,U,{end:Y});else{if(!D(R)&&!A(R))throw new p("AsyncIterable or Promise","destination",R);{const ne=R.readable||R;j++,M(ne,K,U,{end:Y})}}R=K;const{destroy:ee,cleanup:te}=k(R,!1,!0);x.push(ee),Q&&u.push(te)}}else if(T(W)){if(_(R)){j+=2;const re=z(R,W,U,{end:Y});E(W)&&Q&&u.push(re)}else if(A(R)||D(R)){const ie=R.readable||R;j++,M(ie,W,U,{end:Y})}else{if(!S(R))throw new h("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);j++,M(R,W,U,{end:Y})}R=W}else if(I(W)){if(_(R))j++,P(L(R),W,U,{end:Y});else if(D(R)||S(R))j++,P(R,W,U,{end:Y});else{if(!A(R))throw new h("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);j++,P(R.readable,W,U,{end:Y})}R=W}else R=d.from(W)}return(null!=c&&c.aborted||null!=l&&l.aborted)&&r.nextTick(f),R}function z(e,t,n,{end:i}){let o=!1;if(t.on("close",()=>{o||n(new y)}),e.pipe(t,{end:!1}),i){function a(){o=!0,t.end()}x(e)?r.nextTick(a):e.once("end",a)}else n();return c(e,{readable:!0,writable:!1},t=>{const r=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&r&&r.ended&&!r.errored&&!r.errorEmitted?e.once("end",n).once("error",n):n(t)}),c(t,{readable:!1,writable:!0},n)}e.exports={pipelineImpl:j,pipeline:function(...e){return j(e,l(function(e){return b(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}},7760:(e,t,n)=>{"use strict";const r=n(8287),{format:i,inspect:o}=n(9231),{codes:{ERR_INVALID_ARG_TYPE:a}}=n(6371),{kResistStopPropagation:s,AggregateError:c,SymbolDispose:l}=n(4134),u=globalThis.AbortSignal||n(5568).AbortSignal,d=globalThis.AbortController||n(5568).AbortController,f=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||r.Blob,p=void 0!==h?function(e){return e instanceof h}:function(e){return!1},m=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new a(t,"AbortSignal",e)};e.exports={AggregateError:c,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...n){t||(t=!0,e.apply(this,n))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}},promisify:e=>new Promise((t,n)=>{e((e,...r)=>e?n(e):t(...r))}),debuglog:()=>function(){},format:i,inspect:o,types:{isAsyncFunction:e=>e instanceof f,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:p,deprecate:(e,t)=>e,addAbortListener:n(7007).addAbortListener||function(e,t){if(void 0===e)throw new a("signal","AbortSignal",e);let n;return m(e,"signal"),((e,t)=>{if("function"!=typeof e)throw new a(t,"Function",e)})(t,"listener"),e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[s]:!0}),n=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[l](){var e;null===(e=n)||void 0===e||e()}}},AbortSignalAny:u.any||function(e){if(1===e.length)return e[0];const t=new d,n=()=>t.abort();return e.forEach(e=>{m(e,"signals"),e.addEventListener("abort",n,{once:!0})}),t.signal.addEventListener("abort",()=>{e.forEach(e=>e.removeEventListener("abort",n))},{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},7765:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BULKSET]=this}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.BULKSET)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let o,a;try{({v:o,len:a}=this.ioc.intSerializer.deserialize(i,!1)),n+=a}catch(e){throw e.message="{length}: "+e.message,e}if(o<0)throw new Error("{length} is less than zero");i=i.slice(a);let s=new Array;for(let e=0;e<o;e++){let t,r,o,a;try{({v:t,len:r}=this.ioc.anySerializer.deserialize(i)),n+=r}catch(t){throw t.message=`{item_${e}} value: `+t.message,t}i=i.slice(r);try{({v:o,len:a}=this.ioc.longSerializer.deserialize(i,!1)),n+=a}catch(t){throw t.message=`{item_${e}} bulk: `+t.message,t}if(o<0)throw new Error(`{item_${e}}: bulk is less than zero`);if(o>4294967295)throw new Error(`{item_${e}}: bulk is greater than 2^32-1`);i=i.slice(a),o=Number(o);const c=new Array(o).fill(t);s=s.concat(c)}return{v:s,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},7775:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(7037))&&r.__esModule?r:{default:r};var o=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};t.default=o},7777:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BYTEBUFFER]=this}canBeUsedFor(e){return e instanceof r}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.BYTEBUFFER,1]):r.from([0,0,0,0]);const n=[];t&&n.push(r.from([this.ioc.DataType.BYTEBUFFER,0]));let i=e.length;if(i<0&&(i=0),i>this.ioc.intSerializer.INT32_MAX)throw new Error(`Buffer length=${i} is greater than supported max_length=${this.ioc.intSerializer.INT32_MAX}.`);return n.push(this.ioc.intSerializer.serialize(i,!1)),n.push(e),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.BYTEBUFFER)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let o,a;try{({v:o,len:a}=this.ioc.intSerializer.deserialize(i,!1)),n+=a}catch(e){throw e.message="{length}: "+e.message,e}if(o<0)throw new Error("{length} is less than zero");if(i=i.slice(a),o!==i.length)throw new Error(`{value}: unexpected actual {value} length=${i.length} when {length}=${o}`);const s=i.slice(0,o);return n+=o,{v:s,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},7830:(e,t,n)=>{"use strict";const{pipeline:r}=n(7758),i=n(3370),{destroyer:o}=n(5896),{isNodeStream:a,isReadable:s,isWritable:c,isWebStream:l,isTransformStream:u,isWritableStream:d,isReadableStream:f}=n(6115),{AbortError:h,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:m}}=n(6371),g=n(6238);e.exports=function(...e){if(0===e.length)throw new m("streams");if(1===e.length)return i.from(e[0]);const t=[...e];if("function"==typeof e[0]&&(e[0]=i.from(e[0])),"function"==typeof e[e.length-1]){const t=e.length-1;e[t]=i.from(e[t])}for(let n=0;n<e.length;++n)if(a(e[n])||l(e[n])){if(n<e.length-1&&!(s(e[n])||f(e[n])||u(e[n])))throw new p(`streams[${n}]`,t[n],"must be readable");if(n>0&&!(c(e[n])||d(e[n])||u(e[n])))throw new p(`streams[${n}]`,t[n],"must be writable")}let n,y,v,b,w;const S=e[0],E=r(e,function(e){const t=b;b=null,t?t(e):e?w.destroy(e):T||_||w.destroy()}),_=!!(c(S)||d(S)||u(S)),T=!!(s(E)||f(E)||u(E));if(w=new i({writableObjectMode:!(null==S||!S.writableObjectMode),readableObjectMode:!(null==E||!E.readableObjectMode),writable:_,readable:T}),_){if(a(S))w._write=function(e,t,r){S.write(e,t)?r():n=r},w._final=function(e){S.end(),y=e},S.on("drain",function(){if(n){const e=n;n=null,e()}});else if(l(S)){const e=(u(S)?S.writable:S).getWriter();w._write=async function(t,n,r){try{await e.ready,e.write(t).catch(()=>{}),r()}catch(e){r(e)}},w._final=async function(t){try{await e.ready,e.close().catch(()=>{}),y=t}catch(e){t(e)}}}const e=u(E)?E.readable:E;g(e,()=>{if(y){const e=y;y=null,e()}})}if(T)if(a(E))E.on("readable",function(){if(v){const e=v;v=null,e()}}),E.on("end",function(){w.push(null)}),w._read=function(){for(;;){const e=E.read();if(null===e)return void(v=w._read);if(!w.push(e))return}};else if(l(E)){const e=(u(E)?E.readable:E).getReader();w._read=async function(){for(;;)try{const{value:t,done:n}=await e.read();if(!w.push(t))return;if(n)return void w.push(null)}catch{return}}}return w._destroy=function(e,t){e||null===b||(e=new h),v=null,n=null,y=null,null===b?t(e):(b=t,a(E)&&o(E,e))},w}},8095:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.MAP]=this}canBeUsedFor(e){return null!=e&&(e instanceof Map||!Array.isArray(e)&&"object"==typeof e)}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.MAP,1]):this.ioc.intSerializer.serialize(0,!1);const n=e instanceof Map,i=n?Array.from(e.keys()):Object.keys(e);let o=i.length;o<0?o=0:o>this.ioc.intSerializer.INT32_MAX&&(o=this.ioc.intSerializer.INT32_MAX);const a=[];t&&a.push(r.from([this.ioc.DataType.MAP,0])),a.push(this.ioc.intSerializer.serialize(o,!1));for(let t=0;t<o;t++){const r=i[t],o=n?e.get(r):e[r];a.push(this.ioc.anySerializer.serialize(r),this.ioc.anySerializer.serialize(o))}return r.concat(a)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.MAP)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let o,a;try{({v:o,len:a}=this.ioc.intSerializer.deserialize(i,!1)),n+=a}catch(e){throw e.message="{length}: "+e.message,e}if(o<0)throw new Error("{length} is less than zero");i=i.slice(a);const s=new Map;for(let e=0;e<o;e++){let t,r,o,a;try{({v:t,len:r}=this.ioc.anySerializer.deserialize(i)),n+=r}catch(t){throw t.message=`{item_${e}} key: `+t.message,t}i=i.slice(r);try{({v:o,len:a}=this.ioc.anySerializer.deserialize(i)),n+=a}catch(t){throw t.message=`{item_${e}} value: `+t.message,t}i=i.slice(a),s.set(t,o)}return{v:s,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},8209:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function s(n,r,i,o){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return a(u,"_invoke",function(n,r,i){var o,a,s,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,a=0,s=e,f.n=n,c}};function h(n,r){for(a=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,o=u[t],h=f.p,p=o[2];n>3?(i=p===r)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(a=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,a=0))}if(i||n>1)return c;throw d=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),a=u,s=p;(t=a<2?e:s)||!d;){o||(a?a<3?(a>1&&(f.n=-1),h(a,s)):f.n=s:f.v=s);try{if(l=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((t=(d=f.n<0)?s:n.call(r,f))!==c)break}catch(t){o=e,a=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,i,o),!0),u}var c={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(a(t={},r,function(){return this}),t),h=d.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e}return u.prototype=d,a(h,"constructor",d),a(d,"constructor",u),u.displayName="GeneratorFunction",a(d,i,"GeneratorFunction"),a(h),a(h,i,"Generator"),a(h,r,function(){return this}),a(h,"toString",function(){return"[object Generator]"}),(o=function(){return{w:s,m:p}})()}function a(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}a=function(e,t,n,r){function o(t,n){a(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},a(e,t,n,r)}function s(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,c,"next",e)}function c(e){s(o,r,i,a,c,"throw",e)}a(void 0)})}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var d=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialized=!1,this.dynamicElements=new Set,this.translationQueue=new Set,this.translationScheduled=!1},r=[{key:"initializeEventListeners",value:function(){var e=this;i18n.on("localeChanged",function(t){e.updatePageLocalization(t)}),document.querySelectorAll(".locale-option").forEach(function(t){t.addEventListener("click",function(){var t=c(o().m(function t(n){var r;return o().w(function(t){for(;;)switch(t.n){case 0:return r=n.currentTarget.getAttribute("data-locale"),t.n=1,e.handleLocaleChange(r);case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())})}},{key:"handleLocaleChange",value:(a=c(o().m(function e(t){return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.isChangingLocale){e.n=1;break}return e.a(2);case 1:return e.p=1,this.isChangingLocale=!0,document.body.classList.add("changing-locale"),e.n=2,i18n.setLocale(t);case 2:if(e.v){e.n=3;break}throw new Error("Failed to load locale: ".concat(t));case 3:e.n=5;break;case 4:e.p=4,e.v,showError("Failed to change language settings");case 5:return e.p=5,this.isChangingLocale=!1,document.body.classList.remove("changing-locale"),e.f(5);case 6:return e.a(2)}},e,this,[[1,4,5,6]])})),function(e){return a.apply(this,arguments)})},{key:"initializeDynamicElements",value:function(){var e=this;this.dynamicElements=new Set([].concat(n(document.querySelectorAll("[data-i18n]")),n(document.querySelectorAll("[data-i18n-placeholder]")),n(document.querySelectorAll("[data-i18n-aria-label]")),n(document.querySelectorAll("[data-i18n-title]")),n(document.querySelectorAll("[data-i18n-dynamic]")),n(document.querySelectorAll("[data-i18n-date]")),n(document.querySelectorAll("[data-i18n-params]")))),new MutationObserver(function(t){t.forEach(function(t){if("childList"===t.type)t.addedNodes.forEach(function(t){if(t.nodeType===Node.ELEMENT_NODE){var n=[];(t.hasAttribute("data-i18n")||t.hasAttribute("data-i18n-placeholder")||t.hasAttribute("data-i18n-aria-label")||t.hasAttribute("data-i18n-title")||t.hasAttribute("data-i18n-dynamic")||t.hasAttribute("data-i18n-date"))&&(e.dynamicElements.add(t),n.push(t)),t.querySelectorAll("[data-i18n], [data-i18n-placeholder], [data-i18n-aria-label], [data-i18n-title], [data-i18n-dynamic], [data-i18n-date]").forEach(function(t){e.dynamicElements.add(t),n.push(t)}),e.queueForTranslation(n)}});else if("attributes"===t.type){var n=t.target;n.nodeType===Node.ELEMENT_NODE&&(n.hasAttribute("data-i18n")||n.hasAttribute("data-i18n-placeholder")||n.hasAttribute("data-i18n-aria-label")||n.hasAttribute("data-i18n-title")||n.hasAttribute("data-i18n-dynamic")||n.hasAttribute("data-i18n-date")||n.hasAttribute("data-i18n-params"))&&(e.dynamicElements.add(n),e.queueForTranslation([n]))}})}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-i18n","data-i18n-placeholder","data-i18n-aria-label","data-i18n-title","data-i18n-dynamic","data-i18n-date","data-i18n-params"]})}},{key:"updateElementLocalization",value:function(e){try{if(e.hasAttribute("data-i18n")){var n=e.getAttribute("data-i18n"),r=i18n.translate(n);if(r)if("BUTTON"===e.tagName&&e.querySelector(".spinner")){var i=e.querySelector("span[data-i18n]");if(i)i.textContent=r;else{var o=e.querySelector(".spinner");e.innerHTML="",e.appendChild(o);var a=document.createElement("span");a.setAttribute("data-i18n",n),a.textContent=r,e.appendChild(a)}}else e.textContent=r}if(e.hasAttribute("data-i18n-title")){var s=e.getAttribute("data-i18n-title"),c=i18n.translate(s);c&&(e.title=c)}if(e.hasAttribute("data-i18n-placeholder")){var l=e.getAttribute("data-i18n-placeholder"),u=i18n.translate(l);u&&(e.placeholder=u)}if(e.hasAttribute("data-i18n-aria-label")){var d=e.getAttribute("data-i18n-aria-label"),f=i18n.translate(d);f&&e.setAttribute("aria-label",f)}if(e.hasAttribute("data-i18n-title")){var h=e.getAttribute("data-i18n-title"),p=i18n.translate(h);p&&(e.title=p)}if(e.hasAttribute("data-i18n-dynamic")){var m=e.getAttribute("data-i18n-dynamic"),g=e.getAttribute("data-i18n-params"),y=g?JSON.parse(g):{},v=i18n.translate(m,y);v&&(e.textContent=v)}if(e.hasAttribute("data-i18n-date")){var b=e.getAttribute("data-i18n-date"),w=e.getAttribute("data-date");if(w){var S,E="datetime",_="medium";if(b.includes("-")){var T=t(b.split("-"),2);E=T[0],_=T[1]}else _=b;switch(E){case"date":S=i18n.culturalConfig.formatDate(new Date(w),_);break;case"time":S=i18n.culturalConfig.formatTime(new Date(w),_);break;default:S=i18n.culturalConfig.formatDateTime(new Date(w),_)}var A=e.querySelector("i"),I=A?A.outerHTML:"";e.innerHTML=I+S}}}catch(e){}}},{key:"queueForTranslation",value:function(e){var t=this;e.forEach(function(e){return t.translationQueue.add(e)}),this.scheduleTranslation()}},{key:"scheduleTranslation",value:function(){var e=this;this.translationScheduled||(this.translationScheduled=!0,requestAnimationFrame(function(){e.processTranslationQueue(),e.translationScheduled=!1}))}},{key:"processTranslationQueue",value:function(){var e=this;this.translationQueue.forEach(function(t){document.body.contains(t)&&e.updateElementLocalization(t)}),this.translationQueue.clear()}},{key:"updatePageLocalization",value:function(e){var t=this;try{this.dynamicElements.forEach(function(e){document.body.contains(e)?t.updateElementLocalization(e):t.dynamicElements.delete(e)}),document.documentElement.setAttribute("dir",e.direction),document.documentElement.setAttribute("lang",e.locale.split("-")[0]),this.applyCulturalStyles(e.culturalPreferences),window.dispatchEvent(new CustomEvent("localizationUpdated",{detail:e}))}catch(e){}}},{key:"applyCulturalStyles",value:function(e){var t=document.documentElement;t.style.setProperty("--decimal-separator",e.numberFormat.decimal),t.style.setProperty("--grouping-separator",e.numberFormat.group),t.style.setProperty("--time-format",e.timeFormat.short),t.style.setProperty("--date-format",e.dateFormat.medium),t.style.setProperty("--date-time-format",e.dateTimeFormat.medium)}},{key:"initialize",value:function(){this.initialized||(this.initializeDynamicElements(),this.initializeEventListeners(),this.initialized=!0);var e={locale:i18n.currentLocale,direction:i18n.culturalConfig.isRTL()?"rtl":"ltr",culturalPreferences:i18n.culturalConfig.getCulturalPreferences()};this.updatePageLocalization(e)}}],r&&l(e.prototype,r),i&&l(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,i,a}();window.localeUI=new d},8287:(e,t,n)=>{"use strict";const r=n(7526),i=n(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|m(e,t);let r=s(n);const i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Q(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Q(e,ArrayBuffer)||e&&Q(e.buffer,ArrayBuffer))return h(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Q(e,SharedArrayBuffer)||e&&Q(e.buffer,SharedArrayBuffer)))return h(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);const i=function(e){if(c.isBuffer(e)){const t=0|p(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||X(e.length)?s(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),s(e<0?0:0|p(e))}function f(e){const t=e.length<0?0:0|p(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function p(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(i)return r?-1:G(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),X(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){let o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(l(e,o+r)!==l(t,r)){n=!1;break}if(n)return o}return-1}function w(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let a;for(r>o/2&&(r=o/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(X(r))return a;e[n+a]=r}return a}function S(e,t,n,r){return Y(G(t,e.length-n),e,n,r)}function E(e,t,n,r){return Y(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return Y(V(t),e,n,r)}function T(e,t,n,r){return Y(function(e,t){let n,r,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,c;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(o=c));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return function(e){const t=e.length;if(t<=D)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=D));return n}(r)}t.kMaxLength=a,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!c.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&console.error,Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},c.allocUnsafe=function(e){return d(e)},c.allocUnsafeSlow=function(e){return d(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(Q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=c.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(Q(t,Uint8Array))i+t.length>r.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,i){if(Q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0);const s=Math.min(o,a),l=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<s;++e)if(l[e]!==u[e]){o=l[e],a=u[e];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":case"latin1":case"binary":return E(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const D=4096;function x(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function O(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=J[e[r]];return i}function R(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r,i){H(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function M(e,t,n,r,i){H(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function P(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,o){return t=+t,n>>>=0,o||P(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function z(e,t,n,r,o){return t=+t,n>>>=0,o||P(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=K(function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||q(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),c.prototype.readBigUInt64BE=K(function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||q(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=K(function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||q(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),c.prototype.readBigInt64BE=K(function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||q(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)}),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){k(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){k(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=K(function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=K(function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);k(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);k(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=K(function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=K(function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const o=c.isBuffer(e)?e:c.from(e,r),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%a]}return this};const U={};function B(e,t,n){U[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function F(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function H(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new U.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){$(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||q(t,e.length-(n+1))}(r,i,o)}function $(e,t){if("number"!=typeof e)throw new U.ERR_INVALID_ARG_TYPE(t,"number",e)}function q(e,t,n){if(Math.floor(e)!==e)throw $(e,n),new U.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}B("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),B("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),B("ERR_OUT_OF_RANGE",function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=F(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=F(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r},RangeError);const W=/[^+/0-9A-Za-z-_]/g;function G(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function K(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},8372:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(1545);e.exports=class{constructor(e){this.ioc=e;const t=e=>{const t={};return Object.values(e).forEach(e=>t[e.elementName]=e),t},n=e.DataType;this.types=[{name:"Barrier",code:n.BARRIER,enum:t(i.barrier)},{name:"Cardinality",code:n.CARDINALITY,enum:t(i.cardinality)},{name:"Column",code:n.COLUMN,enum:t(i.column)},{name:"Direction",code:n.DIRECTION,enum:t(i.direction)},{name:"DT",code:n.DT,enum:t(i.dt)},{name:"Merge",code:n.MERGE,enum:t(i.merge)},{name:"Operator",code:n.OPERATOR,enum:t(i.operator)},{name:"Order",code:n.ORDER,enum:t(i.order)},{name:"Pick",code:n.PICK,enum:t(i.pick)},{name:"Pop",code:n.POP,enum:t(i.pop)},{name:"Scope",code:n.SCOPE,enum:t(i.scope)},{name:"T",code:n.T,enum:t(i.t)}],this.byname={},this.bycode={};for(const e of this.types)this.ioc.serializers[e.code]=this,this.byname[e.name]=e,this.bycode[e.code]=e}canBeUsedFor(e){if(!(e instanceof i.EnumValue))return!1;if(!this.byname[e.typeName])throw new Error(`EnumSerializer.serialize: typeName=${e.typeName} is not supported.`);return!0}serialize(e,t=!0){const n=this.byname[e.typeName];if(void 0===e.elementName||null===e.elementName)return t?r.from([n.code,1]):r.from([this.ioc.DataType.STRING,0,0,0,0,0]);const i=[];return t&&i.push(r.from([n.code,0])),i.push(this.ioc.stringSerializer.serialize(e.elementName,!0)),r.concat(i)}deserialize(e,t=!0){let n=0,o=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");let a,s,c,l;if(t){const e=o.readUInt8();if(n++,a=this.bycode[e],!a)throw new Error(`unexpected {type_code}=${e}`);if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}try{({v:s,len:c}=this.ioc.stringSerializer.deserialize(o,!0)),n+=c}catch(e){throw e.message="elementName: "+e.message,e}return o=o.slice(c),l=a?a.enum[s]:new i.EnumValue(void 0,s),{v:l,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},8402:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(9253);e.exports=class extends i{constructor(e){if(super(e),void 0===this._options.username||null===this._options.username||0===this._options.username.length||void 0===this._options.password||null===this._options.password||0===this._options.password.length)throw new Error("Missing credentials for SASL PLAIN mechanism")}get name(){return"PLAIN"}evaluateChallenge(e){return this._hasInitialResponse(e)?Promise.resolve({saslMechanism:this.name,sasl:this._saslArgument(this._options.authzid,this._options.username,this._options.password)}):Promise.resolve({sasl:this._saslArgument(this._options.authzid,this._options.username,this._options.password)})}_saslArgument(e,t,n){return null==e&&(e=""),null==t&&(t=""),void 0!==n&&null!==n.length||(n=""),r.from(`${e}\0${t}\0${n}`).toString("base64")}_hasInitialResponse(e){return null!=e}}},8584:(e,t,n)=>{"use strict";const r=n(5606),{ArrayPrototypeSlice:i,Error:o,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:s,ObjectDefineProperties:c,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:u,Symbol:d,SymbolHasInstance:f}=n(4134);e.exports=L,L.WritableState=N;const{EventEmitter:h}=n(7007),p=n(4259).Stream,{Buffer:m}=n(8287),g=n(5896),{addAbortSignal:y}=n(4147),{getHighWaterMark:v,getDefaultHighWaterMark:b}=n(5291),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:_,ERR_STREAM_DESTROYED:T,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:D,ERR_UNKNOWN_ENCODING:x}=n(6371).codes,{errorOrDestroy:C}=g;function O(){}l(L.prototype,p.prototype),l(L,p);const R=d("kOnFinished");function N(e,t,r){"boolean"!=typeof r&&(r=t instanceof n(3370)),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?v(this,e,"writableHighWaterMark",r):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const i=!(!e||!1!==e.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=z.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,k(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[R]=[]}function k(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function L(e){const t=this instanceof n(3370);if(!t&&!a(L,this))return new L(e);this._writableState=new N(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&y(e.signal,this)),p.call(this,e),g.construct(this,()=>{const e=this._writableState;e.writing||H(this,e),W(this,e)})}function M(e,t,n,i){const o=e._writableState;if("function"==typeof n)i=n,n=o.defaultEncoding;else{if(n){if("buffer"!==n&&!m.isEncoding(n))throw new x(n)}else n=o.defaultEncoding;"function"!=typeof i&&(i=O)}if(null===t)throw new I;if(!o.objectMode)if("string"==typeof t)!1!==o.decodeStrings&&(t=m.from(t,n),n="buffer");else if(t instanceof m)n="buffer";else{if(!p._isUint8Array(t))throw new w("chunk",["string","Buffer","Uint8Array"],t);t=p._uint8ArrayToBuffer(t),n="buffer"}let a;return o.ending?a=new D:o.destroyed&&(a=new T("write")),a?(r.nextTick(i,a),C(e,a,!0),a):(o.pendingcb++,function(e,t,n,r,i){const o=t.objectMode?1:n.length;t.length+=o;const a=t.length<t.highWaterMark;a||(t.needDrain=!0);t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:n,encoding:r,callback:i}),t.allBuffers&&"buffer"!==r&&(t.allBuffers=!1),t.allNoop&&i!==O&&(t.allNoop=!1)):(t.writelen=o,t.writecb=i,t.writing=!0,t.sync=!0,e._write(n,r,t.onwrite),t.sync=!1);return a&&!t.errored&&!t.destroyed}(e,o,t,n,i))}function P(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new T("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function j(e,t,n,r){--t.pendingcb,r(n),F(t),C(e,n)}function z(e,t){const n=e._writableState,i=n.sync,o=n.writecb;"function"==typeof o?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t?(t.stack,n.errored||(n.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?r.nextTick(j,e,n,t,o):j(e,n,t,o)):(n.buffered.length>n.bufferedIndex&&H(e,n),i?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===o?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:o,stream:e,state:n},r.nextTick(U,n.afterWriteTickInfo)):B(e,n,1,o))):C(e,new E)}function U({stream:e,state:t,count:n,cb:r}){return t.afterWriteTickInfo=null,B(e,t,n,r)}function B(e,t,n,r){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));n-- >0;)t.pendingcb--,r();t.destroyed&&F(t),W(e,t)}function F(e){if(e.writing)return;for(let n=e.bufferedIndex;n<e.buffered.length;++n){var t;const{chunk:r,callback:i}=e.buffered[n],o=e.objectMode?1:r.length;e.length-=o,i(null!==(t=e.errored)&&void 0!==t?t:new T("write"))}const n=e[R].splice(0);for(let t=0;t<n.length;t++){var r;n[t](null!==(r=e.errored)&&void 0!==r?r:new T("end"))}k(e)}function H(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:n,bufferedIndex:r,objectMode:o}=t,a=n.length-r;if(!a)return;let s=r;if(t.bufferProcessing=!0,a>1&&e._writev){t.pendingcb-=a-1;const r=t.allNoop?O:e=>{for(let t=s;t<n.length;++t)n[t].callback(e)},o=t.allNoop&&0===s?n:i(n,s);o.allBuffers=t.allBuffers,P(e,t,!0,t.length,o,"",r),k(t)}else{do{const{chunk:r,encoding:i,callback:a}=n[s];n[s++]=null;P(e,t,!1,o?1:r.length,r,i,a)}while(s<n.length&&!t.writing);s===n.length?k(t):s>256?(n.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}function $(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function q(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let n=!1;function i(i){if(n)C(e,null!=i?i:E());else if(n=!0,t.pendingcb--,i){const n=t[R].splice(0);for(let e=0;e<n.length;e++)n[e](i);C(e,i,t.sync)}else $(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,r.nextTick(G,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(e){i(e)}t.sync=!1}(e,t)))}function W(e,t,n){$(t)&&(q(e,t),0===t.pendingcb&&(n?(t.pendingcb++,r.nextTick((e,t)=>{$(t)?G(e,t):t.pendingcb--},e,t)):$(t)&&(t.pendingcb++,G(e,t))))}function G(e,t){t.pendingcb--,t.finished=!0;const n=t[R].splice(0);for(let e=0;e<n.length;e++)n[e]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}N.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},s(N.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),s(L,f,{__proto__:null,value:function(e){return!!a(this,e)||this===L&&(e&&e._writableState instanceof N)}}),L.prototype.pipe=function(){C(this,new _)},L.prototype.write=function(e,t,n){return!0===M(this,e,t,n)},L.prototype.cork=function(){this._writableState.corked++},L.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||H(this,e))},L.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=u(e)),!m.isEncoding(e))throw new x(e);return this._writableState.defaultEncoding=e,this},L.prototype._write=function(e,t,n){if(!this._writev)throw new S("_write()");this._writev([{chunk:e,encoding:t}],n)},L.prototype._writev=null,L.prototype.end=function(e,t,n){const i=this._writableState;let a;if("function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e){const n=M(this,e,t);n instanceof o&&(a=n)}return i.corked&&(i.corked=1,this.uncork()),a||(i.errored||i.ending?i.finished?a=new A("end"):i.destroyed&&(a=new T("end")):(i.ending=!0,W(this,i,!0),i.ended=!0)),"function"==typeof n&&(a||i.finished?r.nextTick(n,a):i[R].push(n)),this},c(L.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const V=g.destroy;let Y;function Q(){return void 0===Y&&(Y={}),Y}L.prototype.destroy=function(e,t){const n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[R].length)&&r.nextTick(F,n),V.call(this,e,t),this},L.prototype._undestroy=g.undestroy,L.prototype._destroy=function(e,t){t(e)},L.prototype[h.captureRejectionSymbol]=function(e){this.destroy(e)},L.fromWeb=function(e,t){return Q().newStreamWritableFromWritableStream(e,t)},L.toWeb=function(e){return Q().newWritableStreamFromStreamWritable(e)}},8653:e=>{"use strict";e.exports={INT:1,LONG:2,STRING:3,DATE:4,TIMESTAMP:5,CLASS:6,DOUBLE:7,FLOAT:8,LIST:9,MAP:10,SET:11,UUID:12,EDGE:13,PATH:14,PROPERTY:15,GRAPH:16,VERTEX:17,VERTEXPROPERTY:18,BARRIER:19,BINDING:20,BYTECODE:21,CARDINALITY:22,COLUMN:23,DIRECTION:24,OPERATOR:25,ORDER:26,PICK:27,POP:28,LAMBDA:29,P:30,SCOPE:31,T:32,TRAVERSER:33,BIGDECIMAL:34,BIGINTEGER:35,BYTE:36,BYTEBUFFER:37,SHORT:38,BOOLEAN:39,TEXTP:40,TRAVERSALSTRATEGY:41,BULKSET:42,TREE:43,METRICS:44,TRAVERSALMETRICS:45,MERGE:46,DT:47,CHAR:128,DURATION:129,INETADDRESS:130,INSTANT:131,LOCALDATE:132,LOCALDATETIME:133,LOCALTIME:134,MONTHDAY:135,OFFSETDATETIME:136,OFFSETTIME:137,PERIOD:138,YEAR:139,YEARMONTH:140,ZONEDATETIME:141,ZONEOFFSET:142,CUSTOM:0,UNSPECIFIED_NULL:254}},9025:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function r(e,r,a,s){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=(0,o.default)(r)),16!==(null===(c=r)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(r),l.set(e,r.length),l=n(l),l[6]=15&l[6]|t,l[8]=63&l[8]|128,a){s=s||0;for(let e=0;e<16;++e)a[s+e]=l[e];return a}return(0,i.unsafeStringify)(l)}try{r.name=e}catch(e){}return r.DNS=a,r.URL=s,r};var r,i=n(9910),o=(r=n(6792))&&r.__esModule?r:{default:r};const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=a;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=s},9032:(e,t,n)=>{"use strict";const{Traversal:r}=n(1545);class i{constructor(e){e?(this.sourceInstructions=[...e.sourceInstructions],this.stepInstructions=[...e.stepInstructions]):(this.sourceInstructions=[],this.stepInstructions=[])}addSource(e,t){if(void 0===e)throw new Error("Name is not defined");const n=new Array(t.length+1);n[0]=e;for(let e=0;e<t.length;++e)n[e+1]=t[e];return this.sourceInstructions.push(i._generateInstruction(e,t)),this}addStep(e,t){if(void 0===e)throw new Error("Name is not defined");return this.stepInstructions.push(i._generateInstruction(e,t)),this}static _generateInstruction(e,t){const n=(t?t.length:0)+1,i=new Array(n);i[0]=e;for(let e=1;e<n;e++){const n=t[e-1];if(n instanceof r&&null!=n.graph)throw new Error(`The child traversal of ${n} was not spawned anonymously - use the __ class rather than a TraversalSource to construct the child traversal`);i[e]=n}return i}toString(){return JSON.stringify([this.sourceInstructions,this.stepInstructions])}static _createGraphOp(e,t){const n=new i;return n.addSource(e,t),n}static get GraphOp(){return{commit:i._createGraphOp("tx",["commit"]),rollback:i._createGraphOp("tx",["rollback"])}}}e.exports=i},9042:(e,t)=>{"use strict";function n(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a);for(let t=0;t<a;++t){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];s[t]=n}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){const o=new Uint32Array(80);for(let t=0;t<16;++t)o[t]=s[e][t];for(let e=16;e<80;++e)o[e]=r(o[e-3]^o[e-8]^o[e-14]^o[e-16],1);let a=i[0],c=i[1],l=i[2],u=i[3],d=i[4];for(let e=0;e<80;++e){const i=Math.floor(e/20),s=r(a,5)+n(i,c,l,u)+d+t[i]+o[e]>>>0;d=u,u=l,l=r(c,30)>>>0,c=a,a=s}i[0]=i[0]+a>>>0,i[1]=i[1]+c>>>0,i[2]=i[2]+l>>>0,i[3]=i[3]+u>>>0,i[4]=i[4]+d>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]};t.default=i},9198:(e,t,n)=>{"use strict";const r=n(5506),i=n(3095),o=r.Readable.destroy;e.exports=r.Readable,e.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,e.exports._isUint8Array=r._isUint8Array,e.exports.isDisturbed=r.isDisturbed,e.exports.isErrored=r.isErrored,e.exports.isReadable=r.isReadable,e.exports.Readable=r.Readable,e.exports.Writable=r.Writable,e.exports.Duplex=r.Duplex,e.exports.Transform=r.Transform,e.exports.PassThrough=r.PassThrough,e.exports.addAbortSignal=r.addAbortSignal,e.exports.finished=r.finished,e.exports.destroy=r.destroy,e.exports.destroy=o,e.exports.pipeline=r.pipeline,e.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:()=>i}),e.exports.Stream=r.Stream,e.exports.default=e.exports},9231:e=>{"use strict";e.exports={format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,n]){const r=t.shift();if("f"===n)return r.toFixed(6);if("j"===n)return JSON.stringify(r);if("s"===n&&"object"==typeof r){return`${r.constructor!==Object?r.constructor.name:""} {}`.trim()}return r.toString()}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}},9253:e=>{"use strict";e.exports=class{constructor(e){this.setopts(e)}get name(){return null}setopts(e){this._options=e}evaluateChallenge(e){throw new Error("evaluateChallenge should be implemented")}}},9386:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),{TraversalStrategySerializer:i}=n(474);e.exports=class{constructor(e){this.ioc=e,this.graphsonTraversalStrategySerializer=new i}canBeUsedFor(e){return this.graphsonTraversalStrategySerializer.canBeUsedFor(e)}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.TRAVERSALSTRATEGY,1]);const e=[0,0,0,0],n=[0,0,0,0];return r.from([...e,...n])}const n=[];t&&n.push(r.from([this.ioc.DataType.TRAVERSALSTRATEGY,0]));const i=e.fqcn,o={};for(const t in e.configuration)e.configuration.hasOwnProperty(t)&&(o[t]=e.configuration[t]);return n.push(this.ioc.classSerializer.serialize(i,!1)),n.push(this.ioc.mapSerializer.serialize(o,!1)),r.concat(n)}}},9449:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(474),o=n(9032);class a{constructor(e){this._options=e||{},this._serializers=this.getDefaultSerializers().map(e=>{const t=new e;return t.writer=this,t});const t=this._options.serializers||{};Object.keys(t).forEach(e=>{const n=t[e];n.serialize&&(n.writer=this,this._serializers.unshift(n))})}getDefaultSerializers(){return f}adaptObject(e){let t;for(let n=0;n<this._serializers.length;n++){const r=this._serializers[n];if(r.canBeUsedFor&&r.canBeUsedFor(e)){t=r;break}}return t?t.serialize(e):Array.isArray(e)?e.map(e=>this.adaptObject(e)):e}write(e){return JSON.stringify(this.adaptObject(e))}writeRequest({requestId:e,op:t,processor:n,args:i}){const a={requestId:{"@type":"g:UUID","@value":e},op:t,processor:n,args:this._adaptArgs(i,!0)};return a.args.gremlin instanceof o&&(a.args.gremlin=this.adaptObject(a.args.gremlin)),r.from(JSON.stringify(a))}_adaptArgs(e,t){if(e instanceof Object){const n={};return Object.keys(e).forEach(r=>{n[r]=t&&"bindings"===r?this._adaptArgs(e[r],!1):this.adaptObject(e[r])}),n}return e}}class s extends a{getDefaultSerializers(){return h}}class c{constructor(e){this._options=e||{},this._deserializers={};const t=this.getDefaultDeserializers();if(Object.keys(t).forEach(e=>{const n=new(0,t[e]);n.reader=this,this._deserializers[e]=n}),this._options.serializers){const e=this._options.serializers||{};Object.keys(e).forEach(t=>{const n=e[t];n.deserialize&&(n.reader=this,this._deserializers[t]=n)})}}getDefaultDeserializers(){return u}read(e){if(void 0===e)return;if(null===e)return null;if(Array.isArray(e))return e.map(e=>this.read(e));const t=e[i.typeKey];if(t){const n=this._deserializers[t];return n?n.deserialize(e):e[i.valueKey]}return e&&"object"==typeof e&&e.constructor===Object?this._deserializeObject(e):e}readResponse(e){return this.read(JSON.parse(e.toString()))}_deserializeObject(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++)n[t[r]]=this.read(e[t[r]]);return n}}class l extends c{getDefaultDeserializers(){return d}}const u={"g:Traverser":i.TraverserSerializer,"g:TraversalStrategy":i.TraversalStrategySerializer,"g:Int32":i.NumberSerializer,"g:Int64":i.NumberSerializer,"g:Float":i.NumberSerializer,"g:Double":i.NumberSerializer,"g:Date":i.DateSerializer,"g:Direction":i.DirectionSerializer,"g:Vertex":i.VertexSerializer,"g:Edge":i.EdgeSerializer,"g:VertexProperty":i.VertexPropertySerializer,"g:Property":i.PropertySerializer,"g:Path":i.Path3Serializer,"g:TextP":i.TextPSerializer,"g:T":i.TSerializer,"g:BulkSet":i.BulkSetSerializer},d=Object.assign({},u,{"g:List":i.ListSerializer,"g:Set":i.SetSerializer,"g:Map":i.MapSerializer}),f=[i.NumberSerializer,i.DateSerializer,i.BytecodeSerializer,i.TraverserSerializer,i.TraversalStrategySerializer,i.PSerializer,i.TextPSerializer,i.LambdaSerializer,i.EnumSerializer,i.VertexSerializer,i.EdgeSerializer,i.LongSerializer],h=f.concat([i.ListSerializer,i.SetSerializer,i.MapSerializer]);e.exports={GraphSON3Writer:s,GraphSON3Reader:l,GraphSON2Writer:a,GraphSON2Reader:c,GraphSONWriter:s,GraphSONReader:l}},9591:()=>{},9899:(e,t,n)=>{"use strict";const r=n(5737),i=n(9032),{TraversalStrategies:o}=n(3335);e.exports={Transaction:class{constructor(e){this._g=e,this._sessionBasedConnection=void 0}begin(){if(this._sessionBasedConnection)throw new Error("Transaction already started on this object");this._sessionBasedConnection=this._g.remoteConnection.createSession();const e=new o;return e.addStrategy(new r.RemoteStrategy(this._sessionBasedConnection)),new this._g.graphTraversalSourceClass(this._g.graph,e,new i(this._g.bytecode),this._g.graphTraversalSourceClass,this._g.graphTraversalClass)}commit(){if(!this._sessionBasedConnection)throw new Error("Cannot commit a transaction that is not started");return this._sessionBasedConnection.commit().finally(()=>this.close())}rollback(){if(!this._sessionBasedConnection)throw new Error("Cannot rollback a transaction that is not started");return this._sessionBasedConnection.rollback().finally(()=>this.close())}get isOpen(){return this._sessionBasedConnection.isOpen}close(){this._sessionBasedConnection&&this._sessionBasedConnection.close()}}}},9910:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=a;var r,i=(r=n(7037))&&r.__esModule?r:{default:r};const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function a(e,t=0){return o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]}var s=function(e,t=0){const n=a(e,t);if(!(0,i.default)(n))throw TypeError("Stringified UUID is invalid");return n};t.default=s},9995:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.FLOAT]=this}canBeUsedFor(e){}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.FLOAT,1]):r.from([0,0,0,0]);const n=[];t&&n.push(r.from([this.ioc.DataType.FLOAT,0]));const i=r.alloc(4);return i.writeFloatBE(e),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.FLOAT)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<4)throw new Error("unexpected {value} length");n+=4;return{v:i.readFloatBE(),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return i[e](n,n.exports,a),n.exports}a.m=i,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);a.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>o[e]=()=>n[e]);return o.default=()=>n,a.d(i,o),i},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,n)=>(a.f[n](e,t),t),[])),a.u=e=>e+".js",a.miniCssF=e=>{},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="control-room:",a.l=(e,t,i,o)=>{if(n[e])n[e].push(t);else{var s,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+i){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",r+i),s.src=e),n[e]=[t];var f=(t,r)=>{s.onerror=s.onload=null,clearTimeout(h);var i=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(e=>e(r)),t)return t(r)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),c&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/dist/",(()=>{var e={780:0};a.f.j=(t,n)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((n,i)=>r=e[t]=[n,i]);n.push(r[2]=i);var o=a.p+a.u(t),s=new Error;a.l(o,n=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,r[1](s)}},"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[o,s,c]=n,l=0;if(o.some(t=>0!==e[t])){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)c(a)}for(t&&t(n);l<o.length;l++)i=o[l],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkcontrol_room=self.webpackChunkcontrol_room||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a(6284),a(2744),a(5283),a(3676),a(6893),a(6463),a(2617),a(5118),a(8209);a(9591)})();