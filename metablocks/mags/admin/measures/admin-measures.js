(()=>{var e,t,r,n,i={74:(e,t,r)=>{"use strict";const n=r(1104),i=Object.freeze(new n.ImmutableMap);class o{constructor(e,t){if(!Array.isArray(e))throw new TypeError("items must be an Array instance");this._items=e,this.attributes=t||i,this.length=e.length}[Symbol.iterator](){return this._items[Symbol.iterator]()}toArray(){return this._items}first(){const e=this._items[0];return void 0!==e?e:null}}e.exports=o},163:(e,t,r)=>{"use strict";const n=r(5332),{TraversalStrategies:i}=r(3335);class o{constructor(e,t){this.id=e,this.label=t}equals(e){return e instanceof o&&this.id===e.id}}class a{constructor(e,t){this.key=e,this.value=t}toString(){return`p[${this.key}->${c(this.value)}]`}equals(e){return e instanceof a&&this.key===e.key&&this.value===e.value}}class s{constructor(e,t){this.labels=e,this.objects=t}toString(){return`path[${(this.objects||[]).join(", ")}]`}equals(e){return e instanceof s&&(e===this||l(this.objects,e.objects)&&l(this.labels,e.labels))}}function l(e,t){if(e===t)return!0;if("function"==typeof e.equals)return e.equals(t);if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!l(e[r],t[r]))return!1;return!0}return!1}function c(e){if(null==e)return e;const t=e.toString();return t.length>20?t.substr(0,20):t}e.exports={Edge:class extends o{constructor(e,t,r,n,i){if(super(e,r),this.outV=t,this.inV=n,this.properties={},i){const e=Object.keys(i);for(let t=0;t<e.length;t++){const r=e[t];this.properties[r]=i[r].value}}}toString(){const e=this.outV?this.outV.id:"?",t=this.inV?this.inV.id:"?";return`e[${this.id}][${e}-${this.label}->${t}]`}},Graph:class{traversal(e){return new(e||n.GraphTraversalSource)(this,new i)}toString(){return"graph[]"}},Path:s,Property:a,Vertex:class extends o{constructor(e,t,r){super(e,t),this.properties=r}toString(){return`v[${this.id}]`}},VertexProperty:class extends o{constructor(e,t,r,n){super(e,t),this.value=r,this.key=this.label,this.properties=n}toString(){return`vp[${this.label}->${c(this.value)}]`}}}},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new i(n,o||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,i,o,a){var s=r?r+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,o),!0;case 6:return u.fn.call(u.context,t,n,i,o,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var f,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||a(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||n&&s[l].context!==n)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},243:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),i=r(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.VERTEX]=this}canBeUsedFor(e){return e instanceof i.Vertex}serialize(e,t=!0){if(null==e){if(t)return n.from([this.ioc.DataType.VERTEX,1]);const e=[3,0,0,0,0,0],r=[0,0,0,0],i=[254,1];return n.from([...e,...r,...i])}const r=[];return t&&r.push(n.from([this.ioc.DataType.VERTEX,0])),r.push(this.ioc.anySerializer.serialize(e.id)),r.push(this.ioc.stringSerializer.serialize(e.label,!1)),r.push(this.ioc.anySerializer.serialize(e.properties)),n.concat(r)}deserialize(e,t=!0){let r=0,o=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(r++,e!==this.ioc.DataType.VERTEX)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,l,c,u,d;try{({v:a,len:s}=this.ioc.anySerializer.deserialize(o)),r+=s}catch(e){throw e.message="{id}: "+e.message,e}o=o.slice(s);try{({v:l,len:c}=this.ioc.stringSerializer.deserialize(o,!1)),r+=c}catch(e){throw e.message="{label}: "+e.message,e}o=o.slice(c);try{({v:u,len:d}=this.ioc.anySerializer.deserialize(o)),r+=d}catch(e){throw e.message="{properties}: "+e.message,e}o=o.slice(d);const f=u||[];return{v:new i.Vertex(a,l,f),len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},251:(e,t)=>{t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,c=l>>1,u=-7,d=r?i-1:0,f=r?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=256*a+e[t+d],d+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,d=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,h=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*l-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[r+p]=255&a,p+=h,a/=256,c-=8);e[r+p-h]|=128*m}},277:(e,t,r)=>{"use strict";const{ArrayIsArray:n,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:o,ArrayPrototypeMap:a,NumberIsInteger:s,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:c,NumberMIN_SAFE_INTEGER:u,NumberParseInt:d,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:p,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:y}=r(4134),{hideStackFrames:g,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:v,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:E}}=r(6371),{normalizeEncoding:S}=r(7760),{isAsyncFunction:T,isArrayBufferView:I}=r(7760).types,A={};const O=/^[0-7]+$/;const R=g((e,t,r=u,n=c)=>{if("number"!=typeof e)throw new v(t,"number",e);if(!s(e))throw new _(t,"an integer",e);if(e<r||e>n)throw new _(t,`>= ${r} && <= ${n}`,e)}),x=g((e,t,r=-2147483648,n=2147483647)=>{if("number"!=typeof e)throw new v(t,"number",e);if(!s(e))throw new _(t,"an integer",e);if(e<r||e>n)throw new _(t,`>= ${r} && <= ${n}`,e)}),N=g((e,t,r=!1)=>{if("number"!=typeof e)throw new v(t,"number",e);if(!s(e))throw new _(t,"an integer",e);const n=r?1:0,i=4294967295;if(e<n||e>i)throw new _(t,`>= ${n} && <= ${i}`,e)});function k(e,t){if("string"!=typeof e)throw new v(t,"string",e)}const C=g((e,t,r)=>{if(!i(r,e)){const n=o(a(r,e=>"string"==typeof e?`'${e}'`:h(e)),", ");throw new w(t,e,"must be one of: "+n)}});function M(e,t){if("boolean"!=typeof e)throw new v(t,"boolean",e)}function L(e,t,r){return null!=e&&f(e,t)?e[t]:r}const D=g((e,t,r=null)=>{const i=L(r,"allowArray",!1),o=L(r,"allowFunction",!1);if(!L(r,"nullable",!1)&&null===e||!i&&n(e)||"object"!=typeof e&&(!o||"function"!=typeof e))throw new v(t,"Object",e)}),P=g((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new v(t,"a dictionary",e)}),j=g((e,t,r=0)=>{if(!n(e))throw new v(t,"Array",e);if(e.length<r){throw new w(t,e,`must be longer than ${r}`)}});const z=g((e,t="buffer")=>{if(!I(e))throw new v(t,["Buffer","TypedArray","DataView"],e)});const U=g((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new v(t,"AbortSignal",e)}),$=g((e,t)=>{if("function"!=typeof e)throw new v(t,"Function",e)}),B=g((e,t)=>{if("function"!=typeof e||T(e))throw new v(t,"Function",e)}),F=g((e,t)=>{if(void 0!==e)throw new v(t,"undefined",e)});const H=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function q(e,t){if(void 0===e||!p(H,e))throw new w(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if(void 0===e&&(e=r),"string"==typeof e){if(null===p(O,e))throw new w(t,e,"must be a 32-bit unsigned integer or an octal string");e=d(e,8)}return N(e,t),e},validateArray:j,validateStringArray:function(e,t){j(e,t);for(let r=0;r<e.length;r++)k(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){j(e,t);for(let r=0;r<e.length;r++)M(e[r],`${t}[${r}]`)},validateAbortSignalArray:function(e,t){j(e,t);for(let r=0;r<e.length;r++){const n=e[r],i=`${t}[${r}]`;if(null==n)throw new v(i,"AbortSignal",n);U(n,i)}},validateBoolean:M,validateBuffer:z,validateDictionary:P,validateEncoding:function(e,t){const r=S(t),n=e.length;if("hex"===r&&n%2!=0)throw new w("encoding",t,`is invalid for data of length ${n}`)},validateFunction:$,validateInt32:x,validateInteger:R,validateNumber:function(e,t,r=void 0,n){if("number"!=typeof e)throw new v(t,"number",e);if(null!=r&&e<r||null!=n&&e>n||(null!=r||null!=n)&&l(e))throw new _(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=n?" && ":""}${null!=n?`<= ${n}`:""}`,e)},validateObject:D,validateOneOf:C,validatePlainFunction:B,validatePort:function(e,t="Port",r=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===y(e).length||+e!==+e>>>0||e>65535||0===e&&!r)throw new b(t,e,r);return 0|e},validateSignalName:function(e,t="signal"){if(k(e,t),void 0===A[e]){if(void 0!==A[m(e)])throw new E(e+" (signals must use all capital letters)");throw new E(e)}},validateString:k,validateUint32:N,validateUndefined:F,validateUnion:function(e,t,r){if(!i(r,e))throw new v(t,`('${o(r,"|")}')`,e)},validateAbortSignal:U,validateLinkHeaderValue:function(e){if("string"==typeof e)return q(e,"hints"),e;if(n(e)){const t=e.length;let r="";if(0===t)return r;for(let n=0;n<t;n++){const i=e[n];q(i,"hints"),r+=i,n!==t-1&&(r+=", ")}return r}throw new w("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},345:(e,t,r)=>{"use strict";const{StringPrototypeSlice:n,SymbolIterator:i,TypedArrayPrototypeSet:o,Uint8Array:a}=r(4134),{Buffer:s}=r(8287),{inspect:l}=r(7760);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return s.alloc(0);const t=s.allocUnsafe(e>>>0);let r=this.head,n=0;for(;r;)o(t,r.data,n),n+=r.data.length,r=r.next;return t}consume(e,t){const r=this.head.data;if(e<r.length){const t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[i](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,i=0;do{const o=r.data;if(!(e>o.length)){e===o.length?(t+=o,++i,r.next?this.head=r.next:this.head=this.tail=null):(t+=n(o,0,e),this.head=r,r.data=n(o,e));break}t+=o,e-=o.length,++i}while(null!==(r=r.next));return this.length-=i,t}_getBuffer(e){const t=s.allocUnsafe(e),r=e;let n=this.head,i=0;do{const s=n.data;if(!(e>s.length)){e===s.length?(o(t,s,r-e),++i,n.next?this.head=n.next:this.head=this.tail=null):(o(t,new a(s.buffer,s.byteOffset,e),r-e),this.head=n,n.data=s.slice(e));break}o(t,s,r-e),e-=s.length,++i}while(null!==(n=n.next));return this.length-=i,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return l(this,{...t,depth:0,customInspect:!1})}}},474:(e,t,r)=>{"use strict";const n=r(1545),i=r(3335),o=r(9032),a=r(163),s=r(1104),l="@value",c="@type";class u{serialize(){throw new Error("serialize() method not implemented for "+this.constructor.name)}deserialize(){throw new Error("deserialize() method not implemented for "+this.constructor.name)}canBeUsedFor(){throw new Error("canBeUsedFor() method not implemented for "+this.constructor.name)}}class d extends u{constructor(e){super(),this.typeKey=e}deserialize(e){const t=e[l];if(!Array.isArray(t))throw new Error("Expected Array, obtained: "+t);return t.map(e=>this.reader.read(e))}serialize(e){return{[c]:this.typeKey,[l]:e.map(e=>this.writer.adaptObject(e))}}canBeUsedFor(e){return Array.isArray(e)}}e.exports={BulkSetSerializer:class extends u{deserialize(e){const t=e[l];if(!Array.isArray(t))throw new Error("Expected Array, obtained: "+t);let r=[];for(let e=0,n=t.length;e<n;e+=2){const n=t.slice(e,e+2);r=r.concat(Array(this.reader.read(n[1])).fill(this.reader.read(n[0])))}return r}},BytecodeSerializer:class extends u{serialize(e){let t=e;e instanceof n.Traversal&&(t=e.getBytecode());const r={};r[c]="g:Bytecode";const i=r[l]={},o=this._serializeInstructions(t.sourceInstructions);o&&(i.source=o);const a=this._serializeInstructions(t.stepInstructions);return a&&(i.step=a),r}_serializeInstructions(e){if(0===e.length)return null;const t=new Array(e.length);t[0]=e[0];for(let r=0;r<e.length;r++)t[r]=e[r].map(e=>this.writer.adaptObject(e));return t}canBeUsedFor(e){return e instanceof o||e instanceof n.Traversal}},DateSerializer:class extends u{serialize(e){return{[c]:"g:Date",[l]:e.getTime()}}deserialize(e){return new Date(e[l])}canBeUsedFor(e){return e instanceof Date}},DirectionSerializer:class extends u{deserialize(e){return n.direction[e[l].toLowerCase()]}},EdgeSerializer:class extends u{deserialize(e){const t=e[l];return new a.Edge(this.reader.read(t.id),new a.Vertex(this.reader.read(t.outV),this.reader.read(t.outVLabel)),t.label,new a.Vertex(this.reader.read(t.inV),this.reader.read(t.inVLabel)),this.reader.read(t.properties))}serialize(e){return{[c]:"g:Edge",[l]:{id:this.writer.adaptObject(e.id),label:e.label,outV:this.writer.adaptObject(e.outV.id),outVLabel:e.outV.label,inV:this.writer.adaptObject(e.inV.id),inVLabel:e.inV.label}}}canBeUsedFor(e){return e instanceof a.Edge}},EnumSerializer:class extends u{serialize(e){return{[c]:"g:"+e.typeName,[l]:e.elementName}}canBeUsedFor(e){return e&&e.typeName&&e instanceof n.EnumValue}},LambdaSerializer:class extends u{serialize(e){const t=e(),r="string"==typeof t,n=r?t:t[0],i=r?"gremlin-groovy":t[1],o="gremlin-groovy"===i&&n.includes("->")?n.substring(0,n.indexOf("->")).includes(",")?2:1:-1;return{[c]:"g:Lambda",[l]:{arguments:o,language:i,script:n}}}canBeUsedFor(e){return"function"==typeof e}},ListSerializer:class extends d{constructor(){super("g:List")}},LongSerializer:class extends u{serialize(e){return{[c]:"g:Int64",[l]:e.value}}canBeUsedFor(e){return e instanceof s.Long}},MapSerializer:class extends u{deserialize(e){const t=e[l];if(!Array.isArray(t))throw new Error("Expected Array, obtained: "+t);const r=new Map;for(let e=0;e<t.length;e+=2)r.set(this.reader.read(t[e]),this.reader.read(t[e+1]));return r}serialize(e){const t=[];return e.forEach((e,r)=>{t.push(this.writer.adaptObject(r)),t.push(this.writer.adaptObject(e))}),{[c]:"g:Map",[l]:t}}canBeUsedFor(e){return e instanceof Map}},NumberSerializer:class extends u{serialize(e){return isNaN(e)?{[c]:"g:Double",[l]:"NaN"}:e===Number.POSITIVE_INFINITY?{[c]:"g:Double",[l]:"Infinity"}:e===Number.NEGATIVE_INFINITY?{[c]:"g:Double",[l]:"-Infinity"}:e}deserialize(e){const t=e[l];return"NaN"===t?NaN:"Infinity"===t?Number.POSITIVE_INFINITY:"-Infinity"===t?Number.NEGATIVE_INFINITY:parseFloat(t)}canBeUsedFor(e){return"number"==typeof e}},Path3Serializer:class extends u{deserialize(e){const t=e[l];return new a.Path(this.reader.read(t.labels),this.reader.read(t.objects))}},PathSerializer:class extends u{deserialize(e){const t=e[l],r=t.objects.map(e=>this.reader.read(e));return new a.Path(this.reader.read(t.labels),r)}},PropertySerializer:class extends u{deserialize(e){const t=e[l];return new a.Property(t.key,this.reader.read(t.value))}},PSerializer:class extends u{serialize(e){const t={};t[c]="g:P";const r=t[l]={predicate:e.operator};return void 0===e.other||null===e.other?r.value=this.writer.adaptObject(e.value):r.value=[this.writer.adaptObject(e.value),this.writer.adaptObject(e.other)],t}canBeUsedFor(e){return e instanceof n.P}},TextPSerializer:class extends u{serialize(e){const t={};t[c]="g:TextP";const r=t[l]={predicate:e.operator};return void 0===e.other||null===e.other?r.value=this.writer.adaptObject(e.value):r.value=[this.writer.adaptObject(e.value),this.writer.adaptObject(e.other)],t}canBeUsedFor(e){return e instanceof n.TextP}},SetSerializer:class extends d{constructor(){super("g:Set")}},TSerializer:class extends u{deserialize(e){return n.t[e[l]]}},TraverserSerializer:class extends u{serialize(e){return{[c]:"g:Traverser",[l]:{value:this.writer.adaptObject(e.object),bulk:this.writer.adaptObject(e.bulk)}}}deserialize(e){const t=e[l];return new n.Traverser(this.reader.read(t.value),this.reader.read(t.bulk))}canBeUsedFor(e){return e instanceof n.Traverser}},TraversalStrategySerializer:class extends u{serialize(e){const t={};for(const r in e.configuration)e.configuration.hasOwnProperty(r)&&(t[r]=this.writer.adaptObject(e.configuration[r]));return{[c]:"g:"+e.constructor.name,[l]:t}}canBeUsedFor(e){return e instanceof i.TraversalStrategy}},typeKey:c,valueKey:l,VertexPropertySerializer:class extends u{deserialize(e){const t=e[l];return new a.VertexProperty(this.reader.read(t.id),t.label,this.reader.read(t.value),this.reader.read(t.properties))}},VertexSerializer:class extends u{deserialize(e){const t=e[l];return new a.Vertex(this.reader.read(t.id),t.label,this.reader.read(t.properties))}serialize(e){return{[c]:"g:Vertex",[l]:{id:this.writer.adaptObject(e.id),label:e.label}}}canBeUsedFor(e){return e instanceof a.Vertex}}}},703:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.SHORT]=this}canBeUsedFor(e){}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.SHORT,1]):n.from([0,0]);const r=[];t&&r.push(n.from([this.ioc.DataType.SHORT,0]));const i=n.alloc(2);return i.writeInt16BE(e),r.push(i),n.concat(r)}deserialize(e,t=!0){let r=0,i=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(r++,e!==this.ioc.DataType.SHORT)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<2)throw new Error("unexpected {value} length");r+=2;return{v:i.readInt16BE(),len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},795:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BYTE]=this}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.BYTE,1]):n.from([0]);const r=[];t&&r.push(n.from([this.ioc.DataType.BYTE,0]));const i=n.alloc(1);return i.writeUInt8(e),r.push(i),n.concat(r)}deserialize(e,t=!0){let r=0,i=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(r++,e!==this.ioc.DataType.BYTE)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<1)throw new Error("unexpected {value} length");r+=1;return{v:i.readUInt8(),len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},823:(e,t,r)=>{"use strict";const n=globalThis.AbortController||r(5568).AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:s},AbortError:l}=r(6371),{validateAbortSignal:c,validateInteger:u,validateObject:d}=r(277),f=r(4134).Symbol("kWeak"),p=r(4134).Symbol("kResistStopPropagation"),{finished:h}=r(6238),m=r(7830),{addAbortSignalNoValidate:y}=r(4147),{isWritable:g,isNodeStream:b}=r(6115),{deprecate:v}=r(7760),{ArrayPrototypePush:w,Boolean:_,MathFloor:E,Number:S,NumberIsNaN:T,Promise:I,PromiseReject:A,PromiseResolve:O,PromisePrototypeThen:R,Symbol:x}=r(4134),N=x("kEmpty"),k=x("kEof");function C(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&c(t.signal,"options.signal");let n=1;null!=(null==t?void 0:t.concurrency)&&(n=E(t.concurrency));let i=n-1;return null!=(null==t?void 0:t.highWaterMark)&&(i=E(t.highWaterMark)),u(n,"options.concurrency",1),u(i,"options.highWaterMark",0),i+=n,async function*(){const o=r(7760).AbortSignalAny([null==t?void 0:t.signal].filter(_)),a=this,s=[],c={signal:o};let u,d,f=!1,p=0;function h(){f=!0,m()}function m(){p-=1,y()}function y(){d&&!f&&p<n&&s.length<i&&(d(),d=null)}!async function(){try{for await(let t of a){if(f)return;if(o.aborted)throw new l;try{if(t=e(t,c),t===N)continue;t=O(t)}catch(e){t=A(e)}p+=1,R(t,m,h),s.push(t),u&&(u(),u=null),!f&&(s.length>=i||p>=n)&&await new I(e=>{d=e})}s.push(k)}catch(e){const t=A(e);R(t,m,h),s.push(t)}finally{f=!0,u&&(u(),u=null)}}();try{for(;;){for(;s.length>0;){const e=await s[0];if(e===k)return;if(o.aborted)throw new l;e!==N&&(yield e),s.shift(),y()}await new I(e=>{u=e})}}finally{f=!0,d&&(d(),d=null)}}.call(this)}async function M(e,t=void 0){for await(const r of L.call(this,e,t))return!0;return!1}function L(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return C.call(this,async function(t,r){return await e(t,r)?t:N},t)}class D extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function P(e){if(e=S(e),T(e))return 0;if(e<0)throw new s("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:v(function(e=void 0){return null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&c(e.signal,"options.signal"),async function*(){let t=0;for await(const n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new l({cause:e.signal.reason});yield[t++,n]}}.call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&c(t.signal,"options.signal"),e=P(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;for await(const r of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new l;e--<=0&&(yield r)}}.call(this)},filter:L,flatMap:function(e,t){const r=C.call(this,e,t);return async function*(){for await(const e of r)yield*e}.call(this)},map:C,take:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&c(t.signal,"options.signal"),e=P(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;for await(const r of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new l;if(e-- >0&&(yield r),e<=0)return}}.call(this)},compose:function(e,t){if(null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&c(t.signal,"options.signal"),b(e)&&!g(e))throw new i("stream",e,"must be writable");const r=m(this,e);return null!=t&&t.signal&&y(t.signal,r),r}},e.exports.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return!await M.call(this,async(...t)=>!await e(...t),t)},forEach:async function(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);for await(const r of C.call(this,async function(t,r){return await e(t,r),N},t));},reduce:async function(e,t,r){var i;if("function"!=typeof e)throw new o("reducer",["Function","AsyncFunction"],e);null!=r&&d(r,"options"),null!=(null==r?void 0:r.signal)&&c(r.signal,"options.signal");let a=arguments.length>1;if(null!=r&&null!==(i=r.signal)&&void 0!==i&&i.aborted){const e=new l(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(e)),e}const s=new n,u=s.signal;if(null!=r&&r.signal){const e={once:!0,[f]:this,[p]:!0};r.signal.addEventListener("abort",()=>s.abort(),e)}let m=!1;try{for await(const n of this){var y;if(m=!0,null!=r&&null!==(y=r.signal)&&void 0!==y&&y.aborted)throw new l;a?t=await e(t,n,{signal:u}):(t=n,a=!0)}if(!m&&!a)throw new D}finally{s.abort()}return t},toArray:async function(e){null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&c(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new l(void 0,{cause:e.signal.reason});w(t,n)}return t},some:M,find:async function(e,t){for await(const r of L.call(this,e,t))return r}}},834:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),i=r(9032),o=r(1545);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BYTECODE]=this}canBeUsedFor(e){return e instanceof i||e instanceof o.Traversal}serialize(e,t=!0){if(null==e){if(t)return n.from([this.ioc.DataType.BYTECODE,1]);const e=[0,0,0,0],r=[0,0,0,0];return n.from([...e,...r])}e instanceof o.Traversal&&(e=e.getBytecode());const r=[];t&&r.push(n.from([this.ioc.DataType.BYTECODE,0])),r.push(this.ioc.intSerializer.serialize(e.stepInstructions.length,!1));for(let t=0;t<e.stepInstructions.length;t++){const n=e.stepInstructions[t],i=n[0],o=n.length-1;r.push(this.ioc.stringSerializer.serialize(i,!1)),r.push(this.ioc.intSerializer.serialize(o,!1));for(let e=0;e<o;e++)r.push(this.ioc.anySerializer.serialize(n[1+e],!0))}r.push(this.ioc.intSerializer.serialize(e.sourceInstructions.length,!1));for(let t=0;t<e.sourceInstructions.length;t++){const n=e.sourceInstructions[t],i=n[0],o=n.length-1;r.push(this.ioc.stringSerializer.serialize(i,!1)),r.push(this.ioc.intSerializer.serialize(o,!1));for(let e=0;e<o;e++)r.push(this.ioc.anySerializer.serialize(n[1+e],!0))}return n.concat(r)}deserialize(e,t=!0){let r=0,o=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(r++,e!==this.ioc.DataType.BYTECODE)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}const a=new i;let s,l,c,u;try{({v:s,len:l}=this.ioc.intSerializer.deserialize(o,!1)),r+=l}catch(e){throw e.message="{steps_length}: "+e.message,e}if(s<0)throw new Error("{steps_length} is less than zero");o=o.slice(l);for(let e=0;e<s;e++){let t,n,i,s;try{({v:t,len:n}=this.ioc.stringSerializer.deserialize(o,!1)),r+=n}catch(t){throw t.message=`{step_${e}} {name}: `+t.message,t}o=o.slice(n);try{({v:i,len:s}=this.ioc.intSerializer.deserialize(o,!1)),r+=s}catch(t){throw t.message=`{step_${e}} {values_length}: `+t.message,t}if(i<0)throw new Error(`{step_${e}} {values_length} is less than zero`);o=o.slice(s);const l=[];let c,u;for(let t=0;t<i;t++){try{({v:c,len:u}=this.ioc.anySerializer.deserialize(o)),r+=u,l.push(c)}catch(r){throw r.message=`{step_${e}} {value_${t}}: `+r.message,r}o=o.slice(u)}a.addStep(t,l)}try{({v:c,len:u}=this.ioc.intSerializer.deserialize(o,!1)),r+=u}catch(e){throw e.message="{sources_length}: "+e.message,e}if(c<0)throw new Error("{sources_length} is less than zero");o=o.slice(u);for(let e=0;e<c;e++){let t,n,i,s;try{({v:t,len:n}=this.ioc.stringSerializer.deserialize(o,!1)),r+=n}catch(t){throw t.message=`{source_${e}} {name}: `+t.message,t}o=o.slice(n);try{({v:i,len:s}=this.ioc.intSerializer.deserialize(o,!1)),r+=s}catch(t){throw t.message=`{source_${e}} {values_length}: `+t.message,t}if(i<0)throw new Error(`{source_${e}} {values_length} is less than zero`);o=o.slice(s);const l=[];let c,u;for(let t=0;t<i;t++){try{({v:c,len:u}=this.ioc.anySerializer.deserialize(o)),r+=u,l.push(c)}catch(r){throw r.message=`{source_${e}} {value_${t}}: `+r.message,r}o=o.slice(u)}a.addSource(t,l)}return{v:a,len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},1019:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n,i={exports:{}},o=i.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c,u=[],d=!1,f=-1;function p(){d&&c&&(d=!1,c.length?u=c.concat(u):f=-1,u.length&&h())}function h(){if(!d){var e=l(p);d=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new m(e,t)),1!==u.length||d||l(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0};var b=i.exports.browser,v=g,w=i.exports.binding,_=g,E={},S=g,T=g,I=g,A=g,O=g,R="browser",x="browser",N="browser",k=[],C={nextTick:i.exports.nextTick,title:i.exports.title,browser:b,env:i.exports.env,argv:i.exports.argv,version:i.exports.version,versions:i.exports.versions,on:i.exports.on,addListener:i.exports.addListener,once:i.exports.once,off:i.exports.off,removeListener:i.exports.removeListener,removeAllListeners:i.exports.removeAllListeners,emit:i.exports.emit,emitWarning:v,prependListener:i.exports.prependListener,prependOnceListener:i.exports.prependOnceListener,listeners:i.exports.listeners,binding:w,cwd:i.exports.cwd,chdir:i.exports.chdir,umask:i.exports.umask,exit:_,pid:1,features:E,kill:S,dlopen:T,uptime:I,memoryUsage:A,uvCounters:O,platform:R,arch:x,execPath:N,execArgv:k};t.addListener=i.exports.addListener,t.arch=x,t.argv=i.exports.argv,t.binding=w,t.browser=b,t.chdir=i.exports.chdir,t.cwd=i.exports.cwd,t.default=C,t.dlopen=T,t.emit=i.exports.emit,t.emitWarning=v,t.env=i.exports.env,t.execArgv=k,t.execPath=N,t.exit=_,t.features=E,t.kill=S,t.listeners=i.exports.listeners,t.memoryUsage=A,t.nextTick=i.exports.nextTick,t.off=i.exports.off,t.on=i.exports.on,t.once=i.exports.once,t.pid=1,t.platform=R,t.prependListener=i.exports.prependListener,t.prependOnceListener=i.exports.prependOnceListener,t.removeAllListeners=i.exports.removeAllListeners,t.removeListener=i.exports.removeListener,t.title=i.exports.title,t.umask=i.exports.umask,t.uptime=I,t.uvCounters=O,t.version=i.exports.version,t.versions=i.exports.versions,t=e.exports=C},1104:(e,t,r)=>{"use strict";var n=r(1019);const i=r(2831);t.toLong=function(e){return new o(e)};const o=t.Long=function(e){if("string"!=typeof e&&"number"!=typeof e)throw new TypeError("The value must be a string or a number");this.value=e.toString()};t.getUuid=function(){return i.v4()},t.emptyArray=Object.freeze([]);class a extends Map{constructor(e){super(e)}set(){return this}delete(){return!1}clear(){}}t.ImmutableMap=a,t.getUserAgentHeader=function(){return"User-Agent"},t.getUserAgent=async()=>"navigator"in globalThis?globalThis.navigator.userAgent:void 0!==n?.versions?.node?await async function(){const e=await r.e(72).then(r.t.bind(r,1072,19)),t=(n?.env.npm_package_name??"NotAvailable").replace("_"," ");let i,o,a,s;return i=o=a=s="NotAvailable",null!=n&&(n.version&&(i=n.version.replace(" ","_")),n.arch&&(s=n.arch.replace(" ","_"))),null!=e&&(o=e.platform().replace(" ","_"),a=e.release().replace(" ","_")),`${t} Gremlin-Javascript.3.7.4 ${i} ${o}.${a} ${s}`}():void 0;t.toArrayBuffer=e=>e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);e.exports.DeferredPromise=()=>{let e=e=>{},t=e=>{};const r=new Promise((r,n)=>{e=r,t=n});return Object.assign(r,{resolve:e,reject:t})}},1352:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.DOUBLE]=this}canBeUsedFor(e){return"number"==typeof e&&!Number.isInteger(e)}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.DOUBLE,1]):n.from([0,0,0,0,0,0,0,0]);const r=[];t&&r.push(n.from([this.ioc.DataType.DOUBLE,0]));const i=n.alloc(8);return i.writeDoubleBE(e),r.push(i),n.concat(r)}deserialize(e,t=!0){let r=0,i=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(r++,e!==this.ioc.DataType.DOUBLE)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<8)throw new Error("unexpected {value} length");r+=8;return{v:i.readDoubleBE(),len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},1421:(e,t,r)=>{"use strict";const n={};n.DataType=r(8653),n.utils=r(6980),n.serializers={},n.intSerializer=new(r(6580))(n),n.longSerializer=new(r(1743))(n),n.longSerializerNg=new(r(7092))(n),n.stringSerializer=new(r(2420))(n,n.DataType.STRING),n.dateSerializer=new(r(2285))(n,n.DataType.DATE),n.timestampSerializer=new(r(2285))(n,n.DataType.TIMESTAMP),n.classSerializer=new(r(2420))(n,n.DataType.CLASS),n.doubleSerializer=new(r(1352))(n),n.floatSerializer=new(r(9995))(n),n.listSerializer=new(r(7100))(n,n.DataType.LIST),n.mapSerializer=new(r(8095))(n),n.setSerializer=new(r(7100))(n,n.DataType.SET),n.uuidSerializer=new(r(4194))(n),n.edgeSerializer=new(r(2588))(n),n.pathSerializer=new(r(5094))(n),n.propertySerializer=new(r(3920))(n),n.vertexSerializer=new(r(243))(n),n.vertexPropertySerializer=new(r(6414))(n),n.bytecodeSerializer=new(r(834))(n),n.pSerializer=new(r(3933))(n),n.traverserSerializer=new(r(4253))(n),n.enumSerializer=new(r(8372))(n),n.lambdaSerializer=new(r(6078))(n),n.bigIntegerSerializer=new(r(4957))(n),n.byteSerializer=new(r(795))(n),n.byteBufferSerializer=new(r(7777))(n),n.shortSerializer=new(r(703))(n),n.booleanSerializer=new(r(3321))(n),n.textPSerializer=new(r(6348))(n),n.traversalStrategySerializer=new(r(9386))(n),n.bulkSetSerializer=new(r(7765))(n),n.unspecifiedNullSerializer=new(r(7135))(n),n.numberSerializationStrategy=new(r(4687))(n),n.anySerializer=new(r(5127))(n),n.graphBinaryReader=new(r(3203))(n),n.graphBinaryWriter=new(r(6579))(n),e.exports=n},1545:e=>{"use strict";const t=Object.freeze({value:null,done:!0}),r=Symbol.asyncIterator||Symbol("@@asyncIterator");class n{constructor(e,t,r){this.operator=e,this.value=t,this.other=r}toString(){function e(t){if(Array.isArray(t)){const r=[];for(const n of t)r.push(e(n));return r}return t&&"string"==typeof t?`'${t}'`:t}return void 0===this.other||null===this.other?this.operator+"("+e(this.value)+")":this.operator+"("+e(this.value)+", "+e(this.other)+")"}and(e){return new n("and",this,e)}or(e){return new n("or",this,e)}static within(...e){return 1===e.length&&Array.isArray(e[0])?new n("within",e[0],null):new n("within",e,null)}static without(...e){return 1===e.length&&Array.isArray(e[0])?new n("without",e[0],null):new n("without",e,null)}static between(...e){return i("between",e)}static eq(...e){return i("eq",e)}static gt(...e){return i("gt",e)}static gte(...e){return i("gte",e)}static inside(...e){return i("inside",e)}static lt(...e){return i("lt",e)}static lte(...e){return i("lte",e)}static neq(...e){return i("neq",e)}static not(...e){return i("not",e)}static outside(...e){return i("outside",e)}static test(...e){return i("test",e)}}function i(e,t){return t.unshift(null,e),new(Function.prototype.bind.apply(n,t))}class o{constructor(e,t,r){this.operator=e,this.value=t,this.other=r}toString(){function e(e){return e&&"string"==typeof e?`'${e}'`:e}return void 0===this.other?this.operator+"("+e(this.value)+")":this.operator+"("+e(this.value)+", "+e(this.other)+")"}and(e){return new n("and",this,e)}or(e){return new n("or",this,e)}static containing(...e){return a("containing",e)}static endingWith(...e){return a("endingWith",e)}static notContaining(...e){return a("notContaining",e)}static notEndingWith(...e){return a("notEndingWith",e)}static notStartingWith(...e){return a("notStartingWith",e)}static startingWith(...e){return a("startingWith",e)}static regex(...e){return a("regex",e)}static notRegex(...e){return a("notRegex",e)}}function a(e,t){return t.unshift(null,e),new(Function.prototype.bind.apply(o,t))}function s(e,t){const r={};return t.split(" ").forEach(t=>{let n=t;n===n.toUpperCase()&&(n=n.toLowerCase()),r[n]=new c(e,t)}),r}const l={from_:"out",to:"in"};class c{constructor(e,t){this.typeName=e,this.elementName=t}toString(){return this.elementName}}e.exports={EnumValue:c,P:n,TextP:o,withOptions:{tokens:"~tinkerpop.valueMap.tokens",none:0,ids:1,labels:2,keys:4,values:8,all:15,indexer:"~tinkerpop.index.indexer",list:0,map:1},IO:class{static get graphml(){return"graphml"}static get graphson(){return"graphson"}static get gryo(){return"gryo"}static get reader(){return"~tinkerpop.io.reader"}static get registry(){return"~tinkerpop.io.registry"}static get writer(){return"~tinkerpop.io.writer"}},Traversal:class{constructor(e,t,r){this.graph=e,this.traversalStrategies=t,this.bytecode=r,this.traversers=null,this.sideEffects=null,this._traversalStrategiesPromise=null,this._traversersIteratorIndex=0}[r](){return this}getBytecode(){return this.bytecode}toList(){return this._applyStrategies().then(()=>{const e=[];let t;for(;(t=this._getNext())&&!t.done;)e.push(t.value);return e})}hasNext(){return this._applyStrategies().then(()=>this.traversers&&this.traversers.length>0&&this._traversersIteratorIndex<this.traversers.length&&this.traversers[this._traversersIteratorIndex].bulk>0)}iterate(){return this.bytecode.addStep("none"),this._applyStrategies().then(()=>{let e;for(;(e=this._getNext())&&!e.done;);})}next(){return this._applyStrategies().then(()=>this._getNext())}_getNext(){for(;this.traversers&&this._traversersIteratorIndex<this.traversers.length;){const e=this.traversers[this._traversersIteratorIndex];if(e.bulk>0)return e.bulk--,{value:e.object,done:!1};this._traversersIteratorIndex++}return t}_applyStrategies(){return this._traversalStrategiesPromise?this._traversalStrategiesPromise:this._traversalStrategiesPromise=this.traversalStrategies.applyStrategies(this)}toJSON(){return this.bytecode.stepInstructions}toString(){return this.bytecode.toString()}},TraversalSideEffects:class{},Traverser:class{constructor(e,t){this.object=e,this.bulk=t||1}},barrier:s("Barrier","normSack"),cardinality:s("Cardinality","list set single"),column:s("Column","keys values"),direction:function(e,t){const r=s(e,t);return Object.keys(l).forEach(e=>{r[e]=r[l[e]]}),r}("Direction","BOTH IN OUT from_ to"),dt:s("DT","second minute hour day"),graphSONVersion:s("GraphSONVersion","V1_0 V2_0 V3_0"),gryoVersion:s("GryoVersion","V1_0 V3_0"),merge:s("Merge","onCreate onMatch outV inV"),operator:s("Operator","addAll and assign div max min minus mult or sum sumLong"),order:s("Order","asc desc shuffle"),pick:s("Pick","any none"),pop:s("Pop","all first last mixed"),scope:s("Scope","global local"),t:s("T","id key label value")}},1743:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.LONG]=this}canBeUsedFor(){}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.LONG,1]):n.from([0,0,0,0,0,0,0,0]);const r=[];t&&r.push(n.from([this.ioc.DataType.LONG,0]));const i=n.alloc(8);return i.writeBigInt64BE(BigInt(e)),r.push(i),n.concat(r)}deserialize(e,t=!0){let r=0,i=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(r++,e!==this.ioc.DataType.LONG)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<8)throw new Error("unexpected {value} length");r+=8;let o=i.readBigInt64BE();return o=o<Number.MIN_SAFE_INTEGER||o>Number.MAX_SAFE_INTEGER?parseFloat(o.toString()):Number(o),{v:o,len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},1893:(e,t,r)=>{"use strict";const n=r(2468),i=r(8402);e.exports=class extends n{constructor(e,t,r){super({mechanism:new i({username:e,password:t,authzid:r})})}evaluateChallenge(e){return this._options.mechanism.evaluateChallenge(e)}}},1982:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t,r){return t=l(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r))}function o(e){var t="function"==typeof Map?new Map:void 0;return o=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(a())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var i=new(e.bind.apply(e,n));return r&&s(i,r.prototype),i}(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,e)},o(e)}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function c(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var l=n&&n.prototype instanceof s?n:s,c=Object.create(l.prototype);return d(c,"_invoke",function(r,n,i){var o,s,l,c=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,l=e,f.n=r,a}};function p(r,n){for(s=r,l=n,t=0;!d&&c&&!i&&t<u.length;t++){var i,o=u[t],p=f.p,h=o[2];r>3?(i=h===n)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((i=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<h&&(i=r<3||o[0]>n||n>h)&&(o[4]=r,o[5]=n,f.n=h,s=0))}if(i||r>1)return a;throw d=!0,n}return function(i,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,l=h;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),p(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:r.call(n,f))!==a)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(r,i,o),!0),c}var a={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(d(t={},n,function(){return this}),t),p=c.prototype=s.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,d(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=c,d(p,"constructor",c),d(c,"constructor",l),l.displayName="GeneratorFunction",d(c,i,"GeneratorFunction"),d(p),d(p,i,"Generator"),d(p,n,function(){return this}),d(p,"toString",function(){return"[object Generator]"}),(u=function(){return{w:o,m:h}})()}function d(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}d=function(e,t,r,n){function o(t,r){d(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},d(e,t,r,n)}function f(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function p(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){f(o,n,i,a,s,"next",e)}function s(e){f(o,n,i,a,s,"throw",e)}a(void 0)})}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function y(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}r.d(t,{M:()=>b,e:()=>v});var b=function(){return y(function e(t){if(h(this,e),this.constructor===e)throw new Error("Can't create an instance of an abstract class.")},[{key:"initialize",value:(s=p(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:throw new Error("initialize() has not been implemented.");case 1:return e.a(2)}},e)})),function(){return s.apply(this,arguments)})},{key:"close",value:(a=p(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:throw new Error("close() has not been implemented.");case 1:return e.a(2)}},e)})),function(){return a.apply(this,arguments)})},{key:"startTransaction",value:(o=p(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:throw new Error("startTransaction() has not been implemented.");case 1:return e.a(2)}},e)})),function(){return o.apply(this,arguments)})},{key:"endTransaction",value:(i=p(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:throw new Error("endTransaction() has not been implemented.");case 1:return e.a(2)}},e)})),function(){return i.apply(this,arguments)})},{key:"executeInTransaction",value:(n=p(u().m(function e(t,r){return u().w(function(e){for(;;)switch(e.n){case 0:throw new Error("executeInTransaction() has not been implemented.");case 1:return e.a(2)}},e)})),function(e,t){return n.apply(this,arguments)})},{key:"executeRead",value:(t=p(u().m(function e(t,r){return u().w(function(e){for(;;)switch(e.n){case 0:throw new Error("executeRead() has not been implemented.");case 1:return e.a(2)}},e)})),function(e,r){return t.apply(this,arguments)})},{key:"executeWrite",value:(e=p(u().m(function e(t,r){return u().w(function(e){for(;;)switch(e.n){case 0:throw new Error("executeWrite() has not been implemented.");case 1:return e.a(2)}},e)})),function(t,r){return e.apply(this,arguments)})},{key:"getQuery",value:function(e){if(utils.debugLog("getQuery('".concat(e,"')")),e in this.queryStrings)return this.queryStrings[e][this.dbtype];throw new Error("A query with ID ".concat(e," was not found."))}}],[{key:"classFactory",value:function(e,t,n){var i;switch(e.DATABASETYPE.toLowerCase()){case"neo4j":i=new(0,r(6535).Neo4jDatabaseService)(e.NEO4J_CONFIG);break;case"neo4j-https":i=new(0,r(2693).Neo4jHTTPSDatabaseService)(e.NEO4J_CONFIG);break;case"cosmosdb":i=new(0,r(9834).GremlinDatabaseService)(e.COSMOSDB_CONFIG,n);break;default:throw new Error("Unsupported graph database type: ".concat(e.DATABASETYPE))}return i.dbtype=e.DATABASETYPE.toLowerCase(),i.queryStrings=t,i}}]);var e,t,n,i,o,a,s}(),v=function(e){function t(){var e;h(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return c(e=i(this,t,[].concat(n)),"isRawArray",!0),c(e,"quotedElements",!1),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e),y(t)}(o(Array))},2029:(e,t,r)=>{"use strict";const n=r(1545).Traversal,i=r(9032);e.exports=class{constructor(e){this._traversalSource=e}getTraversalSource(){return this._traversalSource}getTargetLanguage(){return"gremlin-groovy"}of(e){this._traversalSource=e}translate(e,t=!1){let r=t?"__":this._traversalSource;const n=(e instanceof i?e:e.getBytecode()).stepInstructions;for(let e=0;e<n.length;e++){const t=n[e].slice(1);if(r+="."+n[e][0]+"(",t.length)for(let e=0;e<t.length;e++)e>0&&(r+=", "),r+=this.convert(t[e]);r+=")"}return r}convert(e){let t="";if(Object(e)===e)if(e instanceof n)t+=this.translate(e.getBytecode(),!0);else if("[object Object]"===e.toString())Object.keys(e).forEach(function(r,n){n>0&&(t+=", "),t+=`('${r}', `,e[r]instanceof String||"string"==typeof e[r]?t+=`'${`${e[r]}`.replaceAll("'","\\'")}'`:t+=e[r],t+=")"});else if(Array.isArray(e)){const r=[];for(const t of e)r.push(this.convert(t));t+="["+r.join(", ")+"]"}else t+=e.toString();else t+=null==e?"null":"number"==typeof e||"boolean"==typeof e?e:`'${`${e}`.replaceAll("'","\\'")}'`;return t}}},2285:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e,t){this.ioc=e,this.ID=t,this.ioc.serializers[t]=this}canBeUsedFor(e){return e instanceof Date}serialize(e,t=!0){if(null==e)return t?n.from([this.ID,1]):n.from([0,0,0,0,0,0,0,0]);const r=[];t&&r.push(n.from([this.ID,0]));const i=n.alloc(8);return i.writeBigInt64BE(BigInt(e.getTime())),r.push(i),n.concat(r)}deserialize(e,t=!0){let r=0,i=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(r++,e!==this.ID)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<8)throw new Error("unexpected {value} length");r+=8;const o=i.readBigInt64BE();return{v:new Date(Number(o)),len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},2311:(e,t)=>{"use strict";function r(e){return 14+(e+64>>>9<<4)+1}function n(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function i(e,t,r,i,o,a){return n((s=n(n(t,e),n(i,a)))<<(l=o)|s>>>32-l,r);var s,l}function o(e,t,r,n,o,a,s){return i(t&r|~t&n,e,t,o,a,s)}function a(e,t,r,n,o,a,s){return i(t&n|r&~n,e,t,o,a,s)}function s(e,t,r,n,o,a,s){return i(t^r^n,e,t,o,a,s)}function l(e,t,r,n,o,a,s){return i(r^(t|~n),e,t,o,a,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let i=0;i<r;i+=8){const r=e[i>>5]>>>i%32&255,o=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[r(t)-1]=t;let i=1732584193,c=-271733879,u=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const r=i,f=c,p=u,h=d;i=o(i,c,u,d,e[t],7,-680876936),d=o(d,i,c,u,e[t+1],12,-389564586),u=o(u,d,i,c,e[t+2],17,606105819),c=o(c,u,d,i,e[t+3],22,-1044525330),i=o(i,c,u,d,e[t+4],7,-176418897),d=o(d,i,c,u,e[t+5],12,1200080426),u=o(u,d,i,c,e[t+6],17,-1473231341),c=o(c,u,d,i,e[t+7],22,-45705983),i=o(i,c,u,d,e[t+8],7,1770035416),d=o(d,i,c,u,e[t+9],12,-1958414417),u=o(u,d,i,c,e[t+10],17,-42063),c=o(c,u,d,i,e[t+11],22,-1990404162),i=o(i,c,u,d,e[t+12],7,1804603682),d=o(d,i,c,u,e[t+13],12,-40341101),u=o(u,d,i,c,e[t+14],17,-1502002290),c=o(c,u,d,i,e[t+15],22,1236535329),i=a(i,c,u,d,e[t+1],5,-165796510),d=a(d,i,c,u,e[t+6],9,-1069501632),u=a(u,d,i,c,e[t+11],14,643717713),c=a(c,u,d,i,e[t],20,-373897302),i=a(i,c,u,d,e[t+5],5,-701558691),d=a(d,i,c,u,e[t+10],9,38016083),u=a(u,d,i,c,e[t+15],14,-660478335),c=a(c,u,d,i,e[t+4],20,-405537848),i=a(i,c,u,d,e[t+9],5,568446438),d=a(d,i,c,u,e[t+14],9,-1019803690),u=a(u,d,i,c,e[t+3],14,-187363961),c=a(c,u,d,i,e[t+8],20,1163531501),i=a(i,c,u,d,e[t+13],5,-1444681467),d=a(d,i,c,u,e[t+2],9,-51403784),u=a(u,d,i,c,e[t+7],14,1735328473),c=a(c,u,d,i,e[t+12],20,-1926607734),i=s(i,c,u,d,e[t+5],4,-378558),d=s(d,i,c,u,e[t+8],11,-2022574463),u=s(u,d,i,c,e[t+11],16,1839030562),c=s(c,u,d,i,e[t+14],23,-35309556),i=s(i,c,u,d,e[t+1],4,-1530992060),d=s(d,i,c,u,e[t+4],11,1272893353),u=s(u,d,i,c,e[t+7],16,-155497632),c=s(c,u,d,i,e[t+10],23,-1094730640),i=s(i,c,u,d,e[t+13],4,681279174),d=s(d,i,c,u,e[t],11,-358537222),u=s(u,d,i,c,e[t+3],16,-722521979),c=s(c,u,d,i,e[t+6],23,76029189),i=s(i,c,u,d,e[t+9],4,-640364487),d=s(d,i,c,u,e[t+12],11,-421815835),u=s(u,d,i,c,e[t+15],16,530742520),c=s(c,u,d,i,e[t+2],23,-995338651),i=l(i,c,u,d,e[t],6,-198630844),d=l(d,i,c,u,e[t+7],10,1126891415),u=l(u,d,i,c,e[t+14],15,-1416354905),c=l(c,u,d,i,e[t+5],21,-57434055),i=l(i,c,u,d,e[t+12],6,1700485571),d=l(d,i,c,u,e[t+3],10,-1894986606),u=l(u,d,i,c,e[t+10],15,-1051523),c=l(c,u,d,i,e[t+1],21,-2054922799),i=l(i,c,u,d,e[t+8],6,1873313359),d=l(d,i,c,u,e[t+15],10,-30611744),u=l(u,d,i,c,e[t+6],15,-1560198380),c=l(c,u,d,i,e[t+13],21,1309151649),i=l(i,c,u,d,e[t+4],6,-145523070),d=l(d,i,c,u,e[t+11],10,-1120210379),u=l(u,d,i,c,e[t+2],15,718787259),c=l(c,u,d,i,e[t+9],21,-343485551),i=n(i,r),c=n(c,f),u=n(u,p),d=n(d,h)}return[i,c,u,d]}(function(e){if(0===e.length)return[];const t=8*e.length,n=new Uint32Array(r(t));for(let r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))};t.default=c},2420:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e,t){this.ioc=e,this.ID=t,this.ioc.serializers[t]=this}canBeUsedFor(e){return"string"==typeof e}serialize(e,t=!0){if(null==e)return t?n.from([this.ID,1]):this.ioc.intSerializer.serialize(0,!1);const r=[];t&&r.push(n.from([this.ID,0]));const i=n.from(String(e),"utf8");return r.push(this.ioc.intSerializer.serialize(i.length,!1)),r.push(i),n.concat(r)}deserialize(e,t=!0,r=!1){let i=0,o=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(i++,e!==this.ID)throw new Error("unexpected {type_code}");o=o.slice(1)}if(t||r){if(o.length<1)throw new Error("{value_flag} is missing");const e=o.readUInt8();if(i++,1===e)return{v:null,len:i};if(0!==e)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s;try{({v:a,len:s}=this.ioc.intSerializer.deserialize(o,!1)),i+=s}catch(e){throw e.message="{length}: "+e.message,e}if(a<0)throw new Error("{length} is less than zero");if(o=o.slice(s),o.length<a)throw new Error("unexpected {text_value} length");i+=a;return{v:o.toString("utf8",0,a),len:i}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},2468:e=>{"use strict";e.exports=class{constructor(e){this._options=e}evaluateChallenge(e){throw new Error("evaluateChallenge should be implemented")}}},2588:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),i=r(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.EDGE]=this}canBeUsedFor(e){return e instanceof i.Edge}serialize(e,t=!0){if(null==e){if(t)return n.from([this.ioc.DataType.EDGE,1]);const e=[3,0,0,0,0,0],r=[0,0,0,0],i=[3,0,0,0,0,0],o=[0,0,0,0],a=[3,0,0,0,0,0],s=[0,0,0,0],l=[254,1],c=[254,1];return n.from([...e,...r,...i,...o,...a,...s,...l,...c])}const r=[];t&&r.push(n.from([this.ioc.DataType.EDGE,0])),r.push(this.ioc.anySerializer.serialize(e.id)),r.push(this.ioc.stringSerializer.serialize(e.label,!1));const i=e.inV&&e.inV.id;r.push(this.ioc.anySerializer.serialize(i));const o=e.inV&&e.inV.label;r.push(this.ioc.stringSerializer.serialize(o,!1));const a=e.outV&&e.outV.id;r.push(this.ioc.anySerializer.serialize(a));const s=e.outV&&e.outV.label;return r.push(this.ioc.stringSerializer.serialize(s,!1)),r.push(this.ioc.unspecifiedNullSerializer.serialize(null)),r.push(this.ioc.unspecifiedNullSerializer.serialize(null)),n.concat(r)}deserialize(e,t=!0){let r=0,o=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(r++,e!==this.ioc.DataType.EDGE)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,l,c,u,d,f,p,h,m,y,g,b,v,w;try{({v:a,len:s}=this.ioc.anySerializer.deserialize(o)),r+=s}catch(e){throw e.message="{id}: "+e.message,e}o=o.slice(s);try{({v:l,len:c}=this.ioc.stringSerializer.deserialize(o,!1)),r+=c}catch(e){throw e.message="{label}: "+e.message,e}o=o.slice(c);try{({v:u,len:d}=this.ioc.anySerializer.deserialize(o)),r+=d}catch(e){throw e.message="{inVId}: "+e.message,e}o=o.slice(d);try{({v:f,len:p}=this.ioc.stringSerializer.deserialize(o,!1)),r+=p}catch(e){throw e.message="{inVLabel}: "+e.message,e}o=o.slice(p);try{({v:h,len:m}=this.ioc.anySerializer.deserialize(o)),r+=m}catch(e){throw e.message="{outVId}: "+e.message,e}o=o.slice(m);try{({v:y,len:g}=this.ioc.stringSerializer.deserialize(o,!1)),r+=g}catch(e){throw e.message="{outVLabel}: "+e.message,e}o=o.slice(g);try{({len:b}=this.ioc.anySerializer.deserialize(o)),r+=b}catch(e){throw e.message="{parent}: "+e.message,e}o=o.slice(b);try{({v,len:w}=this.ioc.anySerializer.deserialize(o)),r+=w}catch(e){throw e.message="{properties}: "+e.message,e}o=o.slice(w);return{v:new i.Edge(a,new i.Vertex(h,y,null),l,new i.Vertex(u,f,null),v),len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},2617:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function a(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}var c=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.locale=t,this.config=this.getLocaleConfig(t),this.initializeFormatters()},t=[{key:"initializeFormatters",value:function(){var e={hour12:this.config.timeFormat.hour12};this.dateFormatters={short:new Intl.DateTimeFormat(this.locale,o({dateStyle:"short",timeStyle:"short"},e)),medium:new Intl.DateTimeFormat(this.locale,o({dateStyle:"medium",timeStyle:"medium"},e)),long:new Intl.DateTimeFormat(this.locale,o({dateStyle:"full",timeStyle:"long"},e)),time:new Intl.DateTimeFormat(this.locale,o({timeStyle:"short"},e))},this.numberFormatter=new Intl.NumberFormat(this.locale,{minimumFractionDigits:0,maximumFractionDigits:20}),this.currencyFormatter=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.config.numberFormat.currency})}},{key:"getLocaleConfig",value:function(e){return window.localeConfigs[e]||window.localeConfigs["en-US"]}},{key:"formatDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium",r=this.config.dateFormat;return null!=r&&r[t]?new Intl.DateTimeFormat(this.locale,{dateStyle:t}).format(e):e.toLocaleDateString(this.locale)}},{key:"formatNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return null!==t?new Intl.NumberFormat(this.locale,{minimumFractionDigits:t,maximumFractionDigits:t}).format(e):this.numberFormatter.format(e)}catch(t){return e.toString()}}},{key:"formatCurrency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return t?new Intl.NumberFormat(this.locale,{style:"currency",currency:t}).format(e):this.currencyFormatter.format(e)}catch(t){return e.toString()}}},{key:"formatRelativeTime",value:function(e){try{for(var t=new Intl.RelativeTimeFormat(this.locale,{numeric:"auto"}),n=(new Date(e).getTime()-Date.now())/1e3,i=0,o=Object.entries({year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1});i<o.length;i++){var a=r(o[i],2),s=a[0],l=a[1];if(Math.abs(n)>=l||"second"===s)return t.format(Math.round(n/l),s)}}catch(t){return new Date(e).toLocaleString(this.locale)}}},{key:"formatTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";try{var r,n={hour:"numeric",minute:"numeric",second:"short"!==t?"numeric":void 0,hour12:null===(r=this.config.timeFormat)||void 0===r?void 0:r.hour12};return new Intl.DateTimeFormat(this.locale,n).format(e)}catch(t){return e.toLocaleTimeString(this.locale)}}},{key:"uses12HourTime",value:function(){var e,t;return"12h"===(null===(e=this.config.timeFormat)||void 0===e?void 0:e.system)||!0===(null===(t=this.config.timeFormat)||void 0===t?void 0:t.hour12)}},{key:"usesMixedTimeFormat",value:function(){var e;return"mixed"===(null===(e=this.config.timeFormat)||void 0===e?void 0:e.system)}},{key:"formatDateTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";try{var r,n=e instanceof Date?e:new Date(e),i=(null===(r=this.config.dateTimeFormat)||void 0===r?void 0:r[t])||{},o=new Intl.DateTimeFormat(this.locale,{dateStyle:t}),a=new Intl.DateTimeFormat(this.locale,{hour:"12h"===this.config.timeFormat.system?"numeric":"2-digit",minute:"2-digit",second:"short"!==t?"2-digit":void 0,hour12:this.config.timeFormat.hour12});return(i.pattern||"{date} {time}").replace("{date}",o.format(n)).replace("{time}",a.format(n))}catch(t){return new Date(e).toLocaleString(this.locale)}}},{key:"getMeridiemMarker",value:function(e){var t=this.config.timeFormat;return null!=t&&t.meridiem?e<12?t.meridiem.ante:t.meridiem.post:null}},{key:"isRTL",value:function(){return"rtl"===this.config.direction}},{key:"getCulturalPreferences",value:function(){var e,t,r,n;return{direction:this.config.direction,timeFormat:this.config.timeFormat,dateFormat:this.config.dateFormat,dateTimeFormat:this.config.dateTimeFormat,numberFormat:this.config.numberFormat,calendar:{firstDayOfWeek:null!==(e=null===(t=this.config.calendar)||void 0===t?void 0:t.firstDayOfWeek)&&void 0!==e?e:0,weekendDays:null!==(r=null===(n=this.config.calendar)||void 0===n?void 0:n.weekendDays)&&void 0!==r?r:[0,6]},measurement:this.config.measurement||"metric"}}}],t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports&&(e.exports=c),window.CulturalConfig=c},2693:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Neo4jHTTPSDatabaseService:()=>A});var n=r(1982);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,i,o){var s=n&&n.prototype instanceof c?n:c,u=Object.create(s.prototype);return a(u,"_invoke",function(r,n,i){var o,a,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,a=0,s=e,f.n=r,l}};function p(r,n){for(a=r,s=n,t=0;!d&&c&&!i&&t<u.length;t++){var i,o=u[t],p=f.p,h=o[2];r>3?(i=h===n)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=p&&((i=r<2&&p<o[1])?(a=0,f.v=n,f.n=o[1]):p<h&&(i=r<3||o[0]>n||n>h)&&(o[4]=r,o[5]=n,f.n=h,a=0))}if(i||r>1)return l;throw d=!0,n}return function(i,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),a=u,s=h;(t=a<2?e:s)||!d;){o||(a?a<3?(a>1&&(f.n=-1),p(a,s)):f.n=s:f.v=s);try{if(c=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((t=(d=f.n<0)?s:r.call(n,f))!==l)break}catch(t){o=e,a=1,s=t}finally{c=1}}return{value:t,done:d}}}(r,i,o),!0),u}var l={};function c(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(a(t={},n,function(){return this}),t),p=d.prototype=c.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=d,a(p,"constructor",d),a(d,"constructor",u),u.displayName="GeneratorFunction",a(d,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,n,function(){return this}),a(p,"toString",function(){return"[object Generator]"}),(o=function(){return{w:s,m:h}})()}function a(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}a=function(e,t,r,n){function o(t,r){a(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},a(e,t,r,n)}function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function l(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var d=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.uri)throw new Error("Invalid Neo4j configuration: URI is required");if(!(t.neo4j_serverauth||t.username&&t.password))throw new Error("Invalid Neo4j configuration: Either neo4j_serverauth OR both username and password must be provided");if(this.config=t,this.connectionRetryCount=0,this.maxRetries=3,this.baseUrl=this.config.uri,t.neo4j_serverauth)this.authHeader="Basic ".concat(t.neo4j_serverauth);else{var r="".concat(this.config.username,":").concat(this.config.password);this.authHeader="Basic ".concat(btoa(r))}},t=[{key:"executeQuery",value:(a=l(o().m(function e(t,r,n){var i,a,s,l,c,u,d;return o().w(function(e){for(;;)switch(e.n){case 0:return i={statement:t.replaceAll("\n"," "),parameters:r},a={Authorization:this.authHeader,"Content-Type":"application/json",Accept:"application/json"},n&&n.clusterAffinity&&(a["neo4j-cluster-affinity"]=n.clusterAffinity),s=n&&n.id?"".concat(this.baseUrl).concat(this.baseUrl.endsWith("/")?"":"/","tx/").concat(n.id):this.baseUrl,e.n=1,fetch(s,{method:"POST",headers:a,body:JSON.stringify(i)});case 1:if((l=e.v).ok){e.n=3;break}return e.n=2,l.text();case 2:throw c=e.v,new Error("Neo4j Query API Error: ".concat(l.status," ").concat(l.statusText," - ").concat(c));case 3:return e.n=4,l.json();case 4:if(!((u=e.v).errors&&Array.isArray(u.errors)&&u.errors.length>0)){e.n=5;break}throw d=u.errors[0],new Error("Neo4j Error [".concat(d.code,"]: ").concat(d.message));case 5:return e.a(2,u.data?u.data:null)}},e,this)})),function(e,t,r){return a.apply(this,arguments)})},{key:"startTransaction",value:(i=l(o().m(function e(){var t,r,n,i;return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fetch("".concat(this.baseUrl).concat(this.baseUrl.endsWith("/")?"":"/","tx"),{method:"POST",headers:{Authorization:this.authHeader,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({})});case 1:if((t=e.v).ok){e.n=3;break}return e.n=2,t.text();case 2:throw r=e.v,new Error("Neo4j Transaction Error: ".concat(t.status," ").concat(t.statusText," - ").concat(r));case 3:return e.n=4,t.json();case 4:return n=e.v,i=t.headers.get("neo4j-cluster-affinity"),e.a(2,{id:n.transaction.id,expires:n.transaction.expires,clusterAffinity:i,open:!0})}},e,this)})),function(){return i.apply(this,arguments)})},{key:"commitTransaction",value:(n=l(o().m(function e(t){var r,n;return o().w(function(e){for(;;)switch(e.n){case 0:if(t&&t.id){e.n=1;break}throw new Error("Invalid transaction information");case 1:if(t.open){e.n=2;break}return e.a(2);case 2:return e.n=3,fetch("".concat(this.baseUrl).concat(this.baseUrl.endsWith("/")?"":"/","tx/").concat(t.id,"/commit"),{method:"POST",headers:{Authorization:this.authHeader,"Content-Type":"application/json",Accept:"application/json","neo4j-cluster-affinity":t.clusterAffinity||""},body:JSON.stringify({})});case 3:if((r=e.v).ok){e.n=5;break}return e.n=4,r.text();case 4:throw n=e.v,new Error("Neo4j Commit Error: ".concat(r.status," ").concat(r.statusText," - ").concat(n));case 5:return e.n=6,r.json();case 6:e.v,t.open=!1;case 7:return e.a(2)}},e,this)})),function(e){return n.apply(this,arguments)})}],t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,i,a}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function m(e,t,r){return(t=_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var l=n&&n.prototype instanceof s?n:s,c=Object.create(l.prototype);return g(c,"_invoke",function(r,n,i){var o,s,l,c=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,l=e,f.n=r,a}};function p(r,n){for(s=r,l=n,t=0;!d&&c&&!i&&t<u.length;t++){var i,o=u[t],p=f.p,h=o[2];r>3?(i=h===n)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((i=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<h&&(i=r<3||o[0]>n||n>h)&&(o[4]=r,o[5]=n,f.n=h,s=0))}if(i||r>1)return a;throw d=!0,n}return function(i,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,l=h;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),p(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:r.call(n,f))!==a)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(r,i,o),!0),c}var a={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(g(t={},n,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,g(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,g(d,"constructor",c),g(c,"constructor",l),l.displayName="GeneratorFunction",g(c,i,"GeneratorFunction"),g(d),g(d,i,"Generator"),g(d,n,function(){return this}),g(d,"toString",function(){return"[object Generator]"}),(y=function(){return{w:o,m:f}})()}function g(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}g=function(e,t,r,n){function o(t,r){g(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},g(e,t,r,n)}function b(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function v(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){b(o,n,i,a,s,"next",e)}function s(e){b(o,n,i,a,s,"throw",e)}a(void 0)})}}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function _(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}function E(e,t,r){return t=T(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,S()?Reflect.construct(t,r||[],T(e).constructor):t.apply(e,r))}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(S=function(){return!!e})()}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var A=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=E(this,t,[e])).config=e,r.connectionManager=new d(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),r=t,n=[{key:"initialize",value:(p=v(y().m(function e(){return y().w(function(e){for(;;)switch(e.n){case 0:this.dbtype="neo4j";case 1:return e.a(2)}},e,this)})),function(){return p.apply(this,arguments)})},{key:"close",value:(f=v(y().m(function e(){return y().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),function(){return f.apply(this,arguments)})},{key:"startTransaction",value:(u=v(y().m(function e(){return y().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.connectionManager.startTransaction();case 1:return e.a(2,e.v)}},e,this)})),function(){return u.apply(this,arguments)})},{key:"endTransaction",value:(c=v(y().m(function e(){var t,r=arguments;return y().w(function(e){for(;;)switch(e.n){case 0:if(null==(t=r.length>0&&void 0!==r[0]?r[0]:null)){e.n=1;break}return e.n=1,this.connectionManager.commitTransaction(t);case 1:return e.a(2)}},e,this)})),function(){return c.apply(this,arguments)})},{key:"executeInTransaction",value:(l=v(y().m(function e(t,r){var n;return y().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r(t);case 1:return n=e.v,e.n=2,this.connectionManager.commitTransaction(t);case 2:return e.a(2,n);case 3:throw e.p=3,e.v;case 4:return e.a(2)}},e,this,[[0,3]])})),function(e,t){return l.apply(this,arguments)})},{key:"executeRead",value:(s=v(y().m(function e(t,r){var n,i,o,a,s=arguments;return y().w(function(e){for(;;)switch(e.n){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:null,i=s.length>3&&void 0!==s[3]&&s[3],o=s.length>4&&void 0!==s[4]?s[4]:0,a=s.length>5&&void 0!==s[5]?s[5]:0,e.n=1,this.executeInternal(t,h(h({},r),{},{skip:o,limit:a}),n,i);case 1:return e.a(2,e.v)}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"executeWrite",value:(a=v(y().m(function e(t,r){var n,i=arguments;return y().w(function(e){for(;;)switch(e.n){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:null,e.n=1,this.executeInternal(t,r,n,!0);case 1:return e.a(2,e.v)}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"executeInternal",value:(o=v(y().m(function e(t,r,n,i){var o,a;return y().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!n||n.id){e.n=1;break}throw new Error("Invalid transaction information");case 1:return e.p=1,utils.debugLog("Executing Neo4j query:\n".concat(t)),e.n=2,this.connectionManager.executeQuery(t,r,n);case 2:o=e.v,e.n=4;break;case 3:throw e.p=3,e.v;case 4:if(a=this.normaliseData(o),!i){e.n=6;break}if(!Array.isArray(a)){e.n=5;break}if(!(a.length>0)){e.n=5;break}return e.a(2,a[0]);case 5:return e.a(2,a);case 6:if(!Array.isArray(a)){e.n=7;break}return e.a(2,a);case 7:if(null==a){e.n=8;break}return e.a(2,[a]);case 8:return e.a(2,[]);case 9:return e.a(2)}},e,this,[[1,3]])})),function(e,t,r,n){return o.apply(this,arguments)})},{key:"normaliseData",value:function(e){var t,r,n=this;return e.fields&&e.fields.length>0?(r=e.fields.map(function(e){var t=e.lastIndexOf(".");return-1===t?e:e.substring(t+1)}),e.values&&(t=0===e.values.length?null:1===e.values.length?this.normaliseRecord(e.values[0],r):e.values.map(function(e){return n.normaliseRecord(e,r)})),t):null}},{key:"normaliseRecord",value:function(e,t){var r,n={};for(r=0;r<e.length;r++)null==e[r]?n[t[r]]=null:this.isDate(e[r])?n[t[r]]=new Date(e[r]):n[t[r]]=e[r];return n}},{key:"isDate",value:function(e){return"string"==typeof e&&/^\d{4}-\d{2}-\d{2}.*$/.test(e)}}],n&&w(r.prototype,n),i&&w(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i,o,a,s,l,c,u,f,p}(n.M)},2831:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return l.default}});var n=f(r(3518)),i=f(r(4948)),o=f(r(5073)),a=f(r(7186)),s=f(r(4808)),l=f(r(7775)),c=f(r(7037)),u=f(r(9910)),d=f(r(6792));function f(e){return e&&e.__esModule?e:{default:e}}},2858:(e,t)=>{"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(n)};const n=new Uint8Array(16)},2861:(e,t,r)=>{var n=r(8287),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},3095:(e,t,r)=>{"use strict";const{ArrayPrototypePop:n,Promise:i}=r(4134),{isIterable:o,isNodeStream:a,isWebStream:s}=r(6115),{pipelineImpl:l}=r(7758),{finished:c}=r(6238);r(5506),e.exports={finished:c,pipeline:function(...e){return new i((t,r)=>{let i,c;const u=e[e.length-1];if(u&&"object"==typeof u&&!a(u)&&!o(u)&&!s(u)){const t=n(e);i=t.signal,c=t.end}l(e,(e,n)=>{e?r(e):t(n)},{signal:i,end:c})})}}},3141:(e,t,r)=>{"use strict";var n=r(2861).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=a(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if(i=a(t[n]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if(i=a(t[n]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},3203:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e}readResponse(e){if(null==e)throw new Error("Buffer is missing.");if(!(e instanceof n))throw new Error("Not an instance of Buffer.");if(e.length<1)throw new Error("Buffer is empty.");const t={status:{},result:{}};let r,i=e;const o=i[0];if(129!==o)throw new Error(`Unsupported version '${o}'.`);return i=i.slice(1),({v:t.requestId,len:r}=this.ioc.uuidSerializer.deserialize(i,!1,!0)),i=i.slice(r),({v:t.status.code,len:r}=this.ioc.intSerializer.deserialize(i,!1)),i=i.slice(r),({v:t.status.message,len:r}=this.ioc.stringSerializer.deserialize(i,!1,!0)),i=i.slice(r),({v:t.status.attributes,len:r}=this.ioc.mapSerializer.deserialize(i,!1)),i=i.slice(r),({v:t.result.meta,len:r}=this.ioc.mapSerializer.deserialize(i,!1)),i=i.slice(r),({v:t.result.data}=this.ioc.anySerializer.deserialize(i)),t}}},3320:()=>{function e(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,r)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var o={INIT_FAILED:["system","initializationFailed"],UNEXPECTED_ERROR:["system","unexpectedError"],NEO4J_ERROR:["network","neo4jError"],BATCH_LOAD_ERROR:["network","batchLoadError"],MEASURE_LOAD_ERROR:["application","measureLoadError"],MEASURE_SAVE_ERROR:["application","measureSaveError"],MEASURE_NOT_FOUND:["application","measureNotFound"],MEASURE_CLONE_ERROR:["application","measureCloneError"],MEASURE_EXPORT_ERROR:["application","measureExportError"],MEASURE_IMPORT_ERROR:["application","measureImportError"],MEASURE_ID_EXISTS:["application","measureIdExists"],JSON_PARSE_ERROR:["application","jsonParseError"],AUDIT_HISTORY_ERROR:["application","auditHistoryError"],CONFIG_REMOVE_ERROR:["application","configRemoveError"],CONFIG_ADD_ERROR:["application","configAddError"],NO_CHANGES_TO_SAVE:["application","noChangesToSave"],ID_GENERATION_MAX_ATTEMPTS_REACHED:["application","idGenerationMaxAttemptsReached"],MEASURE_ID_CHECK_ERROR:["application","measureIdCheckError"],SELECT_MEASURE_TO_CLONE:["selection","selectMeasureToClone"],SELECT_MEASURE_TO_EXPORT:["selection","selectMeasureToExport"],MEASURE_ID_REQUIRED:["validation","measureIdRequired"],NAME_REQUIRED:["validation","nameRequired"],DOMAIN_REQUIRED:["validation","domainRequired"],UNIT_REQUIRED:["validation","unitRequired"],CATEGORY_REQUIRED:["validation","categoryRequired"],TYPE_REQUIRED:["validation","typeRequired"],INPUT_METRICS_REQUIRED:["validation","inputMetricsRequired"],FORMULA_REQUIRED:["validation","formulaRequired"],CALCULATION_TYPE_REQUIRED:["validation","calculationTypeRequired"],TOOL_ID_REQUIRED:["validation","toolIdRequired"],INPUT_METRICS_FORMULA_MISMATCH:["validation","inputMetricsFormulaMismatch"],AREA_FUNCTION_REQUIRED:["validation","areaFunctionRequired"],MEASURE_ID_FIELD_EXISTS:["validation","measureIdFieldExists"],CONFIG_ENTRY_ID_EXISTS:["validation","configEntryIdExists"],CONFIG_ENTRY_ID_EXISTS_MODAL:["validation","configEntryIdExistsModal"],CONFIG_NO_LOCATIONS:["validation","configNoLocations"],CONFIG_LOCATION_DUPLICATE:["validation","configLocationDuplicate"],LOCATION_LOAD_ERROR:["validation","locationLoadError"],INVALID_MEASURE_ID_FORMAT:["validation","invalidMeasureIdFormat"],MEASURE_CREATION_FAILED:["validation","measureCreationFailed"],NO_AVAILABLE_LOCATIONS:["validation","noAvailableLocations"],IMPORT_MISSING_ID:["validation","measureIdRequired"],IMPORT_MISSING_NAME:["validation","nameRequired"],IMPORT_MISSING_TYPE:["validation","typeRequired"],IMPORT_MISSING_DOMAIN:["validation","domainRequired"],IMPORT_MISSING_UNIT:["validation","unitRequired"],IMPORT_MISSING_INPUT_METRICS:["validation","inputMetricsRequired"],IMPORT_MISSING_FORMULA:["validation","formulaRequired"],IMPORT_MISSING_CALCULATION_TYPE:["validation","calculationTypeRequired"],IMPORT_MISSING_TOOL_ID:["validation","toolIdRequired"],IMPORT_VALIDATION_FAILED:["application","measureImportError"],IMPORT_MISSING_REFERENCES:["validation","importMissingReferences"],IMPORT_NO_MEASURES:["validation","importNoMeasures"],BULK_IMPORT_FAILED:["application","bulkImportFailed"],IMPORT_MISSING_USER_CHOICES:["validation","importMissingUserChoices"]},a=function(){return t=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},i=null,a=[{key:"showError",value:function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var n=ErrorHandler.getError(e,t,r),i=n.message,o=n.severity;showError(i,o)}catch(e){var a=ErrorHandler.getError("system","unexpectedError").message;showError(a,"error")}})},{key:"showDirectError",value:function(e){showError(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error")}},{key:"handleValidationErrors",value:function(t){if(t&&0!==t.length){var n=t.map(function(t){try{if("object"===r(t)&&t.code){var n=e(o[t.code]||["validation",t.code],2),i=n[0],a=n[1];try{var s=ErrorHandler.getError(i,a).message;return t.params&&Object.entries(t.params).forEach(function(t){var r=e(t,2),n=r[0],i=r[1];s=Array.isArray(i)?s.replace("{".concat(n,"}"),i.join(", ")):s.replace("{".concat(n,"}"),i)}),s}catch(e){return"".concat(t.code,": ").concat(t.params?JSON.stringify(t.params):"")}}if("string"==typeof t){var l=e(o[t]||["validation",t],2),c=l[0],u=l[1];try{return ErrorHandler.getError(c,u).message}catch(e){return t}}return null}catch(e){return"string"==typeof t?t:t&&"object"===r(t)?JSON.stringify(t):"Unknown error"}}).filter(Boolean);if(n.length>0){var i=n.length>3?"".concat(n.slice(0,3).join("; "),"... and ").concat(n.length-3," more errors"):n.join("; ");showError(i),scrollToTop(".measure-editor")}}}}],i&&n(t.prototype,i),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,a}();window.MeasureErrorHandler=a,window.MeasureErrorCodes=o},3321:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BOOLEAN]=this}canBeUsedFor(e){return"boolean"==typeof e}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.BOOLEAN,1]):n.from([0]);const r=[];return t&&r.push(n.from([this.ioc.DataType.BOOLEAN,0])),r.push(n.from([e?1:0])),n.concat(r)}deserialize(e,t=!0){let r=0,i=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(r++,e!==this.ioc.DataType.BOOLEAN)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<1)throw new Error("unexpected {value} length");r+=1;let o=i.readUInt8();if(0!==o&&1!==o)throw new Error(`unexpected boolean byte=${o}`);return o=1===o,{v:o,len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},3335:(e,t,r)=>{"use strict";const n=r(1545).Traversal;class i{constructor(e,t={}){this.fqcn=e,this.configuration=t}apply(e){}}e.exports={TraversalStrategies:class{constructor(e){this.strategies=e?[...e.strategies]:[]}addStrategy(e){this.strategies.push(e)}removeStrategy(e){const t=this.strategies.findIndex(t=>t.fqcn===e.fqcn);if(-1!==t)return this.strategies.splice(t,1)[0]}applyStrategies(e){return this.strategies.reduce((t,r)=>t.then(()=>r.apply(e)),Promise.resolve())}},TraversalStrategy:i,ConnectiveStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.ConnectiveStrategy")}},ElementIdStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.ElementIdStrategy")}},HaltedTraverserStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.HaltedTraverserStrategy"),void 0!==e&&(this.configuration.haltedTraverserFactory=e)}},OptionsStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.OptionsStrategy",e)}},PartitionStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.PartitionStrategy",e)}},SeedStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.SeedStrategy",{seed:e.seed})}},SubgraphStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.SubgraphStrategy",e),this.configuration.vertices instanceof n&&(this.configuration.vertices=this.configuration.vertices.bytecode),this.configuration.edges instanceof n&&(this.configuration.edges=this.configuration.edges.bytecode),this.configuration.vertexProperties instanceof n&&(this.configuration.vertexProperties=this.configuration.vertexProperties.bytecode)}},VertexProgramStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.computer.traversal.strategy.decoration.VertexProgramStrategy",e)}},MatchAlgorithmStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.finalization.MatchAlgorithmStrategy"),void 0!==e&&(this.configuration.matchAlgorithm=e)}},AdjacentToIncidentStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.AdjacentToIncidentStrategy")}},FilterRankingStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.FilterRankingStrategy")}},IdentityRemovalStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.IdentityRemovalStrategy")}},IncidentToAdjacentStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.IncidentToAdjacentStrategy")}},InlineFilterStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.InlineFilterStrategy")}},LazyBarrierStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.LazyBarrierStrategy")}},MatchPredicateStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.MatchPredicateStrategy")}},OrderLimitStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.OrderLimitStrategy")}},PathProcessorStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.PathProcessorStrategy")}},PathRetractionStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.PathRetractionStrategy")}},ProductiveByStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.ProductiveByStrategy",e)}},CountStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.CountStrategy")}},RepeatUnrollStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.RepeatUnrollStrategy")}},GraphFilterStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.GraphFilterStrategy")}},EarlyLimitStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.EarlyLimitStrategy")}},EdgeLabelVerificationStrategy:class extends i{constructor(e=!1,t=!1){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.verification.EdgeLabelVerificationStrategy",{logWarnings:e,throwException:t})}},LambdaRestrictionStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.verification.LambdaRestrictionStrategy")}},ReadOnlyStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.verification.ReadOnlyStrategy")}},ReservedKeysVerificationStrategy:class extends i{constructor(e=!1,t=!1,r=["id","label"]){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.verification.ReservedKeysVerificationStrategy",{logWarnings:e,throwException:t,keys:r})}}}},3370:(e,t,r)=>{"use strict";const{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:o,ObjectSetPrototypeOf:a}=r(4134);e.exports=c;const s=r(7576),l=r(8584);a(c.prototype,s.prototype),a(c,s);{const e=o(l.prototype);for(let t=0;t<e.length;t++){const r=e[t];c.prototype[r]||(c.prototype[r]=l.prototype[r])}}function c(e){if(!(this instanceof c))return new c(e);s.call(this,e),l.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let u,d;function f(){return void 0===u&&(u={}),u}n(c.prototype,{writable:{__proto__:null,...i(l.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(l.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(l.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(l.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(l.prototype,"writableLength")},writableFinished:{__proto__:null,...i(l.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(l.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(l.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(l.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),c.fromWeb=function(e,t){return f().newStreamDuplexFromReadableWritablePair(e,t)},c.toWeb=function(e){return f().newReadableWritablePairFromDuplex(e)},c.from=function(e){return d||(d=r(6706)),d(e,"body")}},3469:(e,t,r)=>{"use strict";const n=r(1545),i=r(5332),o=r(3335),a=r(163),s=r(9449),l=r(5737),c=r(9032),u=r(2029),d=r(1104),f=r(7240),p=r(7286),h=r(7545),m=r(74),y=r(2468),g=r(1893),b=r(6665);e.exports={driver:{RemoteConnection:l.RemoteConnection,RemoteStrategy:l.RemoteStrategy,RemoteTraversal:l.RemoteTraversal,ResponseError:p,DriverRemoteConnection:f,Client:h,ResultSet:m,auth:{Authenticator:y,PlainTextSaslAuthenticator:g}},process:{Bytecode:c,EnumValue:n.EnumValue,P:n.P,TextP:n.TextP,Traversal:n.Traversal,TraversalSideEffects:n.TraversalSideEffects,TraversalStrategies:o.TraversalStrategies,TraversalStrategy:o.TraversalStrategy,Traverser:n.Traverser,barrier:n.barrier,cardinality:n.cardinality,column:n.column,direction:n.direction,dt:n.dt,merge:n.merge,operator:n.operator,order:n.order,pick:n.pick,pop:n.pop,scope:n.scope,t:n.t,GraphTraversal:i.GraphTraversal,GraphTraversalSource:i.GraphTraversalSource,statics:i.statics,Translator:u,traversal:b.traversal,AnonymousTraversalSource:b,withOptions:n.withOptions},structure:{io:s,Edge:a.Edge,Graph:a.Graph,Path:a.Path,Property:a.Property,Vertex:a.Vertex,VertexProperty:a.VertexProperty,toLong:d.toLong}}},3518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(2858))&&n.__esModule?n:{default:n},o=r(9910);let a,s,l=0,c=0;var u=function(e,t,r){let n=t&&r||0;const u=t||new Array(16);let d=(e=e||{}).node||a,f=void 0!==e.clockseq?e.clockseq:s;if(null==d||null==f){const t=e.random||(e.rng||i.default)();null==d&&(d=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==f&&(f=s=16383&(t[6]<<8|t[7]))}let p=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:c+1;const m=p-l+(h-c)/1e4;if(m<0&&void 0===e.clockseq&&(f=f+1&16383),(m<0||p>l)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=p,c=h,s=f,p+=122192928e5;const y=(1e4*(268435455&p)+h)%4294967296;u[n++]=y>>>24&255,u[n++]=y>>>16&255,u[n++]=y>>>8&255,u[n++]=255&y;const g=p/4294967296*1e4&268435455;u[n++]=g>>>8&255,u[n++]=255&g,u[n++]=g>>>24&15|16,u[n++]=g>>>16&255,u[n++]=f>>>8|128,u[n++]=255&f;for(let e=0;e<6;++e)u[n+e]=d[e];return t||(0,o.unsafeStringify)(u)};t.default=u},3676:e=>{var t;function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i={"en-US":{name:"English (US)",nativeName:"English (US)",flag:"",direction:"ltr",numberFormat:{decimal:".",group:",",currency:"USD",currencyDisplay:"$"},timeFormat:{system:"12h",hour12:!0,short:"h:mm A",medium:"h:mm:ss A",long:"h:mm:ss A z",meridiem:{ante:"AM",post:"PM"}},dateFormat:{short:"MM/DD/YY",medium:"MMM D, YYYY",long:"MMMM D, YYYY"},dateTimeFormat:{short:{pattern:"{date} {time}"},medium:{pattern:"{date} {time}"},long:{pattern:"{date} {time}"}},calendar:{firstDayOfWeek:0,weekendDays:[0,6],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},measurement:"imperial",translations:(t={measures:{text:"Measures"},newMeasure:{text:"New Measure"},saveMeasure:{text:"Save Measure"},cloneMeasure:{text:"Clone Measure"},importMeasure:{text:"Import Measure"},exportMeasure:{text:"Export Measure"},exportSelectedMeasures:{text:"Export Selected Measures"},existingMeasuresDetected:{text:"Existing Measures Detected"},existingMeasuresDetectedText:{text:"The following measures already exist in the database. Please choose an action for each:"},keepCurrentVersion:{text:"Keep current version"},overwriteWithImported:{text:"Overwrite with imported version"},setAllOverwrite:{text:"Set all to overwrite"},setAllKeep:{text:"Set all to keep"},overwriteWarning:{text:"Warning: Overwriting existing measures is irreversible."},cancelImport:{text:"Cancel Import"},continueImport:{text:"Proceed with Import"},measureName:{text:"Name"},measureId:{text:"ID"},conflict:{text:"Conflict"},action:{text:"Action"},idAlreadyExists:{text:"ID already exists"},nameAlreadyExists:{text:"Name already exists"},markAll:{text:"Mark all"},cancel:{text:"Cancel"},cloneOf:{text:"Clone of"},cloneCounter:{text:"Clone {counter} of"},importOf:{text:"Import of"},closeErrorMessage:{text:"Close error message"},importCancelledByUser:{text:"Import cancelled by user"},importCancelled:{text:"Import cancelled"},notAvailable:{text:"N/A"},searchMeasures:{text:"Search measures"},clearSearch:{text:"Clear search"},domain:{text:"Domain"},type:{text:"Type"},status:{text:"Status"},active:{text:"Active"},inactive:{text:"Inactive"},by:{text:"by"},base:{text:"Base"},calculated:{text:"Calculated"},tool:{text:"Tool"},classification:{text:"Classification"},selectType:{text:"Select Type"},selectDomain:{text:"Select Domain"},equipmentMonitoring:{text:"Equipment Monitoring"},electricalPower:{text:"Electrical Power"},processControl:{text:"Process Control"},safetyMetrics:{text:"Safety Metrics"},category:{text:"Category"},safetyCritical:{text:"Safety Critical"}},n(n(n(n(n(n(n(n(n(n(t,"measureId",{text:"Measure ID"}),"id",{text:"ID"}),"name",{text:"Name"}),"description",{text:"Description"}),"version",{text:"Version"}),"baseProperties",{text:"Base Measure Properties"}),"dataCollectionSettings",{text:"Data Collection Settings"}),"measurementType",{text:"Measurement Type"}),"externalData",{text:"External Data"}),"sensorReading",{text:"Sensor Reading"}),n(n(n(n(n(n(n(n(n(n(t,"statusIndicator",{text:"Status Indicator"}),"samplingRate",{text:"Sampling Rate"}),"realTime",{text:"Real-time"}),"everyMinute",{text:"Every minute"}),"every5Minutes",{text:"Every 5 minutes"}),"every15Minutes",{text:"Every 15 minutes"}),"hourly",{text:"Hourly"}),"daily",{text:"Daily"}),"weekly",{text:"Weekly"}),"monthly",{text:"Monthly"}),n(n(n(n(n(n(n(n(n(n(t,"unitsAndDisplay",{text:"Units and Display"}),"unit",{text:"Unit"}),"precision",{text:"Precision"}),"validationRules",{text:"Validation Rules"}),"minValue",{text:"Min Value"}),"maxValue",{text:"Max Value"}),"alarmThresholds",{text:"Alarm Thresholds"}),"criticalLow",{text:"Critical Low"}),"warningLow",{text:"Warning Low"}),"warningHigh",{text:"Warning High"}),n(n(n(n(n(n(n(n(n(n(t,"criticalHigh",{text:"Critical High"}),"calculatedProperties",{text:"Calculated Measure Properties"}),"calculationConfiguration",{text:"Calculation Configuration"}),"calculationType",{text:"Calculation Type"}),"difference",{text:"Difference"}),"ratio",{text:"Ratio"}),"sum",{text:"Sum"}),"average",{text:"Average"}),"movingAverage",{text:"Moving Average"}),"custom",{text:"Custom"}),n(n(n(n(n(n(n(n(n(n(t,"normalizationMethod",{text:"Normalization Method"}),"inverseRatio",{text:"Inverse Ratio"}),"minMaxScaling",{text:"Min-Max Scaling"}),"percentage",{text:"Percentage"}),"weightedAverage",{text:"Weighted Average"}),"standardization",{text:"Standardization"}),"minMax",{text:"Min-Max"}),"none",{text:"None"}),"updateFrequency",{text:"Update Frequency"}),"aggregationWindow",{text:"Aggregation Window"}),n(n(n(n(n(n(n(n(n(n(t,"formulaDefinition",{text:"Formula Definition"}),"inputMetrics",{text:"Input Metrics"}),"formula",{text:"Formula"}),"toolProperties",{text:"Tool Measure Properties"}),"toolConfiguration",{text:"Tool Configuration"}),"toolId",{text:"Tool ID"}),"confidenceThreshold",{text:"Confidence Threshold"}),"documentation",{text:"Documentation"}),"formulaDocumentation",{text:"Formula Documentation"}),"outputMapping",{text:"Output Mapping"}),n(n(n(n(n(n(n(n(n(n(t,"toolParameters",{text:"Tool Parameters"}),"editMode",{text:"Editing Measure"}),"newMeasureMode",{text:"Creating New Measure"}),"cloneMode",{text:"Cloning Measure"}),"importMode",{text:"Importing Measure"}),"author",{text:"Author"}),"created",{text:"Created"}),"lastModified",{text:"Last Modified"}),"auditHistory",{text:"Audit History"}),"viewHistory",{text:"View History"}),n(n(n(n(n(n(n(n(n(n(t,"noAuditHistory",{text:"No audit history available."}),"unknown",{text:"Unknown"}),"unspecified",{text:"Unspecified"}),"confirm",{text:"Confirm"}),"confirmDiscardChanges",{text:"You have unsaved changes. Are you sure you want to discard them?"}),"discardChanges",{text:"Discard Changes"}),"area",{text:"Area"}),"function",{text:"Function"}),"generateId",{text:"Generate ID"}),"format",{text:"Format"}),n(n(n(n(n(n(n(n(n(n(t,"formatValue",{text:"AREA-FUNCTION-MEASURE-VERSION"}),"viewNamingConvention",{text:"View Naming Conventions"}),"measureIdGenerated",{text:"Measure ID generated successfully"}),"newMeasureIdGenerated",{text:"A new measure ID has been generated to avoid conflicts."}),"details",{text:"Details"}),"relatedMeasures",{text:"Related Measures"}),"addRelatedMeasure",{text:"Add Related Measure"}),"removeRelatedMeasure",{text:"Remove Related Measure"}),"selectMeasure",{text:"Select a measure"}),"configuration",{text:"Configuration"}),n(n(n(n(n(n(n(n(n(n(t,"addConfiguration",{text:"Add Configuration"}),"removeConfiguration",{text:"Remove Configuration"}),"confirmRemoveConfiguration",{text:"Are you sure you want to remove this configuration? This action cannot be undone."}),"noConfigurations",{text:"No configurations"}),"newConfiguration",{text:"New Configuration"}),"noAvailableLocations",{text:"No available locations (all locations already have configurations)"}),"entryId",{text:"Entry ID"}),"site",{text:"Site"}),"location",{text:"Location"}),"selectLocation",{text:"Select Location"}),n(n(n(n(n(n(n(n(n(n(t,"targetValue",{text:"Target Value"}),"alarmThresholds",{text:"Alarm Thresholds"}),"jsonFormatHint",{text:"JSON format for threshold values"}),"remove",{text:"Remove"}),"basicInformation",{text:"Basic Information"}),"measureLoadSuccess",{text:"Measure loaded successfully: {name}"}),"measureCreateSuccess",{text:"Measure created successfully"}),"measureUpdateSuccess",{text:"Measure updated successfully"}),"measureCloneSuccess",{text:"Measure cloned. Make necessary changes and save."}),"measureExportSuccess",{text:"Measure exported successfully"}),n(n(n(n(n(n(n(n(n(n(t,"measuresExportSuccess",{text:"Measures exported successfully"}),"measureImportSuccess",{text:"Measure imported successfully. Review and save."}),"multipleMeasuresImportSuccess",{text:"{count} measures imported successfully"}),"configurationRemoveSuccess",{text:"Configuration removed successfully"}),"configurationAddSuccess",{text:"Configuration added successfully"}),"newMeasureNameGenerated",{text:"A new measure name has been generated to avoid conflicts."}),"newMeasureIdGenerated",{text:"A new Measure ID was generated as the original one already exists"}),"createNewInstructions",{text:"Enter measure details and save when ready."}),"importWithNewIdAndName",{text:"Import with new ID and name"}),"setAllImportNew",{text:"Set all to import as new"}),n(n(n(n(n(n(t,"importCounter",{text:"Import {counter} of"}),"measureImportLoadedForEdit",{text:"Measure imported and loaded for editing. Review changes and save."}),"measureImportLoadedForSave",{text:"Measure imported with new ID and name. Review and save when ready."}),"measureImportLoadedForReview",{text:"Measure imported and loaded for review. Save when ready."}),"bulkImportPartialSuccess",{text:"Import completed: {successful} of {total} measures imported successfully. {failed} measures failed."}),"bulkImportConflictsResolved",{text:"Bulk import conflicts resolved and processed successfully."})),errors:{system:{unexpectedError:{text:"An unexpected error occurred. Please try again.",severity:"error"},initializationFailed:{text:"Failed to initialize application. Please refresh the page.",severity:"error"}},network:{neo4jError:{text:"Database error occurred. Please try again.",severity:"error"},batchLoadError:{text:"Error loading measures. Please try again.",severity:"error"}},application:{measureLoadError:{text:"Error loading measure. Please try again.",severity:"error"},measureSaveError:{text:"Error saving measure. Please try again.",severity:"error"},measureNotFound:{text:"Measure not found.",severity:"error"},measureCloneError:{text:"Error cloning measure. Please try again.",severity:"error"},measureExportError:{text:"Error exporting measure. Please try again.",severity:"error"},measureImportError:{text:"Error importing measure. Please try again.",severity:"error"},measureIdExists:{text:"Measure ID {id} already exists. Please use a different ID.",severity:"error"},jsonParseError:{text:"Error parsing JSON file. Please check the format.",severity:"error"},auditHistoryError:{text:"Error loading audit history. Please try again.",severity:"error"},configRemoveError:{text:"Error removing configuration. Please try again.",severity:"error"},configAddError:{text:"Error adding configuration. Please try again.",severity:"error"},noChangesToSave:{text:"No changes to save.",severity:"warning"},idGenerationMaxAttemptsReached:{text:"Maximum attempts reached for ID generation. Please try with a different area/function.",severity:"error"},measureIdCheckError:{text:"Error checking/generating measure ID. Please try again.",severity:"error"},bulkImportFailed:{text:"Bulk import completed with errors: {failed} of {total} measures failed to import.",severity:"warning"}},validation:{measureIdRequired:{text:"Measure ID is required",severity:"error"},nameRequired:{text:"Name is required",severity:"error"},domainRequired:{text:"Domain is required",severity:"error"},unitRequired:{text:"Unit is required",severity:"error"},categoryRequired:{text:"Category is required",severity:"error"},typeRequired:{text:"Type is required",severity:"error"},inputMetricsRequired:{text:"Input metrics are required for calculated measures",severity:"error"},formulaRequired:{text:"Formula is required for calculated measures",severity:"error"},calculationTypeRequired:{text:"Calculation type is required for calculated measures",severity:"error"},toolIdRequired:{text:"Tool ID is required for tool measures",severity:"error"},areaFunctionRequired:{text:"Area and Function are required for ID generation",severity:"error"},measureIdFieldExists:{text:"Measure ID '{measure_id}' already exists. Please use a different Measure ID.",severity:"error"},configEntryIdExists:{text:"Entry ID '{entry_id}' already exists. Please use a different Entry ID.",severity:"error"},configEntryIdExistsModal:{text:"Entry ID '{entry_id}' already exists. Please use a different Entry ID.",severity:"error"},inputMetricsFormulaMismatch:{text:"Input metrics and formula do not match",severity:"error"},configNoLocations:{text:"All locations already have configurations for this measure",severity:"warning"},configLocationDuplicate:{text:"This location already has a configuration",severity:"error"},locationLoadError:{text:"Error loading locations. Please try again.",severity:"error"},invalidMeasureIdFormat:{text:"Invalid measure ID format",severity:"error"},measureCreationFailed:{text:"Failed to create new measure",severity:"error"},noAvailableLocations:{text:"No available locations (all locations already have configurations)",severity:"warning"},importMissingReferences:{text:"Import contains measures with missing referenced measures",severity:"error"},importNoMeasures:{text:"No measures were imported",severity:"warning"},importMissingUserChoices:{text:"Missing user choices for import conflict resolution",severity:"error"}},selection:{selectMeasureToClone:{text:"Please select a measure to clone",severity:"warning"},selectMeasureToExport:{text:"Please select a measure to export",severity:"warning"}}}}};e.exports&&(e.exports=i),window.localeConfigs=i},3920:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),i=r(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.PROPERTY]=this}canBeUsedFor(e){return e instanceof i.Property}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.PROPERTY,1]):n.concat([this.ioc.stringSerializer.serialize("",!1),this.ioc.unspecifiedNullSerializer.serialize(null),this.ioc.unspecifiedNullSerializer.serialize(null)]);const r=[];return t&&r.push(n.from([this.ioc.DataType.PROPERTY,0])),r.push(this.ioc.stringSerializer.serialize(e.key,!1)),r.push(this.ioc.anySerializer.serialize(e.value)),r.push(this.ioc.unspecifiedNullSerializer.serialize(null)),n.concat(r)}deserialize(e,t=!0){let r=0,o=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(r++,e!==this.ioc.DataType.PROPERTY)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,l,c,u;try{({v:a,len:s}=this.ioc.stringSerializer.deserialize(o,!1)),r+=s}catch(e){throw e.message="{key}: "+e.message,e}o=o.slice(s);try{({v:l,len:c}=this.ioc.anySerializer.deserialize(o)),r+=c}catch(e){throw e.message="{value}: "+e.message,e}o=o.slice(c);try{({len:u}=this.ioc.unspecifiedNullSerializer.deserialize(o)),r+=u}catch(e){throw e.message="{parent}: "+e.message,e}o=o.slice(u);return{v:new i.Property(a,l),len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},3933:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),i=r(1545);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.P]=this}canBeUsedFor(e){return e instanceof i.P}serialize(e,t=!0){if(null==e){if(t)return n.from([this.ioc.DataType.P,1]);const e=[0,0,0,0],r=[0,0,0,0];return n.from([...e,...r])}const r=[];let i;return t&&r.push(n.from([this.ioc.DataType.P,0])),r.push(this.ioc.stringSerializer.serialize(e.operator,!1)),i=void 0===e.other||null===e.other?Array.isArray(e.value)?e.value:[e.value]:[e.value,e.other],r.push(this.ioc.listSerializer.serialize(i,!1)),n.concat(r)}deserialize(e,t=!0){let r=0,o=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(r++,e!==this.ioc.DataType.P)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,l,c,u;try{({v:a,len:s}=this.ioc.stringSerializer.deserialize(o,!1)),r+=s}catch(e){throw e.message="{name}: "+e.message,e}o=o.slice(s);try{({v:l,len:c}=this.ioc.listSerializer.deserialize(o,!1)),r+=c}catch(e){throw e.message="{values}: "+e.message,e}if(o=o.slice(c),l.length<1)return{v:new i.P(""),len:r};const d=i.P[a];return u="function"==typeof d?d(...l):new i.P(a,...l),{v:u,len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},4074:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),i=r(228),o=r(9198),a=r(1104),{DeferredPromise:s}=a,l=r(9449),{graphBinaryReader:c,graphBinaryWriter:u}=r(1421),d=r(74),f=r(7286),p=204,h=206,m=407,y="application/vnd.gremlin-v2.0+json",g="application/vnd.graphbinary-v1.0",b="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}";e.exports=class extends i{constructor(e,t){super(),this.url=e,this.options=t=t||{},this.mimeType=t.mimeType||"application/vnd.gremlin-v3.0+json",this._responseHandlers={},this._reader=t.reader||this.#e(this.mimeType),this._writer=t.writer||this.#t(this.mimeType),this._openPromise=null,this._openCallback=null,this._closePromise=null,this._closeCallback=null,this._header=String.fromCharCode(this.mimeType.length)+this.mimeType,this._header_buf=n.from(this._header),this.isOpen=!1,this.traversalSource=t.traversalSource||"g",this._authenticator=t.authenticator,this._enableUserAgentOnConnect=!1!==t.enableUserAgentOnConnect,this._enableCompression=this.options.enableCompression||!1}async open(){if(this.isOpen)return;if(this._openPromise)return this._openPromise;this._openPromise=s(),this.emit("log","ws open");let e=this.options.headers;if(this._enableUserAgentOnConnect){e||(e=[]);void 0!==await a.getUserAgent()&&(e[a.getUserAgentHeader()]=await a.getUserAgent())}const t=new Set(["headers","ca","cert","pfx","rejectUnauthorized","agent","perMessageDeflate"]),n=!Object.entries(this.options).some(([e,r])=>t.has(e)&&![null,void 0].includes(r))&&globalThis.WebSocket,i=n||(await r.e(591).then(r.t.bind(r,1591,23))).default;return this._ws=new i(this.url,n?void 0:{headers:e,ca:this.options.ca,cert:this.options.cert,pfx:this.options.pfx,rejectUnauthorized:this.options.rejectUnauthorized,agent:this.options.agent,perMessageDeflate:this._enableCompression}),"binaryType"in this._ws&&(this._ws.binaryType="arraybuffer"),this._ws.addEventListener("open",this.#r),this._ws.addEventListener("error",this.#n),this._ws.on("unexpected-response",this.#i),this._ws.addEventListener("message",this.#o),this._ws.addEventListener("close",this.#a),await this._openPromise}submit(e,t,r,i){const o=(i||a.getUuid()).toLowerCase();if(!o.match(b))throw new Error('Provided requestId "'+o+'" is not a valid UUID.');return this.open().then(()=>new Promise((i,s)=>{"authentication"!==t&&(this._responseHandlers[o]={callback:(e,t)=>e?s(e):i(t),result:null});const l={requestId:o,op:t||"bytecode",processor:e||"eval"===t?e:"traversal",args:r||{}},c=this._writer.writeRequest(l),u=a.toArrayBuffer(n.concat([this._header_buf,c]));this._ws.send(u)}))}stream(e,t,r,i){const s=(i||a.getUuid()).toLowerCase();if(!s.match(b))throw new Error('Provided requestId "'+s+'" is not a valid UUID.');const l=new o.Readable({objectMode:!0,read(){}});return this._responseHandlers[s]={callback:e=>e?l.destroy(e):l.push(null),result:l},this.open().then(()=>{const i={requestId:s,op:t||"bytecode",processor:e||"eval"===t?e:"traversal",args:r||{}},o=this._writer.writeRequest(i),l=a.toArrayBuffer(n.concat([this._header_buf,o]));this._ws.send(l)}).catch(e=>l.destroy(e)),l}#e(e){return e===g?c:e===y?new l.GraphSON2Reader:new l.GraphSONReader}#t(e){return e===g?u:e===y?new l.GraphSON2Writer:new l.GraphSONWriter}#r=()=>{this._openPromise.resolve(),this.isOpen=!0};#i=async(e,t)=>{const r=await new Promise((e,r)=>{const i=[];t.on("data",e=>{i.push(e instanceof n?e:n.from(e))}),t.on("end",()=>{e(i.length?n.concat(i):null)}),t.on("error",r)}),i=`Unexpected server response code ${t.statusCode}`,o=r?`${i} with body:\n${r.toString()}`:i,a=new Error(o);this.#n({error:a,message:o,type:"unexpected-response",target:this._ws})};#n=({error:e})=>{this._openPromise.reject(e),this.emit("log",`ws error ${e}`),this.#s(e),this.emit("socketError",e)};#a=({code:e,message:t})=>{this.emit("log",`ws close code=${e} message=${t}`),this.#s(),this._closeCallback&&this._closeCallback(),this.emit("close",e,t)};#o=({data:e})=>{const t=e instanceof ArrayBuffer?n.from(e):e,r=this._reader.readResponse(t);if(null===r.requestId||void 0===r.requestId)return void Object.keys(this._responseHandlers).forEach(e=>{const t=this._responseHandlers[e];return this.#l(e),void 0!==r.status&&r.status.message?t.callback(new f(`Server error (no request information): ${r.status.message} (${r.status.code})`,r.status)):t.callback(new f(`Server error (no request information): ${JSON.stringify(r)}`,r.status))});r.requestId=r.requestId.toLowerCase();const i=this._responseHandlers[r.requestId];if(!i)return;if(r.status.code===m&&this._authenticator)return void this._authenticator.evaluateChallenge(r.result.data).then(e=>this.submit(void 0,"authentication",e,r.requestId)).catch(i.callback);if(r.status.code>=400)return this.#l(r.requestId),i.callback(new f(`Server error: ${r.status.message} (${r.status.code})`,r.status));const s=i.result instanceof o.Readable;switch(r.status.code){case p:return this.#l(r.requestId),s?(i.result.push(new d(a.emptyArray,r.status.attributes)),i.callback(null)):i.callback(null,new d(a.emptyArray,r.status.attributes));case h:if(s){i.result.push(new d(r.result.data,r.status.attributes));break}i.result=i.result||[],i.result.push.apply(i.result,r.result.data);break;default:return s?(i.result.push(new d(r.result.data,r.status.attributes)),i.callback(null)):(i.result?i.result.push.apply(i.result,r.result.data):i.result=r.result.data,this.#l(r.requestId),i.callback(null,new d(i.result,r.status.attributes)))}};#s(e){Object.keys(this._responseHandlers).forEach(t=>{const r=this._responseHandlers[t];if(r.result instanceof o.Readable)r.callback(null);else{const t=e||new Error("Connection has been closed.");r.callback(t)}}),this._ws.removeEventListener("open",this.#r),this._ws.removeEventListener("error",this.#n),this._ws.off("unexpected-response",this.#i),this._ws.removeEventListener("message",this.#o),this._ws.removeEventListener("close",this.#a),this._openPromise=null,this._closePromise=null,this.isOpen=!1}#l(e){delete this._responseHandlers[e]}close(){return!1===this.isOpen?Promise.resolve():(this._closePromise||(this._closePromise=new Promise(e=>{this._closeCallback=e,this._ws.close()})),this._closePromise)}}},4134:e=>{"use strict";class t extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:t,ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Boolean,Uint8Array}},4147:(e,t,r)=>{"use strict";const{SymbolDispose:n}=r(4134),{AbortError:i,codes:o}=r(6371),{isNodeStream:a,isWebStream:s,kControllerErrorFunction:l}=r(6115),c=r(6238),{ERR_INVALID_ARG_TYPE:u}=o;let d;e.exports.addAbortSignal=function(t,r){if(((e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new u(t,"AbortSignal",e)})(t,"signal"),!a(r)&&!s(r))throw new u("stream",["ReadableStream","WritableStream","Stream"],r);return e.exports.addAbortSignalNoValidate(t,r)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;const o=a(t)?()=>{t.destroy(new i(void 0,{cause:e.reason}))}:()=>{t[l](new i(void 0,{cause:e.reason}))};if(e.aborted)o();else{d=d||r(7760).addAbortListener;const i=d(e,o);c(t,i[n])}return t}},4194:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.UUID]=this}canBeUsedFor(e){}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.UUID,1]):n.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);const r=String(e).replace(/^urn:uuid:/,"").replace(/[{}-]/g,""),i=[];t&&i.push(n.from([this.ioc.DataType.UUID,0]));const o=n.alloc(16,0);for(let e=0;e<16&&2*e<r.length;e++)o[e]=parseInt(r.slice(2*e,2*e+2),16);return i.push(o),n.concat(i)}deserialize(e,t=!0,r=!1){let i=0,o=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(i++,e!==this.ioc.DataType.UUID)throw new Error("unexpected {type_code}");o=o.slice(1)}if(t||r){if(o.length<1)throw new Error("{value_flag} is missing");const e=o.readUInt8();if(i++,1===e)return{v:null,len:i};if(0!==e)throw new Error("unexpected {value_flag}");o=o.slice(1)}if(o.length<16)throw new Error("unexpected {value} length");i+=16;return{v:o.slice(0,4).toString("hex")+"-"+o.slice(4,6).toString("hex")+"-"+o.slice(6,8).toString("hex")+"-"+o.slice(8,10).toString("hex")+"-"+o.slice(10,16).toString("hex"),len:i}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},4253:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),i=r(1545);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.TRAVERSER]=this}canBeUsedFor(e){return e instanceof i.Traverser}serialize(e,t=!0){if(null==e){if(t)return n.from([this.ioc.DataType.TRAVERSER,1]);const e=[0,0,0,0,0,0,0,1],r=[254,1];return n.from([...e,...r])}const r=[];return t&&r.push(n.from([this.ioc.DataType.TRAVERSER,0])),r.push(this.ioc.longSerializer.serialize(e.bulk,!1)),r.push(this.ioc.anySerializer.serialize(e.object)),n.concat(r)}deserialize(e,t=!0){let r=0,o=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(r++,e!==this.ioc.DataType.TRAVERSER)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,l,c;try{({v:a,len:s}=this.ioc.longSerializer.deserialize(o,!1)),r+=s}catch(e){throw e.message="{bulk}: "+e.message,e}if(a<0)throw new Error("{bulk} is less than zero");o=o.slice(s);try{({v:l,len:c}=this.ioc.anySerializer.deserialize(o)),r+=c}catch(e){throw e.message="{value}: "+e.message,e}o=o.slice(c);return{v:new i.Traverser(l,a),len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},4259:(e,t,r)=>{"use strict";const{ArrayIsArray:n,ObjectSetPrototypeOf:i}=r(4134),{EventEmitter:o}=r(7007);function a(e){o.call(this,e)}function s(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?n(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}i(a.prototype,o.prototype),i(a,o),a.prototype.pipe=function(e,t){const r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",l),r.on("close",c));let a=!1;function l(){a||(a=!0,e.end())}function c(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){d(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function d(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",l),r.removeListener("close",c),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",d),r.removeListener("close",d),e.removeListener("close",d)}return s(r,"error",u),s(e,"error",u),r.on("end",d),r.on("close",d),e.on("close",d),e.emit("pipe",r),e},e.exports={Stream:a,prependListener:s}},4687:e=>{"use strict";e.exports=class{constructor(e){this.ioc=e}canBeUsedFor(e){return!(!Number.isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY)||("number"==typeof e||"bigint"==typeof e)}serialize(e,t=!0){return"number"==typeof e?Number.isNaN(e)||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY||!Number.isInteger(e)?this.ioc.doubleSerializer.serialize(e,t):e>=-2147483648&&e<=2147483647?this.ioc.intSerializer.serialize(e,t):this.ioc.longSerializer.serialize(e,t):"bigint"==typeof e?this.ioc.bigIntegerSerializer.serialize(e,t):void 0}}},4808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},4948:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(9025)),i=o(r(2311));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v3",48,i.default);t.default=a},4957:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BIGINTEGER]=this}canBeUsedFor(e){return"bigint"==typeof e}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.BIGINTEGER,1]):n.from([0,0,0,1,0]);const r=[];let i;if(t&&r.push(n.from([this.ioc.DataType.BIGINTEGER,0])),e>=0){let t=e.toString(16);t.length%2!=0&&(t="0"+t),Number.parseInt(t[0],16)>7&&(t="00"+t),i=n.from(t,"hex")}else{let t=(-e).toString(16);const r=(t.length+t.length%2)/2;let o=BigInt(r)*BigInt(8);e<-(BigInt(2)**(o-BigInt(1)))&&(o+=BigInt(8));t=(BigInt(2)**o+e).toString(16),t.length%2!=0&&(t="0"+t),i=n.from(t,"hex")}return r.push(this.ioc.intSerializer.serialize(i.length,!1)),r.push(i),n.concat(r)}deserialize(e,t=!0){let r=0,i=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(r++,e!==this.ioc.DataType.BIGINTEGER)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let o,a;try{({v:o,len:a}=this.ioc.intSerializer.deserialize(i,!1)),r+=a}catch(e){throw e.message="{length}: "+e.message,e}if(o<1)throw new Error(`{length}=${o} is less than one`);i=i.slice(a),r+=o,i=i.slice(0,o);let s=BigInt(`0x${i.toString("hex")}`);return!(128&~i[0])&&(s=BigInt.asIntN(8*o,s)),{v:s,len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},5073:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(6140)),i=a(r(2858)),o=r(9910);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const a=(e=e||{}).random||(e.rng||i.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=a[e];return t}return(0,o.unsafeStringify)(a)};t.default=s},5094:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),i=r(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.PATH]=this}canBeUsedFor(e){return e instanceof i.Path}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.PATH,1]):n.concat([this.ioc.listSerializer.serialize([]),this.ioc.listSerializer.serialize([])]);const r=[];return t&&r.push(n.from([this.ioc.DataType.PATH,0])),r.push(this.ioc.listSerializer.serialize(e.labels)),r.push(this.ioc.listSerializer.serialize(e.objects)),n.concat(r)}deserialize(e,t=!0){let r=0,o=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(r++,e!==this.ioc.DataType.PATH)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,l,c;try{({v:a,len:s}=this.ioc.listSerializer.deserialize(o)),r+=s}catch(e){throw e.message="{labels}: "+e.message,e}o=o.slice(s);try{({v:l,len:c}=this.ioc.listSerializer.deserialize(o)),r+=c}catch(e){throw e.message="{objects}: "+e.message,e}o=o.slice(c);return{v:new i.Path(a,l),len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},5118:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function s(r,n,o,a){var s=n&&n.prototype instanceof c?n:c,u=Object.create(s.prototype);return i(u,"_invoke",function(r,n,i){var o,a,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,a=0,s=e,f.n=r,l}};function p(r,n){for(a=r,s=n,t=0;!d&&c&&!i&&t<u.length;t++){var i,o=u[t],p=f.p,h=o[2];r>3?(i=h===n)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=p&&((i=r<2&&p<o[1])?(a=0,f.v=n,f.n=o[1]):p<h&&(i=r<3||o[0]>n||n>h)&&(o[4]=r,o[5]=n,f.n=h,a=0))}if(i||r>1)return l;throw d=!0,n}return function(i,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),a=u,s=h;(t=a<2?e:s)||!d;){o||(a?a<3?(a>1&&(f.n=-1),p(a,s)):f.n=s:f.v=s);try{if(c=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((t=(d=f.n<0)?s:r.call(n,f))!==l)break}catch(t){o=e,a=1,s=t}finally{c=1}}return{value:t,done:d}}}(r,o,a),!0),u}var l={};function c(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(i(t={},o,function(){return this}),t),p=d.prototype=c.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=d,i(p,"constructor",d),i(d,"constructor",u),u.displayName="GeneratorFunction",i(d,a,"GeneratorFunction"),i(p),i(p,a,"Generator"),i(p,o,function(){return this}),i(p,"toString",function(){return"[object Generator]"}),(n=function(){return{w:s,m:h}})()}function i(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}i=function(e,t,r,n){function a(t,r){i(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},i(e,t,r,n)}function o(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}var l=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fallbackLocale="en-US",this.eventListeners=new Map,this.initialized=!1},r=[{key:"initializePluralRules",value:function(){var e=this;Object.keys(localeConfigs).forEach(function(t){try{e.pluralRules[t]=new Intl.PluralRules(t)}catch(r){e.pluralRules[t]=new Intl.PluralRules("en-US")}})}},{key:"interpolate",value:function(e,t){return e?t&&0!==Object.keys(t).length?e.replace(/\{(\w+)\}/g,function(e,r){return void 0!==t[r]?t[r]:e}):e:""}},{key:"getPlural",value:function(e,t){var r=this.getTranslation(e);if(!r)return e;if(!r.plural)return r.text||e;var n=this.pluralRules[this.currentLocale].select(t);return r.plural[n]||r.text}},{key:"initialize",value:function(e){if(!this.initialized){var t=e||this.fallbackLocale;this.setLocale(t),this.culturalConfig=new CulturalConfig(t),this.pluralRules={},this.initializePluralRules(),this.initialized=!0}}},{key:"setLocale",value:(s=n().m(function e(t){var r;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:if(localeConfigs[t]){e.n=1;break}return e.a(2,!1);case 1:if(e.p=1,this.currentLocale===t){e.n=3;break}if(null!=(r=localeConfigs[t])&&r.translations){e.n=2;break}throw new Error("Translations not found for locale: ".concat(t));case 2:this.currentLocale=t,this.culturalConfig=new CulturalConfig(t),document.documentElement.setAttribute("dir",this.culturalConfig.isRTL()?"rtl":"ltr"),document.documentElement.setAttribute("lang",t.split("-")[0]),this.emit("localeChanged",{locale:t,direction:this.culturalConfig.isRTL()?"rtl":"ltr",culturalPreferences:this.culturalConfig.getCulturalPreferences()});case 3:return e.a(2,!0);case 4:if(e.p=4,e.v,t===this.fallbackLocale){e.n=5;break}return e.a(2,this.setLocale(this.fallbackLocale));case 5:return e.a(2,!1)}},e,this,[[1,4]])}),l=function(){var e=this,t=arguments;return new Promise(function(r,n){var i=s.apply(e,t);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)})},function(e){return l.apply(this,arguments)})},{key:"getTranslation",value:function(e){if(!e)return null;var t=e.split("."),r="errors"===t[0];return this.findTranslation(t,r)}},{key:"findTranslation",value:function(e,t){return this.getTranslationFromLocale(this.currentLocale,e,t)||this.getTranslationFromLocale(this.fallbackLocale,e,t)}},{key:"getTranslationFromLocale",value:function(e,t,r){var n,i=localeConfigs[e],o=r?null==i?void 0:i.errors:null==i?void 0:i.translations;return r?null==o||null===(n=o[t[1]])||void 0===n?void 0:n[t[2]]:t.reduce(function(e,t){return null==e?void 0:e[t]},o)}},{key:"translate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var r=this.getTranslation(e);if(!r)return e;var n=r.text;return"count"in t&&(n=this.getPlural(e,t.count)),this.interpolate(n,t)}catch(t){return e}}},{key:"translateError",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var n="errors.".concat(e,".").concat(t),i=this.getTranslation(n);return i?{text:this.interpolate(i.text,r),severity:i.severity||"error"}:{text:"".concat(e,".").concat(t),severity:"error"}}catch(i){return{text:"".concat(e,".").concat(t),severity:"error"}}}},{key:"formatDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";return this.culturalConfig.formatDate(e,t)}},{key:"formatTime",value:function(e){return this.culturalConfig.formatDate(e,"time")}},{key:"formatRelativeTime",value:function(e){for(var r=new Intl.RelativeTimeFormat(this.currentLocale,{numeric:"auto"}),n=(new Date(e).getTime()-Date.now())/1e3,i=0,o=Object.entries({year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1});i<o.length;i++){var a=t(o[i],2),s=a[0],l=a[1];if(Math.abs(n)>=l||"second"===s){var c=Math.round(n/l);return r.format(c,s)}}}},{key:"formatNumber",value:function(e,t){return this.culturalConfig.formatNumber(e,t)}},{key:"formatCurrency",value:function(e,t){return this.culturalConfig.formatCurrency(e,t)}},{key:"on",value:function(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e).add(t)}},{key:"off",value:function(e,t){this.eventListeners.has(e)&&this.eventListeners.get(e).delete(t)}},{key:"emit",value:function(e,t){this.eventListeners.has(e)&&this.eventListeners.get(e).forEach(function(e){try{e(t)}catch(e){}})}}],i=[{key:"detectUserLocale",value:function(){var e=navigator.language;return localeConfigs[e]?e:"en-US"}}],r&&a(e.prototype,r),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,i,s,l}();window.i18n=new l},5127:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e,this.serializers=[e.unspecifiedNullSerializer,e.numberSerializationStrategy,e.booleanSerializer,e.dateSerializer,e.bytecodeSerializer,e.pSerializer,e.traverserSerializer,e.enumSerializer,e.listSerializer,e.uuidSerializer,e.edgeSerializer,e.pathSerializer,e.propertySerializer,e.vertexSerializer,e.vertexPropertySerializer,e.stringSerializer,e.textPSerializer,e.traversalStrategySerializer,e.byteBufferSerializer,e.lambdaSerializer,e.mapSerializer]}getSerializerCanBeUsedFor(e){for(let t=0;t<this.serializers.length;t++)if(this.serializers[t].canBeUsedFor(e))return this.serializers[t];throw new Error(`No serializer found to support item where typeof(item)='${typeof e}' and String(item)='${String(e)}'.`)}serialize(e,t=!0){return this.getSerializerCanBeUsedFor(e).serialize(e,t)}deserialize(e){try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");const t=e.readUInt8(),r=this.ioc.serializers[t];if(!r)throw new Error("unknown {type_code}");return r.deserialize(e)}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,err:e})}}}},5283:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function n(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}var i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"getError",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var n=i18n.translateError(e,t,r);return{message:n.text,severity:n.severity}}catch(r){return{message:localeConfigs["en-US"].translations.errors[e][t].text,severity:localeConfigs["en-US"].translations.errors[e][t].severity}}}}],(t=null)&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports&&(e.exports={ErrorHandler:i}),window.ErrorHandler=i},5291:(e,t,r)=>{"use strict";const{MathFloor:n,NumberIsInteger:i}=r(4134),{validateInteger:o}=r(277),{ERR_INVALID_ARG_VALUE:a}=r(6371).codes;let s=16384,l=16;function c(e){return e?l:s}e.exports={getHighWaterMark:function(e,t,r,o){const s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,o,r);if(null!=s){if(!i(s)||s<0){throw new a(o?`options.${r}`:"options.highWaterMark",s)}return n(s)}return c(e.objectMode)},getDefaultHighWaterMark:c,setDefaultHighWaterMark:function(e,t){o(t,"value",0),e?l=t:s=t}}},5332:(e,t,r)=>{"use strict";const{Traversal:n,cardinality:i}=r(1545),{Transaction:o}=r(9899),a=r(5737),s=r(9032),{TraversalStrategies:l,VertexProgramStrategy:c,OptionsStrategy:u}=r(3335);class d{constructor(e,t,r,n,i){this.graph=e,this.traversalStrategies=t,this.bytecode=r||new s,this.graphTraversalSourceClass=n||d,this.graphTraversalClass=i||f;const o=t.strategies.find(e=>"js:RemoteStrategy"===e.fqcn);this.remoteConnection=void 0!==o?o.connection:void 0}withRemote(e){const t=new l(this.traversalStrategies);return t.addStrategy(new a.RemoteStrategy(e)),new this.graphTraversalSourceClass(this.graph,t,new s(this.bytecode),this.graphTraversalSourceClass,this.graphTraversalClass)}tx(){if(this.remoteConnection&&this.remoteConnection.isSessionBound)throw new Error("This TraversalSource is already bound to a transaction - child transactions are not supported");return new o(this)}withComputer(e,t,r,n,i,o,a){const s={};return void 0!==e&&(s.graphComputer=e),void 0!==t&&(s.workers=t),void 0!==r&&(s.result=r),void 0!==n&&(s.graphComputer=n),void 0!==i&&(s.vertices=i),void 0!==o&&(s.edges=o),void 0!==a&&(s.configuration=a),this.withStrategies(new c(s))}with_(e,t=void 0){const r=void 0===t||t;let n=this.bytecode.sourceInstructions.find(e=>"withStrategies"===e[0]&&e[1]instanceof u);return void 0===n?(n=new u({[e]:r}),this.withStrategies(n)):(n[1].configuration[e]=r,new this.graphTraversalSourceClass(this.graph,new l(this.traversalStrategies),this.bytecode,this.graphTraversalSourceClass,this.graphTraversalClass))}toString(){return"graphtraversalsource["+this.graph.toString()+"]"}withBulk(...e){const t=new s(this.bytecode).addSource("withBulk",e);return new this.graphTraversalSourceClass(this.graph,new l(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withPath(...e){const t=new s(this.bytecode).addSource("withPath",e);return new this.graphTraversalSourceClass(this.graph,new l(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withSack(...e){const t=new s(this.bytecode).addSource("withSack",e);return new this.graphTraversalSourceClass(this.graph,new l(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withSideEffect(...e){const t=new s(this.bytecode).addSource("withSideEffect",e);return new this.graphTraversalSourceClass(this.graph,new l(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withStrategies(...e){const t=new s(this.bytecode).addSource("withStrategies",e);return new this.graphTraversalSourceClass(this.graph,new l(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withoutStrategies(...e){const t=new s(this.bytecode).addSource("withoutStrategies",e);return new this.graphTraversalSourceClass(this.graph,new l(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}E(...e){const t=new s(this.bytecode).addStep("E",e);return new this.graphTraversalClass(this.graph,new l(this.traversalStrategies),t)}V(...e){const t=new s(this.bytecode).addStep("V",e);return new this.graphTraversalClass(this.graph,new l(this.traversalStrategies),t)}addE(...e){const t=new s(this.bytecode).addStep("addE",e);return new this.graphTraversalClass(this.graph,new l(this.traversalStrategies),t)}mergeE(...e){const t=new s(this.bytecode).addStep("mergeE",e);return new this.graphTraversalClass(this.graph,new l(this.traversalStrategies),t)}addV(...e){const t=new s(this.bytecode).addStep("addV",e);return new this.graphTraversalClass(this.graph,new l(this.traversalStrategies),t)}mergeV(...e){const t=new s(this.bytecode).addStep("mergeV",e);return new this.graphTraversalClass(this.graph,new l(this.traversalStrategies),t)}inject(...e){const t=new s(this.bytecode).addStep("inject",e);return new this.graphTraversalClass(this.graph,new l(this.traversalStrategies),t)}io(...e){const t=new s(this.bytecode).addStep("io",e);return new this.graphTraversalClass(this.graph,new l(this.traversalStrategies),t)}call(...e){const t=new s(this.bytecode).addStep("call",e);return new this.graphTraversalClass(this.graph,new l(this.traversalStrategies),t)}union(...e){const t=new s(this.bytecode).addStep("union",e);return new this.graphTraversalClass(this.graph,new l(this.traversalStrategies),t)}}class f extends n{constructor(e,t,r){super(e,t,r)}clone(){return new f(this.graph,this.traversalStrategies,this.getBytecode())}V(...e){return this.bytecode.addStep("V",e),this}E(...e){return this.bytecode.addStep("E",e),this}addE(...e){return this.bytecode.addStep("addE",e),this}addV(...e){return this.bytecode.addStep("addV",e),this}aggregate(...e){return this.bytecode.addStep("aggregate",e),this}all(...e){return this.bytecode.addStep("all",e),this}and(...e){return this.bytecode.addStep("and",e),this}any(...e){return this.bytecode.addStep("any",e),this}as(...e){return this.bytecode.addStep("as",e),this}asDate(...e){return this.bytecode.addStep("asDate",e),this}asString(...e){return this.bytecode.addStep("asString",e),this}barrier(...e){return this.bytecode.addStep("barrier",e),this}both(...e){return this.bytecode.addStep("both",e),this}bothE(...e){return this.bytecode.addStep("bothE",e),this}bothV(...e){return this.bytecode.addStep("bothV",e),this}branch(...e){return this.bytecode.addStep("branch",e),this}by(...e){return this.bytecode.addStep("by",e),this}call(...e){return this.bytecode.addStep("call",e),this}cap(...e){return this.bytecode.addStep("cap",e),this}choose(...e){return this.bytecode.addStep("choose",e),this}coalesce(...e){return this.bytecode.addStep("coalesce",e),this}coin(...e){return this.bytecode.addStep("coin",e),this}combine(...e){return this.bytecode.addStep("combine",e),this}concat(...e){return this.bytecode.addStep("concat",e),this}conjoin(...e){return this.bytecode.addStep("conjoin",e),this}connectedComponent(...e){return this.bytecode.addStep("connectedComponent",e),this}constant(...e){return this.bytecode.addStep("constant",e),this}count(...e){return this.bytecode.addStep("count",e),this}cyclicPath(...e){return this.bytecode.addStep("cyclicPath",e),this}dateAdd(...e){return this.bytecode.addStep("dateAdd",e),this}dateDiff(...e){return this.bytecode.addStep("dateDiff",e),this}dedup(...e){return this.bytecode.addStep("dedup",e),this}difference(...e){return this.bytecode.addStep("difference",e),this}disjunct(...e){return this.bytecode.addStep("disjunct",e),this}drop(...e){return this.bytecode.addStep("drop",e),this}element(...e){return this.bytecode.addStep("element",e),this}elementMap(...e){return this.bytecode.addStep("elementMap",e),this}emit(...e){return this.bytecode.addStep("emit",e),this}fail(...e){return this.bytecode.addStep("fail",e),this}filter(...e){return this.bytecode.addStep("filter",e),this}flatMap(...e){return this.bytecode.addStep("flatMap",e),this}fold(...e){return this.bytecode.addStep("fold",e),this}format(...e){return this.bytecode.addStep("format",e),this}from_(...e){return this.bytecode.addStep("from",e),this}group(...e){return this.bytecode.addStep("group",e),this}groupCount(...e){return this.bytecode.addStep("groupCount",e),this}has(...e){return this.bytecode.addStep("has",e),this}hasId(...e){return this.bytecode.addStep("hasId",e),this}hasKey(...e){return this.bytecode.addStep("hasKey",e),this}hasLabel(...e){return this.bytecode.addStep("hasLabel",e),this}hasNot(...e){return this.bytecode.addStep("hasNot",e),this}hasValue(...e){return this.bytecode.addStep("hasValue",e),this}id(...e){return this.bytecode.addStep("id",e),this}identity(...e){return this.bytecode.addStep("identity",e),this}in_(...e){return this.bytecode.addStep("in",e),this}inE(...e){return this.bytecode.addStep("inE",e),this}inV(...e){return this.bytecode.addStep("inV",e),this}index(...e){return this.bytecode.addStep("index",e),this}inject(...e){return this.bytecode.addStep("inject",e),this}intersect(...e){return this.bytecode.addStep("intersect",e),this}is(...e){return this.bytecode.addStep("is",e),this}key(...e){return this.bytecode.addStep("key",e),this}label(...e){return this.bytecode.addStep("label",e),this}length(...e){return this.bytecode.addStep("length",e),this}limit(...e){return this.bytecode.addStep("limit",e),this}local(...e){return this.bytecode.addStep("local",e),this}loops(...e){return this.bytecode.addStep("loops",e),this}lTrim(...e){return this.bytecode.addStep("lTrim",e),this}map(...e){return this.bytecode.addStep("map",e),this}match(...e){return this.bytecode.addStep("match",e),this}math(...e){return this.bytecode.addStep("math",e),this}max(...e){return this.bytecode.addStep("max",e),this}mean(...e){return this.bytecode.addStep("mean",e),this}merge(...e){return this.bytecode.addStep("merge",e),this}mergeE(...e){return this.bytecode.addStep("mergeE",e),this}mergeV(...e){return this.bytecode.addStep("mergeV",e),this}min(...e){return this.bytecode.addStep("min",e),this}none(...e){return this.bytecode.addStep("none",e),this}not(...e){return this.bytecode.addStep("not",e),this}option(...e){return this.bytecode.addStep("option",e),this}optional(...e){return this.bytecode.addStep("optional",e),this}or(...e){return this.bytecode.addStep("or",e),this}order(...e){return this.bytecode.addStep("order",e),this}otherV(...e){return this.bytecode.addStep("otherV",e),this}out(...e){return this.bytecode.addStep("out",e),this}outE(...e){return this.bytecode.addStep("outE",e),this}outV(...e){return this.bytecode.addStep("outV",e),this}pageRank(...e){return this.bytecode.addStep("pageRank",e),this}path(...e){return this.bytecode.addStep("path",e),this}peerPressure(...e){return this.bytecode.addStep("peerPressure",e),this}product(...e){return this.bytecode.addStep("product",e),this}profile(...e){return this.bytecode.addStep("profile",e),this}program(...e){return this.bytecode.addStep("program",e),this}project(...e){return this.bytecode.addStep("project",e),this}properties(...e){return this.bytecode.addStep("properties",e),this}property(...e){return this.bytecode.addStep("property",e),this}propertyMap(...e){return this.bytecode.addStep("propertyMap",e),this}range(...e){return this.bytecode.addStep("range",e),this}read(...e){return this.bytecode.addStep("read",e),this}repeat(...e){return this.bytecode.addStep("repeat",e),this}replace(...e){return this.bytecode.addStep("replace",e),this}reverse(...e){return this.bytecode.addStep("reverse",e),this}rTrim(...e){return this.bytecode.addStep("rTrim",e),this}sack(...e){return this.bytecode.addStep("sack",e),this}sample(...e){return this.bytecode.addStep("sample",e),this}select(...e){return this.bytecode.addStep("select",e),this}shortestPath(...e){return this.bytecode.addStep("shortestPath",e),this}sideEffect(...e){return this.bytecode.addStep("sideEffect",e),this}simplePath(...e){return this.bytecode.addStep("simplePath",e),this}skip(...e){return this.bytecode.addStep("skip",e),this}split(...e){return this.bytecode.addStep("split",e),this}store(...e){return this.bytecode.addStep("store",e),this}subgraph(...e){return this.bytecode.addStep("subgraph",e),this}substring(...e){return this.bytecode.addStep("substring",e),this}sum(...e){return this.bytecode.addStep("sum",e),this}tail(...e){return this.bytecode.addStep("tail",e),this}timeLimit(...e){return this.bytecode.addStep("timeLimit",e),this}times(...e){return this.bytecode.addStep("times",e),this}to(...e){return this.bytecode.addStep("to",e),this}toE(...e){return this.bytecode.addStep("toE",e),this}toLower(...e){return this.bytecode.addStep("toLower",e),this}toUpper(...e){return this.bytecode.addStep("toUpper",e),this}toV(...e){return this.bytecode.addStep("toV",e),this}tree(...e){return this.bytecode.addStep("tree",e),this}trim(...e){return this.bytecode.addStep("trim",e),this}unfold(...e){return this.bytecode.addStep("unfold",e),this}union(...e){return this.bytecode.addStep("union",e),this}until(...e){return this.bytecode.addStep("until",e),this}value(...e){return this.bytecode.addStep("value",e),this}valueMap(...e){return this.bytecode.addStep("valueMap",e),this}values(...e){return this.bytecode.addStep("values",e),this}where(...e){return this.bytecode.addStep("where",e),this}with_(...e){return this.bytecode.addStep("with",e),this}write(...e){return this.bytecode.addStep("write",e),this}}class p extends s{constructor(e,t){super(),this.addSource("CardinalityValueTraversal",[e,t])}static single(e){return new p(i.single,e)}static list(e){return new p(i.list,e)}static set(e){return new p(i.set,e)}}function h(e,t){const r=new f(null,null,new s);return r[e].apply(r,t)}const m={E:(...e)=>h("E",e),V:(...e)=>h("V",e),addE:(...e)=>h("addE",e),addV:(...e)=>h("addV",e),aggregate:(...e)=>h("aggregate",e),all:(...e)=>h("all",e),and:(...e)=>h("and",e),any:(...e)=>h("any",e),as:(...e)=>h("as",e),asDate:(...e)=>h("asDate",e),asString:(...e)=>h("asString",e),barrier:(...e)=>h("barrier",e),both:(...e)=>h("both",e),bothE:(...e)=>h("bothE",e),bothV:(...e)=>h("bothV",e),branch:(...e)=>h("branch",e),call:(...e)=>h("call",e),cap:(...e)=>h("cap",e),choose:(...e)=>h("choose",e),coalesce:(...e)=>h("coalesce",e),coin:(...e)=>h("coin",e),concat:(...e)=>h("concat",e),constant:(...e)=>h("constant",e),count:(...e)=>h("count",e),cyclicPath:(...e)=>h("cyclicPath",e),dateAdd:(...e)=>h("dateAdd",e),dateDiff:(...e)=>h("dateDiff",e),dedup:(...e)=>h("dedup",e),disjunct:(...e)=>h("disjunct",e),drop:(...e)=>h("drop",e),element:(...e)=>h("element",e),elementMap:(...e)=>h("elementMap",e),emit:(...e)=>h("emit",e),fail:(...e)=>h("fail",e),filter:(...e)=>h("filter",e),flatMap:(...e)=>h("flatMap",e),fold:(...e)=>h("fold",e),format:(...e)=>h("format",e),group:(...e)=>h("group",e),groupCount:(...e)=>h("groupCount",e),has:(...e)=>h("has",e),hasId:(...e)=>h("hasId",e),hasKey:(...e)=>h("hasKey",e),hasLabel:(...e)=>h("hasLabel",e),hasNot:(...e)=>h("hasNot",e),hasValue:(...e)=>h("hasValue",e),id:(...e)=>h("id",e),identity:(...e)=>h("identity",e),in_:(...e)=>h("in_",e),inE:(...e)=>h("inE",e),inV:(...e)=>h("inV",e),index:(...e)=>h("index",e),inject:(...e)=>h("inject",e),is:(...e)=>h("is",e),key:(...e)=>h("key",e),label:(...e)=>h("label",e),length:(...e)=>h("length",e),limit:(...e)=>h("limit",e),local:(...e)=>h("local",e),loops:(...e)=>h("loops",e),lTrim:(...e)=>h("lTrim",e),map:(...e)=>h("map",e),match:(...e)=>h("match",e),math:(...e)=>h("math",e),max:(...e)=>h("max",e),mean:(...e)=>h("mean",e),mergeE:(...e)=>h("mergeE",e),mergeV:(...e)=>h("mergeV",e),min:(...e)=>h("min",e),none:(...e)=>h("none",e),not:(...e)=>h("not",e),optional:(...e)=>h("optional",e),or:(...e)=>h("or",e),order:(...e)=>h("order",e),otherV:(...e)=>h("otherV",e),out:(...e)=>h("out",e),outE:(...e)=>h("outE",e),outV:(...e)=>h("outV",e),path:(...e)=>h("path",e),project:(...e)=>h("project",e),properties:(...e)=>h("properties",e),property:(...e)=>h("property",e),propertyMap:(...e)=>h("propertyMap",e),range:(...e)=>h("range",e),repeat:(...e)=>h("repeat",e),replace:(...e)=>h("replace",e),reverse:(...e)=>h("reverse",e),rTrim:(...e)=>h("rTrim",e),sack:(...e)=>h("sack",e),sample:(...e)=>h("sample",e),select:(...e)=>h("select",e),sideEffect:(...e)=>h("sideEffect",e),simplePath:(...e)=>h("simplePath",e),skip:(...e)=>h("skip",e),split:(...e)=>h("split",e),store:(...e)=>h("store",e),subgraph:(...e)=>h("subgraph",e),substring:(...e)=>h("substring",e),sum:(...e)=>h("sum",e),tail:(...e)=>h("tail",e),timeLimit:(...e)=>h("timeLimit",e),times:(...e)=>h("times",e),to:(...e)=>h("to",e),toE:(...e)=>h("toE",e),toLower:(...e)=>h("toLower",e),toUpper:(...e)=>h("toUpper",e),toV:(...e)=>h("toV",e),tree:(...e)=>h("tree",e),trim:(...e)=>h("trim",e),unfold:(...e)=>h("unfold",e),union:(...e)=>h("union",e),until:(...e)=>h("until",e),value:(...e)=>h("value",e),valueMap:(...e)=>h("valueMap",e),values:(...e)=>h("values",e),where:(...e)=>h("where",e)};e.exports={GraphTraversal:f,GraphTraversalSource:d,CardinalityValue:p,statics:m}},5506:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),{ObjectDefineProperty:i,ObjectKeys:o,ReflectApply:a}=r(4134),{promisify:{custom:s}}=r(7760),{streamReturningOperators:l,promiseReturningOperators:c}=r(823),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=r(6371),d=r(7830),{setDefaultHighWaterMark:f,getDefaultHighWaterMark:p}=r(5291),{pipeline:h}=r(7758),{destroyer:m}=r(5896),y=r(6238),g=r(3095),b=r(6115),v=e.exports=r(4259).Stream;v.isDestroyed=b.isDestroyed,v.isDisturbed=b.isDisturbed,v.isErrored=b.isErrored,v.isReadable=b.isReadable,v.isWritable=b.isWritable,v.Readable=r(7576);for(const _ of o(l)){const E=l[_];function S(...e){if(new.target)throw u();return v.Readable.from(a(E,this,e))}i(S,"name",{__proto__:null,value:E.name}),i(S,"length",{__proto__:null,value:E.length}),i(v.Readable.prototype,_,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}for(const T of o(c)){const I=c[T];function A(...e){if(new.target)throw u();return a(I,this,e)}i(A,"name",{__proto__:null,value:I.name}),i(A,"length",{__proto__:null,value:I.length}),i(v.Readable.prototype,T,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}v.Writable=r(8584),v.Duplex=r(3370),v.Transform=r(7382),v.PassThrough=r(6524),v.pipeline=h;const{addAbortSignal:w}=r(4147);v.addAbortSignal=w,v.finished=y,v.destroy=m,v.compose=d,v.setDefaultHighWaterMark=f,v.getDefaultHighWaterMark=p,i(v,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>g}),i(h,s,{__proto__:null,enumerable:!0,get:()=>g.pipeline}),i(y,s,{__proto__:null,enumerable:!0,get:()=>g.finished}),v.Stream=v,v._isUint8Array=function(e){return e instanceof Uint8Array},v._uint8ArrayToBuffer=function(e){return n.from(e.buffer,e.byteOffset,e.byteLength)}},5568:e=>{"use strict";const{AbortController:t,AbortSignal:r}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=t,e.exports.AbortSignal=r,e.exports.default=t},5606:e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,l=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&f())}function f(){if(!c){var e=a(d);c=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||c||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},5737:(e,t,r)=>{"use strict";const n=r(1545),i=r(3335).TraversalStrategy;class o extends n.Traversal{constructor(e,t){super(null,null,null),this.traversers=e,this.sideEffects=t}}e.exports={RemoteConnection:class{constructor(e,t={}){this.url=e,this.options=t}open(){throw new Error("open() must be implemented")}get isOpen(){throw new Error("isOpen() must be implemented")}get isSessionBound(){return!1}submit(e){throw new Error("submit() must be implemented")}createSession(){throw new Error("createSession() must be implemented")}commit(){throw new Error("commit() must be implemented")}rollback(){throw new Error("rollback() must be implemented")}close(){throw new Error("close() must be implemented")}},RemoteStrategy:class extends i{constructor(e){super("js:RemoteStrategy"),this.connection=e}apply(e){return e.traversers?Promise.resolve():this.connection.submit(e.getBytecode()).then(function(t){e.sideEffects=t.sideEffects,e.traversers=t.traversers})}},RemoteTraversal:o}},5896:(e,t,r)=>{"use strict";const n=r(5606),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:a}=r(6371),{Symbol:s}=r(4134),{kIsDestroyed:l,isDestroyed:c,isFinished:u,isServerRequest:d}=r(6115),f=s("kDestroy"),p=s("kConstruct");function h(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function m(e,t,r){let i=!1;function o(t){if(i)return;i=!0;const o=e._readableState,a=e._writableState;h(t,a,o),a&&(a.closed=!0),o&&(o.closed=!0),"function"==typeof r&&r(t),t?n.nextTick(y,e,t):n.nextTick(g,e)}try{e._destroy(t||null,o)}catch(t){o(t)}}function y(e,t){b(e,t),g(e)}function g(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function b(e,t){const r=e._readableState,n=e._writableState;null!=n&&n.errorEmitted||null!=r&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function v(e,t,r){const i=e._readableState,o=e._writableState;if(null!=o&&o.destroyed||null!=i&&i.destroyed)return this;null!=i&&i.autoDestroy||null!=o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),i&&!i.errored&&(i.errored=t),r?n.nextTick(b,e,t):b(e,t))}function w(e){let t=!1;function r(r){if(t)return void v(e,null!=r?r:new o);t=!0;const i=e._readableState,a=e._writableState,s=a||i;i&&(i.constructed=!0),a&&(a.constructed=!0),s.destroyed?e.emit(f,r):r?v(e,r,!0):n.nextTick(_,e)}try{e._construct(e=>{n.nextTick(r,e)})}catch(e){n.nextTick(r,e)}}function _(e){e.emit(p)}function E(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function S(e){e.emit("close")}function T(e,t){e.emit("error",t),n.nextTick(S,e)}e.exports={construct:function(e,t){if("function"!=typeof e._construct)return;const r=e._readableState,i=e._writableState;r&&(r.constructed=!1),i&&(i.constructed=!1),e.once(p,t),e.listenerCount(p)>1||n.nextTick(w,e)},destroyer:function(e,t){e&&!c(e)&&(t||u(e)||(t=new a),d(e)?(e.socket=null,e.destroy(t)):E(e)?e.abort():E(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?n.nextTick(T,e,t):n.nextTick(S,e),e.destroyed||(e[l]=!0))},destroy:function(e,t){const r=this._readableState,n=this._writableState,o=n||r;return null!=n&&n.destroyed||null!=r&&r.destroyed?("function"==typeof t&&t(),this):(h(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),o.constructed?m(this,e,t):this.once(f,function(r){m(this,i(r,e),t)}),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:v}},6078:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),{valueKey:i,LambdaSerializer:o}=r(474);e.exports=class{constructor(e){this.ioc=e,this.graphsonLambdaSerializer=new o}canBeUsedFor(e){return this.graphsonLambdaSerializer.canBeUsedFor(e)}serialize(e,t=!0){if(null==e){if(t)return n.from([this.ioc.DataType.LAMBDA,1]);const e=[0,0,0,0],r=[0,0,0,0],i=[0,0,0,0];return n.from([...e,...r,...i])}const r=[];t&&r.push(n.from([this.ioc.DataType.LAMBDA,0]));const o=this.graphsonLambdaSerializer.serialize(e),a=o[i].language,s=o[i].script,l=o[i].arguments;return r.push(this.ioc.stringSerializer.serialize(a,!1)),r.push(this.ioc.stringSerializer.serialize(s,!1)),r.push(this.ioc.intSerializer.serialize(l,!1)),n.concat(r)}}},6115:(e,t,r)=>{"use strict";const{SymbolAsyncIterator:n,SymbolIterator:i,SymbolFor:o}=r(4134),a=o("nodejs.stream.destroyed"),s=o("nodejs.stream.errored"),l=o("nodejs.stream.readable"),c=o("nodejs.stream.writable"),u=o("nodejs.stream.disturbed"),d=o("nodejs.webstream.isClosedPromise"),f=o("nodejs.webstream.controllerErrorFunction");function p(e,t=!1){var r;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(r=e._readableState)||void 0===r?void 0:r.readable)||e._writableState&&!e._readableState)}function h(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function m(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function y(e){return!(!e||m(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function g(e){return!(!e||m(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function b(e){return!(!e||m(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function v(e){if(!m(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[a]||null!=n&&n.destroyed)}function w(e){if(!h(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function _(e,t){if(!p(e))return null;const r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function E(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!v(e)&&(p(e)&&e.readable&&!_(e))}function S(e){return e&&null!=e[c]?e[c]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!v(e)&&(h(e)&&e.writable&&!w(e))}function T(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function I(e){return"boolean"==typeof e._sent100&&T(e)}e.exports={isDestroyed:v,kIsDestroyed:a,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[u])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:u,isErrored:function(e){var t,r,n,i,o,a,l,c,u,d;return!(!e||!(null!==(t=null!==(r=null!==(n=null!==(i=null!==(o=null!==(a=e[s])&&void 0!==a?a:e.readableErrored)&&void 0!==o?o:e.writableErrored)&&void 0!==i?i:null===(l=e._readableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==n?n:null===(c=e._writableState)||void 0===c?void 0:c.errorEmitted)&&void 0!==r?r:null===(u=e._readableState)||void 0===u?void 0:u.errored)&&void 0!==t?t:null===(d=e._writableState)||void 0===d?void 0:d.errored))},kIsErrored:s,isReadable:E,kIsReadable:l,kIsClosedPromise:d,kControllerErrorFunction:f,kIsWritable:c,isClosed:function(e){if(!m(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,r=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==r?void 0:r.closed)?(null==t?void 0:t.closed)||(null==r?void 0:r.closed):"boolean"==typeof e._closed&&T(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return m(e)?!!v(e)||(!1===(null==t?void 0:t.readable)||!E(e))&&(!1===(null==t?void 0:t.writable)||!S(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[n]:!1===t?"function"==typeof e[i]:"function"==typeof e[n]||"function"==typeof e[i])},isReadableNodeStream:p,isReadableStream:y,isReadableEnded:function(e){if(!p(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:_,isReadableErrored:function(e){var t,r;return m(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isNodeStream:m,isWebStream:function(e){return y(e)||g(e)||b(e)},isWritable:S,isWritableNodeStream:h,isWritableStream:g,isWritableEnded:w,isWritableFinished:function(e,t){if(!h(e))return null;if(!0===e.writableFinished)return!0;const r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return m(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:I,willEmitClose:function(e){if(!m(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&I(e)||!!(n&&n.autoDestroy&&n.emitClose&&!1===n.closed)},isTransformStream:b}},6140:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=r},6238:(e,t,r)=>{"use strict";const n=r(5606),{AbortError:i,codes:o}=r(6371),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:s}=o,{kEmptyObject:l,once:c}=r(7760),{validateAbortSignal:u,validateFunction:d,validateObject:f,validateBoolean:p}=r(277),{Promise:h,PromisePrototypeThen:m,SymbolDispose:y}=r(4134),{isClosed:g,isReadable:b,isReadableNodeStream:v,isReadableStream:w,isReadableFinished:_,isReadableErrored:E,isWritable:S,isWritableNodeStream:T,isWritableStream:I,isWritableFinished:A,isWritableErrored:O,isNodeStream:R,willEmitClose:x,kIsClosedPromise:N}=r(6115);let k;const C=()=>{};function M(e,t,o){var p,h;if(2===arguments.length?(o=t,t=l):null==t?t=l:f(t,"options"),d(o,"callback"),u(t.signal,"options.signal"),o=c(o),w(e)||I(e))return function(e,t,o){let a=!1,s=C;if(t.signal)if(s=()=>{a=!0,o.call(e,new i(void 0,{cause:t.signal.reason}))},t.signal.aborted)n.nextTick(s);else{k=k||r(7760).addAbortListener;const n=k(t.signal,s),i=o;o=c((...t)=>{n[y](),i.apply(e,t)})}const l=(...t)=>{a||n.nextTick(()=>o.apply(e,t))};return m(e[N].promise,l,l),C}(e,t,o);if(!R(e))throw new a("stream",["ReadableStream","WritableStream","Stream"],e);const M=null!==(p=t.readable)&&void 0!==p?p:v(e),L=null!==(h=t.writable)&&void 0!==h?h:T(e),D=e._writableState,P=e._readableState,j=()=>{e.writable||$()};let z=x(e)&&v(e)===M&&T(e)===L,U=A(e,!1);const $=()=>{U=!0,e.destroyed&&(z=!1),(!z||e.readable&&!M)&&(M&&!B||o.call(e))};let B=_(e,!1);const F=()=>{B=!0,e.destroyed&&(z=!1),(!z||e.writable&&!L)&&(L&&!U||o.call(e))},H=t=>{o.call(e,t)};let q=g(e);const G=()=>{q=!0;const t=O(e)||E(e);return t&&"boolean"!=typeof t?o.call(e,t):M&&!B&&v(e,!0)&&!_(e,!1)?o.call(e,new s):!L||U||A(e,!1)?void o.call(e):o.call(e,new s)},V=()=>{q=!0;const t=O(e)||E(e);if(t&&"boolean"!=typeof t)return o.call(e,t);o.call(e)},W=()=>{e.req.on("finish",$)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?L&&!D&&(e.on("end",j),e.on("close",j)):(e.on("complete",$),z||e.on("abort",G),e.req?W():e.on("request",W)),z||"boolean"!=typeof e.aborted||e.on("aborted",G),e.on("end",F),e.on("finish",$),!1!==t.error&&e.on("error",H),e.on("close",G),q?n.nextTick(G):null!=D&&D.errorEmitted||null!=P&&P.errorEmitted?z||n.nextTick(V):(M||z&&!b(e)||!U&&!1!==S(e))&&(L||z&&!S(e)||!B&&!1!==b(e))?P&&e.req&&e.aborted&&n.nextTick(V):n.nextTick(V);const Y=()=>{o=C,e.removeListener("aborted",G),e.removeListener("complete",$),e.removeListener("abort",G),e.removeListener("request",W),e.req&&e.req.removeListener("finish",$),e.removeListener("end",j),e.removeListener("close",j),e.removeListener("finish",$),e.removeListener("end",F),e.removeListener("error",H),e.removeListener("close",G)};if(t.signal&&!q){const a=()=>{const r=o;Y(),r.call(e,new i(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)n.nextTick(a);else{k=k||r(7760).addAbortListener;const n=k(t.signal,a),i=o;o=c((...t)=>{n[y](),i.apply(e,t)})}}return Y}e.exports=M,e.exports.finished=function(e,t){var r;let n=!1;return null===t&&(t=l),null!==(r=t)&&void 0!==r&&r.cleanup&&(p(t.cleanup,"cleanup"),n=t.cleanup),new h((r,i)=>{const o=M(e,t,e=>{n&&o(),e?i(e):r()})})}},6284:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var o={_initialized:!1,_debugEnabled:!1,_config:null,initialize:function(e){var t;return this._initialized&&this._config?this._config=n(n({},this._config),e):this._config=e,this._debugEnabled=(null===(t=this._config)||void 0===t?void 0:t.DEBUG)||!1,this._initialized=!0,this.debugLog("Utils initialized with this locale:",this._config.LANGUAGE),this},debugLog:function(e){if(!this._initialized||this._debugEnabled){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i;if(r.length>0)(i=console).log.apply(i,["[DEBUG]",e].concat(r))}},getConfig:function(){return this._config},isInitialized:function(){return this._initialized},loadScript:function(e){return new Promise(function(t,r){var n=document.createElement("script");n.src=e,n.async=!0,n.onload=function(){return t()},n.onerror=function(){return r(new Error("Failed to load script: ".concat(e)))},document.head.appendChild(n)})},generateUUID:function(){if("undefined"!=typeof crypto&&crypto.randomUUID)return crypto.randomUUID();if("undefined"!=typeof crypto&&crypto.getRandomValues){var e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128,Array.from(e).map(function(e){return e.toString(16).padStart(2,"0")}).join("").replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}for(var t=(new Date).getTime(),r="undefined"!=typeof performance&&performance.now?performance.now():0,n=function(){var e=1e4*Math.sin(t*r*Math.random());return Math.floor(256*(e-Math.floor(e)))},i=new Uint8Array(16),o=0;o<16;o++)i[o]=n();return i[6]=15&i[6]|64,i[8]=63&i[8]|128,Array.from(i).map(function(e){return e.toString(16).padStart(2,"0")}).join("").replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}};e.exports&&(e.exports=o),window.utils=o},6348:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),i=r(1545);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.TEXTP]=this}canBeUsedFor(e){return e instanceof i.TextP}serialize(e,t=!0){if(null==e){if(t)return n.from([this.ioc.DataType.TEXTP,1]);const e=[0,0,0,0],r=[0,0,0,0];return n.from([...e,...r])}const r=[];let i;return t&&r.push(n.from([this.ioc.DataType.TEXTP,0])),r.push(this.ioc.stringSerializer.serialize(e.operator,!1)),i=void 0===e.other||null===e.other?Array.isArray(e.value)?e.value:[e.value]:[e.value,e.other],r.push(this.ioc.listSerializer.serialize(i,!1)),n.concat(r)}deserialize(e,t=!0){let r=0,o=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(r++,e!==this.ioc.DataType.TEXTP)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,l,c,u;try{({v:a,len:s}=this.ioc.stringSerializer.deserialize(o,!1)),r+=s}catch(e){throw e.message="{name}: "+e.message,e}o=o.slice(s);try{({v:l,len:c}=this.ioc.listSerializer.deserialize(o,!1)),r+=c}catch(e){throw e.message="{values}: "+e.message,e}if(o=o.slice(c),l.length<1)return{v:new i.TextP(""),len:r};const d=i.TextP[a];return u="function"==typeof d?d(...l):new i.TextP(a,...l),{v:u,len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},6371:(e,t,r)=>{"use strict";const{format:n,inspect:i}=r(9231),{AggregateError:o}=r(4134),a=globalThis.AggregateError||o,s=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],c=/^([A-Z][a-z0-9]*)+$/,u={};function d(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function f(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function p(e,t,r){r||(r=Error);class i extends r{constructor(...r){super(function(e,t,r){if("function"==typeof t)return d(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const i=(t.match(/%[dfijoOs]/g)||[]).length;return d(i===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${i}).`),0===r.length?t:n(t,...r)}(e,t,r))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=e,i.prototype[s]=!0,u[e]=i}function h(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class m extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new u.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}p("ERR_ASSERTION","%s",Error),p("ERR_INVALID_ARG_TYPE",(e,t,r)=>{d("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const o=[],a=[],s=[];for(const e of t)d("string"==typeof e,"All expected entries have to be of type string"),l.includes(e)?o.push(e.toLowerCase()):c.test(e)?a.push(e):(d("object"!==e,'The value "object" should be written as "Object"'),s.push(e));if(a.length>0){const e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),a.push("Object"))}if(o.length>0){switch(o.length){case 1:n+=`of type ${o[0]}`;break;case 2:n+=`one of type ${o[0]} or ${o[1]}`;break;default:{const e=o.pop();n+=`one of type ${o.join(", ")}, or ${e}`}}(a.length>0||s.length>0)&&(n+=" or ")}if(a.length>0){switch(a.length){case 1:n+=`an instance of ${a[0]}`;break;case 2:n+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const e=a.pop();n+=`an instance of ${a.join(", ")}, or ${e}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();n+=`one of ${s.join(", ")}, or ${e}`}}if(null==r)n+=`. Received ${r}`;else if("function"==typeof r&&r.name)n+=`. Received function ${r.name}`;else if("object"==typeof r){var u;if(null!==(u=r.constructor)&&void 0!==u&&u.name)n+=`. Received an instance of ${r.constructor.name}`;else{n+=`. Received ${i(r,{depth:-1})}`}}else{let e=i(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),n+=`. Received type ${typeof r} (${e})`}return n},TypeError),p("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=i(t);n.length>128&&(n=n.slice(0,128)+"...");return`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`},TypeError),p("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;return`Expected ${e} to be returned from the "${t}" function but got ${null!=r&&null!==(n=r.constructor)&&void 0!==n&&n.name?`instance of ${r.constructor.name}`:"type "+typeof r}.`},TypeError),p("ERR_MISSING_ARGS",(...e)=>{let t;d(e.length>0,"At least one arg needs to be specified");const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return`${t} must be specified`},TypeError),p("ERR_OUT_OF_RANGE",(e,t,r)=>{let n;if(d(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>2**32)n=f(String(r));else if("bigint"==typeof r){n=String(r);const e=BigInt(2)**BigInt(32);(r>e||r<-e)&&(n=f(n)),n+="n"}else n=i(r);return`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),p("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),p("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),p("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),p("ERR_STREAM_WRITE_AFTER_END","write after end",Error),p("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:m,aggregateTwoErrors:h(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new a([t,e],t.message);return r.code=t.code,r}return e||t}),hideStackFrames:h,codes:u}},6414:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),i=r(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.VERTEXPROPERTY]=this}canBeUsedFor(e){return e instanceof i.VertexProperty}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.VERTEXPROPERTY,1]):n.concat([this.ioc.unspecifiedNullSerializer.serialize(null),this.ioc.stringSerializer.serialize("",!1),this.ioc.unspecifiedNullSerializer.serialize(null),this.ioc.unspecifiedNullSerializer.serialize(null),this.ioc.unspecifiedNullSerializer.serialize(null)]);const r=[];return t&&r.push(n.from([this.ioc.DataType.VERTEXPROPERTY,0])),r.push(this.ioc.anySerializer.serialize(e.id)),r.push(this.ioc.stringSerializer.serialize(e.label,!1)),r.push(this.ioc.anySerializer.serialize(e.value)),r.push(this.ioc.unspecifiedNullSerializer.serialize(null)),r.push(this.ioc.anySerializer.serialize(e.properties)),n.concat(r)}deserialize(e,t=!0){let r=0,o=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=o.readUInt8();if(r++,e!==this.ioc.DataType.VERTEXPROPERTY)throw new Error("unexpected {type_code}");if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}let a,s,l,c,u,d,f,p,h;try{({v:a,len:s}=this.ioc.anySerializer.deserialize(o)),r+=s}catch(e){throw e.message="{id}: "+e.message,e}o=o.slice(s);try{({v:l,len:c}=this.ioc.stringSerializer.deserialize(o,!1)),r+=c}catch(e){throw e.message="{label}: "+e.message,e}o=o.slice(c);try{({v:u,len:d}=this.ioc.anySerializer.deserialize(o)),r+=d}catch(e){throw e.message="{value}: "+e.message,e}o=o.slice(d);try{({len:f}=this.ioc.unspecifiedNullSerializer.deserialize(o)),r+=f}catch(e){throw e.message="{parent}: "+e.message,e}o=o.slice(f);try{({v:p,len:h}=this.ioc.anySerializer.deserialize(o)),r+=h}catch(e){throw e.message="{properties}: "+e.message,e}o=o.slice(h);const m=p||[];return{v:new i.VertexProperty(a,l,u,m),len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},6524:(e,t,r)=>{"use strict";const{ObjectSetPrototypeOf:n}=r(4134);e.exports=o;const i=r(7382);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}n(o.prototype,i.prototype),n(o,i),o.prototype._transform=function(e,t,r){r(null,e)}},6532:(e,t,r)=>{"use strict";const n=r(5606),{PromisePrototypeThen:i,SymbolAsyncIterator:o,SymbolIterator:a}=r(4134),{Buffer:s}=r(8287),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:c}=r(6371).codes;e.exports=function(e,t,r){let u,d;if("string"==typeof t||t instanceof s)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});if(t&&t[o])d=!0,u=t[o]();else{if(!t||!t[a])throw new l("iterable",["Iterable"],t);d=!1,u=t[a]()}const f=new e({objectMode:!0,highWaterMark:1,...r});let p=!1;return f._read=function(){p||(p=!0,async function(){for(;;){try{const{value:e,done:t}=d?await u.next():u.next();if(t)f.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw p=!1,new c;if(f.push(t))continue;p=!1}}catch(e){f.destroy(e)}break}}())},f._destroy=function(e,t){i(async function(e){const t=null!=e,r="function"==typeof u.throw;if(t&&r){const{value:t,done:r}=await u.throw(e);if(await t,r)return}if("function"==typeof u.return){const{value:e}=await u.return();await e}}(e),()=>n.nextTick(t,e),r=>n.nextTick(t,r||e))},f}},6535:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Neo4jDatabaseService:()=>U});var n=r(1982);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(i(e)+" is not iterable")}function c(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var l=n&&n.prototype instanceof s?n:s,c=Object.create(l.prototype);return u(c,"_invoke",function(r,n,i){var o,s,l,c=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,l=e,f.n=r,a}};function p(r,n){for(s=r,l=n,t=0;!d&&c&&!i&&t<u.length;t++){var i,o=u[t],p=f.p,h=o[2];r>3?(i=h===n)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((i=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<h&&(i=r<3||o[0]>n||n>h)&&(o[4]=r,o[5]=n,f.n=h,s=0))}if(i||r>1)return a;throw d=!0,n}return function(i,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,l=h;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),p(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:r.call(n,f))!==a)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(r,i,o),!0),c}var a={};function s(){}function l(){}function d(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(u(t={},n,function(){return this}),t),p=d.prototype=s.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=d,u(p,"constructor",d),u(d,"constructor",l),l.displayName="GeneratorFunction",u(d,i,"GeneratorFunction"),u(p),u(p,i,"Generator"),u(p,n,function(){return this}),u(p,"toString",function(){return"[object Generator]"}),(c=function(){return{w:o,m:h}})()}function u(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}u=function(e,t,r,n){function o(t,r){u(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},u(e,t,r,n)}function d(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){d(o,n,i,a,s,"next",e)}function s(e){d(o,n,i,a,s,"throw",e)}a(void 0)})}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var m={READ:"READ",WRITE:"WRITE"},y=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.uri||!t.username||!t.password)throw new Error("Invalid Neo4j configuration");this.config=t,this.driver=null,this.isInitialized=!1,this.connectionRetryCount=0,this.maxRetries=3,this.poolConfig={maxConnectionPoolSize:1,connectionTimeout:15e3,maxTransactionRetryTime:15e3,connectionAcquisitionTimeout:15e3,maxConnectionLifetime:36e5,idleTimeoutMillis:18e5}},t=[{key:"isRetryableError",value:function(e){return["ServiceUnavailable","SessionExpired","TransientError","Neo.TransientError"].some(function(t){var r,n;return(null===(r=e.code)||void 0===r?void 0:r.includes(t))||(null===(n=e.message)||void 0===n?void 0:n.includes(t))})}},{key:"checkConnections",value:(h=f(c().m(function e(){var t;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.driver){e.n=1;break}return debugLog("No driver found during health check - will initialize on next query"),this.isInitialized=!1,e.a(2);case 1:return e.p=1,e.n=2,this.driver.verifyConnectivity();case 2:utils.debugLog("Connection health check passed"),e.n=4;break;case 3:return e.p=3,t=e.v,utils.debugLog("Connection health check failed:",t),this.isInitialized=!1,e.n=4,this.cleanup();case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return h.apply(this,arguments)})},{key:"withRetry",value:(d=f(c().m(function e(t){var r,n,i,o,a=this,s=arguments;return c().w(function(e){for(;;)switch(e.n){case 0:r=s.length>1&&void 0!==s[1]?s[1]:3,n=c().m(function e(){var n,i,s;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t();case 1:return i=e.v,e.a(2,{v:i});case 2:if(e.p=2,s=e.v,!(a.isRetryableError(s)&&o<r)){e.n=4;break}return n=Math.min(100*Math.pow(2,o),2e3),e.n=3,new Promise(function(e){return setTimeout(e,n)});case 3:return a.isInitialized=!1,e.a(2,0);case 4:throw s;case 5:return e.a(2)}},e,null,[[0,2]])}),o=1;case 1:if(!(o<=r)){e.n=5;break}return e.d(l(n()),2);case 2:if(0!==(i=e.v)){e.n=3;break}return e.a(3,4);case 3:if(!i){e.n=4;break}return e.a(2,i.v);case 4:o++,e.n=1;break;case 5:return e.a(2)}},e)})),function(e){return d.apply(this,arguments)})},{key:"executeQuery",value:(u=f(c().m(function e(t){var r,n,i=this,o=arguments;return c().w(function(e){for(;;)switch(e.n){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},n=o.length>2&&void 0!==o[2]?o[2]:m.READ,utils.debugLog("Executing Neo4j query:",t,"Params:",r,"Mode:",n),this.isInitialized){e.n=1;break}return utils.debugLog("Connection not initialized or lost - reinitializing"),e.n=1,this.initialize();case 1:return e.a(2,this.withRetry(f(c().m(function e(){var o,a;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=i.driver.session({database:i.config.database,defaultAccessMode:n===m.WRITE?neo4j.session.WRITE:neo4j.session.READ}),e.p=1,n!==m.WRITE){e.n=3;break}return e.n=2,o.writeTransaction(function(){var e=f(c().m(function e(n){return c().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n.run(t,r);case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:a=e.v,e.n=5;break;case 3:return e.n=4,o.readTransaction(function(){var e=f(c().m(function e(n){return c().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n.run(t,r);case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:a=e.v;case 5:return e.a(2,a);case 6:return e.p=6,e.n=7,o.close().catch(function(e){});case 7:return e.f(6);case 8:return e.a(2)}},e,null,[[1,,6,8]])}))))}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"read",value:(s=f(c().m(function e(t){var r,n=arguments;return c().w(function(e){for(;;)if(0===e.n)return r=n.length>1&&void 0!==n[1]?n[1]:{},e.a(2,this.executeQuery(t,r,m.READ))},e,this)})),function(e){return s.apply(this,arguments)})},{key:"write",value:(o=f(c().m(function e(t){var r,n=arguments;return c().w(function(e){for(;;)if(0===e.n)return r=n.length>1&&void 0!==n[1]?n[1]:{},e.a(2,this.executeQuery(t,r,m.WRITE))},e,this)})),function(e){return o.apply(this,arguments)})},{key:"initialize",value:(i=f(c().m(function e(){var t,r,n,i=this;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!this.driver){e.n=1;break}return e.n=1,this.cleanup();case 1:return t=this.config.uri.startsWith("neo4j+s://")||this.config.uri.includes("?trust=")||this.config.uri.includes("&trust="),r=a({},this.poolConfig),t&&(delete r.encrypted,delete r.trust,delete r.trustStrategy),this.driver=neo4j.driver(this.config.uri,neo4j.auth.basic(this.config.username,this.config.password),r),e.n=2,this.driver.verifyConnectivity();case 2:return this.isInitialized=!0,utils.debugLog("Neo4j connection initialized successfully"),this.healthCheckInterval=setInterval(function(){i.checkConnections().catch(function(e){})},3e5),e.a(2,this.driver);case 3:throw e.p=3,n=e.v,this.isInitialized=!1,utils.debugLog("Connection initialization error:",n),n;case 4:return e.a(2)}},e,this,[[0,3]])})),function(){return i.apply(this,arguments)})},{key:"cleanup",value:(n=f(c().m(function e(){return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=null),!this.driver){e.n=5;break}return e.p=1,e.n=2,this.driver.close();case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:this.driver=null;case 5:this.isInitialized=!1,this.connectionRetryCount=0;case 6:return e.a(2)}},e,this,[[1,3]])})),function(){return n.apply(this,arguments)})}],t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,i,o,s,u,d,h}();function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}window.Neo4jConnectionManager=y,window.NEO4J_SESSION_MODES=m;var w={toNeo4jDateTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{year:{low:e.getFullYear(),high:0},month:{low:e.getMonth()+1,high:0},day:{low:e.getDate(),high:0},hour:{low:e.getHours(),high:0},minute:{low:e.getMinutes(),high:0},second:{low:e.getSeconds(),high:0},nanosecond:{low:0,high:0},timeZoneOffsetSeconds:{low:0,high:0}}},fromNeo4jDateTime:function(e){if(!e)return null;if("string"==typeof e)return new Date(e);if(e instanceof Date)return e;try{var t;if(void 0!==(null===(t=e.year)||void 0===t?void 0:t.low)){var r,n,i,o,a="".concat(e.year.low,"-").concat(String(e.month.low).padStart(2,"0"),"-").concat(String(e.day.low).padStart(2,"0"),"T").concat(String((null===(r=e.hour)||void 0===r?void 0:r.low)||0).padStart(2,"0"),":").concat(String((null===(n=e.minute)||void 0===n?void 0:n.low)||0).padStart(2,"0"),":").concat(String((null===(i=e.second)||void 0===i?void 0:i.low)||0).padStart(2,"0"),".").concat(String((null===(o=e.nanosecond)||void 0===o?void 0:o.low)||0).padStart(3,"0"),"Z");return new Date(a)}return new Date(e)}catch(e){return null}},isNeo4jDateTime:function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return!1}if(!e||"object"!==v(e))return!1;return!!["year","month","day","hour","minute","second","nanosecond","timeZoneOffsetSeconds"].every(function(t){return e.hasOwnProperty(t)})&&Object.entries(e).every(function(e){var t=g(e,2),r=(t[0],t[1]);return r&&"object"===v(r)&&"low"in r&&"high"in r&&"number"==typeof r.low&&"number"==typeof r.high})},now:function(){return this.toNeo4jDateTime(new Date)}};function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){A(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function A(e,t,r){return(t=C(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var l=n&&n.prototype instanceof s?n:s,c=Object.create(l.prototype);return R(c,"_invoke",function(r,n,i){var o,s,l,c=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,l=e,f.n=r,a}};function p(r,n){for(s=r,l=n,t=0;!d&&c&&!i&&t<u.length;t++){var i,o=u[t],p=f.p,h=o[2];r>3?(i=h===n)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((i=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<h&&(i=r<3||o[0]>n||n>h)&&(o[4]=r,o[5]=n,f.n=h,s=0))}if(i||r>1)return a;throw d=!0,n}return function(i,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,l=h;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),p(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:r.call(n,f))!==a)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(r,i,o),!0),c}var a={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(R(t={},n,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,R(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,R(d,"constructor",c),R(c,"constructor",l),l.displayName="GeneratorFunction",R(c,i,"GeneratorFunction"),R(d),R(d,i,"Generator"),R(d,n,function(){return this}),R(d,"toString",function(){return"[object Generator]"}),(O=function(){return{w:o,m:f}})()}function R(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}R=function(e,t,r,n){function o(t,r){R(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},R(e,t,r,n)}function x(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function N(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){x(o,n,i,a,s,"next",e)}function s(e){x(o,n,i,a,s,"throw",e)}a(void 0)})}}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function C(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}function M(e,t,r){return t=D(t),function(e,t){if(t&&("object"==S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L()?Reflect.construct(t,r||[],D(e).constructor):t.apply(e,r))}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(L=function(){return!!e})()}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}window.Neo4jDate=w;var j="READ",z="WRITE",U=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=M(this,t,[e])).config=e,r.connectionManager=new y(e),r.session=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e),r=t,n=[{key:"initialize",value:(p=N(O().m(function e(){return O().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.connectionManager.initialize();case 1:return e.a(2)}},e,this)})),function(){return p.apply(this,arguments)})},{key:"close",value:(f=N(O().m(function e(){return O().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.connectionManager.cleanup();case 1:return e.a(2)}},e,this)})),function(){return f.apply(this,arguments)})},{key:"startTransaction",value:(d=N(O().m(function e(){var t,r=arguments;return O().w(function(e){for(;;)if(0===e.n)return t=r.length>0&&void 0!==r[0]?r[0]:"WRITE",e.a(2,this.connectionManager.driver.session({defaultAccessMode:t}))},e,this)})),function(){return d.apply(this,arguments)})},{key:"endTransaction",value:(u=N(O().m(function e(){var t,r=arguments;return O().w(function(e){for(;;)switch(e.n){case 0:null!=(t=r.length>0&&void 0!==r[0]?r[0]:null)&&t.close();case 1:return e.a(2)}},e)})),function(){return u.apply(this,arguments)})},{key:"executeInTransaction",value:(c=N(O().m(function e(t,r){return O().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.executeWrite(function(){var e=N(O().m(function e(t){return O().w(function(e){for(;;)if(0===e.n)return e.a(2,r(t))},e)}));return function(t){return e.apply(this,arguments)}}());case 1:return e.a(2,e.v)}},e)})),function(e,t){return c.apply(this,arguments)})},{key:"executeNeo4jQuery",value:(l=N(O().m(function e(t){var r,n,i,o=arguments;return O().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},n=o.length>2&&void 0!==o[2]?o[2]:j,null!=this.connectionManager){e.n=1;break}throw new Error("Neo4J connection manager has not been initialised.");case 1:return e.p=1,e.n=2,this.connectionManager.executeQuery(t,r,n);case 2:return i=e.v,e.a(2,i.records);case 3:throw e.p=3,e.v;case 4:return e.a(2)}},e,this,[[1,3]])})),function(e){return l.apply(this,arguments)})},{key:"executeRead",value:(s=N(O().m(function e(t,r){var n,i,o,a,s=arguments;return O().w(function(e){for(;;)switch(e.n){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:null,i=s.length>3&&void 0!==s[3]&&s[3],o=s.length>4&&void 0!==s[4]?s[4]:0,a=s.length>5&&void 0!==s[5]?s[5]:0,e.n=1,this.executeInternal(t,I(I({},r),{},{skip:o,limit:a}),n,i,j);case 1:return e.a(2,e.v)}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"executeWrite",value:(a=N(O().m(function e(t,r){var n,i=arguments;return O().w(function(e){for(;;)switch(e.n){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:null,e.n=1,this.executeInternal(t,r,n,!0,z);case 1:return e.a(2,e.v)}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"executeInternal",value:(o=N(O().m(function e(t,r,n,i,o){var a,s;return O().w(function(e){for(;;)switch(e.n){case 0:if(null==n){e.n=2;break}return e.n=1,n.run(t,r);case 1:a=e.v,e.n=4;break;case 2:return e.n=3,this.executeNeo4jQuery(t,r,o);case 3:a=e.v;case 4:if(s=this.normaliseData(a),!i){e.n=6;break}if(!Array.isArray(s)){e.n=5;break}if(!(s.length>0)){e.n=5;break}return e.a(2,s[0]);case 5:return e.a(2,s);case 6:if(!Array.isArray(s)){e.n=7;break}return e.a(2,s);case 7:if(null==s){e.n=8;break}return e.a(2,[s]);case 8:return e.a(2,[]);case 9:return e.a(2)}},e,this)})),function(e,t,r,n,i){return o.apply(this,arguments)})},{key:"normaliseData",value:function(e){var t=this;return e.records?0===e.records.length?null:1===e.records.length?this.normaliseRecord(e.records[0]):e.records.map(function(e){return t.normaliseRecord(e)}):0===e.length?null:1===e.length?this.normaliseNodeset(e[0]):e.map(function(e){return t.normaliseNodeset(e)})}},{key:"normaliseRecord",value:function(e){var t,r={};for(t=0;t<e.keys.length;t++){var n=e.keys[t],i=e._fields[t],o=n.lastIndexOf("."),a=-1===o?n:n.substring(o+1);"object"===S(i)&&this.isDate(i)?r[a]=w.fromNeo4jDateTime(i):"object"===S(i)&&null!=i.toNumber?r[a]=i.toNumber():r[a]=i}return r}},{key:"normaliseNodeset",value:function(e){var t,r={};for(t=0;t<e.length;t++){var n=e.keys[t],i=n.lastIndexOf("."),o=-1===i?n:n.substring(i+1);if(null!=e._fields[t])if(e._fields[t].properties)r[o]=this.normaliseNode(e._fields[t]);else{var a=e._fields[t];"object"===S(a)&&this.isDate(a)?r[o]=w.fromNeo4jDateTime(a):"object"===S(a)?null!=a.toNumber?r[o]=a.toNumber():r[o]=this.normaliseObject(a):r[o]=a}else r[o]=null}return r}},{key:"normaliseNode",value:function(e){for(var t={},r=0,n=Object.entries(e.properties);r<n.length;r++){var i=_(n[r],2),o=i[0],a=i[1];"object"===S(a)&&this.isDate(a)?t[o]=w.fromNeo4jDateTime(a):"object"===S(a)?null!=a.toNumber?t[o]=a.toNumber():t[o]=this.normaliseObject(a):t[o]=a}return t}},{key:"normaliseObject",value:function(e){var t,r=this;if(Array.isArray(e))t=[],e.forEach(function(e){return t.push(r.normaliseObject(e))});else if(this.isPrimitive(e))t=e;else{t={};for(var n=0,i=Object.entries(e);n<i.length;n++){var o=_(i[n],2),a=o[0],s=o[1];null!=s&&"object"===S(s)?this.isDate(s)?t[a]=w.fromNeo4jDateTime(s):t[a]=this.normaliseObject(s):t[a]=s}}return t}},{key:"isDate",value:function(e){if(e&&e.__isInteger__)return!1;var t=new Date(e);return!isNaN(t.getTime())}},{key:"isPrimitive",value:function(e){return e!==Object(e)}}],n&&k(r.prototype,n),i&&k(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i,o,a,s,l,c,u,d,f,p}(n.M)},6579:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e}writeRequest({requestId:e,op:t,processor:r,args:i}){const o=[n.from([129]),this.ioc.uuidSerializer.serialize(e,!1),this.ioc.stringSerializer.serialize(t,!1),this.ioc.stringSerializer.serialize(r,!1),this.ioc.mapSerializer.serialize(i,!1)];return n.concat(o)}}},6580:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{get INT32_MIN(){return-2147483648}get INT32_MAX(){return 2147483647}constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.INT]=this}canBeUsedFor(e){return"number"==typeof e&&!(e<this.INT32_MIN||e>this.INT32_MAX)}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.INT,1]):n.from([0,0,0,0]);const r=[];t&&r.push(n.from([this.ioc.DataType.INT,0]));const i=n.alloc(4);return i.writeInt32BE(e),r.push(i),n.concat(r)}deserialize(e,t=!0){let r=0,i=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(r++,e!==this.ioc.DataType.INT)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<4)throw new Error("unexpected {value} length");r+=4;return{v:i.readInt32BE(),len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},6665:(e,t,r)=>{"use strict";const n=r(5332),i=r(3335).TraversalStrategies,o=n.GraphTraversalSource,a=r(163).Graph;class s{constructor(e){this.traversalSourceClass=e}static traversal(e){return new s(e||o)}withRemote(e){return this.withGraph(new a).withRemote(e)}withGraph(e){return new this.traversalSourceClass(e,new i)}}e.exports=s},6706:(e,t,r)=>{const n=r(5606),i=r(8287),{isReadable:o,isWritable:a,isIterable:s,isNodeStream:l,isReadableNodeStream:c,isWritableNodeStream:u,isDuplexNodeStream:d,isReadableStream:f,isWritableStream:p}=r(6115),h=r(6238),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:g}}=r(6371),{destroyer:b}=r(5896),v=r(3370),w=r(7576),_=r(8584),{createDeferredPromise:E}=r(7760),S=r(6532),T=globalThis.Blob||i.Blob,I=void 0!==T?function(e){return e instanceof T}:function(e){return!1},A=globalThis.AbortController||r(5568).AbortController,{FunctionPrototypeCall:O}=r(4134);class R extends v{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function x(e){const t=e.readable&&"function"!=typeof e.readable.read?w.wrap(e.readable):e.readable,r=e.writable;let n,i,s,l,c,u=!!o(t),d=!!a(r);function f(e){const t=l;l=null,t?t(e):e&&c.destroy(e)}return c=new R({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==r||!r.writableObjectMode),readable:u,writable:d}),d&&(h(r,e=>{d=!1,e&&b(t,e),f(e)}),c._write=function(e,t,i){r.write(e,t)?i():n=i},c._final=function(e){r.end(),i=e},r.on("drain",function(){if(n){const e=n;n=null,e()}}),r.on("finish",function(){if(i){const e=i;i=null,e()}})),u&&(h(t,e=>{u=!1,e&&b(t,e),f(e)}),t.on("readable",function(){if(s){const e=s;s=null,e()}}),t.on("end",function(){c.push(null)}),c._read=function(){for(;;){const e=t.read();if(null===e)return void(s=c._read);if(!c.push(e))return}}),c._destroy=function(e,o){e||null===l||(e=new m),s=null,n=null,i=null,null===l?o(e):(l=o,b(r,e),b(t,e))},c}e.exports=function e(t,r){if(d(t))return t;if(c(t))return x({readable:t});if(u(t))return x({writable:t});if(l(t))return x({writable:!1,readable:!1});if(f(t))return x({readable:w.fromWeb(t)});if(p(t))return x({writable:_.fromWeb(t)});if("function"==typeof t){const{value:e,write:i,final:o,destroy:a}=function(e){let{promise:t,resolve:r}=E();const i=new A,o=i.signal,a=e(async function*(){for(;;){const e=t;t=null;const{chunk:i,done:a,cb:s}=await e;if(n.nextTick(s),a)return;if(o.aborted)throw new m(void 0,{cause:o.reason});({promise:t,resolve:r}=E()),yield i}}(),{signal:o});return{value:a,write(e,t,n){const i=r;r=null,i({chunk:e,done:!1,cb:n})},final(e){const t=r;r=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}(t);if(s(e))return S(R,e,{objectMode:!0,write:i,final:o,destroy:a});const l=null==e?void 0:e.then;if("function"==typeof l){let t;const r=O(l,e,e=>{if(null!=e)throw new g("nully","body",e)},e=>{b(t,e)});return t=new R({objectMode:!0,readable:!1,write:i,final(e){o(async()=>{try{await r,n.nextTick(e,null)}catch(t){n.nextTick(e,t)}})},destroy:a})}throw new g("Iterable, AsyncIterable or AsyncFunction",r,e)}if(I(t))return e(t.arrayBuffer());if(s(t))return S(R,t,{objectMode:!0,writable:!1});if(f(null==t?void 0:t.readable)&&p(null==t?void 0:t.writable))return R.fromWeb(t);if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable)){return x({readable:null!=t&&t.readable?c(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?u(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0})}const i=null==t?void 0:t.then;if("function"==typeof i){let e;return O(i,t,t=>{null!=t&&e.push(t),e.push(null)},t=>{b(e,t)}),e=new R({objectMode:!0,writable:!1,read(){}})}throw new y(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},6792:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(7037))&&n.__esModule?n:{default:n};var o=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};t.default=o},6980:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports={des_error:({serializer:e,args:t,cursor:r,err:i})=>{void 0===r&&(r=t[0]);let o="";r instanceof n&&(r.length>32&&(o="..."),r=r.slice(0,32).toString("hex"));const a=t[1],s=t[2];let l=`${e.constructor.name}.deserialize(cursor=${r}${o}`;return void 0!==a&&(l+=`, fullyQualifiedFormat=${a}`),void 0!==s&&(l+=`, nullable=${s}`),l+=`): ${i.message.replace(/\.$/,"")}.`,i.message=l,i}}},7007:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&m(e,"error",t,r)}(e,i,{once:!0})})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var i,o,a;if(s(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,console&&console.warn}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=u.bind(n);return i.listener=r,n.wrapFn=i,i}function f(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):h(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function h(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else{var c=l.length,u=h(l,c);for(r=0;r<c;++r)n(u[r],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,a;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7037:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(7656))&&n.__esModule?n:{default:n};var o=function(e){return"string"==typeof e&&i.default.test(e)};t.default=o},7092:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e}canBeUsedFor(){}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.LONG,1]):n.from([0,0,0,0,0,0,0,0]);const r=[];t&&r.push(n.from([this.ioc.DataType.LONG,0]));const i=n.alloc(8);return i.writeBigInt64BE(BigInt(e)),r.push(i),n.concat(r)}deserialize(e,t=!0){let r=0,i=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(r++,e!==this.ioc.DataType.LONG)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<8)throw new Error("unexpected {value} length");r+=8;return{v:i.readBigInt64BE(),len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},7100:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e,t){this.ioc=e,this.ID=t,this.ioc.serializers[t]=this}canBeUsedFor(e){return Array.isArray(e)}serialize(e,t=!0){if(null==e)return t?n.from([this.ID,1]):n.from([0,0,0,0]);const r=[];t&&r.push(n.from([this.ID,0]));let i=e.length;if(i<0&&(i=0),i>this.ioc.intSerializer.INT32_MAX)throw new Error(`Array length=${i} is greater than supported max_length=${this.ioc.intSerializer.INT32_MAX}.`);r.push(this.ioc.intSerializer.serialize(i,!1));for(let t=0;t<i;t++)r.push(this.ioc.anySerializer.serialize(e[t]));return n.concat(r)}deserialize(e,t=!0){let r=0,i=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(r++,e!==this.ID)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let o,a;try{({v:o,len:a}=this.ioc.intSerializer.deserialize(i,!1)),r+=a}catch(e){throw e.message="{length}: "+e.message,e}if(o<0)throw new Error("{length} is less than zero");i=i.slice(a);const s=[];for(let e=0;e<o;e++){let t,n;try{({v:t,len:n}=this.ioc.anySerializer.deserialize(i)),r+=n}catch(t){throw t.message=`{item_${e}}: `+t.message,t}i=i.slice(n),s.push(t)}return{v:s,len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},7135:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.UNSPECIFIED_NULL]=this}canBeUsedFor(e){return null==e}serialize(e){return n.from([this.ioc.DataType.UNSPECIFIED_NULL,1])}deserialize(e){let t=0,r=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");const i=r.readUInt8();if(t++,i!==this.ioc.DataType.UNSPECIFIED_NULL)throw new Error("unexpected {type_code}");if(r=r.slice(1),r.length<1)throw new Error("{value_flag} is missing");const o=r.readUInt8();if(t++,1!==o)throw new Error("unexpected {value_flag}");return r=r.slice(1),{v:null,len:t}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:r,err:e})}}}},7186:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(9025)),i=o(r(9042));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v5",80,i.default);t.default=a},7240:(e,t,r)=>{"use strict";const n=r(5737),i=n.RemoteConnection,o=n.RemoteTraversal,a=r(1104),s=r(7545),l=r(9032),c=r(3335).OptionsStrategy;class u extends i{constructor(e,t={}){super(e,t),this._client=new s(e,t)}open(){return this._client.open()}get isOpen(){return this._client.isOpen}submit(e){const t=e.sourceInstructions.find(e=>"withStrategies"===e[0]&&e[1]instanceof c),r=["evaluationTimeout","scriptEvaluationTimeout","batchSize","requestId","userAgent","materializeProperties"];let n;if(void 0!==t){n={};const e=t[1].configuration;for(const t in e)e.hasOwnProperty(t)&&r.indexOf(t)>-1&&(n[t]=e[t])}return this._client.submit(e,null,n).then(e=>new o(e.toArray()))}createSession(){if(this.isSessionBound)throw new Error("Connection is already bound to a session - child sessions are not allowed");const e=Object.assign({},this.options);return e.session=a.getUuid(),new u(this.url,e)}get isSessionBound(){return this.options.session}commit(){return this._client.submit(l.GraphOp.commit,null)}rollback(){return this._client.submit(l.GraphOp.rollback,null)}close(){return this._client.close()}addListener(...e){return this._client.addListener(...e)}removeListener(...e){return this._client.removeListener(...e)}}e.exports=u},7286:e=>{"use strict";class t extends Error{constructor(e,t){super(e),this.name="ResponseError",this.statusCode=t.code,this.statusMessage=t.message,this.statusAttributes=t.attributes||{}}}e.exports=t},7382:(e,t,r)=>{"use strict";const{ObjectSetPrototypeOf:n,Symbol:i}=r(4134);e.exports=c;const{ERR_METHOD_NOT_IMPLEMENTED:o}=r(6371).codes,a=r(3370),{getHighWaterMark:s}=r(5291);n(c.prototype,a.prototype),n(c,a);const l=i("kCallback");function c(e){if(!(this instanceof c))return new c(e);const t=e?s(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),a.call(this,e),this._readableState.sync=!1,this[l]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function u(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,r)=>{t?e?e(t):this.destroy(t):(null!=r&&this.push(r),this.push(null),e&&e())})}function d(){this._final!==u&&u.call(this)}c.prototype._final=u,c.prototype._transform=function(e,t,r){throw new o("_transform()")},c.prototype._write=function(e,t,r){const n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,(e,t)=>{e?r(e):(null!=t&&this.push(t),i.ended||o===n.length||n.length<n.highWaterMark?r():this[l]=r)})},c.prototype._read=function(){if(this[l]){const e=this[l];this[l]=null,e()}}},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=s(e),a=o[0],l=o[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,l)),u=0,d=l>0?a-4:a;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===l&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[u++]=255&t);1===l&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,l=n-i;s<l;s+=a)o.push(c(e,s,s+a>l?l:s+a));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function c(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(l(n));return i.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},7545:(e,t,r)=>{"use strict";const n=r(1104),i=r(4074),o=r(9032);e.exports=class{constructor(e,t={}){this._options=t,"session"===this._options.processor&&(this._options.session=t.session||n.getUuid()),this._options.session&&(this._options.processor=t.processor||"session"),this._connection=new i(e,t)}open(){return this._connection.open()}get isOpen(){return this._connection.isOpen}submit(e,t,r){const n=r&&r.requestId;n&&delete r.requestId;const i=Object.assign({gremlin:e,aliases:{g:this._options.traversalSource||"g"}},r);if(this._options.session&&"session"===this._options.processor&&(i.session=this._options.session),e instanceof o)return this._options.session&&"session"===this._options.processor?this._connection.submit("session","bytecode",i,n):this._connection.submit("traversal","bytecode",i,n);if("string"==typeof e)return i.bindings=t,i.language="gremlin-groovy",i.accept=this._connection.mimeType,this._connection.submit(this._options.processor||"","eval",i,n);throw new TypeError("message must be of type Bytecode or string")}stream(e,t,r){const n=r&&r.requestId;n&&delete r.requestId;const i=Object.assign({gremlin:e,aliases:{g:this._options.traversalSource||"g"}},r);if(this._options.session&&"session"===this._options.processor&&(i.session=this._options.session),e instanceof o)return this._options.session&&"session"===this._options.processor?this._connection.stream("session","bytecode",i,n):this._connection.stream("traversal","bytecode",i,n);if("string"==typeof e)return i.bindings=t,i.language="gremlin-groovy",i.accept=this._connection.mimeType,this._connection.stream(this._options.processor||"","eval",i,n);throw new TypeError("message must be of type Bytecode or string")}close(){if(this._options.session&&"session"===this._options.processor){const e={session:this._options.session};return this._connection.submit(this._options.processor,"close",e,null).then(()=>this._connection.close())}return this._connection.close()}addListener(e,t){this._connection.on(e,t)}removeListener(e,t){this._connection.removeListener(e,t)}}},7576:(e,t,r)=>{"use strict";const n=r(5606),{ArrayPrototypeIndexOf:i,NumberIsInteger:o,NumberIsNaN:a,NumberParseInt:s,ObjectDefineProperties:l,ObjectKeys:c,ObjectSetPrototypeOf:u,Promise:d,SafeSet:f,SymbolAsyncDispose:p,SymbolAsyncIterator:h,Symbol:m}=r(4134);e.exports=W,W.ReadableState=V;const{EventEmitter:y}=r(7007),{Stream:g,prependListener:b}=r(4259),{Buffer:v}=r(8287),{addAbortSignal:w}=r(4147),_=r(6238);let E=r(7760).debuglog("stream",e=>{E=e});const S=r(345),T=r(5896),{getHighWaterMark:I,getDefaultHighWaterMark:A}=r(5291),{aggregateTwoErrors:O,codes:{ERR_INVALID_ARG_TYPE:R,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_OUT_OF_RANGE:N,ERR_STREAM_PUSH_AFTER_EOF:k,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:C},AbortError:M}=r(6371),{validateObject:L}=r(277),D=m("kPaused"),{StringDecoder:P}=r(3141),j=r(6532);u(W.prototype,g.prototype),u(W,g);const z=()=>{},{errorOrDestroy:U}=T,$=1,B=16,F=32,H=2048,q=4096;function G(e){return{enumerable:!1,get(){return 0!==(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function V(e,t,n){"boolean"!=typeof n&&(n=t instanceof r(3370)),this.state=H|q|B|F,e&&e.objectMode&&(this.state|=$),n&&e&&e.readableObjectMode&&(this.state|=$),this.highWaterMark=e?I(this,e,"readableHighWaterMark",n):A(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[D]=null,e&&!1===e.emitClose&&(this.state&=~H),e&&!1===e.autoDestroy&&(this.state&=~q),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new P(e.encoding),this.encoding=e.encoding)}function W(e){if(!(this instanceof W))return new W(e);const t=this instanceof r(3370);this._readableState=new V(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&w(e.signal,this)),g.call(this,e),T.construct(this,()=>{this._readableState.needReadable&&Z(this,this._readableState)})}function Y(e,t,r,n){E("readableAddChunk",t);const i=e._readableState;let o;if(0===(i.state&$)&&("string"==typeof t?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?t=v.from(t,r).toString(i.encoding):(t=v.from(t,r),r=""))):t instanceof v?r="":g._isUint8Array(t)?(t=g._uint8ArrayToBuffer(t),r=""):null!=t&&(o=new R("chunk",["string","Buffer","Uint8Array"],t))),o)U(e,o);else if(null===t)i.state&=-9,function(e,t){if(E("onEofChunk"),t.ended)return;if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?X(e):(t.needReadable=!1,t.emittedReadable=!0,K(e))}(e,i);else if(0!==(i.state&$)||t&&t.length>0)if(n)if(4&i.state)U(e,new C);else{if(i.destroyed||i.errored)return!1;J(e,i,t,!0)}else if(i.ended)U(e,new k);else{if(i.destroyed||i.errored)return!1;i.state&=-9,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||0!==t.length?J(e,i,t,!1):Z(e,i)):J(e,i,t,!1)}else n||(i.state&=-9,Z(e,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function J(e,t,r,n){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(65536&t.state?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),64&t.state&&X(e)),Z(e,t)}l(V.prototype,{objectMode:G($),ended:G(2),endEmitted:G(4),reading:G(8),constructed:G(B),sync:G(F),needReadable:G(64),emittedReadable:G(128),readableListening:G(256),resumeScheduled:G(512),errorEmitted:G(1024),emitClose:G(H),autoDestroy:G(q),destroyed:G(8192),closed:G(16384),closeEmitted:G(32768),multiAwaitDrain:G(65536),readingMore:G(1<<17),dataEmitted:G(1<<18)}),W.prototype.destroy=T.destroy,W.prototype._undestroy=T.undestroy,W.prototype._destroy=function(e,t){t(e)},W.prototype[y.captureRejectionSymbol]=function(e){this.destroy(e)},W.prototype[p]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new M,this.destroy(e)),new d((t,r)=>_(this,n=>n&&n!==e?r(n):t(null)))},W.prototype.push=function(e,t){return Y(this,e,t,!1)},W.prototype.unshift=function(e,t){return Y(this,e,t,!0)},W.prototype.isPaused=function(){const e=this._readableState;return!0===e[D]||!1===e.flowing},W.prototype.setEncoding=function(e){const t=new P(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const r=this._readableState.buffer;let n="";for(const e of r)n+=t.write(e);return r.clear(),""!==n&&r.push(n),this._readableState.length=n.length,this};function Q(e,t){return e<=0||0===t.length&&t.ended?0:0!==(t.state&$)?1:a(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function X(e){const t=e._readableState;E("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(E("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(K,e))}function K(e){const t=e._readableState;E("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ie(e)}function Z(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,n.nextTick(ee,e,t))}function ee(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const r=t.length;if(E("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function te(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[D]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function re(e){E("readable nexttick read 0"),e.read(0)}function ne(e,t){E("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ie(e),t.flowing&&!t.reading&&e.read(0)}function ie(e){const t=e._readableState;for(E("flow",t.flowing);t.flowing&&null!==e.read(););}function oe(e,t){"function"!=typeof e.read&&(e=W.wrap(e,{objectMode:!0}));const r=async function*(e,t){let r,n=z;function i(t){this===e?(n(),n=z):n=t}e.on("readable",i);const o=_(e,{writable:!1},e=>{r=e?O(r,e):null,n(),n=z});try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(r)throw r;if(null===r)return;await new d(i)}}}catch(e){throw r=O(r,e),r}finally{!r&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==r&&!e._readableState.autoDestroy?(e.off("readable",i),o()):T.destroyer(e,null)}}(e,t);return r.stream=e,r}function ae(e,t){if(0===t.length)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function se(e){const t=e._readableState;E("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(le,t,e))}function le(e,t){if(E("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)n.nextTick(ce,t);else if(e.autoDestroy){const e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function ce(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let ue;function de(){return void 0===ue&&(ue={}),ue}W.prototype.read=function(e){E("read",e),void 0===e?e=NaN:o(e)||(e=s(e,10));const t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new N("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return E("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?se(this):X(this),null;if(0===(e=Q(e,t))&&t.ended)return 0===t.length&&se(this),null;let n,i=!!(64&t.state);if(E("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,E("length less than watermark",i)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)i=!1,E("reading, ended or constructing",i);else if(i){E("do read"),t.state|=8|F,0===t.length&&(t.state|=64);try{this._read(t.highWaterMark)}catch(e){U(this,e)}t.state&=~F,t.reading||(e=Q(r,t))}return n=e>0?ae(e,t):null,null===n?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&se(this)),null===n||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",n)),n},W.prototype._read=function(e){throw new x("_read()")},W.prototype.pipe=function(e,t){const r=this,i=this._readableState;1===i.pipes.length&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new f(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(e),E("pipe count=%d opts=%j",i.pipes.length,t);const o=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?s:y;function a(t,n){E("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,function(){E("cleanup"),e.removeListener("close",h),e.removeListener("finish",m),l&&e.removeListener("drain",l);e.removeListener("error",p),e.removeListener("unpipe",a),r.removeListener("end",s),r.removeListener("end",y),r.removeListener("data",d),c=!0,l&&i.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&l()}())}function s(){E("onend"),e.end()}let l;i.endEmitted?n.nextTick(o):r.once("end",o),e.on("unpipe",a);let c=!1;function u(){c||(1===i.pipes.length&&i.pipes[0]===e?(E("false write response, pause",0),i.awaitDrainWriters=e,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(e)&&(E("false write response, pause",i.awaitDrainWriters.size),i.awaitDrainWriters.add(e)),r.pause()),l||(l=function(e,t){return function(){const r=e._readableState;r.awaitDrainWriters===t?(E("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(E("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(t)),r.awaitDrainWriters&&0!==r.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(r,e),e.on("drain",l))}function d(t){E("ondata");const r=e.write(t);E("dest.write",r),!1===r&&u()}function p(t){if(E("onerror",t),y(),e.removeListener("error",p),0===e.listenerCount("error")){const r=e._writableState||e._readableState;r&&!r.errorEmitted?U(e,t):e.emit("error",t)}}function h(){e.removeListener("finish",m),y()}function m(){E("onfinish"),e.removeListener("close",h),y()}function y(){E("unpipe"),r.unpipe(e)}return r.on("data",d),b(e,"error",p),e.once("close",h),e.once("finish",m),e.emit("pipe",r),!0===e.writableNeedDrain?u():i.flowing||(E("pipe resume"),r.resume()),e},W.prototype.unpipe=function(e){const t=this._readableState;if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const r=i(t.pipes,e);return-1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},W.prototype.on=function(e,t){const r=g.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,E("on readable",i.length,i.reading),i.length?X(this):i.reading||n.nextTick(re,this))),r},W.prototype.addListener=W.prototype.on,W.prototype.removeListener=function(e,t){const r=g.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(te,this),r},W.prototype.off=W.prototype.removeListener,W.prototype.removeAllListeners=function(e){const t=g.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(te,this),t},W.prototype.resume=function(){const e=this._readableState;return e.flowing||(E("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(ne,e,t))}(this,e)),e[D]=!1,this},W.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[D]=!0,this},W.prototype.wrap=function(e){let t=!1;e.on("data",r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{U(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const r=c(e);for(let t=1;t<r.length;t++){const n=r[t];void 0===this[n]&&"function"==typeof e[n]&&(this[n]=e[n].bind(e))}return this},W.prototype[h]=function(){return oe(this)},W.prototype.iterator=function(e){return void 0!==e&&L(e,"options"),oe(this,e)},l(W.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),l(V.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[D]},set(e){this[D]=!!e}}}),W._fromList=ae,W.from=function(e,t){return j(W,e,t)},W.fromWeb=function(e,t){return de().newStreamReadableFromReadableStream(e,t)},W.toWeb=function(e,t){return de().newReadableStreamFromStreamReadable(e,t)},W.wrap=function(e,t){var r,n;return new W({objectMode:null===(r=null!==(n=e.readableObjectMode)&&void 0!==n?n:e.objectMode)||void 0===r||r,...t,destroy(t,r){T.destroyer(e,t),r(t)}}).wrap(e)}},7656:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},7758:(e,t,r)=>{const n=r(5606),{ArrayIsArray:i,Promise:o,SymbolAsyncIterator:a,SymbolDispose:s}=r(4134),l=r(6238),{once:c}=r(7760),u=r(5896),d=r(3370),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:y,ERR_STREAM_PREMATURE_CLOSE:g},AbortError:b}=r(6371),{validateFunction:v,validateAbortSignal:w}=r(277),{isIterable:_,isReadable:E,isReadableNodeStream:S,isNodeStream:T,isTransformStream:I,isWebStream:A,isReadableStream:O,isReadableFinished:R}=r(6115),x=globalThis.AbortController||r(5568).AbortController;let N,k,C;function M(e,t,r){let n=!1;e.on("close",()=>{n=!0});return{destroy:t=>{n||(n=!0,u.destroyer(e,t||new y("pipe")))},cleanup:l(e,{readable:t,writable:r},e=>{n=!e})}}function L(e){if(_(e))return e;if(S(e))return async function*(e){k||(k=r(7576));yield*k.prototype[a].call(e)}(e);throw new p("val",["Readable","Iterable","AsyncIterable"],e)}async function D(e,t,r,{end:n}){let i,a=null;const s=e=>{if(e&&(i=e),a){const e=a;a=null,e()}},c=()=>new o((e,t)=>{i?t(i):a=()=>{i?t(i):e()}});t.on("drain",s);const u=l(t,{readable:!1},s);try{t.writableNeedDrain&&await c();for await(const r of e)t.write(r)||await c();n&&(t.end(),await c()),r()}catch(e){r(i!==e?f(i,e):e)}finally{u(),t.off("drain",s)}}async function P(e,t,r,{end:n}){I(t)&&(t=t.writable);const i=t.getWriter();try{for await(const t of e)await i.ready,i.write(t).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(e){try{await i.abort(e),r(e)}catch(e){r(e)}}}function j(e,t,o){if(1===e.length&&i(e[0])&&(e=e[0]),e.length<2)throw new m("streams");const a=new x,l=a.signal,c=null==o?void 0:o.signal,u=[];function f(){$(new b)}let y,g,v;w(c,"options.signal"),C=C||r(7760).addAbortListener,c&&(y=C(c,f));const R=[];let k,j=0;function U(e){$(e,0===--j)}function $(e,r){var i;if(!e||g&&"ERR_STREAM_PREMATURE_CLOSE"!==g.code||(g=e),g||r){for(;R.length;)R.shift()(g);null===(i=y)||void 0===i||i[s](),a.abort(),r&&(g||u.forEach(e=>e()),n.nextTick(t,g,v))}}for(let q=0;q<e.length;q++){const G=e[q],V=q<e.length-1,W=q>0,Y=V||!1!==(null==o?void 0:o.end),J=q===e.length-1;if(T(G)){if(Y){const{destroy:Q,cleanup:X}=M(G,V,W);R.push(Q),E(G)&&J&&u.push(X)}function B(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&U(e)}G.on("error",B),E(G)&&J&&u.push(()=>{G.removeListener("error",B)})}if(0===q)if("function"==typeof G){if(k=G({signal:l}),!_(k))throw new h("Iterable, AsyncIterable or Stream","source",k)}else k=_(G)||S(G)||I(G)?G:d.from(G);else if("function"==typeof G){var F;if(I(k))k=L(null===(F=k)||void 0===F?void 0:F.readable);else k=L(k);if(k=G(k,{signal:l}),V){if(!_(k,!0))throw new h("AsyncIterable",`transform[${q-1}]`,k)}else{var H;N||(N=r(6524));const K=new N({objectMode:!0}),Z=null===(H=k)||void 0===H?void 0:H.then;if("function"==typeof Z)j++,Z.call(k,e=>{v=e,null!=e&&K.write(e),Y&&K.end(),n.nextTick(U)},e=>{K.destroy(e),n.nextTick(U,e)});else if(_(k,!0))j++,D(k,K,U,{end:Y});else{if(!O(k)&&!I(k))throw new h("AsyncIterable or Promise","destination",k);{const re=k.readable||k;j++,D(re,K,U,{end:Y})}}k=K;const{destroy:ee,cleanup:te}=M(k,!1,!0);R.push(ee),J&&u.push(te)}}else if(T(G)){if(S(k)){j+=2;const ne=z(k,G,U,{end:Y});E(G)&&J&&u.push(ne)}else if(I(k)||O(k)){const ie=k.readable||k;j++,D(ie,G,U,{end:Y})}else{if(!_(k))throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],k);j++,D(k,G,U,{end:Y})}k=G}else if(A(G)){if(S(k))j++,P(L(k),G,U,{end:Y});else if(O(k)||_(k))j++,P(k,G,U,{end:Y});else{if(!I(k))throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],k);j++,P(k.readable,G,U,{end:Y})}k=G}else k=d.from(G)}return(null!=l&&l.aborted||null!=c&&c.aborted)&&n.nextTick(f),k}function z(e,t,r,{end:i}){let o=!1;if(t.on("close",()=>{o||r(new g)}),e.pipe(t,{end:!1}),i){function a(){o=!0,t.end()}R(e)?n.nextTick(a):e.once("end",a)}else r();return l(e,{readable:!0,writable:!1},t=>{const n=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once("end",r).once("error",r):r(t)}),l(t,{readable:!1,writable:!0},r)}e.exports={pipelineImpl:j,pipeline:function(...e){return j(e,c(function(e){return v(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}},7760:(e,t,r)=>{"use strict";const n=r(8287),{format:i,inspect:o}=r(9231),{codes:{ERR_INVALID_ARG_TYPE:a}}=r(6371),{kResistStopPropagation:s,AggregateError:l,SymbolDispose:c}=r(4134),u=globalThis.AbortSignal||r(5568).AbortSignal,d=globalThis.AbortController||r(5568).AbortController,f=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||n.Blob,h=void 0!==p?function(e){return e instanceof p}:function(e){return!1},m=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new a(t,"AbortSignal",e)};e.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}},promisify:e=>new Promise((t,r)=>{e((e,...n)=>e?r(e):t(...n))}),debuglog:()=>function(){},format:i,inspect:o,types:{isAsyncFunction:e=>e instanceof f,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:h,deprecate:(e,t)=>e,addAbortListener:r(7007).addAbortListener||function(e,t){if(void 0===e)throw new a("signal","AbortSignal",e);let r;return m(e,"signal"),((e,t)=>{if("function"!=typeof e)throw new a(t,"Function",e)})(t,"listener"),e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[s]:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[c](){var e;null===(e=r)||void 0===e||e()}}},AbortSignalAny:u.any||function(e){if(1===e.length)return e[0];const t=new d,r=()=>t.abort();return e.forEach(e=>{m(e,"signals"),e.addEventListener("abort",r,{once:!0})}),t.signal.addEventListener("abort",()=>{e.forEach(e=>e.removeEventListener("abort",r))},{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},7765:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BULKSET]=this}deserialize(e,t=!0){let r=0,i=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(r++,e!==this.ioc.DataType.BULKSET)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let o,a;try{({v:o,len:a}=this.ioc.intSerializer.deserialize(i,!1)),r+=a}catch(e){throw e.message="{length}: "+e.message,e}if(o<0)throw new Error("{length} is less than zero");i=i.slice(a);let s=new Array;for(let e=0;e<o;e++){let t,n,o,a;try{({v:t,len:n}=this.ioc.anySerializer.deserialize(i)),r+=n}catch(t){throw t.message=`{item_${e}} value: `+t.message,t}i=i.slice(n);try{({v:o,len:a}=this.ioc.longSerializer.deserialize(i,!1)),r+=a}catch(t){throw t.message=`{item_${e}} bulk: `+t.message,t}if(o<0)throw new Error(`{item_${e}}: bulk is less than zero`);if(o>4294967295)throw new Error(`{item_${e}}: bulk is greater than 2^32-1`);i=i.slice(a),o=Number(o);const l=new Array(o).fill(t);s=s.concat(l)}return{v:s,len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},7775:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(7037))&&n.__esModule?n:{default:n};var o=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};t.default=o},7777:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BYTEBUFFER]=this}canBeUsedFor(e){return e instanceof n}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.BYTEBUFFER,1]):n.from([0,0,0,0]);const r=[];t&&r.push(n.from([this.ioc.DataType.BYTEBUFFER,0]));let i=e.length;if(i<0&&(i=0),i>this.ioc.intSerializer.INT32_MAX)throw new Error(`Buffer length=${i} is greater than supported max_length=${this.ioc.intSerializer.INT32_MAX}.`);return r.push(this.ioc.intSerializer.serialize(i,!1)),r.push(e),n.concat(r)}deserialize(e,t=!0){let r=0,i=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(r++,e!==this.ioc.DataType.BYTEBUFFER)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let o,a;try{({v:o,len:a}=this.ioc.intSerializer.deserialize(i,!1)),r+=a}catch(e){throw e.message="{length}: "+e.message,e}if(o<0)throw new Error("{length} is less than zero");if(i=i.slice(a),o!==i.length)throw new Error(`{value}: unexpected actual {value} length=${i.length} when {length}=${o}`);const s=i.slice(0,o);return r+=o,{v:s,len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},7830:(e,t,r)=>{"use strict";const{pipeline:n}=r(7758),i=r(3370),{destroyer:o}=r(5896),{isNodeStream:a,isReadable:s,isWritable:l,isWebStream:c,isTransformStream:u,isWritableStream:d,isReadableStream:f}=r(6115),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=r(6371),y=r(6238);e.exports=function(...e){if(0===e.length)throw new m("streams");if(1===e.length)return i.from(e[0]);const t=[...e];if("function"==typeof e[0]&&(e[0]=i.from(e[0])),"function"==typeof e[e.length-1]){const t=e.length-1;e[t]=i.from(e[t])}for(let r=0;r<e.length;++r)if(a(e[r])||c(e[r])){if(r<e.length-1&&!(s(e[r])||f(e[r])||u(e[r])))throw new h(`streams[${r}]`,t[r],"must be readable");if(r>0&&!(l(e[r])||d(e[r])||u(e[r])))throw new h(`streams[${r}]`,t[r],"must be writable")}let r,g,b,v,w;const _=e[0],E=n(e,function(e){const t=v;v=null,t?t(e):e?w.destroy(e):T||S||w.destroy()}),S=!!(l(_)||d(_)||u(_)),T=!!(s(E)||f(E)||u(E));if(w=new i({writableObjectMode:!(null==_||!_.writableObjectMode),readableObjectMode:!(null==E||!E.readableObjectMode),writable:S,readable:T}),S){if(a(_))w._write=function(e,t,n){_.write(e,t)?n():r=n},w._final=function(e){_.end(),g=e},_.on("drain",function(){if(r){const e=r;r=null,e()}});else if(c(_)){const e=(u(_)?_.writable:_).getWriter();w._write=async function(t,r,n){try{await e.ready,e.write(t).catch(()=>{}),n()}catch(e){n(e)}},w._final=async function(t){try{await e.ready,e.close().catch(()=>{}),g=t}catch(e){t(e)}}}const e=u(E)?E.readable:E;y(e,()=>{if(g){const e=g;g=null,e()}})}if(T)if(a(E))E.on("readable",function(){if(b){const e=b;b=null,e()}}),E.on("end",function(){w.push(null)}),w._read=function(){for(;;){const e=E.read();if(null===e)return void(b=w._read);if(!w.push(e))return}};else if(c(E)){const e=(u(E)?E.readable:E).getReader();w._read=async function(){for(;;)try{const{value:t,done:r}=await e.read();if(!w.push(t))return;if(r)return void w.push(null)}catch{return}}}return w._destroy=function(e,t){e||null===v||(e=new p),b=null,r=null,g=null,null===v?t(e):(v=t,a(E)&&o(E,e))},w}},7956:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}var n=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=null,n=[{key:"showMessage",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.duration,n=void 0===r?5e3:r,i=t.type,o=void 0===i?"success":i,a=t.params,s=void 0===a?{}:a,l=i18n.translate(e,s);showMessage(l,o,n)})},{key:"showSuccess",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;this.showMessage(e,{type:"success",duration:r,params:t})}},{key:"showInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;this.showMessage(e,{type:"info",duration:r,params:t})}},{key:"showWarning",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7e3;this.showMessage(e,{type:"warning",duration:r,params:t})}}],r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();window.MeasureStatusHandler=n},8095:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.MAP]=this}canBeUsedFor(e){return null!=e&&(e instanceof Map||!Array.isArray(e)&&"object"==typeof e)}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.MAP,1]):this.ioc.intSerializer.serialize(0,!1);const r=e instanceof Map,i=r?Array.from(e.keys()):Object.keys(e);let o=i.length;o<0?o=0:o>this.ioc.intSerializer.INT32_MAX&&(o=this.ioc.intSerializer.INT32_MAX);const a=[];t&&a.push(n.from([this.ioc.DataType.MAP,0])),a.push(this.ioc.intSerializer.serialize(o,!1));for(let t=0;t<o;t++){const n=i[t],o=r?e.get(n):e[n];a.push(this.ioc.anySerializer.serialize(n),this.ioc.anySerializer.serialize(o))}return n.concat(a)}deserialize(e,t=!0){let r=0,i=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(r++,e!==this.ioc.DataType.MAP)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let o,a;try{({v:o,len:a}=this.ioc.intSerializer.deserialize(i,!1)),r+=a}catch(e){throw e.message="{length}: "+e.message,e}if(o<0)throw new Error("{length} is less than zero");i=i.slice(a);const s=new Map;for(let e=0;e<o;e++){let t,n,o,a;try{({v:t,len:n}=this.ioc.anySerializer.deserialize(i)),r+=n}catch(t){throw t.message=`{item_${e}} key: `+t.message,t}i=i.slice(n);try{({v:o,len:a}=this.ioc.anySerializer.deserialize(i)),r+=a}catch(t){throw t.message=`{item_${e}} value: `+t.message,t}i=i.slice(a),s.set(t,o)}return{v:s,len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},8209:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,i,o){var s=n&&n.prototype instanceof c?n:c,u=Object.create(s.prototype);return a(u,"_invoke",function(r,n,i){var o,a,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,a=0,s=e,f.n=r,l}};function p(r,n){for(a=r,s=n,t=0;!d&&c&&!i&&t<u.length;t++){var i,o=u[t],p=f.p,h=o[2];r>3?(i=h===n)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=p&&((i=r<2&&p<o[1])?(a=0,f.v=n,f.n=o[1]):p<h&&(i=r<3||o[0]>n||n>h)&&(o[4]=r,o[5]=n,f.n=h,a=0))}if(i||r>1)return l;throw d=!0,n}return function(i,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),a=u,s=h;(t=a<2?e:s)||!d;){o||(a?a<3?(a>1&&(f.n=-1),p(a,s)):f.n=s:f.v=s);try{if(c=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((t=(d=f.n<0)?s:r.call(n,f))!==l)break}catch(t){o=e,a=1,s=t}finally{c=1}}return{value:t,done:d}}}(r,i,o),!0),u}var l={};function c(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(a(t={},n,function(){return this}),t),p=d.prototype=c.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=d,a(p,"constructor",d),a(d,"constructor",u),u.displayName="GeneratorFunction",a(d,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,n,function(){return this}),a(p,"toString",function(){return"[object Generator]"}),(o=function(){return{w:s,m:h}})()}function a(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}a=function(e,t,r,n){function o(t,r){a(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},a(e,t,r,n)}function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function l(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}var d=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialized=!1,this.dynamicElements=new Set,this.translationQueue=new Set,this.translationScheduled=!1},n=[{key:"initializeEventListeners",value:function(){var e=this;i18n.on("localeChanged",function(t){e.updatePageLocalization(t)}),document.querySelectorAll(".locale-option").forEach(function(t){t.addEventListener("click",function(){var t=l(o().m(function t(r){var n;return o().w(function(t){for(;;)switch(t.n){case 0:return n=r.currentTarget.getAttribute("data-locale"),t.n=1,e.handleLocaleChange(n);case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())})}},{key:"handleLocaleChange",value:(a=l(o().m(function e(t){return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.isChangingLocale){e.n=1;break}return e.a(2);case 1:return e.p=1,this.isChangingLocale=!0,document.body.classList.add("changing-locale"),e.n=2,i18n.setLocale(t);case 2:if(e.v){e.n=3;break}throw new Error("Failed to load locale: ".concat(t));case 3:e.n=5;break;case 4:e.p=4,e.v,showError("Failed to change language settings");case 5:return e.p=5,this.isChangingLocale=!1,document.body.classList.remove("changing-locale"),e.f(5);case 6:return e.a(2)}},e,this,[[1,4,5,6]])})),function(e){return a.apply(this,arguments)})},{key:"initializeDynamicElements",value:function(){var e=this;this.dynamicElements=new Set([].concat(r(document.querySelectorAll("[data-i18n]")),r(document.querySelectorAll("[data-i18n-placeholder]")),r(document.querySelectorAll("[data-i18n-aria-label]")),r(document.querySelectorAll("[data-i18n-title]")),r(document.querySelectorAll("[data-i18n-dynamic]")),r(document.querySelectorAll("[data-i18n-date]")),r(document.querySelectorAll("[data-i18n-params]")))),new MutationObserver(function(t){t.forEach(function(t){if("childList"===t.type)t.addedNodes.forEach(function(t){if(t.nodeType===Node.ELEMENT_NODE){var r=[];(t.hasAttribute("data-i18n")||t.hasAttribute("data-i18n-placeholder")||t.hasAttribute("data-i18n-aria-label")||t.hasAttribute("data-i18n-title")||t.hasAttribute("data-i18n-dynamic")||t.hasAttribute("data-i18n-date"))&&(e.dynamicElements.add(t),r.push(t)),t.querySelectorAll("[data-i18n], [data-i18n-placeholder], [data-i18n-aria-label], [data-i18n-title], [data-i18n-dynamic], [data-i18n-date]").forEach(function(t){e.dynamicElements.add(t),r.push(t)}),e.queueForTranslation(r)}});else if("attributes"===t.type){var r=t.target;r.nodeType===Node.ELEMENT_NODE&&(r.hasAttribute("data-i18n")||r.hasAttribute("data-i18n-placeholder")||r.hasAttribute("data-i18n-aria-label")||r.hasAttribute("data-i18n-title")||r.hasAttribute("data-i18n-dynamic")||r.hasAttribute("data-i18n-date")||r.hasAttribute("data-i18n-params"))&&(e.dynamicElements.add(r),e.queueForTranslation([r]))}})}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-i18n","data-i18n-placeholder","data-i18n-aria-label","data-i18n-title","data-i18n-dynamic","data-i18n-date","data-i18n-params"]})}},{key:"updateElementLocalization",value:function(e){try{if(e.hasAttribute("data-i18n")){var r=e.getAttribute("data-i18n"),n=i18n.translate(r);if(n)if("BUTTON"===e.tagName&&e.querySelector(".spinner")){var i=e.querySelector("span[data-i18n]");if(i)i.textContent=n;else{var o=e.querySelector(".spinner");e.innerHTML="",e.appendChild(o);var a=document.createElement("span");a.setAttribute("data-i18n",r),a.textContent=n,e.appendChild(a)}}else e.textContent=n}if(e.hasAttribute("data-i18n-title")){var s=e.getAttribute("data-i18n-title"),l=i18n.translate(s);l&&(e.title=l)}if(e.hasAttribute("data-i18n-placeholder")){var c=e.getAttribute("data-i18n-placeholder"),u=i18n.translate(c);u&&(e.placeholder=u)}if(e.hasAttribute("data-i18n-aria-label")){var d=e.getAttribute("data-i18n-aria-label"),f=i18n.translate(d);f&&e.setAttribute("aria-label",f)}if(e.hasAttribute("data-i18n-title")){var p=e.getAttribute("data-i18n-title"),h=i18n.translate(p);h&&(e.title=h)}if(e.hasAttribute("data-i18n-dynamic")){var m=e.getAttribute("data-i18n-dynamic"),y=e.getAttribute("data-i18n-params"),g=y?JSON.parse(y):{},b=i18n.translate(m,g);b&&(e.textContent=b)}if(e.hasAttribute("data-i18n-date")){var v=e.getAttribute("data-i18n-date"),w=e.getAttribute("data-date");if(w){var _,E="datetime",S="medium";if(v.includes("-")){var T=t(v.split("-"),2);E=T[0],S=T[1]}else S=v;switch(E){case"date":_=i18n.culturalConfig.formatDate(new Date(w),S);break;case"time":_=i18n.culturalConfig.formatTime(new Date(w),S);break;default:_=i18n.culturalConfig.formatDateTime(new Date(w),S)}var I=e.querySelector("i"),A=I?I.outerHTML:"";e.innerHTML=A+_}}}catch(e){}}},{key:"queueForTranslation",value:function(e){var t=this;e.forEach(function(e){return t.translationQueue.add(e)}),this.scheduleTranslation()}},{key:"scheduleTranslation",value:function(){var e=this;this.translationScheduled||(this.translationScheduled=!0,requestAnimationFrame(function(){e.processTranslationQueue(),e.translationScheduled=!1}))}},{key:"processTranslationQueue",value:function(){var e=this;this.translationQueue.forEach(function(t){document.body.contains(t)&&e.updateElementLocalization(t)}),this.translationQueue.clear()}},{key:"updatePageLocalization",value:function(e){var t=this;try{this.dynamicElements.forEach(function(e){document.body.contains(e)?t.updateElementLocalization(e):t.dynamicElements.delete(e)}),document.documentElement.setAttribute("dir",e.direction),document.documentElement.setAttribute("lang",e.locale.split("-")[0]),this.applyCulturalStyles(e.culturalPreferences),window.dispatchEvent(new CustomEvent("localizationUpdated",{detail:e}))}catch(e){}}},{key:"applyCulturalStyles",value:function(e){var t=document.documentElement;t.style.setProperty("--decimal-separator",e.numberFormat.decimal),t.style.setProperty("--grouping-separator",e.numberFormat.group),t.style.setProperty("--time-format",e.timeFormat.short),t.style.setProperty("--date-format",e.dateFormat.medium),t.style.setProperty("--date-time-format",e.dateTimeFormat.medium)}},{key:"initialize",value:function(){this.initialized||(this.initializeDynamicElements(),this.initializeEventListeners(),this.initialized=!0);var e={locale:i18n.currentLocale,direction:i18n.culturalConfig.isRTL()?"rtl":"ltr",culturalPreferences:i18n.culturalConfig.getCulturalPreferences()};this.updatePageLocalization(e)}}],n&&c(e.prototype,n),i&&c(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i,a}();window.localeUI=new d},8287:(e,t,r)=>{"use strict";const n=r(7526),i=r(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|m(e,t);let n=s(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,r);const i=function(e){if(l.isBuffer(e)){const t=0|h(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||Q(e.length)?s(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),s(e<0?0:0|h(e))}function f(e){const t=e.length<0?0:0|h(e.length),r=s(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,l.prototype),n}function h(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(e).length;default:if(i)return n?-1:V(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return x(this,t,r);case"base64":return I(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Q(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let o,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let n=-1;for(o=r;o<s;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===l)return n*a}else-1!==n&&(o-=o-n),n=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){let r=!0;for(let n=0;n<l;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return-1}function w(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let a;for(n>o/2&&(n=o/2),a=0;a<n;++a){const n=parseInt(t.substr(2*a,2),16);if(Q(n))return a;e[r+a]=n}return a}function _(e,t,r,n){return Y(V(t,e.length-r),e,r,n)}function E(e,t,r,n){return Y(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return Y(W(t),e,r,n)}function T(e,t,r,n){return Y(function(e,t){let r,n,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function I(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(l=(31&t)<<6|63&r,l>127&&(o=l));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(l=(15&t)<<12|(63&r)<<6|63&n,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:r=e[i+1],n=e[i+2],s=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=a}return function(e){const t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=O));return r}(n)}t.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!l.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&console.error,Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(J(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=l.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(J(t,Uint8Array))i+t.length>n.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):y.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,r,n,i){if(J(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);const s=Math.min(o,a),c=this.slice(n,i),u=e.slice(t,r);for(let e=0;e<s;++e)if(c[e]!==u[e]){o=c[e],a=u[e];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function R(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function x(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function N(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=X[e[n]];return i}function k(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n,i){F(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function D(e,t,r,n,i){F(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function P(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(e,t,r,n,o){return t=+t,r>>>=0,o||P(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function z(e,t,r,n,o){return t=+t,r>>>=0,o||P(e,0,r,8),i.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=K(function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))}),l.prototype.readBigUInt64BE=K(function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||C(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||C(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=K(function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),l.prototype.readBigInt64BE=K(function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||C(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||C(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||C(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||C(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){M(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){M(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=K(function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=K(function(e,t=0){return D(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);M(this,e,t,r,n-1,-n)}let i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);M(this,e,t,r,n-1,-n)}let i=r-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=K(function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=K(function(e,t=0){return D(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,r){return j(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return j(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return z(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return z(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=l.isBuffer(e)?e:l.from(e,n),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%a]}return this};const U={};function $(e,t,r){U[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function B(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function F(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new U.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||q(t,e.length-(r+1))}(n,i,o)}function H(e,t){if("number"!=typeof e)throw new U.ERR_INVALID_ARG_TYPE(t,"number",e)}function q(e,t,r){if(Math.floor(e)!==e)throw H(e,r),new U.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}$("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),$("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),$("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=B(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=B(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n},RangeError);const G=/[^+/0-9A-Za-z-_]/g;function V(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!=e}const X=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function K(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},8372:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),i=r(1545);e.exports=class{constructor(e){this.ioc=e;const t=e=>{const t={};return Object.values(e).forEach(e=>t[e.elementName]=e),t},r=e.DataType;this.types=[{name:"Barrier",code:r.BARRIER,enum:t(i.barrier)},{name:"Cardinality",code:r.CARDINALITY,enum:t(i.cardinality)},{name:"Column",code:r.COLUMN,enum:t(i.column)},{name:"Direction",code:r.DIRECTION,enum:t(i.direction)},{name:"DT",code:r.DT,enum:t(i.dt)},{name:"Merge",code:r.MERGE,enum:t(i.merge)},{name:"Operator",code:r.OPERATOR,enum:t(i.operator)},{name:"Order",code:r.ORDER,enum:t(i.order)},{name:"Pick",code:r.PICK,enum:t(i.pick)},{name:"Pop",code:r.POP,enum:t(i.pop)},{name:"Scope",code:r.SCOPE,enum:t(i.scope)},{name:"T",code:r.T,enum:t(i.t)}],this.byname={},this.bycode={};for(const e of this.types)this.ioc.serializers[e.code]=this,this.byname[e.name]=e,this.bycode[e.code]=e}canBeUsedFor(e){if(!(e instanceof i.EnumValue))return!1;if(!this.byname[e.typeName])throw new Error(`EnumSerializer.serialize: typeName=${e.typeName} is not supported.`);return!0}serialize(e,t=!0){const r=this.byname[e.typeName];if(void 0===e.elementName||null===e.elementName)return t?n.from([r.code,1]):n.from([this.ioc.DataType.STRING,0,0,0,0,0]);const i=[];return t&&i.push(n.from([r.code,0])),i.push(this.ioc.stringSerializer.serialize(e.elementName,!0)),n.concat(i)}deserialize(e,t=!0){let r=0,o=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");let a,s,l,c;if(t){const e=o.readUInt8();if(r++,a=this.bycode[e],!a)throw new Error(`unexpected {type_code}=${e}`);if(o=o.slice(1),o.length<1)throw new Error("{value_flag} is missing");const t=o.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");o=o.slice(1)}try{({v:s,len:l}=this.ioc.stringSerializer.deserialize(o,!0)),r+=l}catch(e){throw e.message="elementName: "+e.message,e}return o=o.slice(l),c=a?a.enum[s]:new i.EnumValue(void 0,s),{v:c,len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:o,err:e})}}}},8402:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),i=r(9253);e.exports=class extends i{constructor(e){if(super(e),void 0===this._options.username||null===this._options.username||0===this._options.username.length||void 0===this._options.password||null===this._options.password||0===this._options.password.length)throw new Error("Missing credentials for SASL PLAIN mechanism")}get name(){return"PLAIN"}evaluateChallenge(e){return this._hasInitialResponse(e)?Promise.resolve({saslMechanism:this.name,sasl:this._saslArgument(this._options.authzid,this._options.username,this._options.password)}):Promise.resolve({sasl:this._saslArgument(this._options.authzid,this._options.username,this._options.password)})}_saslArgument(e,t,r){return null==e&&(e=""),null==t&&(t=""),void 0!==r&&null!==r.length||(r=""),n.from(`${e}\0${t}\0${r}`).toString("base64")}_hasInitialResponse(e){return null!=e}}},8421:()=>{},8584:(e,t,r)=>{"use strict";const n=r(5606),{ArrayPrototypeSlice:i,Error:o,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:s,ObjectDefineProperties:l,ObjectSetPrototypeOf:c,StringPrototypeToLowerCase:u,Symbol:d,SymbolHasInstance:f}=r(4134);e.exports=L,L.WritableState=C;const{EventEmitter:p}=r(7007),h=r(4259).Stream,{Buffer:m}=r(8287),y=r(5896),{addAbortSignal:g}=r(4147),{getHighWaterMark:b,getDefaultHighWaterMark:v}=r(5291),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:T,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:A,ERR_STREAM_WRITE_AFTER_END:O,ERR_UNKNOWN_ENCODING:R}=r(6371).codes,{errorOrDestroy:x}=y;function N(){}c(L.prototype,h.prototype),c(L,h);const k=d("kOnFinished");function C(e,t,n){"boolean"!=typeof n&&(n=t instanceof r(3370)),this.objectMode=!(!e||!e.objectMode),n&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?b(this,e,"writableHighWaterMark",n):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const i=!(!e||!1!==e.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=z.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,M(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[k]=[]}function M(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function L(e){const t=this instanceof r(3370);if(!t&&!a(L,this))return new L(e);this._writableState=new C(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&g(e.signal,this)),h.call(this,e),y.construct(this,()=>{const e=this._writableState;e.writing||F(this,e),G(this,e)})}function D(e,t,r,i){const o=e._writableState;if("function"==typeof r)i=r,r=o.defaultEncoding;else{if(r){if("buffer"!==r&&!m.isEncoding(r))throw new R(r)}else r=o.defaultEncoding;"function"!=typeof i&&(i=N)}if(null===t)throw new A;if(!o.objectMode)if("string"==typeof t)!1!==o.decodeStrings&&(t=m.from(t,r),r="buffer");else if(t instanceof m)r="buffer";else{if(!h._isUint8Array(t))throw new w("chunk",["string","Buffer","Uint8Array"],t);t=h._uint8ArrayToBuffer(t),r="buffer"}let a;return o.ending?a=new O:o.destroyed&&(a=new T("write")),a?(n.nextTick(i,a),x(e,a,!0),a):(o.pendingcb++,function(e,t,r,n,i){const o=t.objectMode?1:r.length;t.length+=o;const a=t.length<t.highWaterMark;a||(t.needDrain=!0);t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:n,callback:i}),t.allBuffers&&"buffer"!==n&&(t.allBuffers=!1),t.allNoop&&i!==N&&(t.allNoop=!1)):(t.writelen=o,t.writecb=i,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1);return a&&!t.errored&&!t.destroyed}(e,o,t,r,i))}function P(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new T("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function j(e,t,r,n){--t.pendingcb,n(r),B(t),x(e,r)}function z(e,t){const r=e._writableState,i=r.sync,o=r.writecb;"function"==typeof o?(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||(r.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?n.nextTick(j,e,r,t,o):j(e,r,t,o)):(r.buffered.length>r.bufferedIndex&&F(e,r),i?null!==r.afterWriteTickInfo&&r.afterWriteTickInfo.cb===o?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:o,stream:e,state:r},n.nextTick(U,r.afterWriteTickInfo)):$(e,r,1,o))):x(e,new E)}function U({stream:e,state:t,count:r,cb:n}){return t.afterWriteTickInfo=null,$(e,t,r,n)}function $(e,t,r,n){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,n();t.destroyed&&B(t),G(e,t)}function B(e){if(e.writing)return;for(let r=e.bufferedIndex;r<e.buffered.length;++r){var t;const{chunk:n,callback:i}=e.buffered[r],o=e.objectMode?1:n.length;e.length-=o,i(null!==(t=e.errored)&&void 0!==t?t:new T("write"))}const r=e[k].splice(0);for(let t=0;t<r.length;t++){var n;r[t](null!==(n=e.errored)&&void 0!==n?n:new T("end"))}M(e)}function F(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:r,bufferedIndex:n,objectMode:o}=t,a=r.length-n;if(!a)return;let s=n;if(t.bufferProcessing=!0,a>1&&e._writev){t.pendingcb-=a-1;const n=t.allNoop?N:e=>{for(let t=s;t<r.length;++t)r[t].callback(e)},o=t.allNoop&&0===s?r:i(r,s);o.allBuffers=t.allBuffers,P(e,t,!0,t.length,o,"",n),M(t)}else{do{const{chunk:n,encoding:i,callback:a}=r[s];r[s++]=null;P(e,t,!1,o?1:n.length,n,i,a)}while(s<r.length&&!t.writing);s===r.length?M(t):s>256?(r.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}function H(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function q(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let r=!1;function i(i){if(r)x(e,null!=i?i:E());else if(r=!0,t.pendingcb--,i){const r=t[k].splice(0);for(let e=0;e<r.length;e++)r[e](i);x(e,i,t.sync)}else H(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,n.nextTick(V,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(e){i(e)}t.sync=!1}(e,t)))}function G(e,t,r){H(t)&&(q(e,t),0===t.pendingcb&&(r?(t.pendingcb++,n.nextTick((e,t)=>{H(t)?V(e,t):t.pendingcb--},e,t)):H(t)&&(t.pendingcb++,V(e,t))))}function V(e,t){t.pendingcb--,t.finished=!0;const r=t[k].splice(0);for(let e=0;e<r.length;e++)r[e]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}C.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},s(C.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),s(L,f,{__proto__:null,value:function(e){return!!a(this,e)||this===L&&(e&&e._writableState instanceof C)}}),L.prototype.pipe=function(){x(this,new S)},L.prototype.write=function(e,t,r){return!0===D(this,e,t,r)},L.prototype.cork=function(){this._writableState.corked++},L.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||F(this,e))},L.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=u(e)),!m.isEncoding(e))throw new R(e);return this._writableState.defaultEncoding=e,this},L.prototype._write=function(e,t,r){if(!this._writev)throw new _("_write()");this._writev([{chunk:e,encoding:t}],r)},L.prototype._writev=null,L.prototype.end=function(e,t,r){const i=this._writableState;let a;if("function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e){const r=D(this,e,t);r instanceof o&&(a=r)}return i.corked&&(i.corked=1,this.uncork()),a||(i.errored||i.ending?i.finished?a=new I("end"):i.destroyed&&(a=new T("end")):(i.ending=!0,G(this,i,!0),i.ended=!0)),"function"==typeof r&&(a||i.finished?n.nextTick(r,a):i[k].push(r)),this},l(L.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const W=y.destroy;let Y;function J(){return void 0===Y&&(Y={}),Y}L.prototype.destroy=function(e,t){const r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[k].length)&&n.nextTick(B,r),W.call(this,e,t),this},L.prototype._undestroy=y.undestroy,L.prototype._destroy=function(e,t){t(e)},L.prototype[p.captureRejectionSymbol]=function(e){this.destroy(e)},L.fromWeb=function(e,t){return J().newStreamWritableFromWritableStream(e,t)},L.toWeb=function(e){return J().newWritableStreamFromStreamWritable(e)}},8653:e=>{"use strict";e.exports={INT:1,LONG:2,STRING:3,DATE:4,TIMESTAMP:5,CLASS:6,DOUBLE:7,FLOAT:8,LIST:9,MAP:10,SET:11,UUID:12,EDGE:13,PATH:14,PROPERTY:15,GRAPH:16,VERTEX:17,VERTEXPROPERTY:18,BARRIER:19,BINDING:20,BYTECODE:21,CARDINALITY:22,COLUMN:23,DIRECTION:24,OPERATOR:25,ORDER:26,PICK:27,POP:28,LAMBDA:29,P:30,SCOPE:31,T:32,TRAVERSER:33,BIGDECIMAL:34,BIGINTEGER:35,BYTE:36,BYTEBUFFER:37,SHORT:38,BOOLEAN:39,TEXTP:40,TRAVERSALSTRATEGY:41,BULKSET:42,TREE:43,METRICS:44,TRAVERSALMETRICS:45,MERGE:46,DT:47,CHAR:128,DURATION:129,INETADDRESS:130,INSTANT:131,LOCALDATE:132,LOCALDATETIME:133,LOCALTIME:134,MONTHDAY:135,OFFSETDATETIME:136,OFFSETTIME:137,PERIOD:138,YEAR:139,YEARMONTH:140,ZONEDATETIME:141,ZONEOFFSET:142,CUSTOM:0,UNSPECIFIED_NULL:254}},9025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,r){function n(e,n,a,s){var l;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,o.default)(n)),16!==(null===(l=n)||void 0===l?void 0:l.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(n),c.set(e,n.length),c=r(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,a){s=s||0;for(let e=0;e<16;++e)a[s+e]=c[e];return a}return(0,i.unsafeStringify)(c)}try{n.name=e}catch(e){}return n.DNS=a,n.URL=s,n};var n,i=r(9910),o=(n=r(6792))&&n.__esModule?n:{default:n};const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=a;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=s},9032:(e,t,r)=>{"use strict";const{Traversal:n}=r(1545);class i{constructor(e){e?(this.sourceInstructions=[...e.sourceInstructions],this.stepInstructions=[...e.stepInstructions]):(this.sourceInstructions=[],this.stepInstructions=[])}addSource(e,t){if(void 0===e)throw new Error("Name is not defined");const r=new Array(t.length+1);r[0]=e;for(let e=0;e<t.length;++e)r[e+1]=t[e];return this.sourceInstructions.push(i._generateInstruction(e,t)),this}addStep(e,t){if(void 0===e)throw new Error("Name is not defined");return this.stepInstructions.push(i._generateInstruction(e,t)),this}static _generateInstruction(e,t){const r=(t?t.length:0)+1,i=new Array(r);i[0]=e;for(let e=1;e<r;e++){const r=t[e-1];if(r instanceof n&&null!=r.graph)throw new Error(`The child traversal of ${r} was not spawned anonymously - use the __ class rather than a TraversalSource to construct the child traversal`);i[e]=r}return i}toString(){return JSON.stringify([this.sourceInstructions,this.stepInstructions])}static _createGraphOp(e,t){const r=new i;return r.addSource(e,t),r}static get GraphOp(){return{commit:i._createGraphOp("tx",["commit"]),rollback:i._createGraphOp("tx",["rollback"])}}}e.exports=i},9042:(e,t)=>{"use strict";function r(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function n(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a);for(let t=0;t<a;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];s[t]=r}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){const o=new Uint32Array(80);for(let t=0;t<16;++t)o[t]=s[e][t];for(let e=16;e<80;++e)o[e]=n(o[e-3]^o[e-8]^o[e-14]^o[e-16],1);let a=i[0],l=i[1],c=i[2],u=i[3],d=i[4];for(let e=0;e<80;++e){const i=Math.floor(e/20),s=n(a,5)+r(i,l,c,u)+d+t[i]+o[e]>>>0;d=u,u=c,c=n(l,30)>>>0,l=a,a=s}i[0]=i[0]+a>>>0,i[1]=i[1]+l>>>0,i[2]=i[2]+c>>>0,i[3]=i[3]+u>>>0,i[4]=i[4]+d>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]};t.default=i},9198:(e,t,r)=>{"use strict";const n=r(5506),i=r(3095),o=n.Readable.destroy;e.exports=n.Readable,e.exports._uint8ArrayToBuffer=n._uint8ArrayToBuffer,e.exports._isUint8Array=n._isUint8Array,e.exports.isDisturbed=n.isDisturbed,e.exports.isErrored=n.isErrored,e.exports.isReadable=n.isReadable,e.exports.Readable=n.Readable,e.exports.Writable=n.Writable,e.exports.Duplex=n.Duplex,e.exports.Transform=n.Transform,e.exports.PassThrough=n.PassThrough,e.exports.addAbortSignal=n.addAbortSignal,e.exports.finished=n.finished,e.exports.destroy=n.destroy,e.exports.destroy=o,e.exports.pipeline=n.pipeline,e.exports.compose=n.compose,Object.defineProperty(n,"promises",{configurable:!0,enumerable:!0,get:()=>i}),e.exports.Stream=n.Stream,e.exports.default=e.exports},9231:e=>{"use strict";e.exports={format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,r]){const n=t.shift();if("f"===r)return n.toFixed(6);if("j"===r)return JSON.stringify(n);if("s"===r&&"object"==typeof n){return`${n.constructor!==Object?n.constructor.name:""} {}`.trim()}return n.toString()}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}},9253:e=>{"use strict";e.exports=class{constructor(e){this.setopts(e)}get name(){return null}setopts(e){this._options=e}evaluateChallenge(e){throw new Error("evaluateChallenge should be implemented")}}},9285:(e,t,r)=>{"use strict";var n={name:"Measures Management",number:"1.0",buildDate:(new Date).toISOString()};window.APP_VERSION=n;var i=r(1982),o={cosmosdb_force_lowercase:["name","measureName","searchTerm"],CHECK_MEASURE_EXISTS:{neo4j:"\n                OPTIONAL MATCH (m:Measure {id: $measureId})\n                RETURN m IS NOT NULL AS exists\n            ",cosmosdb:"\n                g.V().hasLabel('Measure').has('id', $measureId)\n                .limit(1).fold()\n                .project('exists')\n                .by(coalesce(__.unfold().constant(true), __.constant(false)))\n                .unfold()\n        "},GET_LATEST_MEASURE:{neo4j:'\n                MATCH (m:Measure)\n                WHERE m.id >= $baseId + "-"\n                AND m.id < $baseId + "."\n                RETURN m.id\n                ORDER BY m.id DESC\n                LIMIT 1\n        ',cosmosdb:"\n                g.V().hasLabel('Measure').has('id', startingWith($baseId))\n                .order().by('id', decr).limit(1)\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},CHECK_MEASURE_NAME_EXISTS:{neo4j:"\n            OPTIONAL MATCH (m:Measure)\n            WHERE toLower(m.name) = toLower($measureName)\n            WITH m LIMIT 1\n            RETURN m IS NOT NULL AS exists\n        ",cosmosdb:"\n            g.V().hasLabel('Measure')\n            .has('name', $measureName)\n            .limit(1).fold()\n            .project('exists')\n            .by(coalesce(__.unfold().constant(true), __.constant(false)))\n            .unfold()\n        "},CHECK_MEASURE_ID_EXISTS:{neo4j:"\n            OPTIONAL MATCH (m:Measure {measure_id: $measureId})\n            RETURN m IS NOT NULL AS exists\n        ",cosmosdb:"\n            g.V().hasLabel('Measure')\n            .has('measure_id', $measureId)\n            .limit(1).fold()\n            .project('exists')\n            .by(coalesce(__.unfold().constant(true), __.constant(false)))\n            .unfold()\n        "},CHECK_LIBRARY_EXISTS:{neo4j:"\n                MATCH (library:Library {type: 'Performance Definition'}) \n                RETURN library\n                LIMIT 1\n            ",cosmosdb:"\n                g.V().hasLabel('Library').has('type', 'Performance Definition')\n                .limit(1).fold()\n                .project('exists')\n                .by(coalesce(__.unfold().constant(true), __.constant(false)))\n                .unfold()\n            "},CREATE_LIBRARY:{neo4j:"\n                CREATE (library:Library {\n                    type: 'Performance Definition',\n                    name: 'Performance Definition Library',\n                    created_date: datetime($created_date)\n                })\n                RETURN library\n            ",cosmosdb:"\n                g.addV('Library')\n                .property($partitionkeyproperty, $partitionkeyvalue)\n                .property('type', 'Performance Definition')\n                .property('name', 'Performance Definition Library')\n                .property('created_date', $created_date)\n                .as('library')\n                .select('library')\n            "},GET_AUDIT_HISTORY:{neo4j:"\n            MATCH (m:Measure {id: $measureId})\n            MATCH (m)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})-[:AUDIT_ENTRY]->(entry:Entry {type: 'Audit'})\n            RETURN entry.timestamp AS timestamp, entry.change AS changes, entry.user AS user\n            ORDER BY timestamp DESC\n        ",cosmosdb:"\n            g.V().hasLabel('Measure')\n            .has('id', $measureId)\n            .out('HAS_AUDIT')\n            .out('AUDIT_ENTRY')\n            .order().by('timestamp', decr)\n            .project('timestamp', 'changes', 'user')\n                .by('timestamp')\n                .by('change')\n                .by('user')\n        "},GET_AVAILABLE_DOMAINS:{neo4j:"\n            MATCH (m:Measure)\n            WHERE m.domain IS NOT NULL\n            RETURN DISTINCT m.domain as domain\n            ORDER BY domain\n        ",cosmosdb:"\n            g.V().hasLabel('Measure')\n            .values('domain')\n            .dedup()\n            .order()\n            .project('domain')\n            .by(identity())\n        "},DELETE_MEASURE_BY_NAME:{neo4j:"\n            MATCH (m:Measure)\n            WHERE toLower(m.name) = toLower($measureName)\n            DETACH DELETE m\n        ",cosmosdb:"\n            g.V().hasLabel('Measure').has('name', $measureName)\n            .drop()\n        "},INSERT_MEASURE:{neo4j:"\n                MERGE (library:Library {type: 'Performance Definition'})\n                ON CREATE SET library.name = 'Performance Definition Library',\n                              library.created_date = datetime($created_date)\n                WITH library LIMIT 1\n                CREATE (m:Measure {id: $id})\n                SET m.measure_id = $measure_id,\n                    m.name = $name,\n                    m.description = $description,\n                    m.type = $type,\n                    m.domain = $domain,\n                    m.category = $category,\n                    m.version = $version,\n                    m.safety_critical = $safety_critical,\n                    m.unit = $unit,\n                    m.created_date = datetime($created_date),\n                    m.last_modified_date = datetime($last_modified_date)\n                    \n                /* Base measure properties */\n                FOREACH (ignoreMe IN CASE WHEN $type = 'Base' THEN [1] ELSE [] END |\n                  SET m.measurement_type = $measurement_type,\n                      m.sampling_rate = $sampling_rate,\n                      m.precision = $precision,\n                      m.validation_rules = $validation_rules,\n                      m.alarm_thresholds = $alarm_thresholds\n                )\n                \n                /* Calculated measure properties */\n                FOREACH (ignoreMe IN CASE WHEN $type = 'Calculated' THEN [1] ELSE [] END |\n                  SET m.calculation_type = $calculation_type,\n                      m.normalization_method = $normalization_method,\n                      m.update_frequency = $update_frequency,\n                      m.aggregation_window = $aggregation_window,\n                      m.input_metrics = $input_metrics,\n                      m.formula = $formula\n                )\n                \n                /* Tool measure properties */\n                FOREACH (ignoreMe IN CASE WHEN $type = 'Tool' THEN [1] ELSE [] END |\n                  SET m.tool_id = $tool_id,\n                      m.confidence_threshold = $confidence_threshold,\n                      m.input_metrics = $input_metrics,\n                      m.formula_documentation = $formula_documentation,\n                      m.output_mapping = $output_mapping,\n                      m.tool_parameters = $tool_parameters\n                )\n                \n                CREATE (library)-[:CONTAINS]->(m)\n                RETURN m.id as measureId\n            ",cosmosdb:"\n                g.V().hasLabel('Library').has('type', 'Performance Definition')\n                .as('library')\n                .addV('Measure')\n                .property($partitionkeyproperty, $partitionkeyvalue)\n                .property('id', $id)\n                .property('measure_id', $measure_id)\n                .property('name', $name)\n                .property('description', $description)\n                .property('type', $type)\n                .property('domain', $domain)\n                .property('category', $category)\n                .property('version', $version)\n                .property('safety_critical', $safety_critical)\n                .property('unit', $unit)\n                .property('created_date', $created_date)\n                .property('last_modified_date', $last_modified_date)\n                .choose(__.constant($type).is(eq('Base')),\n                    __.property('measurement_type', $measurement_type)\n                      .property('sampling_rate', $sampling_rate)\n                      .property('precision', $precision)\n                      .property('validation_rules', $validation_rules)\n                      .property('alarm_thresholds', $alarm_thresholds),\n                    __.choose(__.constant($type).is(eq('Calculated')),\n                        __.property('calculation_type', $calculation_type)\n                          .property('normalization_method', $normalization_method)\n                          .property('update_frequency', $update_frequency)\n                          .property('aggregation_window', $aggregation_window)\n                          .property('input_metrics', $input_metrics)\n                          .property('formula', $formula),\n                        __.property('tool_id', $tool_id)\n                          .property('confidence_threshold', $confidence_threshold)\n                          .property('input_metrics', $input_metrics)\n                          .property('formula_documentation', $formula_documentation)\n                          .property('output_mapping', $output_mapping)\n                          .property('tool_parameters', $tool_parameters)\n                    )\n                )\n                .as('measure')\n                .addE('CONTAINS').from('library')\n                .select('measure')\n            "},LOAD_MEASURE:{neo4j:"\n            MATCH (m:Measure {id: $measureId})\n            OPTIONAL MATCH (m)-[r]->(related:Measure)  \n            OPTIONAL MATCH (m)-[:HAS_ENTRY]->(config:Entry {type: 'Measure', category: 'Configuration'})\n            OPTIONAL MATCH (config)-[:ASSIGNED_TO]->(loc:Location)\n            WITH m,\n                COLLECT(DISTINCT CASE WHEN related IS NOT NULL THEN {id: related.id, name: related.name} ELSE null END) AS relatedMeasures,\n                COLLECT(DISTINCT CASE WHEN config IS NOT NULL THEN {\n                    id: config.id,\n                    entry_id: config.entry_id,\n                    type: config.type,\n                    category: config.category,\n                    site: config.site,\n                    target_value: config.target_value,\n                    alarm_thresholds: config.alarm_thresholds,\n                    created_date: config.created_date,\n                    last_modified_date: config.last_modified_date,\n                    location: CASE WHEN loc IS NOT NULL THEN {id: loc.location_id, name: loc.name} ELSE null END\n                } ELSE null END) AS configurations\n            RETURN m {\n                .*,\n                related_measures: [rel IN relatedMeasures WHERE rel IS NOT NULL],\n                configurations: [config IN configurations WHERE config IS NOT NULL]\n            } AS m\n        ",cosmosdb:"\n            g.V().hasLabel('Measure').has('id', $measureId).as('measure')\n                .project('created_date', 'measurement_type', 'precision', 'alarm_thresholds', 'validation_rules', 'safety_critical', 'type',\n                        'sampling_rate', 'version', 'id', 'unit', 'data_source_id', 'last_modified_date', 'category', 'measure_id', 'description',\n                        'name', 'domain', 'related_measures', 'configurations')\n                .by('created_date')\n                .by(coalesce(values('measurement_type'), constant('')))\n                .by(coalesce(values('precision'), constant(0)))\n                .by(coalesce(values('alarm_thresholds'), constant('[]')))\n                .by(coalesce(values('validation_rules'), constant('{}')))\n                .by('safety_critical')\n                .by('type')\n                .by(coalesce(values('sampling_rate'), constant('{}')))\n                .by('version')\n                .by('id')\n                .by('unit')\n                .by(coalesce(values('data_source_id'), constant('')))\n                .by('last_modified_date')\n                .by('category')\n                .by('measure_id')\n                .by('description')\n                .by('name')\n                .by('domain')\n                .by(out('USES')\n                    .project('name','id')\n                    .by('name')\n                    .by('id')\n                    .fold())\n                .by(out('HAS_ENTRY').has('type', 'Measure').has('category', 'Configuration')\n                    .project('site', 'created_date', 'id', 'entry_id', 'last_modified_date', 'category', 'alarm_thresholds', 'type', 'target_value', 'location')\n                    .by('site')\n                    .by('created_date')\n                    .by('id')\n                    .by('entry_id')\n                    .by('last_modified_date')\n                    .by('category')\n                    .by('alarm_thresholds')\n                    .by('type')\n                    .by('target_value')\n                    .by(out('ASSIGNED_TO')\n                        .project('id','name')\n                        .by('id')\n                        .by('name'))\n                    .fold())\n                    .project('m')\n                    .by(identity())\n        "},LOAD_BATCHED_MEASURES:{neo4j:"\n                MATCH (m:Measure)\n                WHERE (size($typeConditions) = 0 OR m.type IN $typeConditions)\n                AND (size($domainConditions) = 0 OR m.domain IN $domainConditions)\n                AND ($searchTerm = '' OR \n                    toLower(m.name) CONTAINS toLower($searchTerm) OR\n                    toLower(m.id) CONTAINS toLower($searchTerm) OR\n                    toLower(m.measure_id) CONTAINS toLower($searchTerm))\n                RETURN m.author,\n                    m.created_date,\n                    m.id,\n                    m.last_modified_date,\n                    m.name,\n                    m.category,\n                    m.type,\n                    m.domain\n                ORDER BY m.name\n                SKIP toInteger($skip)\n                LIMIT toInteger($limit)\n            ",cosmosdb:"\n                g.V().hasLabel('Measure')\n                .has('type', within($typeConditions))\n                .has('domain', within($domainConditions))\n                .where(\n                    __.choose(\n                        __.constant($searchTerm).is(''),\n                        __.identity(),\n                        __.or(\n                            __.has('name', TextP.containing($searchTerm)),\n                            __.has('id', TextP.containing($searchTerm)),\n                            __.has('measure_id', TextP.containing($searchTerm))\n                        )\n                    )\n                )\n                .order().by('name', incr)\n                .range($skip, $limit)\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n            "},UPDATE_MEASURE:{neo4j:"\n                MATCH (m:Measure {id: $id})\n                WITH m\n                MATCH (library:Library {type: 'Performance Definition'})\n                WITH m, library LIMIT 1\n                SET m.measure_id = $measure_id,\n                    m.name = $name,\n                    m.description = $description,\n                    m.type = $type,\n                    m.domain = $domain,\n                    m.category = $category,\n                    m.version = $version,\n                    m.safety_critical = $safety_critical,\n                    m.unit = $unit,\n                    m.last_modified_date = datetime($last_modified_date)\n                    \n                /* Remove old type-specific properties */\n                REMOVE m.measurement_type, m.sampling_rate, m.precision, m.validation_rules, m.alarm_thresholds,\n                    m.calculation_type, m.normalization_method, m.update_frequency, m.aggregation_window, \n                    m.input_metrics, m.formula, m.tool_id, m.confidence_threshold, m.formula_documentation,\n                    m.output_mapping, m.tool_parameters\n                    \n                /* Base measure properties */\n                FOREACH (ignoreMe IN CASE WHEN $type = 'Base' THEN [1] ELSE [] END |\n                SET m.measurement_type = $measurement_type,\n                    m.sampling_rate = $sampling_rate,\n                    m.precision = $precision,\n                    m.validation_rules = $validation_rules,\n                    m.alarm_thresholds = $alarm_thresholds\n                )\n\n                /* Calculated measure properties */\n                FOREACH (ignoreMe IN CASE WHEN $type = 'Calculated' THEN [1] ELSE [] END |\n                SET m.calculation_type = $calculation_type,\n                    m.normalization_method = $normalization_method,\n                    m.update_frequency = $update_frequency,\n                    m.aggregation_window = $aggregation_window,\n                    m.input_metrics = $input_metrics,\n                    m.formula = $formula\n                )\n\n                /* Tool measure properties */\n                FOREACH (ignoreMe IN CASE WHEN $type = 'Tool' THEN [1] ELSE [] END |\n                SET m.tool_id = $tool_id,\n                    m.confidence_threshold = $confidence_threshold,\n                    m.input_metrics = $input_metrics,\n                    m.formula_documentation = $formula_documentation,\n                    m.output_mapping = $output_mapping,\n                    m.tool_parameters = $tool_parameters\n                )\n\n                MERGE (library)-[:CONTAINS]->(m)\n            ",cosmosdb:"\n                g.V().hasLabel('Measure').has('id', $id)\n                    .properties('measurement_type', 'sampling_rate', 'precision', 'validation_rules', 'alarm_thresholds',\n                           'calculation_type', 'normalization_method', 'update_frequency', 'aggregation_window', \n                           'input_metrics', 'formula', 'tool_id', 'confidence_threshold', 'formula_documentation',\n                           'output_mapping', 'tool_parameters').drop()\n                .property('measure_id', $measure_id)\n                .property('name', $name)\n                .property('description', $description)\n                .property('type', $type)\n                .property('domain', $domain)\n                .property('category', $category)\n                .property('version', $version)\n                .property('safety_critical', $safety_critical)\n                .property('unit', $unit)\n                .property('last_modified_date', $last_modified_date)\n                .choose(__.constant($type).is(eq('Base')),\n                    __.property('measurement_type', $measurement_type)\n                      .property('sampling_rate', $sampling_rate)\n                      .property('precision', $precision)\n                      .property('validation_rules', $validation_rules)\n                      .property('alarm_thresholds', $alarm_thresholds),\n                    __.choose(__.constant($type).is(eq('Calculated')),\n                        __.property('calculation_type', $calculation_type)\n                          .property('normalization_method', $normalization_method)\n                          .property('update_frequency', $update_frequency)\n                          .property('aggregation_window', $aggregation_window)\n                          .property('input_metrics', $input_metrics)\n                          .property('formula', $formula),\n                        __.property('tool_id', $tool_id)\n                          .property('confidence_threshold', $confidence_threshold)\n                          .property('input_metrics', $input_metrics)\n                          .property('formula_documentation', $formula_documentation)\n                          .property('output_mapping', $output_mapping)\n                          .property('tool_parameters', $tool_parameters)\n                    )\n                )\n                .as('measure')\n                .select('measure')\n            "},WRITE_AUDIT_INFO:{neo4j:"\n                MATCH (m:Measure {id: $measureId})\n                MERGE (m)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n                ON CREATE SET audit.id = $auditId,\n                    audit.type = 'Audit', \n                    audit.created_date = datetime()\n                WITH m, audit\n                CREATE (audit)-[:AUDIT_ENTRY]->(entry:Entry {\n                    created_date: datetime(),\n                    timestamp: $timestamp,\n                    id: $entryId,\n                    type: 'Audit',\n                    user: $currentUser,\n                    change: $stringifiedChanges\n                })\n                RETURN entry.timestamp as lastTimestamp\n            ",cosmosdb:"\n                g.V().haslabel('Measure').has('id',$measureId)\n                .as('measure')\n                .coalesce(\n                    outE('HAS_AUDIT').inV(),\n                    addV('Artifact')\n                        .property($partitionkeyproperty, $partitionkeyvalue)\n                        .property('id', $auditId)\n                        .property('type', 'Audit')\n                        .property('created_date', $audit_created_date)\n                        .as('newAudit')\n                        .addE('HAS_AUDIT')\n                        .from('measure')\n                        .to('newAudit')\n                        .select('newAudit')\n                )\n                .as('audit')\n                .addV('Entry')\n                    .property($partitionkeyproperty, $partitionkeyvalue)\n                    .property('id', $entryId)\n                    .property('type', 'Audit')\n                    .property('created_date', $audit_created_date)\n                    .property('timestamp', $timestamp)\n                    .property('user', $currentUser)\n                    .property('change', $stringifiedChanges)\n                    .as('entry')\n                    .addE('AUDIT_ENTRY')\n                    .from('audit')\n                    .to('entry')\n            "},LOAD_ALL_MEASURES:{neo4j:"\n            MATCH (m:Measure)\n            RETURN m.id as id, m.name as name\n            ORDER BY m.name\n        ",cosmosdb:"\n            g.V().hasLabel('Measure')\n            .order().by('name', incr)\n            .project('id', 'name')\n            .by('id')\n            .by('name')\n        "},DELETE_MEASURE_RELATIONSHIPS:{neo4j:"\n            MATCH (m:Measure {id: $measureId})-[r:USES]->(related:Measure)\n            DELETE r\n        ",cosmosdb:"\n            g.V().hasLabel('Measure').has('id', $measureId)\n            .outE('USES').drop()\n        "},CREATE_MEASURE_RELATIONSHIP:{neo4j:"\n            MATCH (m:Measure {id: $measureId})\n            MATCH (related:Measure {id: $relatedMeasureId})\n            WHERE m <> related \n            MERGE (m)-[r:USES]->(related)\n            RETURN m.id as measureId, related.id as relatedMeasureId, type(r) as relationshipType\n        ",cosmosdb:"\n            g.V().hasLabel('Measure').has('id', $measureId).as('source')\n            .V().hasLabel('Measure').has('id', $relatedMeasureId).as('target')\n            .addE('USES').from('source').to('target')\n        "},INSERT_BASE_MEASURE:{neo4j:"\n            MATCH (library:Library {type: 'Performance Definition'})\n            CREATE (m:Measure {\n                id: $id,\n                measure_id: $measure_id,\n                name: $name,\n                description: $description,\n                type: $type,\n                domain: $domain,\n                category: $category,\n                version: $version,\n                safety_critical: $safety_critical,\n                unit: $unit,\n                created_date: datetime($created_date),\n                last_modified_date: datetime($last_modified_date),\n                \n                /* Base-specific properties */\n                measurement_type: $measurement_type,\n                sampling_rate: $sampling_rate,\n                precision: $precision,\n                validation_rules: $validation_rules,\n                alarm_thresholds: $alarm_thresholds\n            })\n            CREATE (library)-[:CONTAINS]->(m)\n            RETURN m.id as measureId\n        ",cosmosdb:"\n            g.V().hasLabel('Library').has('type', 'Performance Definition')\n            .as('library')\n            .addV('Measure')\n            .property($partitionkeyproperty, $partitionkeyvalue)\n            .property('id', $id)\n            .property('measure_id', $measure_id)\n            .property('name', $name)\n            .property('description', $description)\n            .property('type', $type)\n            .property('domain', $domain)\n            .property('category', $category)\n            .property('version', $version)\n            .property('safety_critical', $safety_critical)\n            .property('unit', $unit)\n            .property('created_date', $created_date)\n            .property('last_modified_date', $last_modified_date)\n            // Base-specific properties\n            .property('measurement_type', $measurement_type)\n            .property('sampling_rate', $sampling_rate)\n            .property('precision', $precision)\n            .property('validation_rules', $validation_rules)\n            .property('alarm_thresholds', $alarm_thresholds)\n            .as('measure')\n            .addE('CONTAINS').from('library')\n            .select('measure')\n        "},UPDATE_BASE_MEASURE:{neo4j:"\n            MATCH (m:Measure {id: $id})\n            SET m.measure_id = $measure_id,\n                m.name = $name,\n                m.description = $description,\n                m.type = $type,\n                m.domain = $domain,\n                m.category = $category,\n                m.version = $version,\n                m.safety_critical = $safety_critical,\n                m.unit = $unit,\n                m.last_modified_date = datetime($last_modified_date),\n                \n                /* Base-specific properties */\n                m.measurement_type = $measurement_type,\n                m.sampling_rate = $sampling_rate,\n                m.precision = $precision,\n                m.validation_rules = $validation_rules,\n                m.alarm_thresholds = $alarm_thresholds\n                \n            /* Remove other type-specific properties if they exist */\n            REMOVE m.calculation_type, m.normalization_method, m.update_frequency, \n                   m.aggregation_window, m.input_metrics, m.formula, m.tool_id, \n                   m.confidence_threshold, m.formula_documentation, m.output_mapping, \n                   m.tool_parameters\n        ",cosmosdb:"\n            g.V().hasLabel('Measure').has('id', $id)\n            // Set common and base-specific properties\n            .property('measure_id', $measure_id)\n            .property('name', $name)\n            .property('description', $description)\n            .property('type', $type)\n            .property('domain', $domain)\n            .property('category', $category)\n            .property('version', $version)\n            .property('safety_critical', $safety_critical)\n            .property('unit', $unit)\n            .property('last_modified_date', $last_modified_date)\n            // Base-specific properties\n            .property('measurement_type', $measurement_type)\n            .property('sampling_rate', $sampling_rate)\n            .property('precision', $precision)\n            .property('validation_rules', $validation_rules)\n            .property('alarm_thresholds', $alarm_thresholds)\n            // Remove all type-specific properties that don't apply to base measures\n            .union(\n                constant($id),\n                properties('calculation_type', 'normalization_method', 'update_frequency', \n                           'aggregation_window', 'input_metrics', 'formula', 'tool_id', \n                           'confidence_threshold', 'formula_documentation', 'output_mapping', \n                           'tool_parameters').drop())\n            .tail(1)\n        "},INSERT_CALCULATED_MEASURE:{neo4j:"\n            MATCH (library:Library {type: 'Performance Definition'})\n            CREATE (m:Measure {\n                id: $id,\n                measure_id: $measure_id,\n                name: $name,\n                description: $description,\n                type: $type,\n                domain: $domain,\n                category: $category,\n                version: $version,\n                safety_critical: $safety_critical,\n                unit: $unit,\n                created_date: datetime($created_date),\n                last_modified_date: datetime($last_modified_date),\n                \n                /* Calculated-specific properties */\n                calculation_type: $calculation_type,\n                normalization_method: $normalization_method,\n                update_frequency: $update_frequency,\n                aggregation_window: $aggregation_window,\n                input_metrics: $input_metrics,\n                formula: $formula\n            })\n            CREATE (library)-[:CONTAINS]->(m)\n            RETURN m.id as measureId\n        ",cosmosdb:"\n            g.V().hasLabel('Library').has('type', 'Performance Definition')\n            .as('library')\n            .addV('Measure')\n            .property($partitionkeyproperty, $partitionkeyvalue)\n            .property('id', $id)\n            .property('measure_id', $measure_id)\n            .property('name', $name)\n            .property('description', $description)\n            .property('type', $type)\n            .property('domain', $domain)\n            .property('category', $category)\n            .property('version', $version)\n            .property('safety_critical', $safety_critical)\n            .property('unit', $unit)\n            .property('created_date', $created_date)\n            .property('last_modified_date', $last_modified_date)\n            // Calculated-specific properties\n            .property('calculation_type', $calculation_type)\n            .property('normalization_method', $normalization_method)\n            .property('update_frequency', $update_frequency)\n            .property('aggregation_window', $aggregation_window)\n            .property('input_metrics', $input_metrics)\n            .property('formula', $formula)\n            .as('measure')\n            .addE('CONTAINS').from('library')\n            .select('measure')\n        "},UPDATE_CALCULATED_MEASURE:{neo4j:"\n            MATCH (m:Measure {id: $id})\n            SET m.measure_id = $measure_id,\n                m.name = $name,\n                m.description = $description,\n                m.type = $type,\n                m.domain = $domain,\n                m.category = $category,\n                m.version = $version,\n                m.safety_critical = $safety_critical,\n                m.unit = $unit,\n                m.last_modified_date = datetime($last_modified_date),\n                \n                /* Calculated-specific properties */\n                m.calculation_type = $calculation_type,\n                m.normalization_method = $normalization_method,\n                m.update_frequency = $update_frequency,\n                m.aggregation_window = $aggregation_window,\n                m.input_metrics = $input_metrics,\n                m.formula = $formula\n                \n            /* Remove other type-specific properties if they exist */\n            REMOVE m.measurement_type, m.sampling_rate, m.precision, m.validation_rules,\n                   m.alarm_thresholds, m.tool_id, m.confidence_threshold, \n                   m.formula_documentation, m.output_mapping, m.tool_parameters\n        ",cosmosdb:"\n            g.V().hasLabel('Measure').has('id', $id)\n            .property('measure_id', $measure_id)\n            .property('name', $name)\n            .property('description', $description)\n            .property('type', $type)\n            .property('domain', $domain)\n            .property('category', $category)\n            .property('version', $version)\n            .property('safety_critical', $safety_critical)\n            .property('unit', $unit)\n            .property('last_modified_date', $last_modified_date)\n            // Calculated-specific properties\n            .property('calculation_type', $calculation_type)\n            .property('normalization_method', $normalization_method)\n            .property('update_frequency', $update_frequency)\n            .property('aggregation_window', $aggregation_window)\n            .property('input_metrics', $input_metrics)\n            .property('formula', $formula)\n            // Remove properties that don't apply to calculated measures\n            .union(\n                constant($id),\n                .properties('measurement_type', 'sampling_rate', 'precision', 'validation_rules',\n                            'alarm_thresholds', 'tool_id', 'confidence_threshold', \n                            'formula_documentation', 'output_mapping', 'tool_parameters').drop())\n            .tail(1)\n        "},INSERT_TOOL_MEASURE:{neo4j:"\n            MATCH (library:Library {type: 'Performance Definition'})\n            CREATE (m:Measure {\n                id: $id,\n                measure_id: $measure_id,\n                name: $name,\n                description: $description,\n                type: $type,\n                domain: $domain,\n                category: $category,\n                version: $version,\n                safety_critical: $safety_critical,\n                unit: $unit,\n                created_date: datetime($created_date),\n                last_modified_date: datetime($last_modified_date),\n                \n                /* Tool-specific properties */\n                tool_id: $tool_id,\n                confidence_threshold: $confidence_threshold,\n                input_metrics: $input_metrics,\n                formula_documentation: $formula_documentation,\n                output_mapping: $output_mapping,\n                tool_parameters: $tool_parameters\n            })\n            CREATE (library)-[:CONTAINS]->(m)\n            RETURN m.id as measureId\n        ",cosmosdb:"\n            g.V().hasLabel('Library').has('type', 'Performance Definition')\n            .as('library')\n            .addV('Measure')\n            .property($partitionkeyproperty, $partitionkeyvalue)\n            .property('id', $id)\n            .property('measure_id', $measure_id)\n            .property('name', $name)\n            .property('description', $description)\n            .property('type', $type)\n            .property('domain', $domain)\n            .property('category', $category)\n            .property('version', $version)\n            .property('safety_critical', $safety_critical)\n            .property('unit', $unit)\n            .property('created_date', $created_date)\n            .property('last_modified_date', $last_modified_date)\n            // Tool-specific properties\n            .property('tool_id', $tool_id)\n            .property('confidence_threshold', $confidence_threshold)\n            .property('input_metrics', $input_metrics)\n            .property('formula_documentation', $formula_documentation)\n            .property('output_mapping', $output_mapping)\n            .property('tool_parameters', $tool_parameters)\n            .as('measure')\n            .addE('CONTAINS').from('library')\n            .select('measure')\n        "},UPDATE_TOOL_MEASURE:{neo4j:"\n            MATCH (m:Measure {id: $id})\n            SET m.measure_id = $measure_id,\n                m.name = $name,\n                m.description = $description,\n                m.type = $type,\n                m.domain = $domain,\n                m.category = $category,\n                m.version = $version,\n                m.safety_critical = $safety_critical,\n                m.unit = $unit,\n                m.last_modified_date = datetime($last_modified_date),\n                \n                /* Tool-specific properties */\n                m.tool_id = $tool_id,\n                m.confidence_threshold = $confidence_threshold,\n                m.input_metrics = $input_metrics,\n                m.formula_documentation = $formula_documentation,\n                m.output_mapping = $output_mapping,\n                m.tool_parameters = $tool_parameters\n                \n            /* Remove other type-specific properties if they exist */\n            REMOVE m.measurement_type, m.sampling_rate, m.precision, m.validation_rules,\n                   m.alarm_thresholds, m.calculation_type, m.normalization_method, \n                   m.update_frequency, m.aggregation_window, m.formula\n        ",cosmosdb:"\n            g.V().hasLabel('Measure').has('id', $id)\n            // Now set common and tool-specific properties\n            .property('measure_id', $measure_id)\n            .property('name', $name)\n            .property('description', $description)\n            .property('type', $type)\n            .property('domain', $domain)\n            .property('category', $category)\n            .property('version', $version)\n            .property('safety_critical', $safety_critical)\n            .property('unit', $unit)\n            .property('last_modified_date', $last_modified_date)\n            // Tool-specific properties\n            .property('tool_id', $tool_id)\n            .property('confidence_threshold', $confidence_threshold)\n            .property('input_metrics', $input_metrics)\n            .property('formula_documentation', $formula_documentation)\n            .property('output_mapping', $output_mapping)\n            .property('tool_parameters', $tool_parameters)\n            // Remove all type-specific properties\n            .union(\n                constant($id),\n                .properties('measurement_type', 'sampling_rate', 'precision', 'validation_rules',\n                            'alarm_thresholds', 'calculation_type', 'normalization_method', \n                            'update_frequency', 'aggregation_window', 'formula').drop())\n            .tail(1)\n        "},LOAD_LOCATIONS:{neo4j:"\n                MATCH (l:Location)\n                RETURN l.location_id as id, l.name as name, l.site as site\n                ORDER BY l.name\n        ",cosmosdb:"\n                g.V().hasLabel('Location')\n                .order().by('name')\n                .project('id', 'name', 'site')\n                .by('location_id')\n                .by('name')\n                .by(coalesce(values('site'), constant('')))\n        "},CREATE_CONFIGURATION:{neo4j:"\n            MATCH (m:Measure {id: $measureId})\n            MATCH (l:Location {location_id: $locationId})\n            CREATE (config:Entry {\n                id: $configId,\n                entry_id: $entryId,\n                type: 'Measure',\n                category: 'Configuration',\n                site: $site,\n                target_value: $targetValue,\n                alarm_thresholds: $alarmThresholds,\n                created_date: datetime($createdDate),\n                last_modified_date: datetime($lastModifiedDate)\n            })\n            CREATE (m)-[:HAS_ENTRY]->(config)\n            CREATE (config)-[:ASSIGNED_TO]->(l)\n            RETURN config.id as configId\n        ",cosmosdb:"\n            g.V().hasLabel('Measure').has('id', $measureId).as('measure')\n            .V().hasLabel('Location').has('location_id', $locationId).as('location')\n            .addV('Entry')\n            .property($partitionkeyproperty, $partitionkeyvalue)\n            .property('id', $configId)\n            .property('entry_id', $entryId)\n            .property('type', 'Measure')\n            .property('category', 'Configuration')\n            .property('site', $site)\n            .property('target_value', $targetValue)\n            .property('alarm_thresholds', $alarmThresholds)\n            .property('created_date', $createdDate)\n            .property('last_modified_date', $lastModifiedDate)\n            .as('config')\n            .addE('HAS_ENTRY').from('measure').to('config')\n            .addE('ASSIGNED_TO').from('config').to('location')\n            .select('config')\n        "},UPDATE_CONFIGURATION:{neo4j:"\n            MATCH (config:Entry {id: $configId})\n            OPTIONAL MATCH (config)-[oldRel:ASSIGNED_TO]->()\n            DELETE oldRel\n            WITH config\n            MATCH (l:Location {location_id: $locationId})\n            SET config.entry_id = $entryId,\n                config.site = $site,\n                config.target_value = $targetValue,\n                config.alarm_thresholds = $alarmThresholds,\n                config.last_modified_date = datetime($lastModifiedDate)\n            CREATE (config)-[:ASSIGNED_TO]->(l)\n            RETURN config.id as configId\n        ",cosmosdb:"\n            g.V().hasLabel('Entry').has('id', $configId).as('config')\n            //.outE('ASSIGNED_TO').drop()\n            .select('config')\n            .property('entry_id', $entryId)\n            .property('site', $site)\n            .property('target_value', $targetValue)\n            .property('alarm_thresholds', $alarmThresholds)\n            .property('last_modified_date', $lastModifiedDate)\n            .as('updatedConfig')\n            //.V().hasLabel('Location').has('location_id', $locationId).as('location')\n            //.addE('ASSIGNED_TO').from('updatedConfig').to('location')\n            .select('updatedConfig')\n        "},DELETE_CONFIGURATION:{neo4j:"\n            MATCH (config:Entry {id: $configId})\n            DETACH DELETE config\n        ",cosmosdb:"\n            g.V().hasLabel('Entry').has('id', $configId).drop()\n        "},DELETE_ALL_MEASURE_CONFIGURATIONS:{neo4j:"\n            MATCH (m:Measure {id: $measureId})-[:HAS_ENTRY]->(config:Entry {type: 'Measure', category: 'Configuration'})\n            DETACH DELETE config\n        ",cosmosdb:"\n            g.V().hasLabel('Measure').has('id', $measureId)\n            .out('HAS_ENTRY').hasLabel('Entry')\n            .has('type', 'Measure').has('category', 'Configuration')\n            .drop()\n        "},CHECK_ENTRY_ID_EXISTS:{neo4j:"\n            OPTIONAL MATCH (config:Entry {type: 'Measure', category: 'Configuration'})\n            WHERE config.entry_id = $entryId\n            RETURN config IS NOT NULL AS exists\n        ",cosmosdb:"\n            g.V().hasLabel('Entry')\n            .has('type', 'Measure').has('category', 'Configuration')\n            .has('entry_id', $entryId)\n            .limit(1).fold()\n            .project('exists')\n            .by(coalesce(__.unfold().constant(true), __.constant(false)))\n            .unfold()\n        "},CHECK_CONFIG_IDS:{neo4j:"\n            MATCH (config:Entry {type: 'Measure', category: 'Configuration'})\n            WHERE config.entry_id >= $baseConfigId\n            AND config.entry_id < $baseConfigId + \"~\"\n            RETURN config.entry_id\n        ",cosmosdb:"\n            g.V().hasLabel('Entry')\n                .has('type', 'Measure')\n                .has('category', 'Configuration')\n                .has('entry_id', TextP.startingWith($baseConfigId))\n                .values('entry_id')\n        "}},a=r(3469),s=["created_date","last_modified_date"];function l(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=w(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function m(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var l=n&&n.prototype instanceof s?n:s,c=Object.create(l.prototype);return y(c,"_invoke",function(r,n,i){var o,s,l,c=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,l=e,f.n=r,a}};function p(r,n){for(s=r,l=n,t=0;!d&&c&&!i&&t<u.length;t++){var i,o=u[t],p=f.p,h=o[2];r>3?(i=h===n)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((i=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<h&&(i=r<3||o[0]>n||n>h)&&(o[4]=r,o[5]=n,f.n=h,s=0))}if(i||r>1)return a;throw d=!0,n}return function(i,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,l=h;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),p(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:r.call(n,f))!==a)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(r,i,o),!0),c}var a={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(y(t={},n,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,y(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,y(d,"constructor",c),y(c,"constructor",l),l.displayName="GeneratorFunction",y(c,i,"GeneratorFunction"),y(d),y(d,i,"Generator"),y(d,n,function(){return this}),y(d,"toString",function(){return"[object Generator]"}),(m=function(){return{w:o,m:f}})()}function y(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}y=function(e,t,r,n){function o(t,r){y(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},y(e,t,r,n)}function g(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function b(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){g(o,n,i,a,s,"next",e)}function s(e){g(o,n,i,a,s,"throw",e)}a(void 0)})}}function v(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return _(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var E,S,T,I={DEBUG:!1,LANGUAGE:"",THEME:"",NEO4J_CONFIG:{uri:"",username:"",password:"",neo4j_serverauth:""},COSMOSDB_CONFIG:{endpoint:"",key:"",db:"",graph:"",partitionkeyproperty:"",partitionkeyvalue:""},DATABASETYPE:"",CURRENT_USER:""},A=!1,O=null,R=[],x=new Set,N=new Set,k=[],C=!1,M=0,L=!0,D=null,P=new Map,j=!1,z=null,U=null,$=[],B=!1,F=[],H=new Set,q=new Map;function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=document.querySelector(".measure-editor");if(n){var i=document.createElement("div");i.className="status-message ".concat(t),i.setAttribute("role","status"),i.textContent=e,n.insertBefore(i,n.firstChild),setTimeout(function(){i.parentNode&&i.remove()},r)}}function V(e){try{var t={DEBUG:e.debug||!1,CURRENT_USER:e.current_user||"",THEME:e.theme||"light",DATABASETYPE:e.dbtype||"neo4j"},r=e.locale;r&&(t.LANGUAGE=r),Object.assign(t,{NEO4J_CONFIG:{uri:e.neo4j_uri||"",username:e.neo4j_username||"",password:e.neo4j_password||"",neo4j_serverauth:e.neo4j_serverauth||""}}),Object.assign(t,{COSMOSDB_CONFIG:{endpoint:e.cosmosdb_endpoint||"",key:e.cosmosdb_key||"",db:e.cosmosdb_db||"",graph:e.cosmosdb_graph||"",partitionkeyproperty:e.cosmosdb_partitionkeyproperty||"",partitionkeyvalue:e.cosmosdb_partitionkeyvalue||""}}),Object.assign(I,t),utils.initialize(I),window.i18n&&!window.i18n.initialized&&I.LANGUAGE&&(utils.debugLog("Initializing i18n with language:",I.LANGUAGE),window.i18n.initialize(I.LANGUAGE)),window.localeUI&&!window.localeUI.initialized&&(utils.debugLog("Initializing LocaleUI service"),window.localeUI.initialize())}catch(e){throw e}}function W(){utils.debugLog("Theme in use is: ".concat(I.THEME)),document.documentElement.setAttribute("data-theme",I.THEME)}function Y(){var e=document.getElementById("new_measure"),t=document.getElementById("clone_measure"),r=document.getElementById("import_measure"),n=document.getElementById("export_measure"),i=document.getElementById("cancel_measure"),o=document.getElementById("type"),a=document.getElementById("generateMeasureId");e&&e.addEventListener("click",hr),t&&t.addEventListener("click",gt),r&&r.addEventListener("click",Kt),n&&n.addEventListener("click",Nt),i&&i.addEventListener("click",ur),o&&o.addEventListener("change",ar),a&&a.addEventListener("click",pe),function(){var e=document.getElementById("name"),t=document.getElementById("measure_id");if(!e||!t)return;var r=J(function(e){var r=document.querySelector(".measure-editor");if(r&&(r.classList.contains("new-mode")||r.classList.contains("clone-mode")||r.classList.contains("import-mode"))&&!t.readOnly){var n=function(e){return e&&e.trim()?e.trim().toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").substring(0,50):""}(e);t.value=n,t.dispatchEvent(new Event("change",{bubbles:!0}))}},500);e.addEventListener("input",function(e){r(e.target.value)})}(),document.querySelector(".measure-editor").querySelectorAll("input, textarea, select").forEach(function(e){e.addEventListener("change",Pe),("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase()&&"checkbox"!==e.type)&&e.addEventListener("input",Pe)}),document.querySelectorAll(".tab-button").forEach(function(e){e.addEventListener("click",function(){Q(e.dataset.tab)})});var s=document.getElementById("add-related-measure");s&&s.addEventListener("click",ve);var l=document.getElementById("add-configuration");l&&l.addEventListener("click",Oe);var c=function(){var e=b(m().m(function e(){return m().w(function(e){for(;;)switch(e.n){case 0:if(!O){e.n=1;break}return e.n=1,O.close();case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();window.addEventListener("pagehide",c),window.addEventListener("beforeunload",c),window.addEventListener("unload",c)}function J(e,t){var r;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];clearTimeout(r),r=setTimeout(function(){clearTimeout(r),e.apply(void 0,i)},t)}}function Q(e){document.querySelectorAll(".tab-button").forEach(function(t){t.classList.toggle("active",t.dataset.tab===e)}),document.querySelectorAll(".tab-panel").forEach(function(t){t.classList.toggle("active",t.id===e)})}function X(e,t,r){e=e.toUpperCase().slice(0,8).padEnd(3,"X"),t=t.toUpperCase().slice(0,8).padEnd(3,"X");var n=parseInt(r,10).toString().padStart(3,"0");return"".concat(e,"-").concat(t,"-MEASURE-").concat(n)}function K(e){var t,r;if(!e)return{area:"GEN",function:"MEAS"};var n=e.replace(/[^a-zA-Z0-9\s-]/g,"").split(/[\s-]+/).filter(Boolean).map(function(e){return e.toUpperCase()});return{area:(null===(t=n[0])||void 0===t?void 0:t.slice(0,4))||"GEN",function:(null===(r=n[1])||void 0===r?void 0:r.slice(0,4))||"MEAS"}}function Z(e){return ee.apply(this,arguments)}function ee(){return ee=b(m().m(function e(t){var r,n,i,o=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:null,e.p=1,n=O.getQuery("CHECK_MEASURE_EXISTS"),e.n=2,O.executeRead(n,{measureId:t},r,!0);case 2:return i=e.v,e.a(2,i.exists);case 3:throw e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])})),ee.apply(this,arguments)}function te(e){return re.apply(this,arguments)}function re(){return(re=b(m().m(function e(t){var r,n;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=O.getQuery("CHECK_MEASURE_NAME_EXISTS"),e.n=1,O.executeRead(r,{measureName:t},null,!0);case 1:return n=e.v,e.a(2,n.exists);case 2:throw e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function ne(e){return ie.apply(this,arguments)}function ie(){return ie=b(m().m(function e(t){var r,n,i,o=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=o.length>1&&void 0!==o[1]&&o[1],e.p=1,n=O.getQuery("CHECK_MEASURE_ID_EXISTS"),e.n=2,O.executeRead(n,{measureId:t},null,!0);case 2:if(i=e.v,!r||!D||D.measure_id!==t){e.n=3;break}return e.a(2,!1);case 3:return e.a(2,i.exists);case 4:throw e.p=4,e.v;case 5:return e.a(2)}},e,null,[[1,4]])})),ie.apply(this,arguments)}function oe(e){return ae.apply(this,arguments)}function ae(){return(ae=b(m().m(function e(t){var r,n;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=O.getQuery("CHECK_ENTRY_ID_EXISTS"),e.n=1,O.executeRead(r,{entryId:t},null,!0);case 1:return n=e.v,e.a(2,n.exists);case 2:throw e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function se(e){return le.apply(this,arguments)}function le(){return(le=b(m().m(function e(t){var r,n,i,o,a,s,l,c,u,d,f;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=t.value.trim()){e.n=1;break}return e.a(2);case 1:n=document.querySelectorAll(".configuration-item .config-entry-id"),i=!1,o=h(n),e.p=2,o.s();case 3:if((a=o.n()).done){e.n=5;break}if((s=a.value)===t){e.n=4;break}if(l="","INPUT"===s.tagName?l=s.value.trim():"SPAN"===s.tagName&&(l=s.textContent.trim()),l!==r){e.n=4;break}return i=!0,e.a(3,5);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,f=e.v,o.e(f);case 7:return e.p=7,o.f(),e.f(7);case 8:if(!i){e.n=9;break}return(c=MeasureErrorHandler).showError.apply(c,v(MeasureErrorCodes.CONFIG_ENTRY_ID_EXISTS).concat([{entry_id:r}])),e.a(2);case 9:return e.p=9,e.n=10,oe(r);case 10:e.v&&(u=MeasureErrorHandler).showError.apply(u,v(MeasureErrorCodes.CONFIG_ENTRY_ID_EXISTS).concat([{entry_id:r}])),e.n=12;break;case 11:e.p=11,e.v,(d=MeasureErrorHandler).showError.apply(d,v(MeasureErrorCodes.UNEXPECTED_ERROR));case 12:return e.a(2)}},e,null,[[9,11],[2,6,7,8]])}))).apply(this,arguments)}function ce(e,t){return ue.apply(this,arguments)}function ue(){return(ue=b(m().m(function e(t,r){var n,i,o,a,s,l,c,u,d,f,p;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=t.value.trim()){e.n=1;break}return r.disabled=!1,e.a(2);case 1:i=document.querySelectorAll(".configuration-item .config-entry-id"),o=!1,a=h(i),e.p=2,a.s();case 3:if((s=a.n()).done){e.n=5;break}if(l=s.value,c="","INPUT"===l.tagName?c=l.value.trim():"SPAN"===l.tagName&&(c=l.textContent.trim()),c!==n){e.n=4;break}return o=!0,e.a(3,5);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,p=e.v,a.e(p);case 7:return e.p=7,a.f(),e.f(7);case 8:if(!o){e.n=9;break}return(u=MeasureErrorHandler).showError.apply(u,v(MeasureErrorCodes.CONFIG_ENTRY_ID_EXISTS_MODAL).concat([{entry_id:n}])),r.disabled=!0,e.a(2);case 9:return e.p=9,e.n=10,oe(n);case 10:e.v?((d=MeasureErrorHandler).showError.apply(d,v(MeasureErrorCodes.CONFIG_ENTRY_ID_EXISTS_MODAL).concat([{entry_id:n}])),r.disabled=!0):r.disabled=!1,e.n=12;break;case 11:e.p=11,e.v,(f=MeasureErrorHandler).showError.apply(f,v(MeasureErrorCodes.UNEXPECTED_ERROR)),r.disabled=!0;case 12:return e.a(2)}},e,null,[[9,11],[2,6,7,8]])}))).apply(this,arguments)}function de(e){return fe.apply(this,arguments)}function fe(){return fe=b(m().m(function e(t){var r,n,i,o,a,s,l,c,u,d,f,p,h,y,g,b,w,_,E,S,T,I=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=(r=I.length>1&&void 0!==I[1]?I[1]:{}).name,i=void 0===n?"":n,o=r.tx,a=void 0===o?null:o,e.p=1,t&&""!==t.trim()||(i?(s=K(i),t="".concat(s.area,"-").concat(s.function,"-MEASURE-001")):t="GEN-MEAS-MEASURE-001"),4===(l=t.split("-")).length){e.n=2;break}return(c=MeasureErrorHandler).showError.apply(c,v(MeasureErrorCodes.INVALID_MEASURE_ID_FORMAT)),e.a(2);case 2:return u=l[0].toUpperCase(),d=l[1].toUpperCase(),f=l[2],parseInt(l[3],10),p="".concat(u,"-").concat(d,"-").concat(f),h=O.getQuery("GET_LATEST_MEASURE"),y={baseId:p},e.n=3,O.executeRead(h,y,a);case 3:return g=e.v,b=1,g&&g.length>0&&g[0].id&&(w=g[0].id,4===(_=w.split("-")).length&&(E=parseInt(_[3],10),b=E+1)),S=b.toString().padStart(3,"0"),e.a(2,"".concat(p,"-").concat(S));case 4:return e.p=4,e.v,T=Date.now().toString().slice(-6),e.a(2,"GEN-MEAS-MEASURE-".concat(T))}},e,null,[[1,4]])})),fe.apply(this,arguments)}function pe(){return he.apply(this,arguments)}function he(){return(he=b(m().m(function e(){var t,r,n,i,o,a,s,l,c,u,d,f,p,h,y,g;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=document.getElementById("generateMeasureId"),r=document.getElementById("area"),n=document.getElementById("function"),i=document.getElementById("version"),o=document.getElementById("id"),a=document.getElementById("name"),s=r.value.trim(),l=n.value.trim(),s&&l){e.n=1;break}return(c=MeasureErrorHandler).showError.apply(c,v(MeasureErrorCodes.AREA_FUNCTION_REQUIRED)),e.a(2);case 1:return u=t.querySelector("i"),d=t.querySelector(".spinner"),t.querySelector("span:last-child").textContent,t.disabled=!0,u.classList.add("hide"),d.classList.remove("hide"),e.p=2,f=parseInt(i.value,10)||1,p=X(s,l,f),e.n=3,Z(p);case 3:if(!e.v){e.n=5;break}return e.n=4,de(p,{name:a.value});case 4:p=e.v,G('<span data-i18n="newMeasureIdGenerated">A new Measure ID was generated as the original one already exists</span>',"success");case 5:o.value=p,o.dispatchEvent(new Event("change",{bubbles:!0})),a.value.trim()||(h="".concat(s.toUpperCase()," ").concat(l.toUpperCase()," Performance Measure"),a.value=h,a.dispatchEvent(new Event("change",{bubbles:!0}))),G('<span data-i18n="measureIdGenerated">Measure ID generated successfully</span>',"success"),e.n=7;break;case 6:e.p=6,e.v.message.includes("Maximum attempts reached")?(y=MeasureErrorHandler).showError.apply(y,v(MeasureErrorCodes.ID_GENERATION_MAX_ATTEMPTS_REACHED)):(g=MeasureErrorHandler).showError.apply(g,v(MeasureErrorCodes.MEASURE_ID_CHECK_ERROR));case 7:return e.p=7,t.disabled=!1,u.classList.remove("hide"),d.classList.add("hide"),e.f(7);case 8:return e.a(2)}},e,null,[[2,6,7,8]])}))).apply(this,arguments)}function me(e){if(!e||"string"!=typeof e)return[];for(var t,r=/\{([a-zA-Z_][a-zA-Z0-9_]*)\}|(?:^|[^a-zA-Z0-9_])([a-zA-Z_][a-zA-Z0-9_]*)(?=[^a-zA-Z0-9_]|$)/g,n=new Set;null!==(t=r.exec(e));){var i=t[1]||t[2];i&&!["sin","cos","tan","log","sqrt","abs","min","max","avg","sum","if","then","else"].includes(i.toLowerCase())&&n.add(i)}return Array.from(n)}function ye(){return ge.apply(this,arguments)}function ge(){return(ge=b(m().m(function e(){var t,r;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!($.length>0)){e.n=1;break}return e.a(2,$);case 1:return t=O.getQuery("LOAD_ALL_MEASURES"),e.n=2,O.executeRead(t,{});case 2:if(!(r=e.v)||!Array.isArray(r)){e.n=3;break}return $=r,utils.debugLog("Loaded ".concat(r.length," measures from database for dropdown selection")),e.a(2,r);case 3:return $=[],e.a(2,[]);case 4:e.n=6;break;case 5:return e.p=5,e.v,$=[],e.a(2,[]);case 6:return e.a(2)}},e,null,[[0,5]])}))).apply(this,arguments)}function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=document.getElementById("related-measure-template"),r=document.importNode(t.content,!0).firstElementChild,n=r.querySelector(".id"),i=r.querySelector(".remove-related-measure-btn");return e.id&&(n.dataset.selectedMeasureId=e.id,r.dataset.measureName=e.name||""),i.addEventListener("click",function(){r.remove(),Pe(),B=!0,Ce()}),n.addEventListener("change",function(){Pe(),B=!0,Ce()}),r}function ve(){var e=be();document.getElementById("related-measures-container").appendChild(e),Me(),Pe()}function we(){return _e.apply(this,arguments)}function _e(){return _e=b(m().m(function e(){var t,r,n,i,o,a,s,l,c,u,d,f,p,h,y,g,v,w=arguments;return m().w(function(e){for(;;)switch(e.n){case 0:if(t=w.length>0&&void 0!==w[0]?w[0]:null,r=document.getElementById("configuration-template"),n=r.content.cloneNode(!0),i=n.querySelector(".config-entry-id"),o=n.querySelector(".config-site"),a=n.querySelector(".config-location"),s=n.querySelector(".config-target-value"),l=n.querySelector(".config-alarm-thresholds"),c=n.querySelector(".remove-configuration-btn"),u=n.querySelector(".configuration-id"),d=n.querySelector(".configuration-header"),f=n.querySelector(".configuration-content"),p="",!t){e.n=1;break}p=t.id||"New Configuration",t.id?((y=document.createElement("span")).className="config-entry-id",y.textContent=t.entry_id||t.id||"",i.parentNode.replaceChild(y,i)):i.value=t.entry_id||t.id||"",t.id&&t.location&&((g=document.createElement("span")).className="config-location",g.textContent="".concat(t.location.name," (").concat(t.location.id,")"),g.setAttribute("data-location-id",t.location.id),a.parentNode.replaceChild(g,a)),o&&(o.textContent=t.site||""),s.value=t.target_value||"",l.value="string"==typeof t.alarm_thresholds?t.alarm_thresholds:JSON.stringify(t.alarm_thresholds||{},null,2),null!==(h=t.location)&&void 0!==h&&h.id&&a.setAttribute("data-selected-location",t.location.id),u.textContent=p,u.setAttribute("data-config-id",p),e.n=3;break;case 1:return e.n=2,Ee();case 2:v=e.v,p="New Configuration",i.value=v,confi,gurationId.textContent=p,u.setAttribute("data-config-id","");case 3:return Te(d,f,i,u),Ie(a),c.addEventListener("click",function(){Ne('<span data-i18n="confirmRemoveConfiguration">Are you sure you want to remove this configuration?</span>',function(){ke(c,a)})}),a.addEventListener("change",function(){var e=a.getAttribute("data-previous-value"),r=a.value;if(e&&e!==r&&H.delete(e),r){H.add(r),a.setAttribute("data-previous-value",r);var n=F.find(function(e){return e.id===r});if(n&&o&&(o.textContent=n.site||""),!t){var s=(null==n?void 0:n.site)||"",l=i.value;Ee(s).then(function(e){if(i.value=e,P.has(l)){var t=P.get(l);P.delete(l),P.set(e,t)}}).catch(function(e){var t,r=(null===(t=document.getElementById("measure_id"))||void 0===t?void 0:t.value)||"",n="config_".concat(r,"_").concat(s,"_").concat(Date.now()).toLowerCase();i.value=n})}}Ae(),Pe()}),t||"INPUT"!==i.tagName||(i.addEventListener("blur",b(m().m(function e(){return m().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,se(i);case 1:return e.a(2)}},e)}))),i.addEventListener("input",function(){Pe()})),s.addEventListener("input",Pe),l.addEventListener("input",Pe),e.a(2,n)}},e)})),_e.apply(this,arguments)}function Ee(){return Se.apply(this,arguments)}function Se(){return Se=b(m().m(function e(){var t,r,n,i,o,a,s,l,c=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=c.length>0&&void 0!==c[0]?c[0]:null,n=(c.length>1&&void 0!==c[1]?c[1]:null)||(null===(t=document.getElementById("measure_id"))||void 0===t?void 0:t.value)||"",i="config_".concat(n),r&&(i+="_".concat(r)),i=i.toLowerCase(),o=new Set,document.querySelectorAll(".configuration-item .configuration-id").forEach(function(e){var t=e.textContent;if(t.startsWith(i)){var r=t.substring(i.length);if(""===r)o.add(0);else if(r.match(/^_\d{3}$/)){var n=parseInt(r.substring(1),10);o.add(n)}}}),e.p=1,!(a=O.getQuery("CHECK_CONFIG_IDS"))){e.n=3;break}return e.n=2,O.executeRead(a,{baseConfigId:i},null,!0);case 2:(s=e.v)&&Array.isArray(s)&&s.forEach(function(e){if(e.entry_id&&e.entry_id.startsWith(i)){var t=e.entry_id.substring(i.length);if(""===t)o.add(0);else if(t.match(/^_\d{3}$/)){var r=parseInt(t.substring(1),10);o.add(r)}}});case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:if(0!==o.size){e.n=6;break}return e.a(2,i);case 6:if(o.has(0)){e.n=7;break}return e.a(2,i);case 7:for(l=1;o.has(l);)l++;return e.a(2,"".concat(i,"_").concat(l.toString().padStart(3,"0")));case 8:return e.a(2)}},e,null,[[1,4]])})),Se.apply(this,arguments)}function Te(e,t,r,n){e.addEventListener("click",function(i){if(!i.target.closest("input, textarea, button, select, .checkbox-wrapper")){e.classList.toggle("expanded"),t.classList.toggle("expanded");var o=n.getAttribute("data-config-id")||r.value||"new-config";P.set(o,e.classList.contains("expanded"))}}),r.hasAttribute("readonly")||r.addEventListener("input",function(){Pe()});var i=n.getAttribute("data-config-id")||r.value||"new-config";P.get(i)&&(e.classList.add("expanded"),t.classList.add("expanded"))}function Ie(e){var t=e.getAttribute("data-selected-location")||e.value;e.innerHTML='<option value="" disabled selected data-i18n="selectLocation">Select Location</option>',F.forEach(function(r){if(!H.has(r.id)||r.id===t){var n=document.createElement("option");n.value=r.id,n.textContent="".concat(r.name," (").concat(r.id,")"),r.id===t&&(n.selected=!0,e.setAttribute("data-previous-value",r.id)),e.appendChild(n)}})}function Ae(){document.querySelectorAll(".config_location").forEach(function(e){Ie(e)})}function Oe(){var e;0!==F.filter(function(e){return!H.has(e.id)}).length?function(){var e=pr("addConfiguration",'\n        <form id="addConfigurationForm" class="add-configuration-form">\n            <div class="section">\n                <div class="row">\n                    <div class="input-group">\n                        <label for="configLocation" data-i18n="location">Location</label>\n                        <select id="configLocation" name="location" required>\n                            <option value="" disabled selected data-i18n="selectLocation">Select Location</option>\n                        </select>\n                    </div>\n                    <div class="input-group">\n                        <label for="configSite" data-i18n="site">Site</label>\n                        <input type="text" id="configSite" name="site" required>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-group">\n                        <label for="configEntryId" data-i18n="entryId">Entry ID</label>\n                        <input type="text" id="configEntryId" name="entryId" required>\n                    </div>\n                </div>\n            </div>\n            <div class="section">\n                <div class="row">\n                    <div class="input-group">\n                        <label for="configTargetValue" data-i18n="targetValue">Target Value</label>\n                        <input type="number" id="configTargetValue" name="targetValue" step="0.01">\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-group">\n                        <label for="configAlarmThresholds" data-i18n="alarmThresholds">Alarm Thresholds</label>\n                        <textarea id="configAlarmThresholds" name="alarmThresholds" placeholder=\'{"warning_high": 4.0, "critical_high": 6.0}\' rows="3"></textarea>\n                        <span class="field-hint" data-i18n="jsonFormatHint">JSON format for threshold values</span>\n                    </div>\n                </div>\n            </div>\n            <div class="form-actions">\n                <button type="button" class="secondary-button" id="cancelAddConfiguration">\n                    <span data-i18n="cancel">Cancel</span>\n                </button>\n                <button type="submit" class="primary-button" id="confirmAddConfiguration">\n                    <span class="spinner spinner-s hide"></span>\n                    <span data-i18n="addConfiguration">Add Configuration</span>\n                </button>\n            </div>\n        </form>\n    ',{translateTitle:!0,wide:!0,modalClass:"add-configuration-modal"}),t=e.querySelector("#addConfigurationForm"),r=e.querySelector("#confirmAddConfiguration"),n=e.querySelector("#configLocation");(function(e){e.innerHTML='<option value="" disabled selected data-i18n="selectLocation">Select Location</option>';var t=0;if(F.forEach(function(r){if(!H.has(r.id)){var n=document.createElement("option");n.value=r.id,n.textContent="".concat(r.name," (").concat(r.id,")"),n.dataset.site=r.site||"",e.appendChild(n),t++}}),0===t){var r=document.createElement("option");r.value="",r.disabled=!0,r.textContent="No available locations (all locations already have configurations)",e.appendChild(r)}return t>0})(n)||(r.disabled=!0);var i=e.querySelector("#cancelAddConfiguration"),o=e.querySelector("#configSite"),a=e.querySelector("#configEntryId"),s=function(){var e,t=o.value.trim(),r=(null===(e=document.getElementById("measure_id"))||void 0===e?void 0:e.value)||"";if(r){var n="config_".concat(r);t&&(n+="_".concat(t)),a.value=n.toLowerCase()}};s(),o.addEventListener("input",function(){s()}),n.addEventListener("change",function(e){var t=e.target.selectedOptions[0];t&&t.dataset.site&&(o.value=t.dataset.site,s())}),a.addEventListener("blur",b(m().m(function e(){return m().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ce(a,r);case 1:return e.a(2)}},e)}))),a.addEventListener("input",function(){r.disabled=!1}),t.addEventListener("submit",function(){var n=b(m().m(function n(i){var o,s,l,c,u,d,f,p,h,y,g,b,w,_,E;return m().w(function(n){for(;;)switch(n.p=n.n){case 0:if(i.preventDefault(),o=r.querySelector(".spinner"),r.disabled=!0,o.classList.remove("hide"),n.p=1,l=new FormData(t),c=l.get("location"),!H.has(c)){n.n=2;break}return(u=MeasureErrorHandler).showError.apply(u,v(MeasureErrorCodes.CONFIG_LOCATION_DUPLICATE)),r.disabled=!1,o.classList.add("hide"),n.a(2);case 2:return d=l.get("site")||"",f=l.get("entryId")||"",p=(null===(s=document.getElementById("measure_id"))||void 0===s?void 0:s.value)||"",n.n=3,ce(a,r);case 3:if(!r.disabled){n.n=4;break}return n.a(2);case 4:return n.n=5,Ee(d,p);case 5:return h=n.v,y={id:h,entry_id:f,site:d,location_id:c,target_value:l.get("targetValue")?parseFloat(l.get("targetValue")):null,alarm_thresholds:l.get("alarmThresholds")?JSON.parse(l.get("alarmThresholds")):{}},g=F.find(function(e){return e.id===y.location_id}),y.location=g?{id:g.id,name:g.name}:null,n.n=6,we(y);case 6:b=n.v,w=document.getElementById("configuration-container"),(_=w.querySelector(".no-rows"))&&_.remove(),w.appendChild(b),H.add(c),Pe(),e.remove(),MeasureStatusHandler.showSuccess("configurationAddSuccess"),n.n=8;break;case 7:n.p=7,n.v,(E=MeasureErrorHandler).showError.apply(E,v(MeasureErrorCodes.CONFIG_ADD_ERROR));case 8:return n.p=8,r.disabled=!1,o.classList.add("hide"),n.f(8);case 9:return n.a(2)}},n,null,[[1,7,8,9]])}));return function(e){return n.apply(this,arguments)}}()),i.addEventListener("click",function(){e.remove()})}():(e=MeasureErrorHandler).showError.apply(e,v(MeasureErrorCodes.CONFIG_NO_LOCATIONS))}function Re(e){return xe.apply(this,arguments)}function xe(){return(xe=b(m().m(function e(t){var r,n,i,o,a,s,l,u;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(H.clear(),P.clear(),(r=document.getElementById("configuration-container")).innerHTML="",n=[],(i=null==t?void 0:t.configurations)&&(Array.isArray(i)?n=i:"object"===c(i)&&(n=i.id||i.entry_id?[i]:Object.values(i))),!(n.length>0)){e.n=9;break}n.forEach(function(e){e&&e.location&&e.location.id&&H.add(e.location.id)}),o=h(n),e.p=1,o.s();case 2:if((a=o.n()).done){e.n=5;break}if(!(s=a.value)){e.n=4;break}return e.n=3,we(s);case 3:l=e.v,r.appendChild(l);case 4:e.n=2;break;case 5:e.n=7;break;case 6:e.p=6,u=e.v,o.e(u);case 7:return e.p=7,o.f(),e.f(7);case 8:Ae(),e.n=10;break;case 9:r.innerHTML='<div class="no-rows" data-i18n="noConfigurations">No configurations available</div>';case 10:return e.a(2)}},e,null,[[1,6,7,8]])}))).apply(this,arguments)}function Ne(e,t){var r=pr("removeConfiguration",'\n        <div class="row">\n            <p>'.concat(e,'</p>\n        </div>\n        <div class="row form-actions">\n            <button type="button" class="secondary-button cancel-button">\n                <span data-i18n="cancel">Cancel</span>\n            </button>\n            <button type="button" class="danger-button confirm-button">\n                <span data-i18n="remove">Remove</span>\n            </button>\n        </div>\n    '),{translateTitle:!0,modalClass:"confirm-modal"}),n=r.querySelector(".confirm-button"),i=r.querySelector(".cancel-button");n.onclick=function(){t(),r.remove()},i.onclick=function(){return r.remove()}}function ke(e,t){try{var r=t.value;r&&(H.delete(r),Ae());var n=e.closest(".configuration-item");if(!n)return;n.remove();var i=document.getElementById("configuration-container");i&&0===i.children.length&&(i.innerHTML='<div class="no-rows" data-i18n="noConfigurations">No configurations</div>'),Pe(),MeasureStatusHandler.showSuccess("configurationRemoveSuccess")}catch(e){var o;(o=MeasureErrorHandler).showError.apply(o,v(MeasureErrorCodes.CONFIG_REMOVE_ERROR))}}window.showError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",r=document.querySelector(".measure-editor");if(r){document.querySelectorAll(".status-message.error, .status-message.warning").forEach(function(e){return e.remove()});var n=document.createElement("div");n.className="status-message ".concat(t),n.setAttribute("role","alert"),n.setAttribute("aria-live","critical"===t?"assertive":"polite");var i=document.createElement("div");i.className="message-text",i.textContent=e,n.appendChild(i);var o=document.createElement("button");o.className="close-button",o.setAttribute("aria-label","Close error message"),o.innerHTML='<i class="fas fa-times" aria-hidden="true"></i>',o.addEventListener("click",function(){return n.remove()}),o.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n.remove())}),n.appendChild(o);var a=r.querySelector(".measure-actions");a?r.insertBefore(n,a):r.insertBefore(n,r.firstChild),setTimeout(function(){n.parentNode&&n.remove()},"error"===t?1e4:5e3)}},window.showMessage=G,window.scrollToTop=Je,window.loadConfig=V,window.onValueMappingLoaded=function(e){if(A)return;A=!0,V(e),function(){br.apply(this,arguments)}()};var Ce=J(function(){B&&(Me(),B=!1)},250);function Me(){var e=new Map,t=Array.from(document.querySelectorAll(".id"));t.forEach(function(t){t.value&&e.set(t.value,t)}),t.forEach(function(t){Le(t,e)})}function Le(e,t){for(var r=e.value||e.dataset.selectedMeasureId||"",n=e.closest(".related-measure-item"),i=n&&n.dataset.measureName||"",o=document.getElementById("id").value;e.options.length>1;)e.remove(1);var a=document.createDocumentFragment();if(r&&i&&!$.some(function(e){return e.id===r})){var s=document.createElement("option");s.value=r,s.textContent=i,s.selected=!0,a.appendChild(s)}$.forEach(function(n){if(n.id!==o&&(!t.has(n.id)||t.get(n.id)===e)){var i=document.createElement("option");i.value=n.id,i.textContent="".concat(n.name," (").concat(n.id,")"),i.title=n.description||"",n.id===r&&(i.selected=!0),a.appendChild(i)}}),e.appendChild(a),r&&(e.value=r),delete e.dataset.selectedMeasureId}function De(){var e=new Map,t=Array.from(document.querySelectorAll(".id"));t.forEach(function(t){var r=t.value||t.dataset.selectedMeasureId;r&&e.set(r,t)}),t.forEach(function(t){Le(t,e)}),B=!1}function Pe(){var e,t,r;z?(U=nr(),e=z,t=U,r=function(e){var t=f({},e);return delete t.created_date,delete t.last_modified_date,t},j=!(JSON.stringify(r(e))===JSON.stringify(r(t))),je()):z=nr()}function je(){var e=document.getElementById("save_measure");if(e){["new","clone","import"].includes(T)?e.disabled=!1:e.disabled=!j}}function ze(){j=!1,z=null,U=null,je()}function Ue(){var e=[];return document.getElementById("typeDropdown").querySelectorAll('input[type="checkbox"]').forEach(function(t){e.push(t.value)}),e}function $e(){var e=document.getElementById("typeFilterButton"),t=document.getElementById("typeDropdown"),r=document.getElementById("domainFilterButton"),n=document.getElementById("domainDropdown");t.querySelectorAll('input[type="checkbox"]').forEach(function(t){t.checked=!0,t.addEventListener("change",function(){C||t.disabled||(t.checked?x.add(t.value):x.delete(t.value),Fe(e,"Type",x.size),rt(!0))})}),e.addEventListener("click",function(e){return Be(e,t)}),r.addEventListener("click",function(e){return Be(e,n)}),document.addEventListener("click",function(e){e.target.closest(".filter-group")||(t.classList.remove("show"),n.classList.remove("show"))}),Fe(e,"Type",x.size),Fe(r,"Domain",N.size)}function Be(e,t){e.stopPropagation(),document.querySelectorAll(".filter-dropdown").forEach(function(e){e!==t&&e.classList.remove("show")}),t.classList.toggle("show")}function Fe(e,t,r){e.textContent=t+(r>0?" (".concat(r,")"):"")}function He(){var e=document.querySelectorAll('#typeDropdown input[type="checkbox"]'),t=document.querySelectorAll('#domainDropdown input[type="checkbox"]');e.forEach(function(e){e.disabled=!0}),t.forEach(function(e){e.disabled=!0})}function qe(){var e=document.querySelectorAll('#typeDropdown input[type="checkbox"]'),t=document.querySelectorAll('#domainDropdown input[type="checkbox"]');e.forEach(function(e){e.disabled=!1}),t.forEach(function(e){e.disabled=!1})}function Ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial";if(!document.getElementById("".concat(e,"Spinner"))){var t=document.createElement("div");t.className="spinner-container ".concat(e),t.id="".concat(e,"Spinner");var r=document.createElement("div");r.className="spinner ".concat(e),t.appendChild(r),S.appendChild(t)}}function Ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial",t=document.getElementById("".concat(e,"Spinner"));t&&t.remove()}function We(){var e=document.getElementById("measureList");e.removeEventListener("scroll",Ye),e.addEventListener("scroll",Ye)}function Ye(e){var t=e.target;t.scrollTop+t.clientHeight>=t.scrollHeight-100&&(!C&&L&&(C=!0,it(document.getElementById("measureSearch").value.toLowerCase())))}function Je(e){var t=document.querySelector(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})}function Qe(e,t){var r,n=document.getElementById(e),i=document.getElementById(t);n.addEventListener("input",function(){var e=this.value.toLowerCase();r&&clearTimeout(r),r=setTimeout(function(){st()},300),Xe(e)}),i.addEventListener("click",function(){n.value="",st(),Xe("")})}function Xe(e){var t=document.getElementById("clearSearch");t&&(t.style.display=e.length>0?"block":"none")}function Ke(e){return Object.entries(e).reduce(function(e,t){var r=u(t,2),n=r[0],i=r[1];return null!==i&&"object"===c(i)?e[n]=JSON.stringify(i):e[n]=i,e},{})}function Ze(e){return Object.entries(e).reduce(function(e,t){var r=u(t,2),n=r[0],i=r[1];if("alarm_thresholds"===n||"validation_rules"===n)if("string"==typeof i)try{e[n]=JSON.parse(i)}catch(t){e[n]=i}else e[n]=i;else if("configurations"===n&&Array.isArray(i))e[n]=i.map(function(e){if(e&&"object"===c(e)&&e.alarm_thresholds){var t=f({},e);if("string"==typeof e.alarm_thresholds)try{t.alarm_thresholds=JSON.parse(e.alarm_thresholds)}catch(r){t.alarm_thresholds=e.alarm_thresholds}return t}return e});else if("string"==typeof i&&(i.startsWith("{")||i.startsWith("[")))try{e[n]=JSON.parse(i)}catch(t){e[n]=i}else e[n]=i;return e},{})}function et(){return tt.apply(this,arguments)}function tt(){return(tt=b(m().m(function e(){return m().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e){if(j){var t=pr("discardChanges",'\n            <div class="row">\n                <p data-i18n="confirmDiscardChanges">You have unsaved changes. Are you sure you want to discard them?</p>\n            </div>\n            <div class="row form-actions">\n                <button type="button" class="secondary-button cancel-button">\n                    <span data-i18n="cancel">Cancel</span>\n                </button>\n                <button type="button" class="danger-button confirm-button">\n                    <span data-i18n="confirm">Confirm</span>\n                </button>\n            </div>\n        ',{translateTitle:!0,modalClass:"confirm-modal"}),r=t.querySelector(".confirm-button"),n=t.querySelector(".cancel-button");r.onclick=function(){j=!1,t.remove(),e(!0)},n.onclick=function(){t.remove(),e(!1)}}else e(!0)}))},e)}))).apply(this,arguments)}function rt(){return nt.apply(this,arguments)}function nt(){return nt=b(m().m(function e(){var t,r,n,i=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=!(i.length>0&&void 0!==i[0])||i[0],!C){e.n=1;break}return e.a(2);case 1:return e.p=1,C=!0,He(),t&&(S.innerHTML="",Ge("initial"),M=0,k=[],L=!0),r=document.getElementById("measureSearch").value.toLowerCase(),e.n=2,it(r);case 2:t&&We(),e.n=4;break;case 3:e.p=3,e.v,(n=MeasureErrorHandler).showError.apply(n,v(MeasureErrorCodes.BATCH_LOAD_ERROR));case 4:return e.p=4,C=!1,qe(),Ve("initial"),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])})),nt.apply(this,arguments)}function it(){return ot.apply(this,arguments)}function ot(){return ot=b(m().m(function e(){var t,r,n,o,a,s,l,c=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:"",L){e.n=1;break}return e.a(2);case 1:return M>0&&Ge("load-more"),e.p=2,r=new i.e,n=new i.e,(r=x.size>0?i.e.from(Array.from(x)):i.e.from(Ue())).quotedElements=!0,(n=N.size>0?i.e.from(Array.from(N)):i.e.from(R)).quotedElements=!0,o={searchTerm:t||"",typeConditions:r,domainConditions:n},a=O.getQuery("LOAD_BATCHED_MEASURES"),e.n=3,O.executeRead(a,o,null,!1,20*M,20);case 3:(s=e.v).length>0&&(at(k=[].concat(v(k),v(s))),M++),L=s.length>0,e.n=5;break;case 4:e.p=4,e.v,(l=MeasureErrorHandler).showError.apply(l,v(MeasureErrorCodes.BATCH_LOAD_ERROR));case 5:return e.p=5,M>0&&Ve("load-more"),C=!1,e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])})),ot.apply(this,arguments)}function at(e){var t=new Set(Array.from(S.children).filter(function(e){return e.classList.contains("measure-item")}).map(function(e){return e.dataset.id})),r=function(e){var t=e.map(function(e){return"".concat(e.id,":").concat(e.name)}).join("|");if(!q.has(t)){var r=v(e).sort(function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())});if(q.set(t,r),q.size>10){var n=q.keys().next().value;q.delete(n)}}return q.get(t)}(e);r.forEach(function(e){if(!t.has(e.id)){var r=document.createElement("div");r.className="measure-item",r.dataset.id=e.id,r.dataset.type=e.type,r.dataset.domain=e.domain,r.setAttribute("role","button"),r.setAttribute("data-i18n-aria-label","loadMeasure"),r.setAttribute("data-i18n-params",JSON.stringify({name:e.name}));var n=document.createElement("div");n.className="measure-content",n.innerHTML='\n            <div class="measure-header">\n                <div class="measure-name-container">\n                    <div class="measure-name">'.concat(e.name,"</div>\n                    ").concat(e.type.trim()?'<span class="measure-type" data-i18n="'.concat(e.type.trim().toLowerCase(),'">').concat(e.type.trim(),"</span>"):'<span class="measure-type" data-i18n="unspecified">Unspecified</span>','\n                </div>\n                <div class="measure-menu">\n                    <button class="measure-menu-button">\n                        <i class="fa-solid fa-ellipsis-vertical"></i>\n                    </button>\n                    <div class="measure-menu-dropdown">\n                        <button class="measure-menu-item view-history">\n                            <span data-i18n="viewHistory">View History</span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div class="measure-info-container">\n                <div class="created-date" data-date="').concat(e.created_date,'" ').concat(e.created_date?'data-i18n-date="date-medium"':"",'>\n                    <i class="fa-regular fa-square-plus"></i>\n                    ').concat(e.created_date?'<span data-date="'.concat(new Date(e.created_date).toISOString(),'" data-i18n-date="date-medium"></span>'):'<span data-i18n="notAvailable">N/A</span>','\n                </div>\n                <div class="last-modified-date" data-date="').concat(e.last_modified_date,'" ').concat(e.last_modified_date?'data-i18n-date="date-medium"':"",'>\n                    <i class="fa-solid fa-pen-to-square"></i>\n                    ').concat(e.last_modified_date?'<span data-date="'.concat(new Date(e.last_modified_date).toISOString(),'" data-i18n-date="date-medium"></span>'):'<span data-i18n="notAvailable">N/A</span>',"\n                </div>\n            </div>\n        ");var i,o,a,s,l,c=document.createElement("input");c.type="checkbox",c.className="measure-checkbox measure-select",c.setAttribute("aria-label","Select ".concat(e.name)),c.addEventListener("click",function(e){e.stopPropagation(),updateMarkAllState()}),r.appendChild(c),r.appendChild(n),r.addEventListener("click",function(t){t.target.closest(".measure-checkbox, .measure-menu")||function(e){ct.apply(this,arguments)}(e.id)}),S.appendChild(r),i=r,o=e.id,a=i.querySelector(".measure-menu-button"),s=i.querySelector(".measure-menu-dropdown"),l=i.querySelector(".view-history"),a.addEventListener("click",function(e){e.stopPropagation(),document.querySelectorAll(".measure-menu-dropdown.show").forEach(function(e){e!==s&&e.classList.remove("show")}),s.classList.toggle("show")}),l.addEventListener("click",function(e){e.stopPropagation(),function(e){It.apply(this,arguments)}(o),s.classList.remove("show")})}}),window.menuCloseHandler||(window.menuCloseHandler=function(e){document.querySelectorAll(".measure-menu-dropdown").forEach(function(t){t.parentElement.contains(e.target)||t.classList.remove("show")})},document.addEventListener("click",window.menuCloseHandler))}function st(){return lt.apply(this,arguments)}function lt(){return(lt=b(m().m(function e(){return m().w(function(e){for(;;)switch(e.n){case 0:if(!C){e.n=1;break}return e.a(2);case 1:return e.n=2,rt(!0);case 2:return e.a(2)}},e)}))).apply(this,arguments)}function ct(){return(ct=b(m().m(function e(t){var r,n,i,o;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=O.getQuery("LOAD_MEASURE"),e.n=1,O.executeRead(r,{measureId:t},null,!0);case 1:if(null==(n=e.v)){e.n=3;break}return D=f({},n.m),e.n=2,er(D);case 2:fr("edit"),lr(t),MeasureStatusHandler.showSuccess("measureLoadSuccess",{name:D.id}),e.n=4;break;case 3:(i=MeasureErrorHandler).showError.apply(i,v(MeasureErrorCodes.MEASURE_NOT_FOUND));case 4:e.n=6;break;case 5:e.p=5,e.v,(o=MeasureErrorHandler).showError.apply(o,v(MeasureErrorCodes.MEASURE_LOAD_ERROR));case 6:return e.a(2)}},e,null,[[0,5]])}))).apply(this,arguments)}function ut(e,t,r,n){return dt.apply(this,arguments)}function dt(){return(dt=b(m().m(function e(t,r,n,i){var o,a,s,l,c,u,d,f,p,y,g,b,v,w,_,E;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,o=(null==i?void 0:i.configurations)||[],a=new Set(o.map(function(e){return e.id})),s=new Set(r.map(function(e){return e.id}).filter(function(e){return e})),l=o.filter(function(e){return!s.has(e.id)}),c=h(l),e.p=1,c.s();case 2:if((u=c.n()).done){e.n=4;break}return d=u.value,utils.debugLog("Deleting configuration: ".concat(d.id)),f=O.getQuery("DELETE_CONFIGURATION"),e.n=3,O.executeWrite(f,{configId:d.id},n);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,_=e.v,c.e(_);case 6:return e.p=6,c.f(),e.f(6);case 7:p=h(r),e.p=8,p.s();case 9:if((y=p.n()).done){e.n=14;break}if((g=y.value).id){e.n=10;break}return e.a(3,13);case 10:if(b={measureId:t,configId:g.id,entryId:g.entry_id||g.id,locationId:g.location_id,site:g.site||"",targetValue:g.target_value,alarmThresholds:JSON.stringify(g.alarm_thresholds||{}),createdDate:g.created_date||(new Date).toISOString(),lastModifiedDate:(new Date).toISOString()},!a.has(g.id)){e.n=12;break}return utils.debugLog("Updating configuration: ".concat(g.id)),v=O.getQuery("UPDATE_CONFIGURATION"),e.n=11,O.executeWrite(v,b,n);case 11:e.n=13;break;case 12:return utils.debugLog("Creating configuration: ".concat(g.id)),w=O.getQuery("CREATE_CONFIGURATION"),e.n=13,O.executeWrite(w,b,n);case 13:e.n=9;break;case 14:e.n=16;break;case 15:e.p=15,E=e.v,p.e(E);case 16:return e.p=16,p.f(),e.f(16);case 17:utils.debugLog("Successfully processed ".concat(r.length," configurations for measure ").concat(t)),e.n=19;break;case 18:throw e.p=18,e.v;case 19:return e.a(2)}},e,null,[[8,15,16,17],[1,5,6,7],[0,18]])}))).apply(this,arguments)}function ft(){return pt.apply(this,arguments)}function pt(){return pt=b(m().m(function e(){var t,r,n,i,o,a,c,u,d,p,y,g,w,_,E,S,T,A,R;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!1!==j){e.n=1;break}return(t=MeasureErrorHandler).showError.apply(t,v(MeasureErrorCodes.NO_CHANGES_TO_SAVE)),e.a(2);case 1:return r=document.querySelector("#save_measure"),n=r.querySelector(".icon-xl"),i=r.querySelector(".spinner"),o=document.querySelector("#cancel_measure"),a=document.querySelectorAll(".right-actions button"),r.disabled=o.disabled=!0,a.forEach(function(e){return e.disabled=!0}),n.classList.add("hide"),i.classList.remove("hide"),e.p=2,c=nr(),e.n=3,St(c);case 3:if(!((u=e.v).length>0)){e.n=4;break}return r.disabled=o.disabled=!1,a.forEach(function(e){return e.disabled=!1}),n.classList.remove("hide"),i.classList.add("hide"),MeasureErrorHandler.handleValidationErrors(u),Je(".measure-editor"),e.a(2);case 4:return d=new Date,p=D?f({},D):null,c.created_date,c.last_modified_date,y=l(c,s),g={},w="",p&&(g=ir(p,c),w=JSON.stringify(g)),_=Object.keys(g).length,e.n=5,O.startTransaction();case 5:return E=e.v,e.p=6,S=!1,e.n=7,O.executeInTransaction(E,function(){var e=b(m().m(function e(t){var r,n,i,o,a,s,l,c,u,f,p,g,b,E;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=O.getQuery("CHECK_MEASURE_EXISTS"),e.n=1,O.executeRead(r,{measureId:y.id},t,!0);case 1:return n=e.v,S=!n.exists,r=O.getQuery("CHECK_LIBRARY_EXISTS"),e.n=2,O.executeRead(r,{},t);case 2:if(null!=e.v){e.n=3;break}return r=O.getQuery("CREATE_LIBRARY"),e.n=3,O.executeWrite(r,{created_date:d},t);case 3:i=ht(y,d),b=y.type,e.n="Base"===b?4:"Calculated"===b?5:"Tool"===b?6:7;break;case 4:return o="INSERT_BASE_MEASURE",a="UPDATE_BASE_MEASURE",e.a(3,8);case 5:return o="INSERT_CALCULATED_MEASURE",a="UPDATE_CALCULATED_MEASURE",e.a(3,8);case 6:return o="INSERT_TOOL_MEASURE",a="UPDATE_TOOL_MEASURE",e.a(3,8);case 7:throw new Error("Unknown measure type: ".concat(y.type));case 8:if(!S){e.n=11;break}return r=O.getQuery(o),e.n=9,O.executeWrite(r,i,t);case 9:if(null!=e.v){e.n=10;break}return(s=MeasureErrorHandler).showError.apply(s,v(MeasureErrorCodes.MEASURE_CREATION_FAILED)),e.a(2);case 10:e.n=12;break;case 11:return r=O.getQuery(a),e.n=12,O.executeWrite(r,i,t);case 12:if(S||!(_>0)){e.n=13;break}return l={measureId:y.id,currentUser:I.CURRENT_USER,stringifiedChanges:w,audit_created_date:d,auditId:crypto.randomUUID(),entryId:crypto.randomUUID(),timestamp:Math.floor(Date.now()/1e3)},r=O.getQuery("WRITE_AUDIT_INFO"),e.n=13,O.executeWrite(r,l,t);case 13:return r=O.getQuery("DELETE_MEASURE_RELATIONSHIPS"),e.n=14,O.executeWrite(r,{measureId:y.id},t);case 14:if(!y.related_measures){e.n=21;break}if("string"==typeof y.related_measures)try{c=JSON.parse(y.related_measures)}catch(e){c=[]}else c=Array.isArray(y.related_measures)?y.related_measures:[];if(!Array.isArray(c)){e.n=21;break}u=h(c),e.p=15,u.s();case 16:if((f=u.n()).done){e.n=18;break}return p=f.value,g={measureId:y.id,relatedMeasureId:p.id},r=O.getQuery("CREATE_MEASURE_RELATIONSHIP"),e.n=17,O.executeWrite(r,g,t);case 17:e.n=16;break;case 18:e.n=20;break;case 19:e.p=19,E=e.v,u.e(E);case 20:return e.p=20,u.f(),e.f(20);case 21:return e.n=22,ut(y.id,y.configurations||[],t,D);case 22:return e.a(2)}},e,null,[[15,19,20,21]])}));return function(t){return e.apply(this,arguments)}}());case 7:return T=O.getQuery("LOAD_MEASURE"),e.n=8,O.executeRead(T,{measureId:y.id});case 8:return null!=(A=e.v)&&(D=f({},A.m)),MeasureStatusHandler.showSuccess(S?"measureCreateSuccess":"measureUpdateSuccess",{id:c.id}),sr(),ze(),e.n=9,rt();case 9:Je(".".concat("measure-editor")),fr("view");case 10:return e.p=10,e.n=11,O.endTransaction(E);case 11:return e.f(10);case 12:e.n=14;break;case 13:e.p=13,e.v,(R=MeasureErrorHandler).showError.apply(R,v(MeasureErrorCodes.MEASURE_SAVE_ERROR));case 14:return e.p=14,r.disabled=o.disabled=!1,a.forEach(function(e){return e.disabled=!1}),n.classList.remove("hide"),i.classList.add("hide"),e.f(14);case 15:return e.a(2)}},e,null,[[6,,10,12],[2,13,14,15]])})),pt.apply(this,arguments)}function ht(e,t){var r={id:e.id,measure_id:e.measure_id,name:e.name,description:e.description||"",type:e.type,domain:e.domain||"",category:e.category||"",version:parseInt(e.version,10)||1,safety_critical:!0===e.safety_critical,unit:e.unit||"",created_date:e.created_date||t.toISOString(),last_modified_date:t.toISOString()};return"Base"===e.type?f(f({},r),{},{measurement_type:e.measurement_type,sampling_rate:e.sampling_rate,precision:parseInt(e.precision,10)||0,validation_rules:JSON.stringify({min_value:void 0!==e.min_value?parseFloat(e.min_value):null,max_value:void 0!==e.max_value?parseFloat(e.max_value):null}),alarm_thresholds:JSON.stringify(mt(e))}):"Calculated"===e.type?f(f({},r),{},{calculation_type:e.calculation_type,normalization_method:e.normalization_method,update_frequency:e.update_frequency,aggregation_window:e.aggregation_window,formula:e.formula,input_metrics:yt(e.input_metrics)}):"Tool"===e.type?f(f({},r),{},{tool_id:e.tool_id,confidence_threshold:parseFloat(e.confidence_threshold)||.8,formula_documentation:e.formula_documentation,input_metrics:yt(e.input_metrics),tool_parameters:"string"==typeof e.tool_parameters?e.tool_parameters:JSON.stringify(e.tool_parameters||{}),output_mapping:"string"==typeof e.output_mapping?e.output_mapping:JSON.stringify(e.output_mapping||{})}):r}function mt(e){var t={};return void 0!==e.critical_low&&""!==e.critical_low&&(t.critical_low=parseFloat(e.critical_low)),void 0!==e.warning_low&&""!==e.warning_low&&(t.warning_low=parseFloat(e.warning_low)),void 0!==e.warning_high&&""!==e.warning_high&&(t.warning_high=parseFloat(e.warning_high)),void 0!==e.critical_high&&""!==e.critical_high&&(t.critical_high=parseFloat(e.critical_high)),t}function yt(e){if("string"!=typeof e)return Array.isArray(e)?JSON.stringify(e):"[]";try{return JSON.parse(e),e}catch(e){return"[]"}}function gt(e){return bt.apply(this,arguments)}function bt(){return(bt=b(m().m(function e(t){var r,n,i,o,a,s,l,c,u,d,p,h,y,g,b;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=document.querySelector("#clone_measure"),n=r.querySelector(".icon-xl"),i=r.querySelector(".spinner"),r.disabled=!0,n.classList.add("hide"),i.classList.remove("hide"),t&&(t.preventDefault(),t.stopPropagation()),D){e.n=1;break}return(o=MeasureErrorHandler).showError.apply(o,v(MeasureErrorCodes.SELECT_MEASURE_TO_CLONE)),r.disabled=!1,n.classList.remove("hide"),i.classList.add("hide"),e.a(2);case 1:return e.p=1,e.n=2,de(D.id,{name:D.name});case 2:return s=e.v,l=(new Date).toISOString(),c=((null===(a=window.i18n)||void 0===a?void 0:a.translate("cloneOf"))||"Clone of")+" "+D.name,u="clone_".concat(D.measure_id||D.id.toLowerCase().replace(/-/g,"_")),e.n=3,te(c);case 3:d=e.v,p=1;case 4:if(!d){e.n=6;break}return p++,y=(null===(h=window.i18n)||void 0===h?void 0:h.translate("cloneCounter",{counter:p}))||"Clone ".concat(p," of"),c="".concat(y," ").concat(D.name),u="clone_".concat(D.measure_id||D.id.toLowerCase().replace(/-/g,"_"),"_").concat(p.toString().padStart(3,"0")),e.n=5,te(c);case 5:d=e.v,e.n=4;break;case 6:return g=f(f({},D),{},{name:c,id:s,measure_id:u,created_date:l,last_modified_date:l}),fr("clone"),e.n=7,er(g);case 7:cr(),MeasureStatusHandler.showSuccess("measureCloneSuccess"),e.n=9;break;case 8:e.p=8,e.v,(b=MeasureErrorHandler).showError.apply(b,v(MeasureErrorCodes.MEASURE_CLONE_ERROR));case 9:return e.p=9,r.disabled=!1,n.classList.remove("hide"),i.classList.add("hide"),e.f(9);case 10:return e.a(2)}},e,null,[[1,8,9,10]])}))).apply(this,arguments)}function vt(e){return wt.apply(this,arguments)}function wt(){return(wt=b(m().m(function e(t){var r,n,i,o,a,s,l;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=O.getQuery("LOAD_MEASURE"),e.n=1,O.executeRead(n,{measureId:t},null,!0);case 1:return i=e.v,e.a(2,null!==(r=null==i?void 0:i.m)&&void 0!==r?r:null);case 2:if(e.p=2,!(l=e.v).message||!l.message.includes("Connection acquisition timed out")){e.n=6;break}return e.n=3,new Promise(function(e){return setTimeout(e,1e3)});case 3:return e.p=3,a=O.getQuery("LOAD_MEASURE"),e.n=4,O.executeRead(a,{measureId:t},null,!0);case 4:return s=e.v,e.a(2,null!==(o=null==s?void 0:s.m)&&void 0!==o?o:null);case 5:return e.p=5,e.v,e.a(2,null);case 6:return e.a(2,null)}},e,null,[[3,5],[0,2]])}))).apply(this,arguments)}function _t(){return Et.apply(this,arguments)}function Et(){return(Et=b(m().m(function e(){var t,r,n;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=O.getQuery("LOAD_LOCATIONS"),e.n=1,O.executeRead(t,{});case 1:if((r=e.v)&&Array.isArray(r)){e.n=2;break}return e.a(2,[]);case 2:F=r.map(function(e){return{id:e.id,name:e.name,site:e.site}}),e.n=4;break;case 3:return e.p=3,e.v,(n=MeasureErrorHandler).showError.apply(n,v(MeasureErrorCodes.LOCATION_LOAD_ERROR)),e.a(2,[]);case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)}function St(e){return Tt.apply(this,arguments)}function Tt(){return(Tt=b(m().m(function e(t){var r,n,i,o,a,s,l,c,u,d,f,p,y,g,b,v,w,_,E,S;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=[],t.id||r.push("MEASURE_ID_REQUIRED"),t.name||r.push("NAME_REQUIRED"),t.domain||r.push("DOMAIN_REQUIRED"),t.unit||r.push("UNIT_REQUIRED"),t.category||r.push("CATEGORY_REQUIRED"),t.type||r.push("TYPE_REQUIRED"),"Calculated"===t.type){if(t.input_metrics||r.push("INPUT_METRICS_REQUIRED"),t.formula||r.push("FORMULA_REQUIRED"),t.calculation_type||r.push("CALCULATION_TYPE_REQUIRED"),t.formula&&t.input_metrics)try{"string"==typeof(n=t.input_metrics)&&(n=JSON.parse(n)),Array.isArray(n)&&(i=me(t.formula),(o=i.filter(function(e){return!n.includes(e)})).length>0&&r.push({code:"INPUT_METRICS_FORMULA_MISMATCH",params:{missingMetrics:o}}))}catch(e){}}else"Tool"===t.type&&(t.tool_id||r.push("TOOL_ID_REQUIRED"));if(D||!t.id){e.n=4;break}return e.p=1,e.n=2,Z(t.id);case 2:e.v&&r.push({code:"MEASURE_ID_EXISTS",params:{id:t.id}}),e.n=4;break;case 3:e.p=3,e.v;case 4:if(!t.measure_id){e.n=8;break}return e.p=5,a=!!D,e.n=6,ne(t.measure_id,a);case 6:e.v&&r.push({code:"MEASURE_ID_FIELD_EXISTS",params:{measure_id:t.measure_id}}),e.n=8;break;case 7:e.p=7,e.v;case 8:if(!t.configurations||!Array.isArray(t.configurations)){e.n=20;break}e.p=9,l=(null===(s=D)||void 0===s?void 0:s.configurations)||[],c=new Set(l.map(function(e){return e.entry_id})),u=new Set,d=new Set,f=h(t.configurations);try{for(f.s();!(p=f.n()).done;)(y=p.value).entry_id&&(u.has(y.entry_id)?d.add(y.entry_id):u.add(y.entry_id))}catch(e){f.e(e)}finally{f.f()}g=h(d);try{for(g.s();!(b=g.n()).done;)v=b.value,r.push({code:"CONFIG_ENTRY_ID_EXISTS",params:{entry_id:v}})}catch(e){g.e(e)}finally{g.f()}if(0!==d.size){e.n=18;break}w=h(t.configurations),e.p=10,w.s();case 11:if((_=w.n()).done){e.n=15;break}if(!(E=_.value).entry_id){e.n=14;break}if(!c.has(E.entry_id)){e.n=12;break}return e.a(3,14);case 12:return e.n=13,oe(E.entry_id);case 13:e.v&&r.push({code:"CONFIG_ENTRY_ID_EXISTS",params:{entry_id:E.entry_id}});case 14:e.n=11;break;case 15:e.n=17;break;case 16:e.p=16,S=e.v,w.e(S);case 17:return e.p=17,w.f(),e.f(17);case 18:e.n=20;break;case 19:e.p=19,e.v;case 20:return e.a(2,r)}},e,null,[[10,16,17,18],[9,19],[5,7],[1,3]])}))).apply(this,arguments)}function It(){return(It=b(m().m(function e(t){var r,n,i,o;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=O.getQuery("GET_AUDIT_HISTORY"),e.n=1,O.executeRead(r,{measureId:t});case 1:n=e.v,i="",0===n.length?i+='<p data-i18n="noAuditHistory">No audit history available.</p>':(i+='<ul class="audit-list">',n.forEach(function(e){var t,r=e.timestamp;t=("number"==typeof r?new Date(1e3*r):r.toStandardDate?r.toStandardDate():new Date(r.toString())).toISOString();var n=e.changes,o=JSON.parse(n),a=e.user||'<span data-i18n="unknown">Unknown</span>';i+='\n                    <li class="audit-item">\n                        <div class="audit-header">\n                            <span class="audit-timestamp" data-date="'.concat(t,'" data-i18n-date="datetime-short"></span>\n                            <span class="audit-user"><span data-i18n="by">by</span> ').concat(a,'</span>\n                        </div>\n                        <ul class="audit-changes">\n                '),Object.entries(o).forEach(function(e){var t=u(e,2),r=t[0],n=t[1],o=n.old?JSON.stringify(n.old):"N/A",a=JSON.parse(n.new);o=or(o),a=or(a),i+="\n                        <li><strong>".concat(r,':</strong> \n                            <span class="old-value">').concat(o,'</span>  \n                            <span class="new-value">').concat(a,"</span>\n                        </li>\n                    ")}),i+="\n                        </ul>\n                    </li>\n                "}),i+="</ul>"),pr("auditHistory",i,{translateTitle:!0}),e.n=3;break;case 2:e.p=2,e.v,(o=MeasureErrorHandler).showError.apply(o,v(MeasureErrorCodes.AUDIT_HISTORY_ERROR));case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function At(e){return Ot.apply(this,arguments)}function Ot(){return Ot=b(m().m(function e(t){var r,n,i=arguments;return m().w(function(e){for(;;)switch(e.n){case 0:if(!(r=i.length>1&&void 0!==i[1]?i[1]:new Set).has(t)){e.n=1;break}return e.a(2,null);case 1:return r.add(t),e.n=2,vt(t);case 2:if(n=e.v){e.n=3;break}return e.a(2,null);case 3:return e.a(2,n)}},e)})),Ot.apply(this,arguments)}function Rt(e){return xt.apply(this,arguments)}function xt(){return xt=b(m().m(function e(t){var r,n,i,o,a,s,l,c,u,d=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:r=d.length>1&&void 0!==d[1]?d[1]:new Set,n=[],i=h(t),e.p=1,i.s();case 2:if((o=i.n()).done){e.n=7;break}if(a=o.value,!r.has(a)){e.n=3;break}return e.a(3,6);case 3:return e.n=4,At(a,r);case 4:if(!(s=e.v)){e.n=6;break}if(n.push(s),"Calculated"!==s.type||!s.related_measures||!Array.isArray(s.related_measures)){e.n=6;break}if(!((l=s.related_measures.filter(function(e){return e&&e.id}).map(function(e){return e.id})).length>0)){e.n=6;break}return e.n=5,Rt(l,r);case 5:c=e.v,n.push.apply(n,v(c));case 6:e.n=2;break;case 7:e.n=9;break;case 8:e.p=8,u=e.v,i.e(u);case 9:return e.p=9,i.f(),e.f(9);case 10:return e.a(2,n)}},e,null,[[1,8,9,10]])})),xt.apply(this,arguments)}function Nt(){var e=document.querySelector("#export_measure"),t=e.querySelector(".icon-xl"),r=e.querySelector(".spinner");e.disabled=!0,t.classList.add("hide"),r.classList.remove("hide");var n=Array.from(document.querySelectorAll(".measure-item .measure-checkbox:checked")).map(function(e){return e.closest(".measure-item").dataset.id});if(0===n.length){var i,o=S.querySelector(".measure-item.active");if(!o)return(i=MeasureErrorHandler).showError.apply(i,v(MeasureErrorCodes.SELECT_MEASURE_TO_EXPORT)),e.disabled=!1,t.classList.remove("hide"),void r.classList.add("hide");n.push(o.dataset.id)}Rt(n).then(function(e){if(e&&e.length>0){var t,r=e.find(function(e){return e.id===n[0]})||e[0];t=1===n.length?r.name+".json":"".concat(r.name,"_and_").concat(n.length-1,"_others.json");var i="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,2)),o=document.createElement("a");o.setAttribute("href",i),o.setAttribute("download",t),document.body.appendChild(o),o.click(),o.remove(),1===n.length?MeasureStatusHandler.showSuccess("measureExportSuccess"):MeasureStatusHandler.showSuccess("measuresExportSuccess")}else{var a;(a=MeasureErrorHandler).showError.apply(a,v(MeasureErrorCodes.MEASURE_EXPORT_ERROR))}}).catch(function(e){var t;(t=MeasureErrorHandler).showError.apply(t,v(MeasureErrorCodes.MEASURE_EXPORT_ERROR))}).finally(function(){e.disabled=!1,t.classList.remove("hide"),r.classList.add("hide")})}function kt(e){return Ct.apply(this,arguments)}function Ct(){return Ct=b(m().m(function e(t){var r,n,i=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=i.length>1&&void 0!==i[1]&&i[1],t=Ze(t),e.n=1,Mt(t,r);case 1:return t=e.v,n=null,e.p=2,e.n=3,O.startTransaction();case 3:return n=e.v,e.n=4,O.executeInTransaction(n,function(){var e=b(m().m(function e(n){var i;return m().w(function(e){for(;;)switch(e.n){case 0:if(!r){e.n=2;break}return e.n=1,Dt(t,n);case 1:e.n=3;break;case 2:return e.n=3,jt(t,n);case 3:return e.n=4,Ut(t,n);case 4:if(!t.configurations||!Array.isArray(t.configurations)){e.n=5;break}return i=null,r&&(i={configurations:[]}),e.n=5,ut(t.id,t.configurations,n,i);case 5:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:return e.a(2,t);case 5:throw e.p=5,e.v;case 6:if(e.p=6,!n){e.n=10;break}return e.p=7,e.n=8,O.endTransaction(n);case 8:e.n=10;break;case 9:e.p=9,e.v;case 10:return e.f(6);case 11:return e.a(2)}},e,null,[[7,9],[2,5,6,11]])})),Ct.apply(this,arguments)}function Mt(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=b(m().m(function e(t,r){var n,i,o,a,s,l,u,d,p;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.alarm_thresholds&&"object"===c(t.alarm_thresholds)&&(void 0!==t.alarm_thresholds.critical_low&&(t.critical_low=t.alarm_thresholds.critical_low),void 0!==t.alarm_thresholds.warning_low&&(t.warning_low=t.alarm_thresholds.warning_low),void 0!==t.alarm_thresholds.warning_high&&(t.warning_high=t.alarm_thresholds.warning_high),void 0!==t.alarm_thresholds.critical_high&&(t.critical_high=t.alarm_thresholds.critical_high)),t.validation_rules&&"object"===c(t.validation_rules)&&(void 0!==t.validation_rules.min_value&&(t.min_value=t.validation_rules.min_value),void 0!==t.validation_rules.max_value&&(t.max_value=t.validation_rules.max_value)),t.configurations&&Array.isArray(t.configurations)&&(t.configurations=t.configurations.map(function(e){return e.alarm_thresholds&&c(e.alarm_thresholds),e})),t.created_date?t.created_date=new Date(t.created_date).toISOString():t.created_date=(new Date).toISOString(),t.last_modified_date=(new Date).toISOString(),t.author||(t.author=I.CURRENT_USER),t.id){e.n=2;break}return e.n=1,de("",{name:t.name});case 1:t.id=e.v;case 2:if(r){e.n=4;break}return e.n=3,te(t.name);case 3:e.v&&(t.name=((null===(n=window.i18n)||void 0===n?void 0:n.translate("importOf"))||"Import of")+" "+t.name,t.measure_id="import_".concat(t.measure_id||t.id.toLowerCase().replace(/-/g,"_")));case 4:if(!t.configurations||!Array.isArray(t.configurations)){e.n=15;break}i=[],o=h(t.configurations),e.p=5,o.s();case 6:if((a=o.n()).done){e.n=11;break}if(s=a.value,l=f({},s),s.location&&s.location.id&&!s.location_id&&(l.location_id=s.location.id),!l.entry_id){e.n=9;break}return e.n=7,oe(l.entry_id);case 7:if(!e.v){e.n=9;break}return u=l.site||"",e.n=8,Ee(u,t.measure_id);case 8:d=e.v,utils.debugLog("Replacing duplicate entry_id ".concat(l.entry_id," with ").concat(d)),l.entry_id=d;case 9:i.push(l);case 10:e.n=6;break;case 11:e.n=13;break;case 12:e.p=12,p=e.v,o.e(p);case 13:return e.p=13,o.f(),e.f(13);case 14:t.configurations=i;case 15:return e.a(2,t)}},e,null,[[5,12,13,14]])}))).apply(this,arguments)}function Dt(e,t){return Pt.apply(this,arguments)}function Pt(){return(Pt=b(m().m(function e(t,r){var n,i,o;return m().w(function(e){for(;;)switch(e.n){case 0:return n=O.getQuery("DELETE_MEASURE_RELATIONSHIPS"),e.n=1,O.executeWrite(n,{measureId:t.id},r);case 1:return i=O.getQuery("UPDATE_".concat(t.type.toUpperCase(),"_MEASURE")),o=ht(t,new Date),e.n=2,O.executeWrite(i,o,r);case 2:return e.a(2)}},e)}))).apply(this,arguments)}function jt(e,t){return zt.apply(this,arguments)}function zt(){return(zt=b(m().m(function e(t,r){var n,i;return m().w(function(e){for(;;)switch(e.n){case 0:return n=O.getQuery("INSERT_".concat(t.type.toUpperCase(),"_MEASURE")),i=ht(t,new Date),e.n=1,O.executeWrite(n,i,r);case 1:return e.a(2)}},e)}))).apply(this,arguments)}function Ut(e,t){return $t.apply(this,arguments)}function $t(){return($t=b(m().m(function e(t,r){var n,i,o,a,s,l;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!t.related_measures||!Array.isArray(t.related_measures)){e.n=7;break}n=h(t.related_measures),e.p=1,n.s();case 2:if((i=n.n()).done){e.n=4;break}if(!(o=i.value)||!o.id){e.n=3;break}return a={measureId:t.id,relatedMeasureId:o.id},s=O.getQuery("CREATE_MEASURE_RELATIONSHIP"),e.n=3,O.executeWrite(s,a,r);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,l=e.v,n.e(l);case 6:return e.p=6,n.f(),e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])}))).apply(this,arguments)}function Bt(e){var t=[];return e.id||t.push("IMPORT_MISSING_ID"),e.name||t.push("IMPORT_MISSING_NAME"),e.type||t.push("IMPORT_MISSING_TYPE"),e.domain||t.push("IMPORT_MISSING_DOMAIN"),e.unit||t.push("IMPORT_MISSING_UNIT"),"Calculated"===e.type?(e.input_metrics||t.push("IMPORT_MISSING_INPUT_METRICS"),e.formula||t.push("IMPORT_MISSING_FORMULA"),e.calculation_type||t.push("IMPORT_MISSING_CALCULATION_TYPE")):"Tool"===e.type&&(e.tool_id||t.push("IMPORT_MISSING_TOOL_ID")),t}function Ft(e,t){var r=[];if("Calculated"!==e.type||!e.related_measures||!Array.isArray(e.related_measures))return r;var n,i=h(e.related_measures);try{for(i.s();!(n=i.n()).done;){var o=n.value;o&&o.id&&!t.has(o.id)&&r.push(o.id)}}catch(e){i.e(e)}finally{i.f()}return r}function Ht(e){return qt.apply(this,arguments)}function qt(){return qt=b(m().m(function e(t){var r,n,i,o,a,s,l,c,u,d,f,p,y,g,v,w,_,E,S,T,I=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:S=function(){return S=b(m().m(function e(t){var r,n,o,a,c,u,d;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=l.get(t)){e.n=1;break}return e.a(2,"skipped");case 1:if("Calculated"!==r.type||!r.related_measures){e.n=9;break}n=h(r.related_measures),e.p=2,n.s();case 3:if((o=n.n()).done){e.n=6;break}if(!(a=o.value)||!a.id){e.n=5;break}return e.n=4,E(a.id);case 4:e.v;case 5:e.n=3;break;case 6:e.n=8;break;case 7:e.p=7,d=e.v,n.e(d);case 8:return e.p=8,n.f(),e.f(8);case 9:return e.n=10,Z(r.id);case 10:if(c=e.v,u=i[r.id],!c||!1!==u){e.n=11;break}return utils.debugLog("Skipping measure ".concat(r.id," (user chose to keep existing version)")),e.a(2,"skipped");case 11:if(!s){e.n=13;break}return e.n=12,Gt(r,u,c);case 12:return e.a(2,"pending");case 13:return e.n=14,Wt(r,u,c);case 14:return e.a(2,e.v)}},e,null,[[2,7,8,9]])})),S.apply(this,arguments)},E=function(e){return S.apply(this,arguments)},n=(r=I.length>1&&void 0!==I[1]?I[1]:{}).overwriteExisting,i=void 0===n?{}:n,o=r.isBulkImport,a=void 0===o?t.length>1:o,s=1===t.length,l=new Map,c=new Set,u=new Set,d=new Set,f=h(t);try{for(f.s();!(p=f.n()).done;)y=p.value,l.set(y.id,y)}catch(e){f.e(e)}finally{f.f()}g=h(t),e.p=1,g.s();case 2:if((v=g.n()).done){e.n=7;break}return w=v.value,e.p=3,e.n=4,E(w.id);case 4:"imported"===(_=e.v)?c.add(w.id):"skipped"===_?u.add(w.id):"pending"===_&&d.add(w.id),e.n=6;break;case 5:e.p=5,e.v,u.add(w.id);case 6:e.n=2;break;case 7:e.n=9;break;case 8:e.p=8,T=e.v,g.e(T);case 9:return e.p=9,g.f(),e.f(9);case 10:return e.a(2,{imported:Array.from(c),skipped:Array.from(u),pendingSave:Array.from(d),isBulkImport:a,total:t.length})}},e,null,[[3,5],[1,8,9,10]])})),qt.apply(this,arguments)}function Gt(e,t,r){return Vt.apply(this,arguments)}function Vt(){return(Vt=b(m().m(function e(t,r,n){var i,o;return m().w(function(e){for(;;)switch(e.n){case 0:if(sr(),"overwrite"!==r){e.n=3;break}return fr("edit"),e.n=1,vt(t.id);case 1:return(i=e.v)&&(D=f({},i)),e.n=2,er(Ke(t));case 2:e.n=8;break;case 3:if("import_new"!==r){e.n=6;break}return e.n=4,Qt(t);case 4:return o=e.v,fr("import"),e.n=5,er(Ke(o));case 5:D=null,e.n=8;break;case 6:return fr("import"),e.n=7,er(Ke(t));case 7:D=null;case 8:j=!0,je();case 9:return e.a(2)}},e)}))).apply(this,arguments)}function Wt(e,t,r){return Yt.apply(this,arguments)}function Yt(){return(Yt=b(m().m(function e(t,r,n){var i,o;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,"overwrite"!==r){e.n=4;break}return e.n=1,te(t.name);case 1:if(!e.v){e.n=2;break}return utils.debugLog("Deleting existing measure with name: ".concat(t.name)),i=O.getQuery("DELETE_MEASURE_BY_NAME"),e.n=2,O.executeWrite(i,{measureName:t.name});case 2:return e.n=3,kt(t,n);case 3:case 6:case 8:return e.a(2,"imported");case 4:if("import_new"!==r){e.n=7;break}return e.n=5,Qt(t);case 5:return o=e.v,e.n=6,kt(o,!1);case 7:return e.n=8,kt(t,n);case 9:e.n=11;break;case 10:return e.p=10,e.v,e.a(2,"skipped");case 11:return e.a(2)}},e,null,[[0,10]])}))).apply(this,arguments)}function Jt(e){return new Promise(function(t){var r=document.getElementById("existing-measures-dialog"),n=r.querySelector(".existing-measures-tbody"),i=document.getElementById("existing-measure-row-template"),o=r.querySelector(".overwrite-warning");n.innerHTML="",e.forEach(function(e,t){var r,o,a=e.measure||e,s=[];e.idExists&&s.push((null===(r=window.i18n)||void 0===r?void 0:r.translate("idAlreadyExists"))||"ID already exists");e.nameExists&&s.push((null===(o=window.i18n)||void 0===o?void 0:o.translate("nameAlreadyExists"))||"Name already exists");var l=i.content.cloneNode(!0),c=l.querySelector(".existing-measure-row");c.querySelector(".measure-name").textContent=a.name,c.querySelector(".measure-id").textContent=a.id;var u=c.querySelector(".conflict-types");u&&(u.textContent=s.join(", ")),c.querySelector(".custom-dropdown").setAttribute("data-measure-index",t),c.querySelectorAll('input[type="radio"]').forEach(function(e){e.name="measure-".concat(t)}),n.appendChild(l)});var a=function(){var e=Array.from(r.querySelectorAll(".custom-dropdown")).some(function(e){return"overwrite"===e.querySelector(".dropdown-selected").getAttribute("data-value")});o.style.display=e?"block":"none"};r.querySelectorAll(".custom-dropdown").forEach(function(e){var t=e.querySelector(".dropdown-selected"),n=e.querySelector(".dropdown-options"),i=n.querySelectorAll('input[type="radio"]');t.addEventListener("click",function(e){if(e.stopPropagation(),r.querySelectorAll(".dropdown-selected").forEach(function(e){e!==t&&(e.classList.remove("open"),e.parentNode.querySelector(".dropdown-options").style.display="none")}),t.classList.toggle("open"),"none"!==n.style.display)n.style.display="none";else{var i=t.getBoundingClientRect();n.style.left="".concat(i.left,"px"),n.style.top="".concat(i.bottom,"px"),n.style.width="".concat(i.width,"px"),n.style.display="block"}}),i.forEach(function(e){e.addEventListener("change",function(){if(e.checked){var r=e.parentNode.querySelector("span").textContent;t.querySelector(".selected-text").textContent=r,t.setAttribute("data-value",e.value),t.classList.remove("open"),n.style.display="none",a()}})})}),a();var s=function(){r.querySelectorAll(".dropdown-selected").forEach(function(e){e.classList.remove("open"),e.parentNode.querySelector(".dropdown-options").style.display="none"})};document.addEventListener("click",s);var l=r.querySelector(".confirm-button"),c=r.querySelector(".cancel-button"),u=r.querySelector(".set-all-overwrite"),d=r.querySelector(".set-all-keep"),f=r.querySelector(".modal-close"),p=r.querySelector(".bulk-actions"),h=null;e.length>1?(u.style.display="inline-block",d.style.display="inline-block",(h=document.createElement("button")).className="set-all-import-new primary-button",h.setAttribute("data-i18n","setAllImportNew"),h.textContent="Set all to import as new",p.appendChild(h)):(u.style.display="none",d.style.display="none");var m=function(){e.forEach(function(e,t){var n=r.querySelector('[data-measure-index="'.concat(t,'"]')).querySelector('input[value="import_new"]');n.checked=!0,n.dispatchEvent(new Event("change"))})},y=function(){e.forEach(function(e,t){var n=r.querySelector('[data-measure-index="'.concat(t,'"]')).querySelector('input[value="overwrite"]');n.checked=!0,n.dispatchEvent(new Event("change"))})},g=function(){e.forEach(function(e,t){var n=r.querySelector('[data-measure-index="'.concat(t,'"]')).querySelector('input[value="keep"]');n.checked=!0,n.dispatchEvent(new Event("change"))})},b=function(){var n={};e.forEach(function(e,t){var i=e.measure||e;switch(r.querySelector('[data-measure-index="'.concat(t,'"]')).querySelector('input[type="radio"]:checked').value){case"overwrite":n[i.id]="overwrite";break;case"keep":default:n[i.id]=!1;break;case"import_new":n[i.id]="import_new"}}),w(),t(n)},v=function(){w(),t(null)},w=function(){r.style.display="none",document.removeEventListener("click",s),u.removeEventListener("click",y),d.removeEventListener("click",g),h&&h.removeEventListener("click",m),l.removeEventListener("click",b),c.removeEventListener("click",v),f.removeEventListener("click",v)};u.addEventListener("click",y),d.addEventListener("click",g),h&&h.addEventListener("click",m),l.addEventListener("click",b),c.addEventListener("click",v),f.addEventListener("click",v),r.style.display="flex"})}function Qt(e){return Xt.apply(this,arguments)}function Xt(){return(Xt=b(m().m(function e(t){var r,n,i,o,a,s,l,c,u,d,p,y,g,b,v,w,_,E;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,de(t.id,{name:t.name});case 1:return n=e.v,i=((null===(r=window.i18n)||void 0===r?void 0:r.translate("importOf"))||"Import of")+" "+t.name,o="import_".concat(t.measure_id||t.id.toLowerCase().replace(/-/g,"_")),e.n=2,te(i);case 2:a=e.v,s=1;case 3:if(!a){e.n=5;break}return s++,c=(null===(l=window.i18n)||void 0===l?void 0:l.translate("importCounter",{counter:s}))||"Import ".concat(s," of"),i="".concat(c," ").concat(t.name),o="import_".concat(t.measure_id||t.id.toLowerCase().replace(/-/g,"_"),"_").concat(s.toString().padStart(3,"0")),e.n=4,te(i);case 4:a=e.v,e.n=3;break;case 5:if(u=(new Date).toISOString(),!(d=f(f({},t),{},{id:n,measure_id:o,name:i,created_date:u,last_modified_date:u,author:I.CURRENT_USER})).configurations||!Array.isArray(d.configurations)){e.n=15;break}p=[],y=h(d.configurations),e.p=6,y.s();case 7:if((g=y.n()).done){e.n=11;break}if(b=g.value,v=f({},b),!b.entry_id){e.n=9;break}return w=b.site||"",e.n=8,Ee(w,o);case 8:_=e.v,v.entry_id=_,v.id=null;case 9:p.push(v);case 10:e.n=7;break;case 11:e.n=13;break;case 12:e.p=12,E=e.v,y.e(E);case 13:return e.p=13,y.f(),e.f(13);case 14:d.configurations=p;case 15:return e.a(2,d);case 16:return e.p=16,e.v,e.a(2,f(f({},t),{},{name:"Import of ".concat(t.name),measure_id:"import_".concat(t.measure_id||"measure")}))}},e,null,[[6,12,13,14],[0,16]])}))).apply(this,arguments)}function Kt(){return Zt.apply(this,arguments)}function Zt(){return Zt=b(m().m(function e(){var t;return m().w(function(e){for(;;)switch(e.n){case 0:(t=document.createElement("input")).type="file",t.accept="application/json",t.onchange=function(){var e=b(m().m(function e(t){var r,n,i,o,a,s,l,c,u,d,p,y,g,b,w,_,E,S,T,I,A,O,R,x,N,k,C,M,L,P,j,z,U,$,B,F,H,q,G;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=document.querySelector("#import_measure"),n=r.querySelector(".icon-xl"),i=r.querySelector(".spinner"),r.disabled=!0,n.classList.add("hide"),i.classList.remove("hide"),o=t.target.files[0],e.p=1,e.n=2,new Promise(function(e,t){var r=new FileReader;r.onload=function(t){return e(t.target.result)},r.onerror=function(e){return t(e)},r.readAsText(o)});case 2:a=e.v,cr(),s=JSON.parse(a),l=Array.isArray(s)?s:[s],c=1===l.length,utils.debugLog("".concat(c?"Single":"Bulk"," import with ").concat(l.length," measures:"),l),u=[],d=h(l);try{for(d.s();!(p=d.n()).done;)y=p.value,(g=Bt(y)).length>0&&u.push({measure:y,errors:g})}catch(e){d.e(e)}finally{d.f()}if(!(u.length>0)){e.n=3;break}return(b=MeasureErrorHandler).showError.apply(b,v(MeasureErrorCodes.IMPORT_VALIDATION_FAILED)),e.a(2);case 3:w=new Map(l.map(function(e){return[e.id,e]})),_=[],E=h(l);try{for(E.s();!(S=E.n()).done;)"Calculated"===(T=S.value).type&&(I=Ft(T,w)).length>0&&_.push({measure:T,missingMeasures:I})}catch(e){E.e(e)}finally{E.f()}if(!(_.length>0)){e.n=4;break}return _.map(function(e){return'Measure "'.concat(e.measure.name,'": Missing referenced measures: ').concat(e.missingMeasures.join(", "))}).join("\n"),(A=MeasureErrorHandler).showError.apply(A,v(MeasureErrorCodes.IMPORT_MISSING_REFERENCES)),e.a(2);case 4:O=[],R=h(l),e.p=5,R.s();case 6:if((x=R.n()).done){e.n=10;break}return N=x.value,e.n=7,Z(N.id);case 7:return k=e.v,e.n=8,te(N.name);case 8:C=e.v,(k||C)&&O.push({measure:N,idExists:k,nameExists:C});case 9:e.n=6;break;case 10:e.n=12;break;case 11:e.p=11,G=e.v,R.e(G);case 12:return e.p=12,R.f(),e.f(12);case 13:if(M={},!(O.length>0)){e.n=15;break}return e.n=14,Jt(O);case 14:if(null!==(M=e.v)){e.n=15;break}return MeasureStatusHandler.showSuccess("importCancelled"),e.a(2);case 15:return e.n=16,Ht(l,{overwriteExisting:M,isBulkImport:!c});case 16:if(!((L=e.v).pendingSave&&L.pendingSave.length>0)){e.n=17;break}c&&("overwrite"===(P=M[l[0].id])?MeasureStatusHandler.showSuccess("measureImportLoadedForEdit"):"import_new"===P?MeasureStatusHandler.showSuccess("measureImportLoadedForSave"):MeasureStatusHandler.showSuccess("measureImportLoadedForReview")),e.n=23;break;case 17:if(!(L.imported.length>0)){e.n=22;break}return c&&1===L.imported.length?MeasureStatusHandler.showSuccess("measureImportSuccess"):L.isBulkImport?(j=L.imported.length,z=L.skipped.length,U=L.total||l.length,z>0?MeasureStatusHandler.showSuccess("bulkImportPartialSuccess",{successful:j,total:U,failed:z}):MeasureStatusHandler.showSuccess("multipleMeasuresImportSuccess",{count:j}),O.length>0&&MeasureStatusHandler.showSuccess("bulkImportConflictsResolved")):MeasureStatusHandler.showSuccess("multipleMeasuresImportSuccess",{count:L.imported.length}),e.n=18,rt();case 18:if(!c||1!==L.imported.length){e.n=21;break}return lr($=L.imported[0]),e.n=19,vt($);case 19:if(!(B=e.v)){e.n=21;break}return D=f({},B),e.n=20,er(D);case 20:fr("view");case 21:e.n=23;break;case 22:L.skipped.length>0?L.skipped.length===l.length?MeasureStatusHandler.showSuccess("importCancelled"):(F=MeasureErrorHandler).showError.apply(F,v(MeasureErrorCodes.BULK_IMPORT_FAILED).concat([{failed:L.skipped.length,total:l.length}])):(H=MeasureErrorHandler).showError.apply(H,v(MeasureErrorCodes.IMPORT_NO_MEASURES));case 23:e.n=25;break;case 24:e.p=24,e.v,(q=MeasureErrorHandler).showError.apply(q,v(MeasureErrorCodes.JSON_PARSE_ERROR));case 25:return e.p=25,r.disabled=!1,n.classList.remove("hide"),i.classList.add("hide"),e.f(25);case 26:return e.a(2)}},e,null,[[5,11,12,13],[1,24,25,26]])}));return function(t){return e.apply(this,arguments)}}(),t.click();case 1:return e.a(2)}},e)})),Zt.apply(this,arguments)}function er(e){return tr.apply(this,arguments)}function tr(){return(tr=b(m().m(function e(t){var r,n,i,o,a,s;return m().w(function(e){for(;;)switch(e.n){case 0:return ze(),sr(!1),r=Ze(r="string"==typeof t?JSON.parse(t):t),Object.keys(r).forEach(function(e){var t=document.getElementById(e);t&&("checkbox"===t.type?t.checked=!0===r[e]:"select-one"===t.type&&"boolean"==typeof r[e]?t.value=r[e].toString():t.value=r[e])}),"new"!=T&&"clone"!=T&&"import"!=T||!r.id||4===(n=r.id.split("-")).length&&(document.getElementById("area").value=n[0],document.getElementById("function").value=n[1],document.getElementById("version").value=parseInt(n[3],10)),r.created_date&&((i=document.getElementById("created_date")).setAttribute("data-date",r.created_date),i.setAttribute("data-i18n-date","datetime-medium"),i.textContent=""),r.last_modified_date&&((o=document.getElementById("last_modified_date")).setAttribute("data-date",r.last_modified_date),o.setAttribute("data-i18n-date","datetime-medium"),o.textContent=""),r.author&&((a=document.getElementById("author")).value=r.author,a.setAttribute("readonly","readonly")),ar(),rr(r),(s=document.getElementById("related-measures-container")).innerHTML="",r.related_measures&&Array.isArray(r.related_measures)&&(r.related_measures.map(function(e){return"string"==typeof e?JSON.parse(e):e}).filter(function(e){return(null==e?void 0:e.id)&&(null==e?void 0:e.name)}).sort(function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}).forEach(function(e){var t=be(e);s.appendChild(t)}),De()),e.n=1,Re(r);case 1:z=f({},D),j=!1,Q("details"),je();case 2:return e.a(2)}},e)}))).apply(this,arguments)}function rr(e){if("Base"===e.type){if(e.validation_rules){var t={};if("string"==typeof e.validation_rules)try{t=JSON.parse(e.validation_rules)}catch(e){}else t=e.validation_rules;void 0!==t.min_value&&(document.getElementById("min_value").value=t.min_value),void 0!==t.max_value&&(document.getElementById("max_value").value=t.max_value)}if(e.alarm_thresholds){var r={};if("string"==typeof e.alarm_thresholds)try{r=JSON.parse(e.alarm_thresholds)}catch(e){}else r=e.alarm_thresholds;void 0!==r.critical_low&&(document.getElementById("critical_low").value=r.critical_low),void 0!==r.warning_low&&(document.getElementById("warning_low").value=r.warning_low),void 0!==r.warning_high&&(document.getElementById("warning_high").value=r.warning_high),void 0!==r.critical_high&&(document.getElementById("critical_high").value=r.critical_high)}}else if("Calculated"===e.type){if(e.input_metrics){var n=[];if("string"==typeof e.input_metrics)try{n=JSON.parse(e.input_metrics)}catch(e){}else Array.isArray(e.input_metrics)&&(n=e.input_metrics);var i=document.getElementById("input_metrics");i&&(i.value=JSON.stringify(n)),setTimeout(function(){!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.getElementById(e),i=document.getElementById(t);if(n&&i)if(n.innerHTML="",r)n.classList.add("readonly");else{n.classList.remove("readonly");var o=document.createElement("input");o.type="text",o.setAttribute("data-i18n-placeholder","add");var a=function(e){var t=e.trim();if(t){var r,i=h(n.querySelectorAll(".tag"));try{for(i.s();!(r=i.n()).done;)if(r.value.textContent.trim().replace("","").trim()===t)return}catch(e){i.e(e)}finally{i.f()}var a=document.createElement("div");a.className="tag",a.innerHTML="\n            ".concat(t,'\n            <button type="button">&times;</button>\n        '),a.querySelector("button").addEventListener("click",function(){a.remove(),s(),Pe()}),n.insertBefore(a,o),s(),Pe()}},s=function(){var e=Array.from(n.querySelectorAll(".tag")).map(function(e){return e.textContent.trim().replace("","").trim()});i.value=JSON.stringify(e)};o.addEventListener("keydown",function(e){if("Enter"===e.key||","===e.key)e.preventDefault(),a(o.value),o.value="";else if("Backspace"===e.key&&!o.value){var t=n.querySelectorAll(".tag");t.length>0&&(t[t.length-1].remove(),s(),Pe())}}),o.addEventListener("blur",function(){o.value.trim()&&(a(o.value),o.value="")}),n.appendChild(o);try{var l=i.value;if(l){var c=JSON.parse(l);Array.isArray(c)&&c.forEach(function(e){return a(e)})}}catch(e){}}}("input_metrics_container","input_metrics")},0)}}else if("Tool"===e.type){if(e.input_metrics){var o="object"===c(e.input_metrics)?JSON.stringify(e.input_metrics,null,2):e.input_metrics;document.getElementById("input_metrics_tool").value=o}if(e.output_mapping){var a="object"===c(e.output_mapping)?JSON.stringify(e.output_mapping,null,2):e.output_mapping;document.getElementById("output_mapping").value=a}if(e.tool_parameters){var s="object"===c(e.tool_parameters)?JSON.stringify(e.tool_parameters,null,2):e.tool_parameters;document.getElementById("tool_parameters").value=s}}}function nr(){var e,t=new FormData(E),r=Object.fromEntries(t.entries());r.safety_critical=document.getElementById("safety_critical").checked;var n=r.type;if("Base"===n){r.validation_rules=JSON.stringify({min_value:parseFloat(r.min_value)||0,max_value:parseFloat(r.max_value)||1e5});var i={};r.critical_low&&""!==r.critical_low.trim()&&(i.critical_low=parseFloat(r.critical_low)),r.warning_low&&""!==r.warning_low.trim()&&(i.warning_low=parseFloat(r.warning_low)),r.warning_high&&""!==r.warning_high.trim()&&(i.warning_high=parseFloat(r.warning_high)),r.critical_high&&""!==r.critical_high.trim()&&(i.critical_high=parseFloat(r.critical_high)),r.alarm_thresholds=JSON.stringify(i)}else if("Calculated"===n)try{r.input_metrics&&""!==r.input_metrics.trim()?r.input_metrics=JSON.parse(r.input_metrics):r.input_metrics=[]}catch(e){r.input_metrics=[]}else if("Tool"===n)try{r.input_metrics_tool&&""!==r.input_metrics_tool.trim()?r.input_metrics=JSON.parse(r.input_metrics_tool):r.input_metrics=[],delete r.input_metrics_tool,r.output_mapping&&""!==r.output_mapping.trim()?r.output_mapping=JSON.parse(r.output_mapping):r.output_mapping={},r.tool_parameters&&""!==r.tool_parameters.trim()?r.tool_parameters=JSON.parse(r.tool_parameters):r.tool_parameters={}}catch(e){var o;(o=MeasureErrorHandler).showError.apply(o,v(MeasureErrorCodes.JSON_PARSE_ERROR)),r.input_metrics||(r.input_metrics=[]),r.output_mapping||(r.output_mapping={}),r.tool_parameters||(r.tool_parameters={})}r.author=document.getElementById("author").value||I.CURRENT_USER,r.type=document.getElementById("type").value.trim()||"General",r.domain=document.getElementById("domain").value.trim()||"",r.category=document.getElementById("category").value.trim()||"General";var a=(new Date).toISOString(),s=document.getElementById("created_date").getAttribute("data-date");r.created_date=s?new Date(s).toISOString():a,r.last_modified_date=a,r.version=null!==(e=D)&&void 0!==e&&e.version?D.version+1:1;var l=[];document.querySelectorAll(".related-measure-item").forEach(function(e){var t=e.querySelector(".id");t&&t.value&&l.push({id:t.value})}),r.related_measures=l;var c=[];return document.querySelectorAll(".configuration-item").forEach(function(e){var t=e.querySelector(".configuration-id"),n=e.querySelector(".config-entry-id"),i=e.querySelector(".config-site"),o=e.querySelector(".config-location"),a=e.querySelector(".config-target-value"),s=e.querySelector(".config-alarm-thresholds"),l=null;o&&("SELECT"===o.tagName?l=o.value:"SPAN"===o.tagName&&(l=o.getAttribute("data-location-id")));var u=null;if(n&&("INPUT"===n.tagName?u=n.value:"SPAN"===n.tagName&&(u=n.textContent)),u&&o&&l){var d=(new Date).toISOString(),f={};try{s.value.trim()&&(f=JSON.parse(s.value))}catch(e){f={}}var p=t.getAttribute("data-config-id")||null,h=u||"config_".concat(r.measure_id,"_").concat(Date.now());c.push({id:p||null,entry_id:h,type:"Measure",category:"Configuration",site:i?i.textContent:"",target_value:a.value?parseFloat(a.value):null,alarm_thresholds:f,location_id:l,created_date:d,last_modified_date:d})}}),r.configurations=c,!r.precision||""===r.precision||isNaN(parseInt(r.precision))?r.precision=2:r.precision=parseInt(r.precision),r}function ir(e,t){var r={};for(var n in t)e&&JSON.stringify(e[n])===JSON.stringify(t[n])||(r[n]={old:e?JSON.stringify(e[n]):null,new:JSON.stringify(t[n])});return r}function or(e){return"object"===c(e)&&null!==e?JSON.stringify(e,null,2):"boolean"==typeof e?e?"true":"false":null==e?"N/A":e.toString()}function ar(){var e=document.getElementById("type"),t=e?e.value:"",r=document.querySelector(".measure-editor");r.classList.remove("base-selected","calculated-selected","tool-selected"),"Base"===t?r.classList.add("base-selected"):"Calculated"===t?r.classList.add("calculated-selected"):"Tool"===t&&r.classList.add("tool-selected")}function sr(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];E.reset();var t=document.getElementById("input_metrics_container");t&&(t.innerHTML="");var r=document.getElementById("author");r&&(r.value=I.CURRENT_USER);var n=document.getElementById("type");n&&(n.value="");var i=document.getElementById("domain");i&&(i.value="");var o=document.getElementById("category");o&&(o.value="");var a=document.getElementById("created_date");a&&(a.textContent="");var s=document.getElementById("last_modified_date");s&&(s.textContent=""),Q("details"),e&&fr("view"),ze()}function lr(e){S.querySelectorAll(".measure-item").forEach(function(t){t.dataset.id===e?(t.classList.add("active"),gr(null!==document.querySelector(".measure-checkbox:checked"))):t.classList.remove("active")})}function cr(){document.querySelectorAll(".measure-item").forEach(function(e){e.classList.remove("active")}),D=null}function ur(){return dr.apply(this,arguments)}function dr(){return(dr=b(m().m(function e(){return m().w(function(e){for(;;)switch(e.n){case 0:if(!j){e.n=2;break}return e.n=1,et();case 1:if(e.v){e.n=2;break}return e.a(2);case 2:sr(),ar(),cr(),fr("view");case 3:return e.a(2)}},e)}))).apply(this,arguments)}function fr(e){T=e;var t=document.querySelector(".measure-editor");t.classList.remove("view-mode","edit-mode","new-mode","clone-mode","import-mode"),e&&t.classList.add("".concat(e,"-mode"));var r="new"===e||"clone"===e||"import"===e;document.getElementById("name").readOnly=!r,document.getElementById("id").readOnly=!0,document.getElementById("measure_id").readOnly=!r,j=r,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=document.getElementById("new_measure"),n=document.getElementById("save_measure"),i=document.getElementById("clone_measure"),o=document.getElementById("import_measure"),a=document.getElementById("export_measure"),s=document.getElementById("cancel_measure");switch(o.disabled=!1,n.style.display="none",s.style.display="none",r.style.display="flex",e){case"view":r.style.display="flex",r.disabled=!1,i.disabled=!t,a.disabled=!0;break;case"edit":r.style.display="none",n.style.display="flex",s.style.display="flex",i.disabled=!1,a.disabled=!1;break;case"clone":case"new":case"import":r.style.display="none",n.style.display="flex",n.disabled=!1,s.style.display="flex",i.disabled=!0,a.disabled=!0}}(e,"edit"===e||"clone"===e)}function pr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.wide,i=void 0!==n&&n,o=r.modalClass,a=void 0===o?"":o,s=r.onClose,l=void 0===s?null:s,c=r.closeOnBackdrop,u=void 0!==c&&c,d=r.translateTitle,f=void 0!==d&&d,p=document.createElement("div");p.className="modal ".concat(a).concat(i?" wide":""),p.setAttribute("role","dialog"),p.setAttribute("aria-labelledby","modalTitle");var h=f?'<h2 id="modalTitle" data-i18n="'.concat(e,'"></h2>'):'<h2 id="modalTitle">'.concat(e,"</h2>");p.innerHTML='\n        <div class="modal-content">\n            <div class="modal-header">\n                '.concat(h,'\n                <span class="close-button" data-i18n-aria-label="close"><i class="fa-solid fa-times"></i></span>\n            </div>\n            <div class="modal-body">').concat(t,"</div>\n        </div>\n    "),document.body.appendChild(p),p.querySelectorAll("[data-i18n]").forEach(function(e){var t=e.getAttribute("data-i18n");t&&e.setAttribute("data-i18n",t)}),p.querySelectorAll(".audit-timestamp").forEach(function(e){var t,r=(null===(t=e.childNodes[0])||void 0===t||null===(t=t.textContent)||void 0===t?void 0:t.trim())||e.textContent.trim();if(r){var n=new Date(r);isNaN(n.getTime())||(e.setAttribute("data-date",n.toISOString()),e.setAttribute("data-i18n-date","datetime-medium"),e.textContent="")}});var m=function(){p.remove(),l&&l()};return p.querySelector(".close-button").onclick=m,u&&p.addEventListener("click",function(e){e.target===p&&m()}),p}function hr(e){return mr.apply(this,arguments)}function mr(){return(mr=b(m().m(function e(t){var r,n;return m().w(function(e){for(;;)switch(e.n){case 0:if(t&&(t.preventDefault(),t.stopPropagation()),!j){e.n=2;break}return e.n=1,et();case 1:if(e.v){e.n=2;break}return e.a(2);case 2:return fr("new"),r=(new Date).toISOString(),n={name:"",id:"",measure_id:"",safety_critical:!1,type:"",domain:"",category:"",unit:"",version:1,description:"",created_date:r,last_modified_date:r,author:I.CURRENT_USER},e.n=3,er(n);case 3:MeasureStatusHandler.showSuccess("createNewInstructions");case 4:return e.a(2)}},e)}))).apply(this,arguments)}function yr(){var e=document.getElementById("markAllMeasures");e.addEventListener("click",b(m().m(function t(){var r;return m().w(function(t){for(;;)switch(t.n){case 0:if(!(r=e.checked)){t.n=4;break}e.disabled=!0;case 1:if(!L){t.n=3;break}return t.n=2,it(document.getElementById("measureSearch").value.toLowerCase());case 2:t.n=1;break;case 3:e.disabled=!1;case 4:document.querySelectorAll(".measure-checkbox").forEach(function(e){e.checked=r}),gr(r);case 5:return t.a(2)}},t)}))),window.updateMarkAllState=function(){var t=Array.from(document.querySelectorAll(".measure-checkbox")),r=t.filter(function(e){return e.checked}).length;0===r?(e.checked=!1,e.indeterminate=!1):r===t.length?(e.checked=!0,e.indeterminate=!1):(e.checked=!1,e.indeterminate=!0),gr(r>0)}}function gr(e){var t=document.getElementById("export_measure");if(t){var r=document.querySelector(".measure-item.active");t.disabled=!e&&!r,e?(t.setAttribute("title",i18n.translate("exportSelectedMeasures")),t.setAttribute("data-i18n-title","exportSelectedMeasures")):(t.setAttribute("title",i18n.translate("exportMeasure")),t.setAttribute("data-i18n-title","exportMeasure"))}}function br(){return br=b(m().m(function e(){var t,r;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return utils.debugLog("Initializing application"),e.p=1,W(),E=document.getElementById("measureForm"),S=document.getElementById("measureList"),Ge("initial"),fr("view"),O=i.M.classFactory(I,o,a),e.n=2,O.initialize();case 2:return utils.debugLog("Graph database driver initialized successfully"),Y(),Qe("measureSearch","clearSearch"),yr(),e.n=3,vr();case 3:return $e(),e.n=4,ye();case 4:return e.n=5,_t();case 5:return e.n=6,rt();case 6:(t=document.getElementById("save_measure"))&&t.addEventListener("click",function(){var e=b(m().m(function e(t){return m().w(function(e){for(;;)switch(e.n){case 0:return t.preventDefault(),e.n=1,ft();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),e.n=8;break;case 7:e.p=7,e.v,(r=MeasureErrorHandler).showError.apply(r,v(MeasureErrorCodes.INIT_FAILED));case 8:return e.p=8,Ve("initial"),e.f(8);case 9:utils.debugLog("Application initialized");case 10:return e.a(2)}},e,null,[[1,7,8,9]])})),br.apply(this,arguments)}function vr(){return wr.apply(this,arguments)}function wr(){return(wr=b(m().m(function e(){var t,r,n;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=O.getQuery("GET_AVAILABLE_DOMAINS"),e.n=1,O.executeRead(t,{});case 1:(r=e.v)&&r.length>0&&(R=r.map(function(e){return"string"==typeof e?e:e.domain}),(n=document.querySelector("#domainDropdown .filter-dropdown-content"))&&(n.innerHTML="",R.forEach(function(e){var t=document.createElement("div");t.className="filter-item";var r=document.createElement("label"),i=document.createElement("input");i.type="checkbox",i.value=e;var o=document.createElement("span");o.textContent=e.replace(/_/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()}),r.appendChild(i),r.appendChild(o),t.appendChild(r),n.appendChild(t)}),n.querySelectorAll('input[type="checkbox"]').forEach(function(e){e.addEventListener("change",function(){C||e.disabled||(e.checked?N.add(e.value):N.delete(e.value),Fe(document.getElementById("domainFilterButton"),"Domain",N.size),rt(!0))})}))),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}},9386:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),{TraversalStrategySerializer:i}=r(474);e.exports=class{constructor(e){this.ioc=e,this.graphsonTraversalStrategySerializer=new i}canBeUsedFor(e){return this.graphsonTraversalStrategySerializer.canBeUsedFor(e)}serialize(e,t=!0){if(null==e){if(t)return n.from([this.ioc.DataType.TRAVERSALSTRATEGY,1]);const e=[0,0,0,0],r=[0,0,0,0];return n.from([...e,...r])}const r=[];t&&r.push(n.from([this.ioc.DataType.TRAVERSALSTRATEGY,0]));const i=e.fqcn,o={};for(const t in e.configuration)e.configuration.hasOwnProperty(t)&&(o[t]=e.configuration[t]);return r.push(this.ioc.classSerializer.serialize(i,!1)),r.push(this.ioc.mapSerializer.serialize(o,!1)),n.concat(r)}}},9449:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287),i=r(474),o=r(9032);class a{constructor(e){this._options=e||{},this._serializers=this.getDefaultSerializers().map(e=>{const t=new e;return t.writer=this,t});const t=this._options.serializers||{};Object.keys(t).forEach(e=>{const r=t[e];r.serialize&&(r.writer=this,this._serializers.unshift(r))})}getDefaultSerializers(){return f}adaptObject(e){let t;for(let r=0;r<this._serializers.length;r++){const n=this._serializers[r];if(n.canBeUsedFor&&n.canBeUsedFor(e)){t=n;break}}return t?t.serialize(e):Array.isArray(e)?e.map(e=>this.adaptObject(e)):e}write(e){return JSON.stringify(this.adaptObject(e))}writeRequest({requestId:e,op:t,processor:r,args:i}){const a={requestId:{"@type":"g:UUID","@value":e},op:t,processor:r,args:this._adaptArgs(i,!0)};return a.args.gremlin instanceof o&&(a.args.gremlin=this.adaptObject(a.args.gremlin)),n.from(JSON.stringify(a))}_adaptArgs(e,t){if(e instanceof Object){const r={};return Object.keys(e).forEach(n=>{r[n]=t&&"bindings"===n?this._adaptArgs(e[n],!1):this.adaptObject(e[n])}),r}return e}}class s extends a{getDefaultSerializers(){return p}}class l{constructor(e){this._options=e||{},this._deserializers={};const t=this.getDefaultDeserializers();if(Object.keys(t).forEach(e=>{const r=new(0,t[e]);r.reader=this,this._deserializers[e]=r}),this._options.serializers){const e=this._options.serializers||{};Object.keys(e).forEach(t=>{const r=e[t];r.deserialize&&(r.reader=this,this._deserializers[t]=r)})}}getDefaultDeserializers(){return u}read(e){if(void 0===e)return;if(null===e)return null;if(Array.isArray(e))return e.map(e=>this.read(e));const t=e[i.typeKey];if(t){const r=this._deserializers[t];return r?r.deserialize(e):e[i.valueKey]}return e&&"object"==typeof e&&e.constructor===Object?this._deserializeObject(e):e}readResponse(e){return this.read(JSON.parse(e.toString()))}_deserializeObject(e){const t=Object.keys(e),r={};for(let n=0;n<t.length;n++)r[t[n]]=this.read(e[t[n]]);return r}}class c extends l{getDefaultDeserializers(){return d}}const u={"g:Traverser":i.TraverserSerializer,"g:TraversalStrategy":i.TraversalStrategySerializer,"g:Int32":i.NumberSerializer,"g:Int64":i.NumberSerializer,"g:Float":i.NumberSerializer,"g:Double":i.NumberSerializer,"g:Date":i.DateSerializer,"g:Direction":i.DirectionSerializer,"g:Vertex":i.VertexSerializer,"g:Edge":i.EdgeSerializer,"g:VertexProperty":i.VertexPropertySerializer,"g:Property":i.PropertySerializer,"g:Path":i.Path3Serializer,"g:TextP":i.TextPSerializer,"g:T":i.TSerializer,"g:BulkSet":i.BulkSetSerializer},d=Object.assign({},u,{"g:List":i.ListSerializer,"g:Set":i.SetSerializer,"g:Map":i.MapSerializer}),f=[i.NumberSerializer,i.DateSerializer,i.BytecodeSerializer,i.TraverserSerializer,i.TraversalStrategySerializer,i.PSerializer,i.TextPSerializer,i.LambdaSerializer,i.EnumSerializer,i.VertexSerializer,i.EdgeSerializer,i.LongSerializer],p=f.concat([i.ListSerializer,i.SetSerializer,i.MapSerializer]);e.exports={GraphSON3Writer:s,GraphSON3Reader:c,GraphSON2Writer:a,GraphSON2Reader:l,GraphSONWriter:s,GraphSONReader:c}},9834:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GremlinDatabaseService:()=>R});var n=r(1982);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,i,o){var s=n&&n.prototype instanceof c?n:c,u=Object.create(s.prototype);return a(u,"_invoke",function(r,n,i){var o,a,s,c=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,a=0,s=e,f.n=r,l}};function p(r,n){for(a=r,s=n,t=0;!d&&c&&!i&&t<u.length;t++){var i,o=u[t],p=f.p,h=o[2];r>3?(i=h===n)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=p&&((i=r<2&&p<o[1])?(a=0,f.v=n,f.n=o[1]):p<h&&(i=r<3||o[0]>n||n>h)&&(o[4]=r,o[5]=n,f.n=h,a=0))}if(i||r>1)return l;throw d=!0,n}return function(i,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),a=u,s=h;(t=a<2?e:s)||!d;){o||(a?a<3?(a>1&&(f.n=-1),p(a,s)):f.n=s:f.v=s);try{if(c=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((t=(d=f.n<0)?s:r.call(n,f))!==l)break}catch(t){o=e,a=1,s=t}finally{c=1}}return{value:t,done:d}}}(r,i,o),!0),u}var l={};function c(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(a(t={},n,function(){return this}),t),p=d.prototype=c.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=d,a(p,"constructor",d),a(d,"constructor",u),u.displayName="GeneratorFunction",a(d,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,n,function(){return this}),a(p,"toString",function(){return"[object Generator]"}),(o=function(){return{w:s,m:h}})()}function a(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}a=function(e,t,r,n){function o(t,r){a(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},a(e,t,r,n)}function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function l(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var d=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t},t=[{key:"initialize",value:(s=l(o().m(function e(t){return o().w(function(e){for(;;)switch(e.n){case 0:return this.client=t,e.n=1,this.client.open();case 1:return e.a(2)}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"close",value:(a=l(o().m(function e(){var t,r;return o().w(function(e){for(;;)switch(e.n){case 0:if(null===(t=this.client)||void 0===t||!t.isOpen){e.n=2;break}return e.n=1,null===(r=this.client)||void 0===r?void 0:r.close();case 1:this.client=null;case 2:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"runQuery",value:(n=l(o().m(function e(t){var r,n,i=arguments;return o().w(function(e){for(;;)switch(e.n){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:null,n=i.length>2&&void 0!==i[2]&&i[2],null!=this.client){e.n=1;break}throw new Error("Gremlin client has not been initialised.");case 1:if(this.client.isOpen){e.n=2;break}return e.n=2,this.client.open();case 2:if(!n){e.n=4;break}return e.n=3,this.client.submit(t,r);case 3:case 5:return e.a(2,e.v);case 4:return utils.debugLog(this.prepareQuery(t,r)),e.n=5,this.client.submit(this.prepareQuery(t,r))}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"prepareQuery",value:function(e,t){for(var r,n=this,i=null!=t?t:{},o=[],a=/\$([a-zA-Z0-9_]+)\b/g;null!=(r=a.exec(e));)o.push(r[1]);var s=o.filter(function(e){return!(e in i)});if(s.length>0)throw new Error("One or more parameters, ".concat(s.join(", "),", are referenced in the query but not included in the parameters object."));if(null!=t&&0!==Object.keys(t).length){var l=Object.keys(t).sort(function(e,t){return t.length-e.length}),c=new RegExp("\\$(".concat(l.join("|"),")\\b"),"g");e=e.replace(c,function(e,r){var i=t[r],o=n.sanitiseValue(i);return null===o?"null":o})}return e}},{key:"sanitiseValue",value:function(e){if(null==e)return null;switch(i(e)){case"string":return this.escapeSpecial(e,"'");case"number":case"boolean":return e.toString();case"object":return Array.isArray(e)?!0===e.isRawArray?e.quotedElements?e.map(function(e){return'"'.concat(e,'"')}).join(", "):e.join(", "):"'".concat(JSON.stringify(e),"'"):this.isDate(e)?"'".concat(new Date(e).toISOString(),"'"):this.escapeSpecial(e,'"');default:throw new Error("Unsupported parameter type: ".concat(i(e)))}}},{key:"escapeSpecial",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"'";return"".concat(t).concat(e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\$/g,"\\$").replace(/`/g,"\\u0060")).concat(t)}},{key:"isDate",value:function(e){var t=new Date(e);return!isNaN(t.getTime())}}],t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,a,s}();function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){y(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var l=n&&n.prototype instanceof s?n:s,c=Object.create(l.prototype);return v(c,"_invoke",function(r,n,i){var o,s,l,c=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,l=e,f.n=r,a}};function p(r,n){for(s=r,l=n,t=0;!d&&c&&!i&&t<u.length;t++){var i,o=u[t],p=f.p,h=o[2];r>3?(i=h===n)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((i=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<h&&(i=r<3||o[0]>n||n>h)&&(o[4]=r,o[5]=n,f.n=h,s=0))}if(i||r>1)return a;throw d=!0,n}return function(i,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,l=h;(t=s<2?e:l)||!d;){o||(s?s<3?(s>1&&(f.n=-1),p(s,l)):f.n=l:f.v=l);try{if(c=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?l:r.call(n,f))!==a)break}catch(t){o=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(r,i,o),!0),c}var a={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(v(t={},n,function(){return this}),t),d=c.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,v(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,v(d,"constructor",c),v(c,"constructor",l),l.displayName="GeneratorFunction",v(c,i,"GeneratorFunction"),v(d),v(d,i,"Generator"),v(d,n,function(){return this}),v(d,"toString",function(){return"[object Generator]"}),(b=function(){return{w:o,m:f}})()}function v(e,t,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}v=function(e,t,r,n){function o(t,r){v(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},v(e,t,r,n)}function w(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function _(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){w(o,n,i,a,s,"next",e)}function s(e){w(o,n,i,a,s,"throw",e)}a(void 0)})}}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function S(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}function T(e,t,r){return t=A(t),function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,I()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r))}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(I=function(){return!!e})()}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}var R=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=T(this,t,[e])).config=e,n.gremlin=r,n.gremlinClient=new d(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),r=t,n=[{key:"initialize",value:(u=_(b().m(function e(){var t,r;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=new this.gremlin.driver.auth.PlainTextSaslAuthenticator("/dbs/".concat(this.config.db,"/colls/").concat(this.config.graph),this.config.key),r=new this.gremlin.driver.Client(this.config.endpoint,{authenticator:t,traversalSource:"g",rejectUnauthorized:!0,mimeType:"application/vnd.gremlin-v2.0+json"}),e.n=1,this.gremlinClient.initialize(r);case 1:e.n=3;break;case 2:throw e.p=2,e.v;case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return u.apply(this,arguments)})},{key:"close",value:(c=_(b().m(function e(){return b().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.gremlinClient.close();case 1:case 2:return e.a(2)}},e,this)})),function(){return c.apply(this,arguments)})},{key:"startTransaction",value:function(){return null}},{key:"endTransaction",value:function(){}},{key:"executeInTransaction",value:(l=_(b().m(function e(t,r){return b().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r(null);case 1:return e.a(2,e.v)}},e)})),function(e,t){return l.apply(this,arguments)})},{key:"transformRecord",value:function(e){if(!e)return null;try{var t={};return e.properties?Object.keys(e.properties).forEach(function(r){var n=e.properties[r];Array.isArray(n)&&n.length>0?t[r]=n[0].value:"string"==typeof n&&n.length>1&&"["===n[0]&&"{"!==n[1]?t[r]=JSON.parse(n):t[r]=n}):e.value&&e.value.properties?Object.keys(e.value.properties).forEach(function(r){var n=e.properties[r];Array.isArray(n)&&n.length>0?t[r]=n[0].value:"string"==typeof n&&n.length>1&&"["===n[0]&&"{"!==n[1]?t[r]=JSON.parse(n):t[r]=n}):"object"===g(e)&&Object.keys(e).forEach(function(r){var n=e[r];"string"==typeof n&&n.length>1&&"["===n[0]&&"{"!==n[1]?t[r]=JSON.parse(n):t[r]=n}),t.created_date&&"string"==typeof t.created_date&&(t.created_date=new Date(t.created_date)),t.last_modified_date&&"string"==typeof t.last_modified_date&&(t.last_modified_date=new Date(t.last_modified_date)),t}catch(t){return e}}},{key:"executeRead",value:(s=_(b().m(function e(t,r){var n,i,o,a,s=arguments;return b().w(function(e){for(;;)if(0===e.n)return n=s.length>2&&void 0!==s[2]?s[2]:null,i=s.length>3&&void 0!==s[3]&&s[3],o=s.length>4&&void 0!==s[4]?s[4]:0,a=s.length>5&&void 0!==s[5]?s[5]:0,e.a(2,this.executeInternal(t,m(m({},r),{},{skip:o,limit:a+o}),n,i,"WRITE"))},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"executeWrite",value:(a=_(b().m(function e(t,r){var n,i=arguments;return b().w(function(e){for(;;)if(0===e.n)return n=i.length>2&&void 0!==i[2]?i[2]:null,e.a(2,this.executeInternal(t,r,n,!0,"WRITE"))},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"_transformParameters",value:function(e){var t=m({},e);return this.queryStrings&&this.queryStrings.cosmosdb_default_values&&"object"===g(this.queryStrings.cosmosdb_default_values)&&Object.entries(this.queryStrings.cosmosdb_default_values).forEach(function(e){var r=f(e,2),n=r[0],i=r[1],o=t[n];(null==o||"string"==typeof o&&""===o||Array.isArray(o)&&0===o.length)&&(t[n]=i)}),this.queryStrings&&this.queryStrings.cosmosdb_force_lowercase&&Array.isArray(this.queryStrings.cosmosdb_force_lowercase)&&this.queryStrings.cosmosdb_force_lowercase.length>0&&this.queryStrings.cosmosdb_force_lowercase.forEach(function(e){e in t&&"string"==typeof t[e]&&(t[e]=t[e].toLowerCase())}),t}},{key:"executeInternal",value:(o=_(b().m(function e(t,r,n,i,o){var a,s,l;return b().w(function(e){for(;;)switch(e.n){case 0:return s=this._transformParameters(r),utils.debugLog("Executing Gremlin query:\n".concat(t)),e.n=1,this.gremlinClient.runQuery(t,m(m({},s),{},{partitionkeyproperty:this.config.partitionkeyproperty,partitionkeyvalue:this.config.partitionkeyvalue}));case 1:if(a=e.v,l=this.normaliseData(a),!i){e.n=3;break}if(!Array.isArray(l)){e.n=2;break}if(!(l.length>0)){e.n=2;break}return e.a(2,l[0]);case 2:return e.a(2,l);case 3:if(!Array.isArray(l)){e.n=4;break}return e.a(2,l);case 4:if(null==l){e.n=5;break}return e.a(2,[l]);case 5:return e.a(2,[]);case 6:return e.a(2)}},e,this)})),function(e,t,r,n,i){return o.apply(this,arguments)})},{key:"normaliseData",value:function(e){var t=this;return 0===e._items.length?null:1===e._items.length?this.transformRecord(e._items[0]):e._items.map(function(e){return t.transformRecord(e)})}}],n&&E(r.prototype,n),i&&E(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i,o,a,s,l,c,u}(n.M)},9899:(e,t,r)=>{"use strict";const n=r(5737),i=r(9032),{TraversalStrategies:o}=r(3335);e.exports={Transaction:class{constructor(e){this._g=e,this._sessionBasedConnection=void 0}begin(){if(this._sessionBasedConnection)throw new Error("Transaction already started on this object");this._sessionBasedConnection=this._g.remoteConnection.createSession();const e=new o;return e.addStrategy(new n.RemoteStrategy(this._sessionBasedConnection)),new this._g.graphTraversalSourceClass(this._g.graph,e,new i(this._g.bytecode),this._g.graphTraversalSourceClass,this._g.graphTraversalClass)}commit(){if(!this._sessionBasedConnection)throw new Error("Cannot commit a transaction that is not started");return this._sessionBasedConnection.commit().finally(()=>this.close())}rollback(){if(!this._sessionBasedConnection)throw new Error("Cannot rollback a transaction that is not started");return this._sessionBasedConnection.rollback().finally(()=>this.close())}get isOpen(){return this._sessionBasedConnection.isOpen}close(){this._sessionBasedConnection&&this._sessionBasedConnection.close()}}}},9910:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=a;var n,i=(n=r(7037))&&n.__esModule?n:{default:n};const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function a(e,t=0){return o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]}var s=function(e,t=0){const r=a(e,t);if(!(0,i.default)(r))throw TypeError("Stringified UUID is invalid");return r};t.default=s},9995:(e,t,r)=>{"use strict";const{Buffer:n}=r(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.FLOAT]=this}canBeUsedFor(e){}serialize(e,t=!0){if(null==e)return t?n.from([this.ioc.DataType.FLOAT,1]):n.from([0,0,0,0]);const r=[];t&&r.push(n.from([this.ioc.DataType.FLOAT,0]));const i=n.alloc(4);return i.writeFloatBE(e),r.push(i),n.concat(r)}deserialize(e,t=!0){let r=0,i=e;try{if(null==e||!(e instanceof n))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(r++,e!==this.ioc.DataType.FLOAT)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(r++,1===t)return{v:null,len:r};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<4)throw new Error("unexpected {value} length");r+=4;return{v:i.readFloatBE(),len:r}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return i[e](r,r.exports,a),r.exports}a.m=i,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var i=Object.create(null);a.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,a.d(i,o),i},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,r)=>(a.f[r](e,t),t),[])),a.u=e=>e+".js",a.miniCssF=e=>{},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},n="admin-measures:",a.l=(e,t,i,o)=>{if(r[e])r[e].push(t);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==n+i){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",n+i),s.src=e),r[e]=[t];var f=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=r[e];if(delete r[e],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(e=>e(n)),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),l&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/dist/",(()=>{var e={50:0};a.f.j=(t,r)=>{var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise((r,i)=>n=e[t]=[r,i]);r.push(n[2]=i);var o=a.p+a.u(t),s=new Error;a.l(o,r=>{if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,n[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var n,i,[o,s,l]=r,c=0;if(o.some(t=>0!==e[t])){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(l)l(a)}for(t&&t(r);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkadmin_measures=self.webpackChunkadmin_measures||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),a(6284),a(9285),a(5283),a(3676),a(7956),a(3320),a(2617),a(5118),a(8209);a(8421)})();