(()=>{var e,t,n,r,i={74:(e,t,n)=>{"use strict";const r=n(1104),i=Object.freeze(new r.ImmutableMap);class a{constructor(e,t){if(!Array.isArray(e))throw new TypeError("items must be an Array instance");this._items=e,this.attributes=t||i,this.length=e.length}[Symbol.iterator](){return this._items[Symbol.iterator]()}toArray(){return this._items}first(){const e=this._items[0];return void 0!==e?e:null}}e.exports=a},163:(e,t,n)=>{"use strict";const r=n(5332),{TraversalStrategies:i}=n(3335);class a{constructor(e,t){this.id=e,this.label=t}equals(e){return e instanceof a&&this.id===e.id}}class o{constructor(e,t){this.key=e,this.value=t}toString(){return`p[${this.key}->${l(this.value)}]`}equals(e){return e instanceof o&&this.key===e.key&&this.value===e.value}}class s{constructor(e,t){this.labels=e,this.objects=t}toString(){return`path[${(this.objects||[]).join(", ")}]`}equals(e){return e instanceof s&&(e===this||c(this.objects,e.objects)&&c(this.labels,e.labels))}}function c(e,t){if(e===t)return!0;if("function"==typeof e.equals)return e.equals(t);if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!c(e[n],t[n]))return!1;return!0}return!1}function l(e){if(null==e)return e;const t=e.toString();return t.length>20?t.substr(0,20):t}e.exports={Edge:class extends a{constructor(e,t,n,r,i){if(super(e,n),this.outV=t,this.inV=r,this.properties={},i){const e=Object.keys(i);for(let t=0;t<e.length;t++){const n=e[t];this.properties[n]=i[n].value}}}toString(){const e=this.outV?this.outV.id:"?",t=this.inV?this.inV.id:"?";return`e[${this.id}][${e}-${this.label}->${t}]`}},Graph:class{traversal(e){return new(e||r.GraphTraversalSource)(this,new i)}toString(){return"graph[]"}},Path:s,Property:o,Vertex:class extends a{constructor(e,t,n){super(e,t),this.properties=n}toString(){return`v[${this.id}]`}},VertexProperty:class extends a{constructor(e,t,n,r){super(e,t),this.value=n,this.key=this.label,this.properties=r}toString(){return`vp[${this.label}->${l(this.value)}]`}}}},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||e,o),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var c,l,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,a),!0;case 6:return u.fn.call(u.context,t,r,i,a,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var p,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,i);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];u[l].fn.apply(u[l].context,c)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var c=0,l=[],u=s.length;c<u;c++)(s[c].fn!==t||i&&!s[c].once||r&&s[c].context!==r)&&l.push(s[c]);l.length?this._events[a]=1===l.length?l[0]:l:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},243:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.VERTEX]=this}canBeUsedFor(e){return e instanceof i.Vertex}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.VERTEX,1]);const e=[3,0,0,0,0,0],n=[0,0,0,0],i=[254,1];return r.from([...e,...n,...i])}const n=[];return t&&n.push(r.from([this.ioc.DataType.VERTEX,0])),n.push(this.ioc.anySerializer.serialize(e.id)),n.push(this.ioc.stringSerializer.serialize(e.label,!1)),n.push(this.ioc.anySerializer.serialize(e.properties)),r.concat(n)}deserialize(e,t=!0){let n=0,a=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=a.readUInt8();if(n++,e!==this.ioc.DataType.VERTEX)throw new Error("unexpected {type_code}");if(a=a.slice(1),a.length<1)throw new Error("{value_flag} is missing");const t=a.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");a=a.slice(1)}let o,s,c,l,u,d;try{({v:o,len:s}=this.ioc.anySerializer.deserialize(a)),n+=s}catch(e){throw e.message="{id}: "+e.message,e}a=a.slice(s);try{({v:c,len:l}=this.ioc.stringSerializer.deserialize(a,!1)),n+=l}catch(e){throw e.message="{label}: "+e.message,e}a=a.slice(l);try{({v:u,len:d}=this.ioc.anySerializer.deserialize(a)),n+=d}catch(e){throw e.message="{properties}: "+e.message,e}a=a.slice(d);const p=u||[];return{v:new i.Vertex(o,c,p),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:a,err:e})}}}},251:(e,t)=>{t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?i-1:0,p=n?-1:1,f=e[t+d];for(d+=p,a=f&(1<<-u)-1,f>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=p,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=256*o+e[t+d],d+=p,u-=8);if(0===a)a=1-l;else{if(a===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),a-=l}return(f?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,c,l=8*a-i-1,u=(1<<l)-1,d=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(o++,c/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*c-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&s,f+=h,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+f]=255&o,f+=h,o/=256,l-=8);e[n+f-h]|=128*m}},277:(e,t,n)=>{"use strict";const{ArrayIsArray:r,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:a,ArrayPrototypeMap:o,NumberIsInteger:s,NumberIsNaN:c,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:u,NumberParseInt:d,ObjectPrototypeHasOwnProperty:p,RegExpPrototypeExec:f,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:y}=n(4134),{hideStackFrames:g,codes:{ERR_SOCKET_BAD_PORT:v,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:b,ERR_OUT_OF_RANGE:E,ERR_UNKNOWN_SIGNAL:w}}=n(6371),{normalizeEncoding:T}=n(7760),{isAsyncFunction:S,isArrayBufferView:I}=n(7760).types,A={};const O=/^[0-7]+$/;const N=g((e,t,n=u,r=l)=>{if("number"!=typeof e)throw new _(t,"number",e);if(!s(e))throw new E(t,"an integer",e);if(e<n||e>r)throw new E(t,`>= ${n} && <= ${r}`,e)}),R=g((e,t,n=-2147483648,r=2147483647)=>{if("number"!=typeof e)throw new _(t,"number",e);if(!s(e))throw new E(t,"an integer",e);if(e<n||e>r)throw new E(t,`>= ${n} && <= ${r}`,e)}),x=g((e,t,n=!1)=>{if("number"!=typeof e)throw new _(t,"number",e);if(!s(e))throw new E(t,"an integer",e);const r=n?1:0,i=4294967295;if(e<r||e>i)throw new E(t,`>= ${r} && <= ${i}`,e)});function L(e,t){if("string"!=typeof e)throw new _(t,"string",e)}const C=g((e,t,n)=>{if(!i(n,e)){const r=a(o(n,e=>"string"==typeof e?`'${e}'`:h(e)),", ");throw new b(t,e,"must be one of: "+r)}});function k(e,t){if("boolean"!=typeof e)throw new _(t,"boolean",e)}function j(e,t,n){return null!=e&&p(e,t)?e[t]:n}const D=g((e,t,n=null)=>{const i=j(n,"allowArray",!1),a=j(n,"allowFunction",!1);if(!j(n,"nullable",!1)&&null===e||!i&&r(e)||"object"!=typeof e&&(!a||"function"!=typeof e))throw new _(t,"Object",e)}),$=g((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new _(t,"a dictionary",e)}),P=g((e,t,n=0)=>{if(!r(e))throw new _(t,"Array",e);if(e.length<n){throw new b(t,e,`must be longer than ${n}`)}});const M=g((e,t="buffer")=>{if(!I(e))throw new _(t,["Buffer","TypedArray","DataView"],e)});const U=g((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new _(t,"AbortSignal",e)}),F=g((e,t)=>{if("function"!=typeof e)throw new _(t,"Function",e)}),z=g((e,t)=>{if("function"!=typeof e||S(e))throw new _(t,"Function",e)}),B=g((e,t)=>{if(void 0!==e)throw new _(t,"undefined",e)});const H=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function V(e,t){if(void 0===e||!f(H,e))throw new b(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,n){if(void 0===e&&(e=n),"string"==typeof e){if(null===f(O,e))throw new b(t,e,"must be a 32-bit unsigned integer or an octal string");e=d(e,8)}return x(e,t),e},validateArray:P,validateStringArray:function(e,t){P(e,t);for(let n=0;n<e.length;n++)L(e[n],`${t}[${n}]`)},validateBooleanArray:function(e,t){P(e,t);for(let n=0;n<e.length;n++)k(e[n],`${t}[${n}]`)},validateAbortSignalArray:function(e,t){P(e,t);for(let n=0;n<e.length;n++){const r=e[n],i=`${t}[${n}]`;if(null==r)throw new _(i,"AbortSignal",r);U(r,i)}},validateBoolean:k,validateBuffer:M,validateDictionary:$,validateEncoding:function(e,t){const n=T(t),r=e.length;if("hex"===n&&r%2!=0)throw new b("encoding",t,`is invalid for data of length ${r}`)},validateFunction:F,validateInt32:R,validateInteger:N,validateNumber:function(e,t,n=void 0,r){if("number"!=typeof e)throw new _(t,"number",e);if(null!=n&&e<n||null!=r&&e>r||(null!=n||null!=r)&&c(e))throw new E(t,`${null!=n?`>= ${n}`:""}${null!=n&&null!=r?" && ":""}${null!=r?`<= ${r}`:""}`,e)},validateObject:D,validateOneOf:C,validatePlainFunction:z,validatePort:function(e,t="Port",n=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===y(e).length||+e!==+e>>>0||e>65535||0===e&&!n)throw new v(t,e,n);return 0|e},validateSignalName:function(e,t="signal"){if(L(e,t),void 0===A[e]){if(void 0!==A[m(e)])throw new w(e+" (signals must use all capital letters)");throw new w(e)}},validateString:L,validateUint32:x,validateUndefined:B,validateUnion:function(e,t,n){if(!i(n,e))throw new _(t,`('${a(n,"|")}')`,e)},validateAbortSignal:U,validateLinkHeaderValue:function(e){if("string"==typeof e)return V(e,"hints"),e;if(r(e)){const t=e.length;let n="";if(0===t)return n;for(let r=0;r<t;r++){const i=e[r];V(i,"hints"),n+=i,r!==t-1&&(n+=", ")}return n}throw new b("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},345:(e,t,n)=>{"use strict";const{StringPrototypeSlice:r,SymbolIterator:i,TypedArrayPrototypeSet:a,Uint8Array:o}=n(4134),{Buffer:s}=n(8287),{inspect:c}=n(7760);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,n=""+t.data;for(;null!==(t=t.next);)n+=e+t.data;return n}concat(e){if(0===this.length)return s.alloc(0);const t=s.allocUnsafe(e>>>0);let n=this.head,r=0;for(;n;)a(t,n.data,r),r+=n.data.length,n=n.next;return t}consume(e,t){const n=this.head.data;if(e<n.length){const t=n.slice(0,e);return this.head.data=n.slice(e),t}return e===n.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[i](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",n=this.head,i=0;do{const a=n.data;if(!(e>a.length)){e===a.length?(t+=a,++i,n.next?this.head=n.next:this.head=this.tail=null):(t+=r(a,0,e),this.head=n,n.data=r(a,e));break}t+=a,e-=a.length,++i}while(null!==(n=n.next));return this.length-=i,t}_getBuffer(e){const t=s.allocUnsafe(e),n=e;let r=this.head,i=0;do{const s=r.data;if(!(e>s.length)){e===s.length?(a(t,s,n-e),++i,r.next?this.head=r.next:this.head=this.tail=null):(a(t,new o(s.buffer,s.byteOffset,e),n-e),this.head=r,r.data=s.slice(e));break}a(t,s,n-e),e-=s.length,++i}while(null!==(r=r.next));return this.length-=i,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return c(this,{...t,depth:0,customInspect:!1})}}},474:(e,t,n)=>{"use strict";const r=n(1545),i=n(3335),a=n(9032),o=n(163),s=n(1104),c="@value",l="@type";class u{serialize(){throw new Error("serialize() method not implemented for "+this.constructor.name)}deserialize(){throw new Error("deserialize() method not implemented for "+this.constructor.name)}canBeUsedFor(){throw new Error("canBeUsedFor() method not implemented for "+this.constructor.name)}}class d extends u{constructor(e){super(),this.typeKey=e}deserialize(e){const t=e[c];if(!Array.isArray(t))throw new Error("Expected Array, obtained: "+t);return t.map(e=>this.reader.read(e))}serialize(e){return{[l]:this.typeKey,[c]:e.map(e=>this.writer.adaptObject(e))}}canBeUsedFor(e){return Array.isArray(e)}}e.exports={BulkSetSerializer:class extends u{deserialize(e){const t=e[c];if(!Array.isArray(t))throw new Error("Expected Array, obtained: "+t);let n=[];for(let e=0,r=t.length;e<r;e+=2){const r=t.slice(e,e+2);n=n.concat(Array(this.reader.read(r[1])).fill(this.reader.read(r[0])))}return n}},BytecodeSerializer:class extends u{serialize(e){let t=e;e instanceof r.Traversal&&(t=e.getBytecode());const n={};n[l]="g:Bytecode";const i=n[c]={},a=this._serializeInstructions(t.sourceInstructions);a&&(i.source=a);const o=this._serializeInstructions(t.stepInstructions);return o&&(i.step=o),n}_serializeInstructions(e){if(0===e.length)return null;const t=new Array(e.length);t[0]=e[0];for(let n=0;n<e.length;n++)t[n]=e[n].map(e=>this.writer.adaptObject(e));return t}canBeUsedFor(e){return e instanceof a||e instanceof r.Traversal}},DateSerializer:class extends u{serialize(e){return{[l]:"g:Date",[c]:e.getTime()}}deserialize(e){return new Date(e[c])}canBeUsedFor(e){return e instanceof Date}},DirectionSerializer:class extends u{deserialize(e){return r.direction[e[c].toLowerCase()]}},EdgeSerializer:class extends u{deserialize(e){const t=e[c];return new o.Edge(this.reader.read(t.id),new o.Vertex(this.reader.read(t.outV),this.reader.read(t.outVLabel)),t.label,new o.Vertex(this.reader.read(t.inV),this.reader.read(t.inVLabel)),this.reader.read(t.properties))}serialize(e){return{[l]:"g:Edge",[c]:{id:this.writer.adaptObject(e.id),label:e.label,outV:this.writer.adaptObject(e.outV.id),outVLabel:e.outV.label,inV:this.writer.adaptObject(e.inV.id),inVLabel:e.inV.label}}}canBeUsedFor(e){return e instanceof o.Edge}},EnumSerializer:class extends u{serialize(e){return{[l]:"g:"+e.typeName,[c]:e.elementName}}canBeUsedFor(e){return e&&e.typeName&&e instanceof r.EnumValue}},LambdaSerializer:class extends u{serialize(e){const t=e(),n="string"==typeof t,r=n?t:t[0],i=n?"gremlin-groovy":t[1],a="gremlin-groovy"===i&&r.includes("->")?r.substring(0,r.indexOf("->")).includes(",")?2:1:-1;return{[l]:"g:Lambda",[c]:{arguments:a,language:i,script:r}}}canBeUsedFor(e){return"function"==typeof e}},ListSerializer:class extends d{constructor(){super("g:List")}},LongSerializer:class extends u{serialize(e){return{[l]:"g:Int64",[c]:e.value}}canBeUsedFor(e){return e instanceof s.Long}},MapSerializer:class extends u{deserialize(e){const t=e[c];if(!Array.isArray(t))throw new Error("Expected Array, obtained: "+t);const n=new Map;for(let e=0;e<t.length;e+=2)n.set(this.reader.read(t[e]),this.reader.read(t[e+1]));return n}serialize(e){const t=[];return e.forEach((e,n)=>{t.push(this.writer.adaptObject(n)),t.push(this.writer.adaptObject(e))}),{[l]:"g:Map",[c]:t}}canBeUsedFor(e){return e instanceof Map}},NumberSerializer:class extends u{serialize(e){return isNaN(e)?{[l]:"g:Double",[c]:"NaN"}:e===Number.POSITIVE_INFINITY?{[l]:"g:Double",[c]:"Infinity"}:e===Number.NEGATIVE_INFINITY?{[l]:"g:Double",[c]:"-Infinity"}:e}deserialize(e){const t=e[c];return"NaN"===t?NaN:"Infinity"===t?Number.POSITIVE_INFINITY:"-Infinity"===t?Number.NEGATIVE_INFINITY:parseFloat(t)}canBeUsedFor(e){return"number"==typeof e}},Path3Serializer:class extends u{deserialize(e){const t=e[c];return new o.Path(this.reader.read(t.labels),this.reader.read(t.objects))}},PathSerializer:class extends u{deserialize(e){const t=e[c],n=t.objects.map(e=>this.reader.read(e));return new o.Path(this.reader.read(t.labels),n)}},PropertySerializer:class extends u{deserialize(e){const t=e[c];return new o.Property(t.key,this.reader.read(t.value))}},PSerializer:class extends u{serialize(e){const t={};t[l]="g:P";const n=t[c]={predicate:e.operator};return void 0===e.other||null===e.other?n.value=this.writer.adaptObject(e.value):n.value=[this.writer.adaptObject(e.value),this.writer.adaptObject(e.other)],t}canBeUsedFor(e){return e instanceof r.P}},TextPSerializer:class extends u{serialize(e){const t={};t[l]="g:TextP";const n=t[c]={predicate:e.operator};return void 0===e.other||null===e.other?n.value=this.writer.adaptObject(e.value):n.value=[this.writer.adaptObject(e.value),this.writer.adaptObject(e.other)],t}canBeUsedFor(e){return e instanceof r.TextP}},SetSerializer:class extends d{constructor(){super("g:Set")}},TSerializer:class extends u{deserialize(e){return r.t[e[c]]}},TraverserSerializer:class extends u{serialize(e){return{[l]:"g:Traverser",[c]:{value:this.writer.adaptObject(e.object),bulk:this.writer.adaptObject(e.bulk)}}}deserialize(e){const t=e[c];return new r.Traverser(this.reader.read(t.value),this.reader.read(t.bulk))}canBeUsedFor(e){return e instanceof r.Traverser}},TraversalStrategySerializer:class extends u{serialize(e){const t={};for(const n in e.configuration)e.configuration.hasOwnProperty(n)&&(t[n]=this.writer.adaptObject(e.configuration[n]));return{[l]:"g:"+e.constructor.name,[c]:t}}canBeUsedFor(e){return e instanceof i.TraversalStrategy}},typeKey:l,valueKey:c,VertexPropertySerializer:class extends u{deserialize(e){const t=e[c];return new o.VertexProperty(this.reader.read(t.id),t.label,this.reader.read(t.value),this.reader.read(t.properties))}},VertexSerializer:class extends u{deserialize(e){const t=e[c];return new o.Vertex(this.reader.read(t.id),t.label,this.reader.read(t.properties))}serialize(e){return{[l]:"g:Vertex",[c]:{id:this.writer.adaptObject(e.id),label:e.label}}}canBeUsedFor(e){return e instanceof o.Vertex}}}},658:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.input=document.getElementById(t),this.dropdown=document.getElementById(n),this.measuresList=null===(r=this.dropdown)||void 0===r?void 0:r.querySelector(".measures-list"),this.selectedIndex=-1,this.filteredMeasures=[],this.isVisible=!1,this.measures=i||window.measures||[],this.input&&this.dropdown&&this.init()},n=[{key:"init",value:function(){var e=this;this.input.addEventListener("input",function(t){return e.handleInput(t)}),this.input.addEventListener("keydown",function(t){return e.handleKeydown(t)}),this.input.addEventListener("click",function(t){return e.handleClick(t)}),document.addEventListener("click",function(t){e.input.contains(t.target)||e.dropdown.contains(t.target)||e.hide()})}},{key:"handleInput",value:function(e){var t=e.target.value,n=e.target.selectionStart,r=t.substring(0,n),i=(t.substring(n),r.match(/[+-]?\s*\d*\.?\d*\s*\(\s*([a-zA-Z_][a-zA-Z0-9_]*)?\s*$/));if(i){var a=i[1]||"";this.showSuggestions(a)}else this.hide()}},{key:"handleClick",value:function(e){var t=e.target.value,n=e.target.selectionStart,r=t.substring(0,n).match(/[+-]?\s*\d*\.?\d*\s*\(\s*([a-zA-Z_][a-zA-Z0-9_]*)?\s*$/);if(r){var i=r[1]||"";this.showSuggestions(i)}}},{key:"handleKeydown",value:function(e){if(this.isVisible)switch(e.key){case"ArrowDown":e.preventDefault(),this.selectedIndex=Math.min(this.selectedIndex+1,this.filteredMeasures.length-1),this.updateSelection();break;case"ArrowUp":e.preventDefault(),this.selectedIndex=Math.max(this.selectedIndex-1,-1),this.updateSelection();break;case"Enter":e.preventDefault(),this.selectedIndex>=0&&this.selectMeasure(this.filteredMeasures[this.selectedIndex]);break;case"Escape":e.preventDefault(),this.hide()}}},{key:"showSuggestions",value:function(e){Array.isArray(this.measures)&&0!==this.measures.length?(this.filteredMeasures=this.measures.filter(function(t){var n=(t.measure_id||"").toLowerCase(),r=(t.id||"").toLowerCase(),i=(t.name||"").toLowerCase(),a=e.toLowerCase();return n.includes(a)||r.includes(a)||i.includes(a)}),this.filteredMeasures=this.filteredMeasures.slice(0,10),0!==this.filteredMeasures.length?(this.renderSuggestions(),this.show()):this.hide()):this.hide()}},{key:"renderSuggestions",value:function(){var e=this;this.measuresList&&(this.measuresList.innerHTML="",this.filteredMeasures.forEach(function(t,n){var r=document.createElement("li");r.dataset.index=n;var i=document.createElement("div");i.className="measure-item";var a=document.createElement("div");a.className="measure-id",a.textContent=t.measure_id||t.id,a.textContent||(a.setAttribute("data-i18n","measuresAutocompleteUnknownId"),a.textContent="Unknown ID");var o=document.createElement("div");o.className="measure-name",o.textContent=t.name,o.textContent||(o.setAttribute("data-i18n","measuresAutocompleteNoName"),o.textContent="No name available"),i.appendChild(a),i.appendChild(o),r.appendChild(i),r.addEventListener("click",function(){return e.selectMeasure(t)}),e.measuresList.appendChild(r)}))}},{key:"updateSelection",value:function(){var e=this;this.measuresList.querySelectorAll("li").forEach(function(t,n){n===e.selectedIndex?(t.classList.add("selected"),t.scrollIntoView({behavior:"smooth",block:"nearest"})):t.classList.remove("selected")})}},{key:"selectMeasure",value:function(e){var t=e.measure_id||e.id;if(t){var n=this.input.value,r=this.input.selectionStart,i=n.substring(0,r),a=n.substring(r),o=i.match(/^(.*[+-]?\s*\d*\.?\d*\s*\(\s*)([a-zA-Z_][a-zA-Z0-9_]*)?(.*)$/);if(o){var s=o[1],c=s+t+(a.trimStart().startsWith(")")?"":")")+a;this.input.value=c;var l=s.length+t.length;this.input.setSelectionRange(l,l),this.input.dispatchEvent(new Event("input",{bubbles:!0}))}this.hide()}}},{key:"show",value:function(){this.dropdown.classList.remove("hide"),this.isVisible=!0,this.selectedIndex=-1}},{key:"hide",value:function(){this.dropdown.classList.add("hide"),this.isVisible=!1,this.selectedIndex=-1}},{key:"updateMeasures",value:function(e){this.measures=e||[]}}],n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();window.MeasuresAutocomplete=r},703:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.SHORT]=this}canBeUsedFor(e){}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.SHORT,1]):r.from([0,0]);const n=[];t&&n.push(r.from([this.ioc.DataType.SHORT,0]));const i=r.alloc(2);return i.writeInt16BE(e),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.SHORT)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<2)throw new Error("unexpected {value} length");n+=2;return{v:i.readInt16BE(),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},795:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BYTE]=this}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.BYTE,1]):r.from([0]);const n=[];t&&n.push(r.from([this.ioc.DataType.BYTE,0]));const i=r.alloc(1);return i.writeUInt8(e),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.BYTE)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<1)throw new Error("unexpected {value} length");n+=1;return{v:i.readUInt8(),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},823:(e,t,n)=>{"use strict";const r=globalThis.AbortController||n(5568).AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:a,ERR_MISSING_ARGS:o,ERR_OUT_OF_RANGE:s},AbortError:c}=n(6371),{validateAbortSignal:l,validateInteger:u,validateObject:d}=n(277),p=n(4134).Symbol("kWeak"),f=n(4134).Symbol("kResistStopPropagation"),{finished:h}=n(6238),m=n(7830),{addAbortSignalNoValidate:y}=n(4147),{isWritable:g,isNodeStream:v}=n(6115),{deprecate:_}=n(7760),{ArrayPrototypePush:b,Boolean:E,MathFloor:w,Number:T,NumberIsNaN:S,Promise:I,PromiseReject:A,PromiseResolve:O,PromisePrototypeThen:N,Symbol:R}=n(4134),x=R("kEmpty"),L=R("kEof");function C(e,t){if("function"!=typeof e)throw new a("fn",["Function","AsyncFunction"],e);null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal");let r=1;null!=(null==t?void 0:t.concurrency)&&(r=w(t.concurrency));let i=r-1;return null!=(null==t?void 0:t.highWaterMark)&&(i=w(t.highWaterMark)),u(r,"options.concurrency",1),u(i,"options.highWaterMark",0),i+=r,async function*(){const a=n(7760).AbortSignalAny([null==t?void 0:t.signal].filter(E)),o=this,s=[],l={signal:a};let u,d,p=!1,f=0;function h(){p=!0,m()}function m(){f-=1,y()}function y(){d&&!p&&f<r&&s.length<i&&(d(),d=null)}!async function(){try{for await(let t of o){if(p)return;if(a.aborted)throw new c;try{if(t=e(t,l),t===x)continue;t=O(t)}catch(e){t=A(e)}f+=1,N(t,m,h),s.push(t),u&&(u(),u=null),!p&&(s.length>=i||f>=r)&&await new I(e=>{d=e})}s.push(L)}catch(e){const t=A(e);N(t,m,h),s.push(t)}finally{p=!0,u&&(u(),u=null)}}();try{for(;;){for(;s.length>0;){const e=await s[0];if(e===L)return;if(a.aborted)throw new c;e!==x&&(yield e),s.shift(),y()}await new I(e=>{u=e})}}finally{p=!0,d&&(d(),d=null)}}.call(this)}async function k(e,t=void 0){for await(const n of j.call(this,e,t))return!0;return!1}function j(e,t){if("function"!=typeof e)throw new a("fn",["Function","AsyncFunction"],e);return C.call(this,async function(t,n){return await e(t,n)?t:x},t)}class D extends o{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function $(e){if(e=T(e),S(e))return 0;if(e<0)throw new s("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:_(function(e=void 0){return null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal"),async function*(){let t=0;for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new c({cause:e.signal.reason});yield[t++,r]}}.call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),e=$(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new c;for await(const n of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new c;e--<=0&&(yield n)}}.call(this)},filter:j,flatMap:function(e,t){const n=C.call(this,e,t);return async function*(){for await(const e of n)yield*e}.call(this)},map:C,take:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),e=$(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new c;for await(const n of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new c;if(e-- >0&&(yield n),e<=0)return}}.call(this)},compose:function(e,t){if(null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),v(e)&&!g(e))throw new i("stream",e,"must be writable");const n=m(this,e);return null!=t&&t.signal&&y(t.signal,n),n}},e.exports.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new a("fn",["Function","AsyncFunction"],e);return!await k.call(this,async(...t)=>!await e(...t),t)},forEach:async function(e,t){if("function"!=typeof e)throw new a("fn",["Function","AsyncFunction"],e);for await(const n of C.call(this,async function(t,n){return await e(t,n),x},t));},reduce:async function(e,t,n){var i;if("function"!=typeof e)throw new a("reducer",["Function","AsyncFunction"],e);null!=n&&d(n,"options"),null!=(null==n?void 0:n.signal)&&l(n.signal,"options.signal");let o=arguments.length>1;if(null!=n&&null!==(i=n.signal)&&void 0!==i&&i.aborted){const e=new c(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(e)),e}const s=new r,u=s.signal;if(null!=n&&n.signal){const e={once:!0,[p]:this,[f]:!0};n.signal.addEventListener("abort",()=>s.abort(),e)}let m=!1;try{for await(const r of this){var y;if(m=!0,null!=n&&null!==(y=n.signal)&&void 0!==y&&y.aborted)throw new c;o?t=await e(t,r,{signal:u}):(t=r,o=!0)}if(!m&&!o)throw new D}finally{s.abort()}return t},toArray:async function(e){null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new c(void 0,{cause:e.signal.reason});b(t,r)}return t},some:k,find:async function(e,t){for await(const n of j.call(this,e,t))return n}}},834:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(9032),a=n(1545);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BYTECODE]=this}canBeUsedFor(e){return e instanceof i||e instanceof a.Traversal}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.BYTECODE,1]);const e=[0,0,0,0],n=[0,0,0,0];return r.from([...e,...n])}e instanceof a.Traversal&&(e=e.getBytecode());const n=[];t&&n.push(r.from([this.ioc.DataType.BYTECODE,0])),n.push(this.ioc.intSerializer.serialize(e.stepInstructions.length,!1));for(let t=0;t<e.stepInstructions.length;t++){const r=e.stepInstructions[t],i=r[0],a=r.length-1;n.push(this.ioc.stringSerializer.serialize(i,!1)),n.push(this.ioc.intSerializer.serialize(a,!1));for(let e=0;e<a;e++)n.push(this.ioc.anySerializer.serialize(r[1+e],!0))}n.push(this.ioc.intSerializer.serialize(e.sourceInstructions.length,!1));for(let t=0;t<e.sourceInstructions.length;t++){const r=e.sourceInstructions[t],i=r[0],a=r.length-1;n.push(this.ioc.stringSerializer.serialize(i,!1)),n.push(this.ioc.intSerializer.serialize(a,!1));for(let e=0;e<a;e++)n.push(this.ioc.anySerializer.serialize(r[1+e],!0))}return r.concat(n)}deserialize(e,t=!0){let n=0,a=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=a.readUInt8();if(n++,e!==this.ioc.DataType.BYTECODE)throw new Error("unexpected {type_code}");if(a=a.slice(1),a.length<1)throw new Error("{value_flag} is missing");const t=a.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");a=a.slice(1)}const o=new i;let s,c,l,u;try{({v:s,len:c}=this.ioc.intSerializer.deserialize(a,!1)),n+=c}catch(e){throw e.message="{steps_length}: "+e.message,e}if(s<0)throw new Error("{steps_length} is less than zero");a=a.slice(c);for(let e=0;e<s;e++){let t,r,i,s;try{({v:t,len:r}=this.ioc.stringSerializer.deserialize(a,!1)),n+=r}catch(t){throw t.message=`{step_${e}} {name}: `+t.message,t}a=a.slice(r);try{({v:i,len:s}=this.ioc.intSerializer.deserialize(a,!1)),n+=s}catch(t){throw t.message=`{step_${e}} {values_length}: `+t.message,t}if(i<0)throw new Error(`{step_${e}} {values_length} is less than zero`);a=a.slice(s);const c=[];let l,u;for(let t=0;t<i;t++){try{({v:l,len:u}=this.ioc.anySerializer.deserialize(a)),n+=u,c.push(l)}catch(n){throw n.message=`{step_${e}} {value_${t}}: `+n.message,n}a=a.slice(u)}o.addStep(t,c)}try{({v:l,len:u}=this.ioc.intSerializer.deserialize(a,!1)),n+=u}catch(e){throw e.message="{sources_length}: "+e.message,e}if(l<0)throw new Error("{sources_length} is less than zero");a=a.slice(u);for(let e=0;e<l;e++){let t,r,i,s;try{({v:t,len:r}=this.ioc.stringSerializer.deserialize(a,!1)),n+=r}catch(t){throw t.message=`{source_${e}} {name}: `+t.message,t}a=a.slice(r);try{({v:i,len:s}=this.ioc.intSerializer.deserialize(a,!1)),n+=s}catch(t){throw t.message=`{source_${e}} {values_length}: `+t.message,t}if(i<0)throw new Error(`{source_${e}} {values_length} is less than zero`);a=a.slice(s);const c=[];let l,u;for(let t=0;t<i;t++){try{({v:l,len:u}=this.ioc.anySerializer.deserialize(a)),n+=u,c.push(l)}catch(n){throw n.message=`{source_${e}} {value_${t}}: `+n.message,n}a=a.slice(u)}o.addSource(t,c)}return{v:o,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:a,err:e})}}}},1019:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,i={exports:{}},a=i.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,u=[],d=!1,p=-1;function f(){d&&l&&(d=!1,l.length?u=l.concat(u):p=-1,u.length&&h())}function h(){if(!d){var e=c(f);d=!0;for(var t=u.length;t;){for(l=u,u=[];++p<t;)l&&l[p].run();p=-1,t=u.length}l=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}function g(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||d||c(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=y,a.addListener=y,a.once=y,a.off=y,a.removeListener=y,a.removeAllListeners=y,a.emit=y,a.prependListener=y,a.prependOnceListener=y,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0};var v=i.exports.browser,_=g,b=i.exports.binding,E=g,w={},T=g,S=g,I=g,A=g,O=g,N="browser",R="browser",x="browser",L=[],C={nextTick:i.exports.nextTick,title:i.exports.title,browser:v,env:i.exports.env,argv:i.exports.argv,version:i.exports.version,versions:i.exports.versions,on:i.exports.on,addListener:i.exports.addListener,once:i.exports.once,off:i.exports.off,removeListener:i.exports.removeListener,removeAllListeners:i.exports.removeAllListeners,emit:i.exports.emit,emitWarning:_,prependListener:i.exports.prependListener,prependOnceListener:i.exports.prependOnceListener,listeners:i.exports.listeners,binding:b,cwd:i.exports.cwd,chdir:i.exports.chdir,umask:i.exports.umask,exit:E,pid:1,features:w,kill:T,dlopen:S,uptime:I,memoryUsage:A,uvCounters:O,platform:N,arch:R,execPath:x,execArgv:L};t.addListener=i.exports.addListener,t.arch=R,t.argv=i.exports.argv,t.binding=b,t.browser=v,t.chdir=i.exports.chdir,t.cwd=i.exports.cwd,t.default=C,t.dlopen=S,t.emit=i.exports.emit,t.emitWarning=_,t.env=i.exports.env,t.execArgv=L,t.execPath=x,t.exit=E,t.features=w,t.kill=T,t.listeners=i.exports.listeners,t.memoryUsage=A,t.nextTick=i.exports.nextTick,t.off=i.exports.off,t.on=i.exports.on,t.once=i.exports.once,t.pid=1,t.platform=N,t.prependListener=i.exports.prependListener,t.prependOnceListener=i.exports.prependOnceListener,t.removeAllListeners=i.exports.removeAllListeners,t.removeListener=i.exports.removeListener,t.title=i.exports.title,t.umask=i.exports.umask,t.uptime=I,t.uvCounters=O,t.version=i.exports.version,t.versions=i.exports.versions,t=e.exports=C},1104:(e,t,n)=>{"use strict";var r=n(1019);const i=n(2831);t.toLong=function(e){return new a(e)};const a=t.Long=function(e){if("string"!=typeof e&&"number"!=typeof e)throw new TypeError("The value must be a string or a number");this.value=e.toString()};t.getUuid=function(){return i.v4()},t.emptyArray=Object.freeze([]);class o extends Map{constructor(e){super(e)}set(){return this}delete(){return!1}clear(){}}t.ImmutableMap=o,t.getUserAgentHeader=function(){return"User-Agent"},t.getUserAgent=async()=>"navigator"in globalThis?globalThis.navigator.userAgent:void 0!==r?.versions?.node?await async function(){const e=await n.e(72).then(n.t.bind(n,1072,19)),t=(r?.env.npm_package_name??"NotAvailable").replace("_"," ");let i,a,o,s;return i=a=o=s="NotAvailable",null!=r&&(r.version&&(i=r.version.replace(" ","_")),r.arch&&(s=r.arch.replace(" ","_"))),null!=e&&(a=e.platform().replace(" ","_"),o=e.release().replace(" ","_")),`${t} Gremlin-Javascript.3.7.4 ${i} ${a}.${o} ${s}`}():void 0;t.toArrayBuffer=e=>e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);e.exports.DeferredPromise=()=>{let e=e=>{},t=e=>{};const n=new Promise((n,r)=>{e=n,t=r});return Object.assign(n,{resolve:e,reject:t})}},1352:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.DOUBLE]=this}canBeUsedFor(e){return"number"==typeof e&&!Number.isInteger(e)}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.DOUBLE,1]):r.from([0,0,0,0,0,0,0,0]);const n=[];t&&n.push(r.from([this.ioc.DataType.DOUBLE,0]));const i=r.alloc(8);return i.writeDoubleBE(e),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.DOUBLE)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<8)throw new Error("unexpected {value} length");n+=8;return{v:i.readDoubleBE(),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},1421:(e,t,n)=>{"use strict";const r={};r.DataType=n(8653),r.utils=n(6980),r.serializers={},r.intSerializer=new(n(6580))(r),r.longSerializer=new(n(1743))(r),r.longSerializerNg=new(n(7092))(r),r.stringSerializer=new(n(2420))(r,r.DataType.STRING),r.dateSerializer=new(n(2285))(r,r.DataType.DATE),r.timestampSerializer=new(n(2285))(r,r.DataType.TIMESTAMP),r.classSerializer=new(n(2420))(r,r.DataType.CLASS),r.doubleSerializer=new(n(1352))(r),r.floatSerializer=new(n(9995))(r),r.listSerializer=new(n(7100))(r,r.DataType.LIST),r.mapSerializer=new(n(8095))(r),r.setSerializer=new(n(7100))(r,r.DataType.SET),r.uuidSerializer=new(n(4194))(r),r.edgeSerializer=new(n(2588))(r),r.pathSerializer=new(n(5094))(r),r.propertySerializer=new(n(3920))(r),r.vertexSerializer=new(n(243))(r),r.vertexPropertySerializer=new(n(6414))(r),r.bytecodeSerializer=new(n(834))(r),r.pSerializer=new(n(3933))(r),r.traverserSerializer=new(n(4253))(r),r.enumSerializer=new(n(8372))(r),r.lambdaSerializer=new(n(6078))(r),r.bigIntegerSerializer=new(n(4957))(r),r.byteSerializer=new(n(795))(r),r.byteBufferSerializer=new(n(7777))(r),r.shortSerializer=new(n(703))(r),r.booleanSerializer=new(n(3321))(r),r.textPSerializer=new(n(6348))(r),r.traversalStrategySerializer=new(n(9386))(r),r.bulkSetSerializer=new(n(7765))(r),r.unspecifiedNullSerializer=new(n(7135))(r),r.numberSerializationStrategy=new(n(4687))(r),r.anySerializer=new(n(5127))(r),r.graphBinaryReader=new(n(3203))(r),r.graphBinaryWriter=new(n(6579))(r),e.exports=r},1545:e=>{"use strict";const t=Object.freeze({value:null,done:!0}),n=Symbol.asyncIterator||Symbol("@@asyncIterator");class r{constructor(e,t,n){this.operator=e,this.value=t,this.other=n}toString(){function e(t){if(Array.isArray(t)){const n=[];for(const r of t)n.push(e(r));return n}return t&&"string"==typeof t?`'${t}'`:t}return void 0===this.other||null===this.other?this.operator+"("+e(this.value)+")":this.operator+"("+e(this.value)+", "+e(this.other)+")"}and(e){return new r("and",this,e)}or(e){return new r("or",this,e)}static within(...e){return 1===e.length&&Array.isArray(e[0])?new r("within",e[0],null):new r("within",e,null)}static without(...e){return 1===e.length&&Array.isArray(e[0])?new r("without",e[0],null):new r("without",e,null)}static between(...e){return i("between",e)}static eq(...e){return i("eq",e)}static gt(...e){return i("gt",e)}static gte(...e){return i("gte",e)}static inside(...e){return i("inside",e)}static lt(...e){return i("lt",e)}static lte(...e){return i("lte",e)}static neq(...e){return i("neq",e)}static not(...e){return i("not",e)}static outside(...e){return i("outside",e)}static test(...e){return i("test",e)}}function i(e,t){return t.unshift(null,e),new(Function.prototype.bind.apply(r,t))}class a{constructor(e,t,n){this.operator=e,this.value=t,this.other=n}toString(){function e(e){return e&&"string"==typeof e?`'${e}'`:e}return void 0===this.other?this.operator+"("+e(this.value)+")":this.operator+"("+e(this.value)+", "+e(this.other)+")"}and(e){return new r("and",this,e)}or(e){return new r("or",this,e)}static containing(...e){return o("containing",e)}static endingWith(...e){return o("endingWith",e)}static notContaining(...e){return o("notContaining",e)}static notEndingWith(...e){return o("notEndingWith",e)}static notStartingWith(...e){return o("notStartingWith",e)}static startingWith(...e){return o("startingWith",e)}static regex(...e){return o("regex",e)}static notRegex(...e){return o("notRegex",e)}}function o(e,t){return t.unshift(null,e),new(Function.prototype.bind.apply(a,t))}function s(e,t){const n={};return t.split(" ").forEach(t=>{let r=t;r===r.toUpperCase()&&(r=r.toLowerCase()),n[r]=new l(e,t)}),n}const c={from_:"out",to:"in"};class l{constructor(e,t){this.typeName=e,this.elementName=t}toString(){return this.elementName}}e.exports={EnumValue:l,P:r,TextP:a,withOptions:{tokens:"~tinkerpop.valueMap.tokens",none:0,ids:1,labels:2,keys:4,values:8,all:15,indexer:"~tinkerpop.index.indexer",list:0,map:1},IO:class{static get graphml(){return"graphml"}static get graphson(){return"graphson"}static get gryo(){return"gryo"}static get reader(){return"~tinkerpop.io.reader"}static get registry(){return"~tinkerpop.io.registry"}static get writer(){return"~tinkerpop.io.writer"}},Traversal:class{constructor(e,t,n){this.graph=e,this.traversalStrategies=t,this.bytecode=n,this.traversers=null,this.sideEffects=null,this._traversalStrategiesPromise=null,this._traversersIteratorIndex=0}[n](){return this}getBytecode(){return this.bytecode}toList(){return this._applyStrategies().then(()=>{const e=[];let t;for(;(t=this._getNext())&&!t.done;)e.push(t.value);return e})}hasNext(){return this._applyStrategies().then(()=>this.traversers&&this.traversers.length>0&&this._traversersIteratorIndex<this.traversers.length&&this.traversers[this._traversersIteratorIndex].bulk>0)}iterate(){return this.bytecode.addStep("none"),this._applyStrategies().then(()=>{let e;for(;(e=this._getNext())&&!e.done;);})}next(){return this._applyStrategies().then(()=>this._getNext())}_getNext(){for(;this.traversers&&this._traversersIteratorIndex<this.traversers.length;){const e=this.traversers[this._traversersIteratorIndex];if(e.bulk>0)return e.bulk--,{value:e.object,done:!1};this._traversersIteratorIndex++}return t}_applyStrategies(){return this._traversalStrategiesPromise?this._traversalStrategiesPromise:this._traversalStrategiesPromise=this.traversalStrategies.applyStrategies(this)}toJSON(){return this.bytecode.stepInstructions}toString(){return this.bytecode.toString()}},TraversalSideEffects:class{},Traverser:class{constructor(e,t){this.object=e,this.bulk=t||1}},barrier:s("Barrier","normSack"),cardinality:s("Cardinality","list set single"),column:s("Column","keys values"),direction:function(e,t){const n=s(e,t);return Object.keys(c).forEach(e=>{n[e]=n[c[e]]}),n}("Direction","BOTH IN OUT from_ to"),dt:s("DT","second minute hour day"),graphSONVersion:s("GraphSONVersion","V1_0 V2_0 V3_0"),gryoVersion:s("GryoVersion","V1_0 V3_0"),merge:s("Merge","onCreate onMatch outV inV"),operator:s("Operator","addAll and assign div max min minus mult or sum sumLong"),order:s("Order","asc desc shuffle"),pick:s("Pick","any none"),pop:s("Pop","all first last mixed"),scope:s("Scope","global local"),t:s("T","id key label value")}},1743:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.LONG]=this}canBeUsedFor(){}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.LONG,1]):r.from([0,0,0,0,0,0,0,0]);const n=[];t&&n.push(r.from([this.ioc.DataType.LONG,0]));const i=r.alloc(8);return i.writeBigInt64BE(BigInt(e)),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.LONG)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<8)throw new Error("unexpected {value} length");n+=8;let a=i.readBigInt64BE();return a=a<Number.MIN_SAFE_INTEGER||a>Number.MAX_SAFE_INTEGER?parseFloat(a.toString()):Number(a),{v:a,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},1893:(e,t,n)=>{"use strict";const r=n(2468),i=n(8402);e.exports=class extends r{constructor(e,t,n){super({mechanism:new i({username:e,password:t,authzid:n})})}evaluateChallenge(e){return this._options.mechanism.evaluateChallenge(e)}}},1982:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t,n){return t=c(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,o()?Reflect.construct(t,n||[],c(e).constructor):t.apply(e,n))}function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(o())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&s(i,n.prototype),i}(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)},a(e)}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(o=function(){return!!e})()}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return d(l,"_invoke",function(n,r,i){var a,s,c,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,s=0,c=e,p.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],f=p.p,h=a[2];n>3?(i=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=f&&((i=n<2&&f<a[1])?(s=0,p.v=r,p.n=a[1]):f<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),s=u,c=h;(t=s<2?e:c)||!d;){a||(s?s<3?(s>1&&(p.n=-1),f(s,c)):p.n=c:p.v=c);try{if(l=2,a){if(s||(i="next"),t=a[i]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=a.return)&&t.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=e}else if((t=(d=p.n<0)?c:n.call(r,p))!==o)break}catch(t){a=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(d(t={},r,function(){return this}),t),f=l.prototype=s.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,d(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=l,d(f,"constructor",l),d(l,"constructor",c),c.displayName="GeneratorFunction",d(l,i,"GeneratorFunction"),d(f),d(f,i,"Generator"),d(f,r,function(){return this}),d(f,"toString",function(){return"[object Generator]"}),(u=function(){return{w:a,m:h}})()}function d(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}d=function(e,t,n,r){function a(t,n){d(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},d(e,t,n,r)}function p(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){p(a,r,i,o,s,"next",e)}function s(e){p(a,r,i,o,s,"throw",e)}o(void 0)})}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.d(t,{M:()=>v,e:()=>_});var v=function(){return y(function e(t){if(h(this,e),this.constructor===e)throw new Error("Can't create an instance of an abstract class.")},[{key:"initialize",value:(s=f(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:throw new Error("initialize() has not been implemented.");case 1:return e.a(2)}},e)})),function(){return s.apply(this,arguments)})},{key:"close",value:(o=f(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:throw new Error("close() has not been implemented.");case 1:return e.a(2)}},e)})),function(){return o.apply(this,arguments)})},{key:"startTransaction",value:(a=f(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:throw new Error("startTransaction() has not been implemented.");case 1:return e.a(2)}},e)})),function(){return a.apply(this,arguments)})},{key:"endTransaction",value:(i=f(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:throw new Error("endTransaction() has not been implemented.");case 1:return e.a(2)}},e)})),function(){return i.apply(this,arguments)})},{key:"executeInTransaction",value:(r=f(u().m(function e(t,n){return u().w(function(e){for(;;)switch(e.n){case 0:throw new Error("executeInTransaction() has not been implemented.");case 1:return e.a(2)}},e)})),function(e,t){return r.apply(this,arguments)})},{key:"executeRead",value:(t=f(u().m(function e(t,n){return u().w(function(e){for(;;)switch(e.n){case 0:throw new Error("executeRead() has not been implemented.");case 1:return e.a(2)}},e)})),function(e,n){return t.apply(this,arguments)})},{key:"executeWrite",value:(e=f(u().m(function e(t,n){return u().w(function(e){for(;;)switch(e.n){case 0:throw new Error("executeWrite() has not been implemented.");case 1:return e.a(2)}},e)})),function(t,n){return e.apply(this,arguments)})},{key:"getQuery",value:function(e){if(utils.debugLog("getQuery('".concat(e,"')")),e in this.queryStrings)return this.queryStrings[e][this.dbtype];throw new Error("A query with ID ".concat(e," was not found."))}}],[{key:"classFactory",value:function(e,t,r){var i;switch(e.DATABASETYPE.toLowerCase()){case"neo4j":i=new(0,n(5323).Neo4jDatabaseService)(e.NEO4J_CONFIG);break;case"neo4j-https":i=new(0,n(2312).Neo4jHTTPSDatabaseService)(e.NEO4J_CONFIG);break;case"cosmosdb":i=new(0,n(5406).GremlinDatabaseService)(e.COSMOSDB_CONFIG,r);break;default:throw new Error("Unsupported graph database type: ".concat(e.DATABASETYPE))}return i.dbtype=e.DATABASETYPE.toLowerCase(),i.queryStrings=t,i}}]);var e,t,r,i,a,o,s}(),_=function(e){function t(){var e;h(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return l(e=i(this,t,[].concat(r)),"isRawArray",!0),l(e,"quotedElements",!1),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e),y(t)}(a(Array))},2029:(e,t,n)=>{"use strict";const r=n(1545).Traversal,i=n(9032);e.exports=class{constructor(e){this._traversalSource=e}getTraversalSource(){return this._traversalSource}getTargetLanguage(){return"gremlin-groovy"}of(e){this._traversalSource=e}translate(e,t=!1){let n=t?"__":this._traversalSource;const r=(e instanceof i?e:e.getBytecode()).stepInstructions;for(let e=0;e<r.length;e++){const t=r[e].slice(1);if(n+="."+r[e][0]+"(",t.length)for(let e=0;e<t.length;e++)e>0&&(n+=", "),n+=this.convert(t[e]);n+=")"}return n}convert(e){let t="";if(Object(e)===e)if(e instanceof r)t+=this.translate(e.getBytecode(),!0);else if("[object Object]"===e.toString())Object.keys(e).forEach(function(n,r){r>0&&(t+=", "),t+=`('${n}', `,e[n]instanceof String||"string"==typeof e[n]?t+=`'${`${e[n]}`.replaceAll("'","\\'")}'`:t+=e[n],t+=")"});else if(Array.isArray(e)){const n=[];for(const t of e)n.push(this.convert(t));t+="["+n.join(", ")+"]"}else t+=e.toString();else t+=null==e?"null":"number"==typeof e||"boolean"==typeof e?e:`'${`${e}`.replaceAll("'","\\'")}'`;return t}}},2285:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e,t){this.ioc=e,this.ID=t,this.ioc.serializers[t]=this}canBeUsedFor(e){return e instanceof Date}serialize(e,t=!0){if(null==e)return t?r.from([this.ID,1]):r.from([0,0,0,0,0,0,0,0]);const n=[];t&&n.push(r.from([this.ID,0]));const i=r.alloc(8);return i.writeBigInt64BE(BigInt(e.getTime())),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ID)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<8)throw new Error("unexpected {value} length");n+=8;const a=i.readBigInt64BE();return{v:new Date(Number(a)),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},2311:(e,t)=>{"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function r(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,a,o){return r((s=r(r(t,e),r(i,o)))<<(c=a)|s>>>32-c,n);var s,c}function a(e,t,n,r,a,o,s){return i(t&n|~t&r,e,t,a,o,s)}function o(e,t,n,r,a,o,s){return i(t&r|n&~r,e,t,a,o,s)}function s(e,t,n,r,a,o,s){return i(t^n^r,e,t,a,o,s)}function c(e,t,n,r,a,o,s){return i(n^(t|~r),e,t,a,o,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,r="0123456789abcdef";for(let i=0;i<n;i+=8){const n=e[i>>5]>>>i%32&255,a=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let i=1732584193,l=-271733879,u=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const n=i,p=l,f=u,h=d;i=a(i,l,u,d,e[t],7,-680876936),d=a(d,i,l,u,e[t+1],12,-389564586),u=a(u,d,i,l,e[t+2],17,606105819),l=a(l,u,d,i,e[t+3],22,-1044525330),i=a(i,l,u,d,e[t+4],7,-176418897),d=a(d,i,l,u,e[t+5],12,1200080426),u=a(u,d,i,l,e[t+6],17,-1473231341),l=a(l,u,d,i,e[t+7],22,-45705983),i=a(i,l,u,d,e[t+8],7,1770035416),d=a(d,i,l,u,e[t+9],12,-1958414417),u=a(u,d,i,l,e[t+10],17,-42063),l=a(l,u,d,i,e[t+11],22,-1990404162),i=a(i,l,u,d,e[t+12],7,1804603682),d=a(d,i,l,u,e[t+13],12,-40341101),u=a(u,d,i,l,e[t+14],17,-1502002290),l=a(l,u,d,i,e[t+15],22,1236535329),i=o(i,l,u,d,e[t+1],5,-165796510),d=o(d,i,l,u,e[t+6],9,-1069501632),u=o(u,d,i,l,e[t+11],14,643717713),l=o(l,u,d,i,e[t],20,-373897302),i=o(i,l,u,d,e[t+5],5,-701558691),d=o(d,i,l,u,e[t+10],9,38016083),u=o(u,d,i,l,e[t+15],14,-660478335),l=o(l,u,d,i,e[t+4],20,-405537848),i=o(i,l,u,d,e[t+9],5,568446438),d=o(d,i,l,u,e[t+14],9,-1019803690),u=o(u,d,i,l,e[t+3],14,-187363961),l=o(l,u,d,i,e[t+8],20,1163531501),i=o(i,l,u,d,e[t+13],5,-1444681467),d=o(d,i,l,u,e[t+2],9,-51403784),u=o(u,d,i,l,e[t+7],14,1735328473),l=o(l,u,d,i,e[t+12],20,-1926607734),i=s(i,l,u,d,e[t+5],4,-378558),d=s(d,i,l,u,e[t+8],11,-2022574463),u=s(u,d,i,l,e[t+11],16,1839030562),l=s(l,u,d,i,e[t+14],23,-35309556),i=s(i,l,u,d,e[t+1],4,-1530992060),d=s(d,i,l,u,e[t+4],11,1272893353),u=s(u,d,i,l,e[t+7],16,-155497632),l=s(l,u,d,i,e[t+10],23,-1094730640),i=s(i,l,u,d,e[t+13],4,681279174),d=s(d,i,l,u,e[t],11,-358537222),u=s(u,d,i,l,e[t+3],16,-722521979),l=s(l,u,d,i,e[t+6],23,76029189),i=s(i,l,u,d,e[t+9],4,-640364487),d=s(d,i,l,u,e[t+12],11,-421815835),u=s(u,d,i,l,e[t+15],16,530742520),l=s(l,u,d,i,e[t+2],23,-995338651),i=c(i,l,u,d,e[t],6,-198630844),d=c(d,i,l,u,e[t+7],10,1126891415),u=c(u,d,i,l,e[t+14],15,-1416354905),l=c(l,u,d,i,e[t+5],21,-57434055),i=c(i,l,u,d,e[t+12],6,1700485571),d=c(d,i,l,u,e[t+3],10,-1894986606),u=c(u,d,i,l,e[t+10],15,-1051523),l=c(l,u,d,i,e[t+1],21,-2054922799),i=c(i,l,u,d,e[t+8],6,1873313359),d=c(d,i,l,u,e[t+15],10,-30611744),u=c(u,d,i,l,e[t+6],15,-1560198380),l=c(l,u,d,i,e[t+13],21,1309151649),i=c(i,l,u,d,e[t+4],6,-145523070),d=c(d,i,l,u,e[t+11],10,-1120210379),u=c(u,d,i,l,e[t+2],15,718787259),l=c(l,u,d,i,e[t+9],21,-343485551),i=r(i,n),l=r(l,p),u=r(u,f),d=r(d,h)}return[i,l,u,d]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};t.default=l},2312:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Neo4jHTTPSDatabaseService:()=>A});var r=n(1982);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function s(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return o(u,"_invoke",function(n,r,i){var a,o,s,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,o=0,s=e,p.n=n,c}};function f(n,r){for(o=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],f=p.p,h=a[2];n>3?(i=h===r)&&(s=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=f&&((i=n<2&&f<a[1])?(o=0,p.v=r,p.n=a[1]):f<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,o=0))}if(i||n>1)return c;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),o=u,s=h;(t=o<2?e:s)||!d;){a||(o?o<3?(o>1&&(p.n=-1),f(o,s)):p.n=s:p.v=s);try{if(l=2,a){if(o||(i="next"),t=a[i]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,o<2&&(o=0)}else 1===o&&(t=a.return)&&t.call(a),o<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),o=1);a=e}else if((t=(d=p.n<0)?s:n.call(r,p))!==c)break}catch(t){a=e,o=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),u}var c={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(o(t={},r,function(){return this}),t),f=d.prototype=l.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,o(f,"constructor",d),o(d,"constructor",u),u.displayName="GeneratorFunction",o(d,i,"GeneratorFunction"),o(f),o(f,i,"Generator"),o(f,r,function(){return this}),o(f,"toString",function(){return"[object Generator]"}),(a=function(){return{w:s,m:h}})()}function o(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}o=function(e,t,n,r){function a(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},o(e,t,n,r)}function s(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,c,"next",e)}function c(e){s(a,r,i,o,c,"throw",e)}o(void 0)})}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var d=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.uri)throw new Error("Invalid Neo4j configuration: URI is required");if(!(t.neo4j_serverauth||t.username&&t.password))throw new Error("Invalid Neo4j configuration: Either neo4j_serverauth OR both username and password must be provided");if(this.config=t,this.connectionRetryCount=0,this.maxRetries=3,this.baseUrl=this.config.uri,t.neo4j_serverauth)this.authHeader="Basic ".concat(t.neo4j_serverauth);else{var n="".concat(this.config.username,":").concat(this.config.password);this.authHeader="Basic ".concat(btoa(n))}},t=[{key:"executeQuery",value:(o=c(a().m(function e(t,n,r){var i,o,s,c,l,u,d;return a().w(function(e){for(;;)switch(e.n){case 0:return i={statement:t.replaceAll("\n"," "),parameters:n},o={Authorization:this.authHeader,"Content-Type":"application/json",Accept:"application/json"},r&&r.clusterAffinity&&(o["neo4j-cluster-affinity"]=r.clusterAffinity),s=r&&r.id?"".concat(this.baseUrl).concat(this.baseUrl.endsWith("/")?"":"/","tx/").concat(r.id):this.baseUrl,e.n=1,fetch(s,{method:"POST",headers:o,body:JSON.stringify(i)});case 1:if((c=e.v).ok){e.n=3;break}return e.n=2,c.text();case 2:throw l=e.v,new Error("Neo4j Query API Error: ".concat(c.status," ").concat(c.statusText," - ").concat(l));case 3:return e.n=4,c.json();case 4:if(!((u=e.v).errors&&Array.isArray(u.errors)&&u.errors.length>0)){e.n=5;break}throw d=u.errors[0],new Error("Neo4j Error [".concat(d.code,"]: ").concat(d.message));case 5:return e.a(2,u.data?u.data:null)}},e,this)})),function(e,t,n){return o.apply(this,arguments)})},{key:"startTransaction",value:(i=c(a().m(function e(){var t,n,r,i;return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fetch("".concat(this.baseUrl).concat(this.baseUrl.endsWith("/")?"":"/","tx"),{method:"POST",headers:{Authorization:this.authHeader,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({})});case 1:if((t=e.v).ok){e.n=3;break}return e.n=2,t.text();case 2:throw n=e.v,new Error("Neo4j Transaction Error: ".concat(t.status," ").concat(t.statusText," - ").concat(n));case 3:return e.n=4,t.json();case 4:return r=e.v,i=t.headers.get("neo4j-cluster-affinity"),e.a(2,{id:r.transaction.id,expires:r.transaction.expires,clusterAffinity:i,open:!0})}},e,this)})),function(){return i.apply(this,arguments)})},{key:"commitTransaction",value:(r=c(a().m(function e(t){var n,r;return a().w(function(e){for(;;)switch(e.n){case 0:if(t&&t.id){e.n=1;break}throw new Error("Invalid transaction information");case 1:if(t.open){e.n=2;break}return e.a(2);case 2:return e.n=3,fetch("".concat(this.baseUrl).concat(this.baseUrl.endsWith("/")?"":"/","tx/").concat(t.id,"/commit"),{method:"POST",headers:{Authorization:this.authHeader,"Content-Type":"application/json",Accept:"application/json","neo4j-cluster-affinity":t.clusterAffinity||""},body:JSON.stringify({})});case 3:if((n=e.v).ok){e.n=5;break}return e.n=4,n.text();case 4:throw r=e.v,new Error("Neo4j Commit Error: ".concat(n.status," ").concat(n.statusText," - ").concat(r));case 5:return e.n=6,n.json();case 6:e.v,t.open=!1;case 7:return e.a(2)}},e,this)})),function(e){return r.apply(this,arguments)})}],t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,i,o}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t,n){return(t=E(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return g(l,"_invoke",function(n,r,i){var a,s,c,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,s=0,c=e,p.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],f=p.p,h=a[2];n>3?(i=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=f&&((i=n<2&&f<a[1])?(s=0,p.v=r,p.n=a[1]):f<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),s=u,c=h;(t=s<2?e:c)||!d;){a||(s?s<3?(s>1&&(p.n=-1),f(s,c)):p.n=c:p.v=c);try{if(l=2,a){if(s||(i="next"),t=a[i]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=a.return)&&t.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=e}else if((t=(d=p.n<0)?c:n.call(r,p))!==o)break}catch(t){a=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(g(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,g(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,g(d,"constructor",l),g(l,"constructor",c),c.displayName="GeneratorFunction",g(l,i,"GeneratorFunction"),g(d),g(d,i,"Generator"),g(d,r,function(){return this}),g(d,"toString",function(){return"[object Generator]"}),(y=function(){return{w:a,m:p}})()}function g(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}g=function(e,t,n,r){function a(t,n){g(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},g(e,t,n,r)}function v(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){v(a,r,i,o,s,"next",e)}function s(e){v(a,r,i,o,s,"throw",e)}o(void 0)})}}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}function w(e,t,n){return t=S(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,T()?Reflect.construct(t,n||[],S(e).constructor):t.apply(e,n))}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(T=function(){return!!e})()}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var A=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=w(this,t,[e])).config=e,n.connectionManager=new d(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),n=t,r=[{key:"initialize",value:(f=_(y().m(function e(){return y().w(function(e){for(;;)switch(e.n){case 0:this.dbtype="neo4j";case 1:return e.a(2)}},e,this)})),function(){return f.apply(this,arguments)})},{key:"close",value:(p=_(y().m(function e(){return y().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),function(){return p.apply(this,arguments)})},{key:"startTransaction",value:(u=_(y().m(function e(){return y().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.connectionManager.startTransaction();case 1:return e.a(2,e.v)}},e,this)})),function(){return u.apply(this,arguments)})},{key:"endTransaction",value:(l=_(y().m(function e(){var t,n=arguments;return y().w(function(e){for(;;)switch(e.n){case 0:if(null==(t=n.length>0&&void 0!==n[0]?n[0]:null)){e.n=1;break}return e.n=1,this.connectionManager.commitTransaction(t);case 1:return e.a(2)}},e,this)})),function(){return l.apply(this,arguments)})},{key:"executeInTransaction",value:(c=_(y().m(function e(t,n){var r;return y().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n(t);case 1:return r=e.v,e.n=2,this.connectionManager.commitTransaction(t);case 2:return e.a(2,r);case 3:throw e.p=3,e.v;case 4:return e.a(2)}},e,this,[[0,3]])})),function(e,t){return c.apply(this,arguments)})},{key:"executeRead",value:(s=_(y().m(function e(t,n){var r,i,a,o,s=arguments;return y().w(function(e){for(;;)switch(e.n){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:null,i=s.length>3&&void 0!==s[3]&&s[3],a=s.length>4&&void 0!==s[4]?s[4]:0,o=s.length>5&&void 0!==s[5]?s[5]:0,e.n=1,this.executeInternal(t,h(h({},n),{},{skip:a,limit:o}),r,i);case 1:return e.a(2,e.v)}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"executeWrite",value:(o=_(y().m(function e(t,n){var r,i=arguments;return y().w(function(e){for(;;)switch(e.n){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:null,e.n=1,this.executeInternal(t,n,r,!0);case 1:return e.a(2,e.v)}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"executeInternal",value:(a=_(y().m(function e(t,n,r,i){var a,o;return y().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!r||r.id){e.n=1;break}throw new Error("Invalid transaction information");case 1:return e.p=1,utils.debugLog("Executing Neo4j query:\n".concat(t)),e.n=2,this.connectionManager.executeQuery(t,n,r);case 2:a=e.v,e.n=4;break;case 3:throw e.p=3,e.v;case 4:if(o=this.normaliseData(a),!i){e.n=6;break}if(!Array.isArray(o)){e.n=5;break}if(!(o.length>0)){e.n=5;break}return e.a(2,o[0]);case 5:return e.a(2,o);case 6:if(!Array.isArray(o)){e.n=7;break}return e.a(2,o);case 7:if(null==o){e.n=8;break}return e.a(2,[o]);case 8:return e.a(2,[]);case 9:return e.a(2)}},e,this,[[1,3]])})),function(e,t,n,r){return a.apply(this,arguments)})},{key:"normaliseData",value:function(e){var t,n,r=this;return e.fields&&e.fields.length>0?(n=e.fields.map(function(e){var t=e.lastIndexOf(".");return-1===t?e:e.substring(t+1)}),e.values&&(t=0===e.values.length?null:1===e.values.length?this.normaliseRecord(e.values[0],n):e.values.map(function(e){return r.normaliseRecord(e,n)})),t):null}},{key:"normaliseRecord",value:function(e,t){var n,r={};for(n=0;n<e.length;n++)null==e[n]?r[t[n]]=null:this.isDate(e[n])?r[t[n]]=new Date(e[n]):r[t[n]]=e[n];return r}},{key:"isDate",value:function(e){return"string"==typeof e&&/^\d{4}-\d{2}-\d{2}.*$/.test(e)}}],r&&b(n.prototype,r),i&&b(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,a,o,s,c,l,u,p,f}(r.M)},2366:(e,t,n)=>{"use strict";var r={name:"Team Management",number:"1.6",buildDate:(new Date).toISOString()};window.APP_VERSION=r;var i=n(1982),a={cosmosdb_force_lowercase:["name","profile_id","category","tags","searchTerm"],ADD_AGENT_ACTIONS:{neo4j:"\n                MATCH (a:AgentInstance {agent_id: $agentId})\n                MATCH (action:Action)\n                WHERE action.id IN $actionIds\n                CREATE (a)-[:USES_ACTION]->(action)\n        ",cosmosdb:"\n                g.V().hasLabel('AgentInstance').has('agent_id', $agentId).as('agent')\n                .V().hasLabel('Action').has('id', within($actionIds)).as('action')\n                .select('agent').addE('USES_ACTION').to(select('action'))\n        "},ADD_AGENT_TOOLS:{neo4j:"\n                MATCH (a:AgentInstance {agent_id: $agentId})\n                MATCH (t:Tool)\n                WHERE t.id IN $toolIds\n                CREATE (a)-[:USES_TOOL]->(t)\n        ",cosmosdb:"\n                g.V().hasLabel('AgentInstance').has('agent_id', $agentId).as('agent')\n                .V().hasLabel('Tool').has('id', within($toolIds)).as('tool')\n                .select('agent').addE('USES_TOOL').to(select('tool'))\n        "},CHECK_AGENT_EXISTS:{neo4j:"\n                OPTIONAL MATCH (a:AgentInstance {agent_id: $agentId})\n                RETURN a IS NOT NULL as exists\n        ",cosmosdb:"\n                g.V().hasLabel('AgentInstance').has('agent_id', $agentId)\n                .count()\n                .project('exists')\n                .by(coalesce(is(gt(0)), constant(0)))\n        "},CHECK_LOCATION_EXISTS:{neo4j:"\n                OPTIONAL MATCH (l:Location {location_id: $locationId})\n                RETURN l IS NOT NULL AS exists\n        ",cosmosdb:"\n                g.V().hasLabel('Location').has('location_id', $locationId)\n                .count()\n                .project('exists')\n                .by(coalesce(is(gt(0)), constant(0)))\n        "},CHECK_OBJECTIVE_FUNCTION_EXISTS:{neo4j:"\n                OPTIONAL MATCH (of:ObjectiveFunction {id: $ofId})\n                RETURN of IS NOT NULL as exists\n        ",cosmosdb:"\n                g.V().hasLabel('ObjectiveFunction').has('id', $ofId)\n                .count()\n                .project('exists')\n                .by(coalesce(is(gt(0)), constant(0)))\n        "},CHECK_TEAM_EXISTS:{neo4j:"\n                OPTIONAL MATCH (t:Team {team_id: $teamId})\n                RETURN t IS NOT NULL as exists\n        ",cosmosdb:"\n                g.V().hasLabel('Team').has('team_id', $teamId)\n                .count()\n                .project('exists')\n                .by(coalesce(is(gt(0)), constant(0)))\n        "},GET_NAMES_WITH_PATTERN_MEASURE:{neo4j:"\n                MATCH (m:Measure) \n                WHERE m.name STARTS WITH $searchPattern\n                RETURN m.name as name\n        ",cosmosdb:"\n                g.V().hasLabel('Measure')\n                .has('name', startingWith($searchPattern))\n                .values('name')\n        "},CHECK_MEASURE_ID_EXISTS:{neo4j:"\n                MATCH (m:Measure)\n                WHERE m.measure_id = $measureId\n                RETURN count(m) > 0 AS exists\n        ",cosmosdb:"\n                g.V().hasLabel('Measure')\n                .has('measure_id', $measureId)\n                .count().is(gt(0))\n        "},GET_NAMES_WITH_PATTERN_PROFILE:{neo4j:"\n                MATCH (p:AgentProfile) \n                WHERE p.name STARTS WITH $searchPattern\n                RETURN p.name as name\n        ",cosmosdb:"\n                g.V().hasLabel('AgentProfile')\n                .has('name', startingWith($searchPattern))\n                .values('name')\n        "},GET_NAMES_WITH_PATTERN_ACTION:{neo4j:"\n                MATCH (a:Action) \n                WHERE a.name STARTS WITH $searchPattern\n                RETURN a.name as name\n        ",cosmosdb:"\n                g.V().hasLabel('Action')\n                .has('name', startingWith($searchPattern))\n                .values('name')\n        "},GET_NAMES_WITH_PATTERN_TOOL:{neo4j:"\n                MATCH (t:Tool) \n                WHERE t.name STARTS WITH $searchPattern\n                RETURN t.name as name\n        ",cosmosdb:"\n                g.V().hasLabel('Tool')\n                .has('name', startingWith($searchPattern))\n                .values('name')\n        "},CONNECT_OBJECTIVE_FUNCTION_TO_TEAM:{neo4j:"\n                MERGE (of:ObjectiveFunction {id: $id})\n                SET of.active = $active,\n                    of.components = $components,\n                    of.created_date = datetime($created_date),\n                    of.description = $description,\n                    of.formula = $formula,\n                    of.id = $id,\n                    of.last_modified_date = datetime($last_modified_date),\n                    of.name = $name,\n                    of.objective_type = $objective_type,\n                    of.thresholds = $thresholds,\n                    of.type = $type,\n                    of.version = $version,\n                    of.weights = $weights\n\n                WITH of\n                MATCH (teamOF:ObjectiveFunction {id: $teamOFId})\n                MERGE (teamOF)-[:CONTAINS]->(of)\n                RETURN of.active, of.components, of.created_date, of.description, \n                    of.formula, of.id, of.last_modified_date, of.name, \n                    of.objective_type, of.thresholds, of.type, of.version, of.weights        ",cosmosdb:"\n                g.V().hasLabel('ObjectiveFunction').has('id', $id)\n                .fold()\n                .coalesce(\n                    unfold(),\n                    addV('ObjectiveFunction').property($partitionkeyproperty, $partitionkeyvalue).property('id', $id)\n                )\n                .property(single, 'active', $active)\n                .property(single, 'components', $components)\n                .property(single, 'created_date', $created_date)\n                .property(single, 'description', $description)\n                .property(single, 'formula', $formula)\n                .property(single, 'last_modified_date', $last_modified_date)\n                .property(single, 'name', $name)\n                .property(single, 'objective_type', $objective_type)\n                .property(single, 'thresholds', $thresholds)\n                .property(single, 'type', $type)\n                .property(single, 'version', $version)\n                .property(single, 'weights', $weights)\n                .as('of')\n                .coalesce(\n                    g.V().hasLabel('ObjectiveFunction').has('id', $teamOFId).outE('CONTAINS').where(inV().as('of')),\n                    g.V().hasLabel('ObjectiveFunction').has('id', $teamOFId).addE('CONTAINS').to(select('of'))\n                )\n                .select('of')\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},CREATE_LOCATION_RELATIONSHIPS:{neo4j:"\n                MATCH (t:Team {team_id: $teamId})\n                MATCH (l:Location {location_id: $locationId})\n                MERGE (t)-[:ASSIGNED_TO]->(l)\n        ",cosmosdb:"\n                g.V().hasLabel('Team').has('team_id', $teamId).as('team')\n                .V().hasLabel('Location').has('location_id', $locationId).as('location')\n                .coalesce(\n                    select('team').outE('ASSIGNED_TO').where(inV().as('location')),\n                    select('team').addE('ASSIGNED_TO').to(select('location'))\n                )\n        "},CREATE_OR_UPDATE_AGENT_OBJECTIVE_FUNCTION:{neo4j:"\n                MERGE (of:ObjectiveFunction {id: $id})\n                SET of.active = $active,\n                    of.components = $components,\n                    of.created_date = datetime($created_date),\n                    of.description = $description,\n                    of.formula = $formula,\n                    of.id = $id,\n                    of.last_modified_date = datetime($last_modified_date),\n                    of.name = $name,\n                    of.objective_type = $objective_type,\n                    of.thresholds = $thresholds,\n                    of.type = $type,\n                    of.version = $version,\n                    of.weights = $weights\n\n                WITH of\n                MATCH (a:AgentInstance {agent_id: $agentId})\n                MERGE (a)-[:HAS_OBJECTIVE]->(of)\n                \n                WITH of\n                OPTIONAL MATCH (of)-[:HAS_ENTRY]->(existingEntry:Entry {type: 'ObjectiveFunction'})\n                WITH of, existingEntry\n                WHERE existingEntry IS NULL\n                MERGE (of)-[:HAS_ENTRY]->(entry:Entry {\n                    id: of.id,\n                    type: 'ObjectiveFunction',\n                    created_date: datetime($created_date),\n                    last_modified_date: datetime($created_date),\n                    component_scores: \"\",\n                    component_values: \"\",\n                    current_value: 0,\n                    performance_levels: \"\"\n                })\n                \n                WITH of\n                MERGE (of)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n                ON CREATE SET audit.id = $auditId, audit.created_date = datetime($audit_created_date)\n                \n                RETURN of.active, of.components, of.created_date, of.description, of.formula, of.id, of.last_modified_date,\n                    of.name, of.objective_type, of.thresholds, of.type, of.version, of.weights\n        ",cosmosdb:"\n                g.V().hasLabel('ObjectiveFunction').has('id', $id)\n                .fold()\n                .coalesce(\n                    unfold(),\n                    addV('ObjectiveFunction').property($partitionkeyproperty, $partitionkeyvalue).property('id', $id)\n                )\n                .property(single, 'active', $active)\n                .property(single, 'components', $components)\n                .property(single, 'created_date', $created_date)\n                .property(single, 'description', $description)\n                .property(single, 'formula', $formula)\n                .property(single, 'last_modified_date', $last_modified_date)\n                .property(single, 'name', $name)\n                .property(single, 'objective_type', $objective_type)\n                .property(single, 'thresholds', $thresholds)\n                .property(single, 'type', $type)\n                .property(single, 'version', $version)\n                .property(single, 'weights', $weights)\n                .as('of')\n                .coalesce(\n                    outE('HAS_OBJECTIVE').where(inV().hasLabel('AgentInstance').has('agent_id', $agentId)),\n                    addE('HAS_OBJECTIVE').from(__.V().hasLabel('AgentInstance').has('agent_id', $agentId))\n                )\n                .select('of')\n                .coalesce(\n                    outE('HAS_AUDIT').where(inV().hasLabel('Artifact').has('type', 'Audit')),\n                    addE('HAS_AUDIT').to(\n                        addV('Artifact')\n                        .property($partitionkeyproperty, $partitionkeyvalue)\n                        .property('type', 'Audit')\n                        .property('id', $auditId)\n                        .property('created_date', $audit_created_date)\n                    )\n                )\n                .inV()\n                .addE('AUDIT_ENTRY').to(\n                    addV('Entry')\n                    .property($partitionkeyproperty, $partitionkeyvalue)\n                    .property('created_date', $entry_created_date)\n                    .property('timestamp', $timestamp)\n                    .property('id', $entryId)\n                    .property('type', 'Audit')\n                    .property('user', $currentUser)\n                    .property('change', $stringifiedChanges)\n                )\n                .select('of')\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},DELETE_AGENT_ACTIONS:{neo4j:"\n                MATCH (a:AgentInstance {agent_id: $agentId})-[r:USES_ACTION]->()\n                DELETE r\n        ",cosmosdb:"\n                g.V().hasLabel('AgentInstance').has('agent_id', $agentId)\n                .outE('USES_ACTION')\n                .drop()\n        "},DELETE_AGENT_OBJECTIVE_FUNCTION:{neo4j:"\n                MATCH (a:AgentInstance {agent_id: $agentId})-[r:HAS_OBJECTIVE]->(of:ObjectiveFunction)\n                DELETE r\n        ",cosmosdb:"\n                g.V().hasLabel('AgentInstance').has('agent_id', $agentId)\n                .outE('HAS_OBJECTIVE').where(inV().hasLabel('ObjectiveFunction'))\n                .drop()\n        "},DELETE_AGENT_TOOLS:{neo4j:"\n                MATCH (a:AgentInstance {agent_id: $agentId})-[r:USES_TOOL]->()\n                DELETE r\n        ",cosmosdb:"\n                g.V().hasLabel('AgentInstance').has('agent_id', $agentId)\n                .outE('USES_TOOL')\n                .drop()\n        "},DELETE_LOCATION_RELATIONSHIPS:{neo4j:"\n                MATCH (t:Team {team_id: $teamId})-[r:ASSIGNED_TO]->(:Location)\n                DELETE r\n        ",cosmosdb:"\n                g.V().hasLabel('Team').has('team_id', $teamId)\n                .outE('ASSIGNED_TO').where(inV().hasLabel('Location'))\n                .drop()\n        "},DELETE_TEAM_OBJECTIVE_FUNCTION:{neo4j:"\n                MATCH (t:Team {team_id: $teamId})-[r:HAS_OBJECTIVE]->(of:ObjectiveFunction)\n                DELETE r\n        ",cosmosdb:"\n                g.V().hasLabel('Team').has('team_id', $teamId)\n                .outE('HAS_OBJECTIVE').where(inV().hasLabel('ObjectiveFunction'))\n                .drop()\n        "},GET_AUDIT_HISTORY:{neo4j:"\n                MATCH (t:Team {team_id: $teamId})-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})-[:AUDIT_ENTRY]->(entry:Entry {type: 'Audit'})\n                RETURN entry.timestamp AS timestamp, entry.change AS changes, entry.user AS user\n                ORDER BY entry.timestamp DESC\n        ",cosmosdb:"\n                g.V().hasLabel('Team').has('team_id', $teamId)\n                .out('HAS_AUDIT').hasLabel('Artifact').has('type', 'Audit')\n                .out('AUDIT_ENTRY').hasLabel('Entry')\n                .order().by('timestamp', decr)\n                .project('timestamp', 'changes', 'user')\n                .by('timestamp')\n                .by('change')\n                .by('user')\n        "},GET_LATEST_AGENT:{neo4j:"\n                MATCH (a:AgentInstance)\n                WHERE a.agent_id =~ $baseId + '-\\d{3}'\n                WITH a, toInteger(split(a.agent_id, '-')[-1]) AS version\n                RETURN a.agent_id\n                ORDER BY version DESC\n                LIMIT 1\n        ",cosmosdb:"\n                g.V().hasLabel('AgentInstance').has('agent_id', startingWith($baseId))\n                .order().by('agent_id', decr).limit(1)\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},GET_LATEST_OBJECTIVE_FUNCTION:{neo4j:"\n                MATCH (of:ObjectiveFunction)\n                WHERE of.id =~ $baseIdPrefix + '-\\d{3}'\n                WITH of, toInteger(split(of.id, '-')[-1]) AS version\n                RETURN of.id\n                ORDER BY version DESC\n                LIMIT 1\n        ",cosmosdb:"\n                g.V().hasLabel('ObjectiveFunction').has('id', startingWith($baseIdPrefix))\n                .order().by('id', decr).limit(1)\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},GET_LATEST_TEAM:{neo4j:"\n                MATCH (t:Team)\n                WHERE t.team_id =~ $baseId + '-\\d{3}'\n                WITH t, toInteger(split(t.team_id, '-')[-1]) AS version\n                RETURN t.team_id\n                ORDER BY version DESC\n                LIMIT 1\n        ",cosmosdb:"\n                g.V().hasLabel('Team').has('team_id', startingWith($baseId))\n                .order().by('team_id', decr).limit(1)\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},GET_LATEST_MEASURE:{neo4j:"\n                MATCH (m:Measure)\n                WHERE m.id =~ $baseId + '-\\d{3}'\n                WITH m, toInteger(split(m.id, '-')[-1]) AS version\n                RETURN m.id\n                ORDER BY version DESC\n                LIMIT 1\n        ",cosmosdb:"\n                g.V().hasLabel('Measure').has('id', startingWith($baseId))\n                .order().by('id', decr).limit(1)\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},GET_LATEST_MEASURE_ID:{neo4j:"\n                MATCH (m:Measure)\n                WHERE m.measure_id =~ $baseMeasureId + '_\\\\d+'\n                WITH m, toInteger(split(m.measure_id, '_')[-1]) AS suffix\n                RETURN m.measure_id\n                ORDER BY suffix DESC\n                LIMIT 1\n        ",cosmosdb:"\n                g.V().hasLabel('Measure').has('measure_id', startingWith($baseMeasureId))\n                .order().by('measure_id', decr).limit(1)\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},GET_LATEST_PROFILE:{neo4j:"\n                MATCH (p:AgentProfile)\n                WHERE p.profile_id =~ $baseId + '-\\d{3}'\n                WITH p, toInteger(split(p.profile_id, '-')[-1]) AS version\n                RETURN p.profile_id\n                ORDER BY version DESC\n                LIMIT 1\n        ",cosmosdb:"\n                g.V().hasLabel('AgentProfile').has('profile_id', startingWith($baseId))\n                .order().by('profile_id', decr).limit(1)\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},GET_LATEST_TOOL:{neo4j:"\n                MATCH (t:Tool)\n                WHERE t.id =~ $baseId + '-\\d{3}'\n                WITH t, toInteger(split(t.id, '-')[-1]) AS version\n                RETURN t.id\n                ORDER BY version DESC\n                LIMIT 1\n        ",cosmosdb:"\n                g.V().hasLabel('Tool').has('id', startingWith($baseId))\n                .order().by('id', decr).limit(1)\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},GET_LATEST_ACTION:{neo4j:"\n                MATCH (a:Action)\n                WHERE a.id =~ $baseId + '-\\d{3}'\n                WITH a, toInteger(split(a.id, '-')[-1]) AS version\n                RETURN a.id\n                ORDER BY version DESC\n                LIMIT 1\n        ",cosmosdb:"\n                g.V().hasLabel('Action').has('id', startingWith($baseId))\n                .order().by('id', decr).limit(1)\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},LOAD_AGENT:{neo4j:"\n                MATCH (a:AgentInstance {agent_id: $agentId})\n                RETURN a.active, a.agent_id, a.constraints, a.created_date, a.last_modified_date, a.name, a.profile_id, a.responsibilities, a.task_prompt, a.type, a.user_prompt\n        ",cosmosdb:"\n                g.V().hasLabel('AgentInstance').has('agent_id', $agentId)\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},LOAD_AGENT_OBJECTIVE_FUNCTION:{neo4j:"\n                MATCH (a:AgentInstance {agent_id: $agentId})-[:HAS_OBJECTIVE]->(of:ObjectiveFunction)\n                RETURN of.active, of.components, of.created_date, of.description, of.formula, of.id, of.last_modified_date,\n                    of.name, of.objective_type, of.thresholds, of.type, of.version, of.weights\n        ",cosmosdb:"\n                g.V().hasLabel('AgentInstance').has('agent_id', $agentId)\n                .out('HAS_OBJECTIVE').hasLabel('ObjectiveFunction')\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},LOAD_AGENT_PROFILE:{neo4j:"\n                MATCH (p:AgentProfile {profile_id: $profileId})\n                OPTIONAL MATCH (p)-[:ALLOWS_TOOL]->(t:Tool)\n                OPTIONAL MATCH (p)-[:ALLOWS_ACTION]->(a:Action)\n                RETURN p.name, p.profile_id, p.created_date, p.max_tokens, p.author, p.last_modified_date, p.active, p.tags, p.model_name,\n                    p.category, p.experience, p.system_prompt, p.rag_collection_name, p.rag_top_k, p.rag_vector_size, p.use_general_rag,\n                    p.observation_prompt, p.reflection_prompt, p.skills, p.deontic_rules, p.organizational_rules, p.allowed_planning_method,\n                    p.memory_parameters, p.decision_parameters, p.model_provider,\n                    collect(DISTINCT {\n                        active: t.active,\n                        class_name: t.class_name,\n                        created_date: t.created_date,\n                        description: t.description,\n                        last_modified_date: t.last_modified_date,\n                        max_tokens: t.max_tokens,\n                        model_name: t.model_name,\n                        model_provider: t.model_provider,\n                        name: t.name,\n                        options: t.options,\n                        prompt_system: t.prompt_system,\n                        prompt_user: t.prompt_user,\n                        reserved_fields: t.reserved_fields\n                    }) as allowed_tools,\n                    collect(DISTINCT {\n                        active: a.active,\n                        author: a.author,\n                        category: a.category,\n                        created_date: a.created_date,\n                        description: a.description,\n                        id: a.id,\n                        impact_measures: a.impact_measures,\n                        last_modified_date: a.last_modified_date,\n                        name: a.name,\n                        operation_requirements: a.operation_requirements,\n                        parameters: a.parameters,\n                        should_return: a.should_return,\n                        version: a.version\n                    }) as allowed_actions\n        ",cosmosdb:"\n                g.V().hasLabel('AgentProfile').has('profile_id', $profileId)\n                .project('active','allowed_planning_method','author','category','created_date','decision_parameters','deontic_rules',\n                    'experience','last_modified_date','max_tokens','memory_parameters','model_name','model_provider','name','observation_prompt',\n                    'organizational_rules','profile_id','rag_collection_name','rag_top_k','rag_vector_size','reflection_prompt','use_general_rag',\n                    'skills','system_prompt','tags','allowed_tools','allowed_actions')\n                    .by('active')\n                    .by('allowed_planning_method')\n                    .by('author')\n                    .by('category')\n                    .by('created_date')\n                    .by('decision_parameters')\n                    .by('deontic_rules')\n                    .by('experience')\n                    .by('last_modified_date')\n                    .by('max_tokens')\n                    .by('memory_parameters')\n                    .by('model_name')\n                    .by('model_provider')\n                    .by('name')\n                    .by('observation_prompt')\n                    .by('organizational_rules')\n                    .by('profile_id')\n                    .by('rag_collection_name')\n                    .by('rag_top_k')\n                    .by('rag_vector_size')\n                    .by('reflection_prompt')\n                    .by('use_general_rag')\n                    .by('skills')\n                    .by('system_prompt')\n                    .by('tags')\n                    .by(coalesce(\n                        out('ALLOWS_TOOL').map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1))).dedup().fold(),\n                        constant([])\n                    ))\n                    .by(coalesce(\n                        out('ALLOWS_ACTION').map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1))).dedup().fold(),\n                        constant([])\n                    ))\n        "},LOAD_BATCHED_TEAMS:{neo4j:"\n                MATCH (t:Team)\n                WHERE \n                    (size($statusConditions) = 0 OR \n                        (true IN $statusConditions AND t.active = true) OR\n                        (false IN $statusConditions AND (t.active = false OR t.active IS NULL)))\n                    AND (\n                        $currentUser = '' OR\n                        t.author = $currentUser\n                    )\n                    AND (\n                        size($categories) = 0 OR \n                        t.category IN $categories OR\n                        ('Uncategorized' IN $categories AND (t.category IS NULL OR trim(coalesce(t.category, '')) = ''))\n                    )\n                    AND (\n                        $searchTerm = '' OR \n                        toLower(t.name) CONTAINS toLower($searchTerm) OR\n                        toLower(t.team_id) CONTAINS toLower($searchTerm) OR\n                        toLower(coalesce(t.category, 'Uncategorized')) CONTAINS toLower($searchTerm) OR\n                        ANY(tag IN t.tags WHERE toLower(tag) CONTAINS toLower($searchTerm))\n                    )\n                RETURN t.active, t.allowed_consensus, t.author, t.category, t.compliance_requirements, t.created_date, t.description, t.last_modified_date,\n                       t.name, t.objectives, t.operating_principles, t.tags, t.team_id, t.version\n                ORDER BY toLower(t.name)\n                SKIP toInteger($skip)\n                LIMIT toInteger($limit)\n        ",cosmosdb:"\n                g.V().hasLabel('Team')\n                .where(coalesce(values('active'), constant(false)).is(within($statusConditions)))\n                .where(coalesce(values('category'), constant('uncategorized')).is(within($categories)))\n                .where(\n                    __.or(\n                        has('name', containing($searchTerm)),\n                        has('team_id', containing($searchTerm)),\n                        has('category', containing($searchTerm)),\n                        has('tags', containing($searchTerm))\n                    )\n                )\n                .where(\n                    __.or(\n                        constant($currentUser).is(''),\n                        has('author', $currentUser)\n                    )\n                )\n                .order().by('name', incr)\n                .range($skip, $limit)\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1))).range($skip,$limit)\n        "},LOAD_CATEGORY_FILTERS:{neo4j:"\n                MATCH (t:Team)\n                WHERE t.category IS NOT NULL\n                RETURN DISTINCT t.category as category\n                ORDER BY category\n        ",cosmosdb:"\n                g.V().hasLabel('Team').has('category')\n                .values('category').dedup().order()\n                .project('category')\n                .by(identity())\n        "},LOAD_LOCATION:{neo4j:"\n                MATCH (l:Location {location_id: $locationId})\n                RETURN l.location_id, l.name\n        ",cosmosdb:"\n                g.V().hasLabel('Location').has('location_id', $locationId)\n                .project('location_id', 'name')\n                .by('location_id')\n                .by('name')\n        "},LOAD_LOCATIONS:{neo4j:"\n                MATCH (l:Location)\n                WHERE l.name IS NOT NULL\n                RETURN l.location_id as id, l.name as name\n                ORDER BY l.name\n        ",cosmosdb:"\n                g.V().hasLabel('Location')\n                .order().by('name')\n                .project('id', 'name')\n                .by('location_id')\n                .by('name')\n        "},LOAD_OBJECTIVE_FUNCTION:{neo4j:"\n                MATCH (t:Team {team_id: $teamId})-[:HAS_OBJECTIVE]->(of:ObjectiveFunction)\n                RETURN of.active, of.components, of.created_date, of.description, of.formula, of.id, of.last_modified_date,\n                    of.name, of.objective_type, of.thresholds, of.type, of.version, of.weights\n        ",cosmosdb:"\n                g.V().hasLabel('Team').has('team_id', $teamId)\n                .out('HAS_OBJECTIVE').hasLabel('ObjectiveFunction')\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},LOAD_PROFILES:{neo4j:"\n                MATCH (p:AgentProfile)\n                WHERE p.name IS NOT NULL\n                ORDER BY p.name\n                CALL {\n                WITH p\n                OPTIONAL MATCH (p)-[r:ALLOWS_TOOL]->(t:Tool)\n                RETURN collect(DISTINCT {\n                    active: t.active,\n                    class_name: t.class_name,\n                    created_date: t.created_date,\n                    description: t.description,\n                    id: t.id,\n                    last_modified_date: t.last_modified_date,\n                    max_tokens: t.max_tokens,\n                    model_name: t.model_name,\n                    model_provider: t.model_provider,\n                    name: t.name,\n                    options: t.options,\n                    prompt_system: t.prompt_system,\n                    prompt_user: t.prompt_user,\n                    reserved_fields: t.reserved_fields\n                }) as tools\n                }\n                CALL {\n                WITH p\n                OPTIONAL MATCH (p)-[ra:ALLOWS_ACTION]->(a:Action)\n                RETURN collect(DISTINCT {\n                    active: a.active,\n                    author: a.author,\n                    category: a.category,\n                    created_date: a.created_date,\n                    description: a.description,\n                    id: a.id,\n                    impact_measures: a.impact_measures,\n                    last_modified_date: a.last_modified_date,\n                    name: a.name,\n                    operation_requirements: a.operation_requirements,\n                    parameters: a.parameters,\n                    should_return: a.should_return,\n                    version: a.version\n                }) as actions\n                }\n                RETURN p.name, p.profile_id, p.created_date, p.max_tokens, p.author, p.last_modified_date, p.active, p.tags, p.model_name,\n                    p.category, p.experience, p.system_prompt, p.rag_collection_name, p.rag_top_k, p.rag_vector_size, p.use_general_rag,\n                    p.observation_prompt, p.reflection_prompt, p.skills, p.deontic_rules, p.organizational_rules, p.allowed_planning_method,\n                    p.memory_parameters, p.decision_parameters, p.model_provider,\n                    tools as allowed_tools, \n                    actions as allowed_actions\n        ",cosmosdb:"\n                g.V().hasLabel('AgentProfile')\n                .order().by('name')\n                .project('active','allowed_planning_method','author','category','created_date','decision_parameters','deontic_rules',\n                    'experience','last_modified_date','max_tokens','memory_parameters','model_name','model_provider','name','observation_prompt',\n                    'organizational_rules','profile_id','rag_collection_name','rag_top_k','rag_vector_size','reflection_prompt','use_general_rag',\n                    'skills','system_prompt','tags','allowed_tools','allowed_actions')\n                    .by('active')\n                    .by('allowed_planning_method')\n                    .by('author')\n                    .by('category')\n                    .by('created_date')\n                    .by('decision_parameters')\n                    .by('deontic_rules')\n                    .by('experience')\n                    .by('last_modified_date')\n                    .by('max_tokens')\n                    .by('memory_parameters')\n                    .by('model_name')\n                    .by('model_provider')\n                    .by('name')\n                    .by('observation_prompt')\n                    .by('organizational_rules')\n                    .by('profile_id')\n                    .by('rag_collection_name')\n                    .by('rag_top_k')\n                    .by('rag_vector_size')\n                    .by('reflection_prompt')\n                    .by('use_general_rag')\n                    .by('skills')\n                    .by('system_prompt')\n                    .by('tags')\n                    .by(coalesce(\n                        out('ALLOWS_TOOL').map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1))).dedup().fold(),\n                        constant([])\n                    ))\n                    .by(coalesce(\n                        out('ALLOWS_ACTION').map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1))).dedup().fold(),\n                        constant([])\n                    ))\n        "},LOAD_SYSTEM_OPTIONS:{neo4j:"\n                MATCH (so:SystemOptions {id: $id})\n                RETURN so.reserved_field_user_prompt as reserved_fields_user, \n                    so.reserved_fields_task_prompt as reserved_fields_task, \n                    so.content_processor_type, \n                    so.allowed_consensus\n        ",cosmosdb:"\n                g.V().hasLabel('SystemOptions').has('id', $id)\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},LOAD_TEAM:{neo4j:"\n            MATCH (t:Team {team_id: $teamId})\n            OPTIONAL MATCH (t)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})-[:AUDIT_ENTRY]->(auditEntry:Entry {type: 'Audit'})\n            OPTIONAL MATCH (t)-[:ASSIGNED_TO]->(loc:Location)\n            OPTIONAL MATCH (t)-[:HAS_OBJECTIVE]->(of:ObjectiveFunction {active: true})\n\n            WITH t, loc.location_id as location_id, of,\n                auditEntry ORDER BY auditEntry.timestamp DESC LIMIT 1\n            WITH t, location_id, of, auditEntry as latestEntry\n\n            OPTIONAL MATCH (t)<-[:MEMBER_OF]-(a:AgentInstance)\n            OPTIONAL MATCH (a)-[:HAS_OBJECTIVE]->(aof:ObjectiveFunction {active: true})\n\n            CALL {\n                WITH a\n                OPTIONAL MATCH (a)-[:USES_TOOL]->(usedTool:Tool)\n                RETURN collect(DISTINCT {id: usedTool.id}) as agentTools\n            }\n\n            CALL {\n                WITH a\n                OPTIONAL MATCH (a)-[:USES_ACTION]->(usedAction:Action)\n                RETURN collect(DISTINCT {id: usedAction.id}) as agentActions\n            }\n\n            WITH t, latestEntry, location_id, of,\n                collect(\n                    CASE WHEN a IS NOT NULL THEN {\n                        active: a.active,\n                        agent_id: a.agent_id,\n                        constraints: a.constraints,\n                        created_date: a.created_date,\n                        last_modified_date: a.last_modified_date,\n                        name: a.name,\n                        profile_id: a.profile_id,\n                        responsibilities: a.responsibilities,\n                        task_prompt: a.task_prompt,\n                        type: a.type,\n                        user_prompt: a.user_prompt,\n                        tools: agentTools,\n                        actions: agentActions,\n                        objectiveFunction: CASE \n                            WHEN aof IS NOT NULL THEN {\n                                active: aof.active,\n                                components: aof.components,\n                                created_date: aof.created_date,\n                                description: aof.description,\n                                formula: aof.formula,\n                                id: aof.id,\n                                last_modified_date: aof.last_modified_date,\n                                name: aof.name,\n                                objective_type: aof.objective_type,\n                                operational_constraints: aof.operational_constraints,\n                                thresholds: aof.thresholds,\n                                type: aof.type,\n                                version: aof.version,\n                                weights: aof.weights\n                            }\n                            ELSE null\n                        END\n                    } ELSE null END\n                ) as agentsWithData\n\n            RETURN t.active, t.allowed_consensus, t.author, t.category, t.compliance_requirements, \n                t.created_date, t.description, t.last_modified_date, t.name, t.objectives, \n                t.operating_principles, t.tags, t.team_id, t.version,\n                latestEntry.timestamp as lastAuditTimestamp, \n                [agent IN agentsWithData WHERE agent IS NOT NULL] as agentsWithData,\n                CASE \n                    WHEN of IS NOT NULL THEN {\n                        active: of.active,\n                        components: of.components,\n                        created_date: of.created_date,\n                        description: of.description,\n                        formula: of.formula,\n                        id: of.id,\n                        last_modified_date: of.last_modified_date,\n                        name: of.name,\n                        objective_type: of.objective_type,\n                        operational_constraints: of.operational_constraints,\n                        thresholds: of.thresholds,\n                        type: of.type,\n                        version: of.version,\n                        weights: of.weights\n                    }\n                    ELSE null\n                END as objective_function,\n                location_id\n        ",cosmosdb:"\n                g.V().hasLabel('Team').has('team_id', $teamId)\n                .project('active', 'allowed_consensus', 'author', 'category', 'compliance_requirements',\n                         'created_date', 'description', 'last_modified_date',\n                         'name', 'objectives', 'operating_principles', 'tags', 'team_id', 'version',\n                         'location_id', 'agentsWithData', 'objective_function', 'latestAuditTimestamp')\n                .by('active')\n                .by('allowed_consensus')\n                .by('author')\n                .by('category')\n                .by('compliance_requirements')\n                .by('created_date')\n                .by('description')\n                .by('last_modified_date')\n                .by('name')\n                .by('objectives')\n                .by('operating_principles')\n                .by('tags')\n                .by('team_id')\n                .by('version')\n                .by(coalesce(out('ASSIGNED_TO').hasLabel('Location').values('location_id'), constant('')))\n                .by(coalesce(__.in('MEMBER_OF').hasLabel('AgentInstance')\n                               .project('active', 'agent_id', 'available_actions', 'constraints', 'created_date',\n                                        'last_modified_date', 'name', 'profile_id', 'responsibilities', 'task_prompt',\n                                        'type', 'user_prompt',\n                                        'tools', 'actions', 'objectiveFunction')\n                               .by('active')\n                               .by('agent_id')\n                               .by('available_actions')\n                               .by('constraints')\n                               .by('created_date')\n                               .by('last_modified_date')\n                               .by('name')\n                               .by('profile_id')\n                               .by('responsibilities')\n                               .by('task_prompt')\n                               .by('type')\n                               .by('user_prompt')\n                               .by(coalesce(__.out('USES_TOOL').hasLabel('Tool')\n                                              .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1))).dedup().fold(),\n                                            constant([])))\n                               .by(coalesce(__.out('USES_ACTION').hasLabel('Action')\n                                              .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1))).dedup().fold(),\n                                            constant([])))\n                               .by(coalesce(__.out('HAS_OBJECTIVE').hasLabel('ObjectiveFunction').has('active', true)\n                                               .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1))), constant(''))),\n                             constant([])).fold())\n                .by(coalesce(__.out('HAS_OBJECTIVE').hasLabel('ObjectiveFunction').has('active', true)\n                               .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1))), constant('')))\n                .by(coalesce(__.out('HAS_AUDIT').hasLabel('Artifact')\n                               .out('AUDIT_ENTRY').hasLabel('Entry')\n                               .order().by('timestamp', decr).limit(1)\n                               .values('timestamp'), constant('')))\n        "},WRITE_AGENT:{neo4j:"\n                MATCH (t:Team {team_id: $teamId})\n                MATCH (p:AgentProfile {profile_id: $profileId})\n                MERGE (a:AgentInstance {agent_id: $agentId})\n                SET a.active = $active,\n                    a.constraints = $constraints,\n                    a.created_date = datetime($created_date),\n                    a.last_modified_date = datetime($last_modified_date),\n                    a.name = $name,\n                    a.profile_id = $profile_id,\n                    a.responsibilities = $responsibilities,\n                    a.task_prompt = $task_prompt,\n                    a.type = $type,\n                    a.user_prompt = $user_prompt\n                MERGE (a)-[:MEMBER_OF]->(t)\n                MERGE (a)-[:INSTANCE_OF]->(p)\n                \n                WITH a\n                MERGE (a)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n                ON CREATE SET audit.id = $auditId, audit.created_date = datetime($audit_created_date)\n                \n                RETURN a.active, a.agent_id, a.constraints, a.created_date, a.last_modified_date, a.name, a.profile_id, a.responsibilities, a.task_prompt, a.type, a.user_prompt\n        ",cosmosdb:"\n                g.V().hasLabel('AgentInstance').has('agent_id', $agentId)\n                .fold()\n                .coalesce(\n                    unfold(),\n                    addV('AgentInstance').property($partitionkeyproperty, $partitionkeyvalue).property('agent_id', $agentId)\n                )\n                .property(single, 'active', $active)\n                .property(single, 'agent_id', $agent_id)\n                .property(single, 'constraints', $constraints)\n                .property(single, 'created_date', $created_date)\n                .property(single, 'last_modified_date', $last_modified_date)\n                .property(single, 'name', $name)\n                .property(single, 'profile_id', $profile_id)\n                .property(single, 'responsibilities', $responsibilities)\n                .property(single, 'task_prompt', $task_prompt)\n                .property(single, 'type', $type)\n                .property(single, 'user_prompt', $user_prompt)\n                .as('agent')\n                .coalesce(\n                    outE('MEMBER_OF').where(inV().hasLabel('Team').has('team_id', $teamId)),\n                    addE('MEMBER_OF').to(__.V().hasLabel('Team').has('team_id', $teamId))\n                )\n                .select('agent')\n                .coalesce(\n                    outE('INSTANCE_OF').where(inV().hasLabel('AgentProfile').has('profile_id', $profileId)),\n                    addE('INSTANCE_OF').to(__.V().hasLabel('AgentProfile').has('profile_id', $profileId))\n                )\n                .select('agent')\n                .coalesce(\n                    outE('HAS_AUDIT').where(inV().hasLabel('Artifact').has('type', 'Audit')),\n                    addE('HAS_AUDIT').to(\n                        addV('Artifact')\n                        .property($partitionkeyproperty, $partitionkeyvalue)\n                        .property('type', 'Audit')\n                        .property('id', $auditId)\n                        .property('created_date', $audit_created_date)\n                    )\n                )\n                .inV()\n                .addE('AUDIT_ENTRY').to(\n                    addV('Entry')\n                    .property($partitionkeyproperty, $partitionkeyvalue)\n                    .property('created_date', $entry_created_date)\n                    .property('timestamp', $timestamp)\n                    .property('id', $entryId)\n                    .property('type', 'Audit')\n                    .property('user', $currentUser)\n                    .property('change', $stringifiedChanges)\n                )\n                .select('agent')\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},WRITE_AUDIT_INFO:{neo4j:"\n                MATCH (t:Team {team_id: $teamId})\n                MERGE (t)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n                ON CREATE SET audit.id = $auditId, audit.created_date = datetime($audit_created_date)\n                WITH t, audit\n                MERGE (entry:Entry {id: $entryId})\n                ON CREATE SET\n                    entry.created_date = datetime($entry_created_date),\n                    entry.timestamp = $timestamp,\n                    entry.type = 'Audit',\n                    entry.user = $currentUser,\n                    entry.change = $stringifiedChanges\n                MERGE (audit)-[:AUDIT_ENTRY]->(entry)\n        ",cosmosdb:"\n                g.V().hasLabel('Team').has('team_id', $teamId)\n                .coalesce(\n                    out('HAS_AUDIT').hasLabel('Artifact').has('type', 'Audit'),\n                    addV('Artifact')\n                    .property($partitionkeyproperty, $partitionkeyvalue)\n                    .property('type', 'Audit')\n                    .property('id', $auditId)\n                    .property('created_date', $audit_created_date)\n                    .addE('HAS_AUDIT').from(g.V().hasLabel('Team').has('team_id', $teamId))\n                )\n                .addV('Entry')\n                .property($partitionkeyproperty, $partitionkeyvalue)\n                .property('created_date', $entry_created_date)\n                .property('timestamp', $timestamp)\n                .property('id', $entryId)\n                .property('type', 'Audit')\n                .property('user', $currentUser)\n                .property('change', $stringifiedChanges)\n                .addE('AUDIT_ENTRY').from(g.V().hasLabel('Team').has('team_id', $teamId).out('HAS_AUDIT').hasLabel('Artifact').has('type', 'Audit'))\n        "},WRITE_AGENT_AUDIT_INFO:{neo4j:"\n                MATCH (a:AgentInstance {agent_id: $agentId})\n                MERGE (a)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n                ON CREATE SET audit.id = $auditId, audit.created_date = datetime($audit_created_date)\n                WITH a, audit\n                MERGE (audit)-[:AUDIT_ENTRY]->(entry:Entry {id: $entryId})\n                ON CREATE SET entry.created_date = datetime($entry_created_date),\n                    entry.timestamp = $timestamp,\n                    entry.type = 'Audit',\n                    entry.user = $currentUser,\n                    entry.change = $stringifiedChanges\n        ",cosmosdb:"\n                g.V().hasLabel('AgentInstance').has('agent_id', $agentId)\n                .coalesce(\n                    out('HAS_AUDIT').hasLabel('Artifact').has('type', 'Audit'),\n                    addV('Artifact')\n                    .property($partitionkeyproperty, $partitionkeyvalue)\n                    .property('type', 'Audit')\n                    .property('id', $auditId)\n                    .property('created_date', $audit_created_date)\n                    .addE('HAS_AUDIT').from(g.V().hasLabel('AgentInstance').has('agent_id', $agentId))\n                )\n                .addV('Entry')\n                .property($partitionkeyproperty, $partitionkeyvalue)\n                .property('created_date', $entry_created_date)\n                .property('timestamp', $timestamp)\n                .property('id', $entryId)\n                .property('type', 'Audit')\n                .property('user', $currentUser)\n                .property('change', $stringifiedChanges)\n                .addE('AUDIT_ENTRY').from(g.V().hasLabel('AgentInstance').has('agent_id', $agentId).out('HAS_AUDIT').hasLabel('Artifact').has('type', 'Audit'))\n        "},WRITE_OBJECTIVE_FUNCTION_AUDIT_INFO:{neo4j:"\n                MATCH (of:ObjectiveFunction {id: $objectiveFunctionId})\n                MERGE (of)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n                ON CREATE SET audit.id = $auditId, audit.created_date = datetime($audit_created_date)\n                WITH of, audit\n                MERGE (entry:Entry {id: $entryId})\n                ON CREATE SET\n                    entry.created_date = datetime($entry_created_date),\n                    entry.timestamp = $timestamp,\n                    entry.type = 'Audit',\n                    entry.user = $currentUser,\n                    entry.change = $stringifiedChanges\n                MERGE (audit)-[:AUDIT_ENTRY]->(entry)\n        ",cosmosdb:"\n                g.V().hasLabel('ObjectiveFunction').has('id', $objectiveFunctionId)\n                .coalesce(\n                    out('HAS_AUDIT').hasLabel('Artifact').has('type', 'Audit'),\n                    addV('Artifact')\n                    .property($partitionkeyproperty, $partitionkeyvalue)\n                    .property('type', 'Audit')\n                    .property('id', $auditId)\n                    .property('created_date', $audit_created_date)\n                    .addE('HAS_AUDIT').from(g.V().hasLabel('ObjectiveFunction').has('id', $objectiveFunctionId))\n                )\n                .addV('Entry')\n                .property($partitionkeyproperty, $partitionkeyvalue)\n                .property('created_date', $entry_created_date)\n                .property('timestamp', $timestamp)\n                .property('id', $entryId)\n                .property('type', 'Audit')\n                .property('user', $currentUser)\n                .property('change', $stringifiedChanges)\n                .addE('AUDIT_ENTRY').from(g.V().hasLabel('ObjectiveFunction').has('id', $objectiveFunctionId).out('HAS_AUDIT').hasLabel('Artifact').has('type', 'Audit'))\n        "},WRITE_LOCATION:{neo4j:"\n                CREATE (l:Location {\n                    location_id: $location_id,\n                    name: $name,\n                    description: $description,\n                    created_date: datetime($created_date),\n                    last_modified_date: datetime($last_modified_date),\n                    author: $currentUser\n                })\n                RETURN l.location_id, l.name\n        ",cosmosdb:"\n                g.addV('Location')\n                .property($partitionkeyproperty, $partitionkeyvalue)\n                .property('location_id', $location_id)\n                .property('name', $name)\n                .property('description', $description)\n                .property('created_date', $created_date)\n                .property('last_modified_date', $last_modified_date)\n                .property('author', $currentUser)\n                .project('location_id', 'name')\n                .by('location_id')\n                .by('name')\n        "},WRITE_OBJECTIVE_FUNCTION:{neo4j:"\n                MERGE (of:ObjectiveFunction {id: $id})\n                SET of.active = $active,\n                    of.components = $components,\n                    of.created_date = datetime($created_date),\n                    of.description = $description,\n                    of.formula = $formula,\n                    of.id = $id,\n                    of.last_modified_date = datetime($last_modified_date),\n                    of.name = $name,\n                    of.objective_type = $objective_type,\n                    of.thresholds = $thresholds,\n                    of.type = $type,\n                    of.version = $version,\n                    of.weights = $weights\n\n                WITH of\n                MATCH (t:Team {team_id: $teamId})\n                MERGE (t)-[:HAS_OBJECTIVE]->(of)\n\n                WITH of\n                OPTIONAL MATCH (of)-[:HAS_ENTRY]->(existingEntry:Entry {type: 'ObjectiveFunction'})\n                WITH of, existingEntry\n                WHERE existingEntry IS NULL\n                MERGE (of)-[:HAS_ENTRY]->(entry:Entry {\n                    id: of.id,\n                    type: 'ObjectiveFunction',\n                    created_date: datetime($created_date),\n                    last_modified_date: datetime($created_date),\n                    component_scores: \"\",\n                    component_values: \"\",\n                    current_value: 0,\n                    performance_levels: \"\"\n                })\n\n                WITH of\n                MERGE (of)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n                ON CREATE SET audit.id = $auditId, audit.created_date = datetime($audit_created_date)\n                WITH of, audit\n                MERGE (entry:Entry {id: $entryId})\n                ON CREATE SET\n                    entry.created_date = datetime($entry_created_date),\n                    entry.timestamp = $timestamp,\n                    entry.type = 'Audit',\n                    entry.user = $currentUser,\n                    entry.change = $stringifiedChanges\n                MERGE (audit)-[:AUDIT_ENTRY]->(entry)\n                RETURN of.active, of.components, of.created_date, of.description, of.formula, of.id, of.last_modified_date,\n                    of.name, of.objective_type, of.thresholds, of.type, of.version, of.weights\n        ",cosmosdb:"\n                g.V().hasLabel('ObjectiveFunction').has('id', $id)\n                .fold()\n                .coalesce(\n                    unfold(),\n                    addV('ObjectiveFunction').property($partitionkeyproperty, $partitionkeyvalue).property('id', $id)\n                )\n                .property(single, 'active', $active)\n                .property(single, 'components', $components)\n                .property(single, 'created_date', $created_date)\n                .property(single, 'description', $description)\n                .property(single, 'formula', $formula)\n                .property(single, 'last_modified_date', $last_modified_date)\n                .property(single, 'name', $name)\n                .property(single, 'objective_type', $objective_type)\n                .property(single, 'thresholds', $thresholds)\n                .property(single, 'type', $type)\n                .property(single, 'version', $version)\n                .property(single, 'weights', $weights)\n                .as('of')\n                .coalesce(\n                    outE('HAS_OBJECTIVE').where(inV().hasLabel('Team').has('team_id', $teamId)),\n                    addE('HAS_OBJECTIVE').from(__.V().hasLabel('Team').has('team_id', $teamId))\n                )\n                .select('of')\n                .coalesce(\n                    outE('HAS_ENTRY').where(inV().hasLabel('Entry').has('type', 'ObjectiveFunction')),\n                    addE('HAS_ENTRY').to(\n                        addV('Entry')\n                        .property($partitionkeyproperty, $partitionkeyvalue)\n                        .property('id', $ofentryId)\n                        .property('ofid', $id)\n                        .property('type', 'ObjectiveFunction')\n                        .property('created_date', $created_date)\n                        .property('last_modified_date', $created_date)\n                        .property('component_scores', '')\n                        .property('component_values', '')\n                        .property('current_value', 0)\n                        .property('performance_levels', '')\n                    )\n                )\n                .select('of')\n                .coalesce(\n                    outE('HAS_AUDIT').where(inV().hasLabel('Artifact').has('type', 'Audit')),\n                    addE('HAS_AUDIT').to(\n                        addV('Artifact').property($partitionkeyproperty, $partitionkeyvalue).property('type', 'Audit').property('id', $auditId).property('created_date', $audit_created_date)\n                    )\n                )\n                .inV()\n                .addE('AUDIT_ENTRY').to(\n                    addV('Entry')\n                    .property($partitionkeyproperty, $partitionkeyvalue)\n                    .property('created_date', $entry_created_date)\n                    .property('timestamp', $timestamp)\n                    .property('id', $entryId)\n                    .property('type', 'Audit')\n                    .property('user', $currentUser)\n                    .property('change', $stringifiedChanges)\n                )\n                .select('of')\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},CREATE_OR_UPDATE_TEAM_OBJECTIVE_FUNCTION:{neo4j:"\n                MERGE (of:ObjectiveFunction {id: $id})\n                SET of.active = $active,\n                    of.components = $components,\n                    of.created_date = datetime($created_date),\n                    of.description = $description,\n                    of.formula = $formula,\n                    of.id = $id,\n                    of.last_modified_date = datetime($last_modified_date),\n                    of.name = $name,\n                    of.objective_type = $objective_type,\n                    of.thresholds = $thresholds,\n                    of.type = $type,\n                    of.version = $version,\n                    of.weights = $weights\n                \n                WITH of\n                OPTIONAL MATCH (of)-[:HAS_ENTRY]->(existingEntry:Entry {type: 'ObjectiveFunction'})\n                WITH of, existingEntry\n                WHERE existingEntry IS NULL\n                MERGE (of)-[:HAS_ENTRY]->(entry:Entry {\n                    id: of.id,\n                    type: 'ObjectiveFunction',\n                    created_date: datetime($created_date),\n                    last_modified_date: datetime($created_date),\n                    component_scores: \"\",\n                    component_values: \"\",\n                    current_value: 0,\n                    performance_levels: \"\"\n                })\n                \n                WITH of\n                MERGE (of)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n                ON CREATE SET audit.id = $auditId, audit.created_date = datetime($audit_created_date)\n                \n                RETURN of.active, of.components, of.created_date, of.description, of.formula, of.id, of.last_modified_date,\n                    of.name, of.objective_type, of.thresholds, of.type, of.version, of.weights\n        ",cosmosdb:"\n                g.V().hasLabel('ObjectiveFunction').has('id', $id)\n                .fold()\n                .coalesce(\n                    unfold(),\n                    addV('ObjectiveFunction').property($partitionkeyproperty, $partitionkeyvalue).property('id', $id)\n                )\n                .property(single, 'active', $active)\n                .property(single, 'components', $components)\n                .property(single, 'created_date', $created_date)\n                .property(single, 'description', $description)\n                .property(single, 'formula', $formula)\n                .property(single, 'last_modified_date', $last_modified_date)\n                .property(single, 'name', $name)\n                .property(single, 'objective_type', $objective_type)\n                .property(single, 'thresholds', $thresholds)\n                .property(single, 'type', $type)\n                .property(single, 'version', $version)\n                .property(single, 'weights', $weights)\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},CONNECT_TEAM_OBJECTIVE_FUNCTION:{neo4j:"\n                MATCH (of:ObjectiveFunction {id: $id})\n                MATCH (t:Team {team_id: $teamId})\n                MERGE (t)-[:HAS_OBJECTIVE]->(of)\n                RETURN of.active, of.components, of.created_date, of.description, of.formula, of.id, of.last_modified_date,\n                    of.name, of.objective_type, of.thresholds, of.type, of.version, of.weights\n        ",cosmosdb:"\n                g.V().hasLabel('Team').has('team_id', $teamId)\n                .coalesce(\n                    outE('HAS_OBJECTIVE').where(inV().hasLabel('ObjectiveFunction').has('id', $id)),\n                    addE('HAS_OBJECTIVE').to(\n                        g.V().hasLabel('ObjectiveFunction').has('id', $id)\n                    )\n                )\n                .inV()\n                .map(valueMap(true).unfold().group().by(keys).by(select(values).limit(local,1)))\n        "},WRITE_TEAM:{neo4j:"\n                MERGE (t:Team {team_id: $teamId})\n                SET t.active = $active,\n                    t.allowed_consensus = $allowed_consensus,\n                    t.author = $author,\n                    t.category = $category,\n                    t.compliance_requirements = $compliance_requirements,\n                    t.created_date = datetime($created_date),\n                    t.description = $description,\n                    t.last_modified_date = datetime($last_modified_date),\n                    t.name = $name,\n                    t.objectives = $objectives,\n                    t.operating_principles = $operating_principles,\n                    t.tags = $tags,\n                    t.version = $version\n                \n                WITH t\n                MERGE (t)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n                ON CREATE SET audit.id = $auditId, audit.created_date = datetime($audit_created_date)\n                \n                RETURN t.active, t.allowed_consensus, t.author, t.category, t.compliance_requirements, t.created_date, t.description, t.last_modified_date,\n                       t.name, t.objectives, t.operating_principles, t.tags, t.team_id, t.version\n        ",cosmosdb:"\n                g.V().hasLabel('Team').has('team_id', $teamId)\n                .fold()\n                .coalesce(\n                    unfold(),\n                    addV('Team').property($partitionkeyproperty, $partitionkeyvalue).property('team_id', $teamId)\n                )\n                .property(single, 'active', $active)\n                .property(single, 'allowed_consensus', $allowed_consensus)\n                .property(single, 'author', $author)\n                .property(single, 'category', $category)\n                .property(single, 'compliance_requirements', $compliance_requirements)\n                .property(single, 'created_date', $created_date)\n                .property(single, 'description', $description)\n                .property(single, 'last_modified_date', $last_modified_date)\n                .property(single, 'name', $name)\n                .property(single, 'objectives', $objectives)\n                .property(single, 'operating_principles', $operating_principles)\n                .property(single, 'tags', $tags)\n                .property(single, 'version', $version)\n                .project('active', 'allowed_consensus', 'author', 'category', 'compliance_requirements', 'created_date', 'description', 'last_modified_date', 'name', 'objectives', 'operating_principles', 'tags', 'team_id', 'version', 'debug')\n                .by('active').by('allowed_consensus').by('author').by('category').by('compliance_requirements').by('created_date').by('description').by('last_modified_date').by('name').by('objectives').by('operating_principles').by('tags').by('team_id').by('version').by(constant('EB'))\n        "},LOAD_MEASURES:{neo4j:"\n            MATCH (m:Measure)\n            WHERE m.name IS NOT NULL \n            AND m.measure_id IS NOT NULL \n            AND m.id IS NOT NULL\n\n            CALL {\n                WITH m\n                OPTIONAL MATCH (m)-[:USES]->(related:Measure)\n                WHERE related IS NOT NULL AND related.id IS NOT NULL\n                RETURN COLLECT(DISTINCT {id: related.id, name: related.name}) AS relatedMeasures\n            }\n\n            RETURN m {\n                .*,\n                precision: toInteger(m.precision),\n                version: toInteger(m.version),\n                related_measures: relatedMeasures\n            } AS m\n            ORDER BY m.name\n        ",cosmosdb:"\n                g.V().hasLabel('Measure')\n                .order().by('name')\n                .project('created_date', 'measurement_type', 'precision', 'alarm_thresholds', 'validation_rules', 'safety_critical', 'type',\n                        'sampling_rate', 'version', 'id', 'unit', 'data_source_id', 'last_modified_date', 'category', 'measure_id', 'description',\n                        'name', 'domain', 'related_measures')\n                .by('created_date')\n                .by(coalesce(values('measurement_type'), constant('')))\n                .by(coalesce(values('precision'), constant(0)))\n                .by(coalesce(values('alarm_thresholds'), constant('[]')))\n                .by(coalesce(values('validation_rules'), constant('{}')))\n                .by('safety_critical')\n                .by('type')\n                .by(coalesce(values('sampling_rate'), constant('{}')))\n                .by('version')\n                .by('id')\n                .by('unit')\n                .by(coalesce(values('data_source_id'), constant('')))\n                .by('last_modified_date')\n                .by('category')\n                .by('measure_id')\n                .by('description')\n                .by('name')\n                .by('domain')\n                .by(out('USES')\n                    .project('name','id')\n                    .by('name')\n                    .by('id')\n                    .fold())\n        "},UPDATE_OBJECTIVE_FUNCTION_MEASURE_RELATIONSHIPS:{neo4j:"\n                MATCH (of:ObjectiveFunction {id: $objectiveFunctionId})\n                OPTIONAL MATCH (of)-[r:USES]->(m:Measure)\n                DELETE r\n                WITH of\n                UNWIND $measureIds AS measureId\n                OPTIONAL MATCH (m:Measure)\n                WHERE m.measure_id = measureId OR m.id = measureId\n                WITH of, measureId, m\n                CALL {\n                    WITH of, measureId, m\n                    WITH of, measureId, m, \n                         CASE WHEN m IS NOT NULL THEN 'FOUND: ' + m.id + ' (measure_id: ' + m.measure_id + ')' \n                              ELSE 'NOT_FOUND: ' + measureId END as debug_info\n                    RETURN debug_info\n                }\n                FOREACH (_ IN CASE WHEN m IS NOT NULL THEN [1] ELSE [] END |\n                    MERGE (of)-[:USES]->(m)\n                )\n                WITH collect(debug_info) as debug_messages, count(DISTINCT m) as relationshipsCreated\n                RETURN debug_messages, relationshipsCreated\n        ",cosmosdb:"\n                g.V().hasLabel('ObjectiveFunction').has('id', $objectiveFunctionId).as('of')\n                .outE('USES').where(inV().hasLabel('Measure')).drop()\n                .select('of')\n                .choose(\n                    constant($measureIds).unfold().count().is(gt(0)),\n                    __.as('of')\n                      .V().hasLabel('Measure').where(\n                          __.or(\n                              has('measure_id', within($measureIds)),\n                              has('id', within($measureIds))\n                          )\n                      ).as('measure')\n                      .addE('USES').from(select('of')).to(select('measure'))\n                      .select('of'),\n                    __.identity()\n                )\n        "},CHECK_MEASURES_EXIST:{neo4j:"\n            UNWIND $measures AS measure\n            OPTIONAL MATCH (idMatch:Measure {id: measure.id})\n            OPTIONAL MATCH (nameMatch:Measure {name: measure.name})\n            OPTIONAL MATCH (measureIdMatch:Measure {measure_id: measure.measure_id})\n            RETURN \n                measure.id AS importedId,\n                measure.name AS importedName,\n                measure.measure_id AS importedMeasureId,\n                idMatch IS NOT NULL AS idExists,\n                nameMatch IS NOT NULL AS nameExists,\n                measureIdMatch IS NOT NULL AS measureIdExists,\n                idMatch.name AS existingNameForId,\n                nameMatch.id AS existingIdForName,\n                measureIdMatch.name AS existingNameForMeasureId\n        ",cosmosdb:"\n            g.inject($measures).as('measure')\n                .project('importedId', 'importedName', 'importedMeasureId', 'idExists', 'nameExists', 'measureIdExists', 'existingNameForId', 'existingIdForName', 'existingNameForMeasureId')\n                .by(__.select('measure').select('id'))\n                .by(__.select('measure').select('name'))\n                .by(__.select('measure').select('measure_id'))\n                .by(__.coalesce(__.V().hasLabel('Measure').has('id', __.select('measure').select('id')).constant(true), __.constant(false)))\n                .by(__.coalesce(__.V().hasLabel('Measure').has('name', __.select('measure').select('name')).where(__.not(__.has('id', __.select('measure').select('id')))).constant(true), __.constant(false)))\n                .by(__.coalesce(__.V().hasLabel('Measure').has('measure_id', __.select('measure').select('measure_id')).constant(true), __.constant(false)))\n                .by(__.coalesce(__.V().hasLabel('Measure').has('id', __.select('measure').select('id')).values('name'), __.constant(null)))\n                .by(__.coalesce(__.V().hasLabel('Measure').has('name', __.select('measure').select('name')).where(__.not(__.has('id', __.select('measure').select('id')))).values('id'), __.constant(null)))\n                .by(__.coalesce(__.V().hasLabel('Measure').has('measure_id', __.select('measure').select('measure_id')).values('name'), __.constant(null)))\n        "},CHECK_PROFILES_EXIST:{neo4j:"\n            UNWIND $profiles AS profile\n            OPTIONAL MATCH (idMatch:AgentProfile {profile_id: profile.profile_id})\n            OPTIONAL MATCH (nameMatch:AgentProfile {name: profile.name})\n            RETURN \n                profile.profile_id AS importedId,\n                profile.name AS importedName,\n                idMatch IS NOT NULL AS idExists,\n                nameMatch IS NOT NULL AS nameExists,\n                idMatch.name AS existingNameForId,\n                nameMatch.profile_id AS existingIdForName\n        ",cosmosdb:"\n            g.inject($profiles).as('profile')\n                .project('importedId', 'importedName', 'idExists', 'nameExists', 'existingNameForId', 'existingIdForName')\n                .by(__.select('profile').select('profile_id'))\n                .by(__.select('profile').select('name'))\n                .by(__.coalesce(__.V().hasLabel('AgentProfile').has('profile_id', __.select('profile').select('profile_id')).constant(true), __.constant(false)))\n                .by(__.coalesce(__.V().hasLabel('AgentProfile').has('name', __.select('profile').select('name')).where(__.not(__.has('profile_id', __.select('profile').select('profile_id')))).constant(true), __.constant(false)))\n                .by(__.coalesce(__.V().hasLabel('AgentProfile').has('profile_id', __.select('profile').select('profile_id')).values('name'), __.constant(null)))\n                .by(__.coalesce(__.V().hasLabel('AgentProfile').has('name', __.select('profile').select('name')).where(__.not(__.has('profile_id', __.select('profile').select('profile_id')))).values('profile_id'), __.constant(null)))\n        "},CHECK_ACTIONS_EXIST:{neo4j:"\n            UNWIND $actions AS action\n            OPTIONAL MATCH (idMatch:Action {id: action.id})\n            OPTIONAL MATCH (nameMatch:Action {name: action.name})\n            RETURN \n                action.id AS importedId,\n                action.name AS importedName,\n                idMatch IS NOT NULL AS idExists,\n                nameMatch IS NOT NULL AS nameExists,\n                idMatch.name AS existingNameForId,\n                nameMatch.id AS existingIdForName\n        ",cosmosdb:"\n            g.inject($actions).as('action')\n                .project('importedId', 'importedName', 'idExists', 'nameExists', 'existingNameForId', 'existingIdForName')\n                .by(__.select('action').select('id'))\n                .by(__.select('action').select('name'))\n                .by(__.coalesce(__.V().hasLabel('Action').has('id', __.select('action').select('id')).constant(true), __.constant(false)))\n                .by(__.coalesce(__.V().hasLabel('Action').has('name', __.select('action').select('name')).where(__.not(__.has('id', __.select('action').select('id')))).constant(true), __.constant(false)))\n                .by(__.coalesce(__.V().hasLabel('Action').has('id', __.select('action').select('id')).values('name'), __.constant(null)))\n                .by(__.coalesce(__.V().hasLabel('Action').has('name', __.select('action').select('name')).where(__.not(__.has('id', __.select('action').select('id')))).values('id'), __.constant(null)))\n        "},CHECK_TOOLS_EXIST:{neo4j:"\n            UNWIND $tools AS tool\n            OPTIONAL MATCH (idMatch:Tool {id: tool.id})\n            OPTIONAL MATCH (nameMatch:Tool {name: tool.name})\n            RETURN \n                tool.id AS importedId,\n                tool.name AS importedName,\n                idMatch IS NOT NULL AS idExists,\n                nameMatch IS NOT NULL AS nameExists,\n                idMatch.name AS existingNameForId,\n                nameMatch.id AS existingIdForName\n        ",cosmosdb:"\n            g.inject($tools).as('tool')\n                .project('importedId', 'importedName', 'idExists', 'nameExists', 'existingNameForId', 'existingIdForName')\n                .by(__.select('tool').select('id'))\n                .by(__.select('tool').select('name'))\n                .by(__.coalesce(__.V().hasLabel('Tool').has('id', __.select('tool').select('id')).constant(true), __.constant(false)))\n                .by(__.coalesce(__.V().hasLabel('Tool').has('name', __.select('tool').select('name')).where(__.not(__.has('id', __.select('tool').select('id')))).constant(true), __.constant(false)))\n                .by(__.coalesce(__.V().hasLabel('Tool').has('id', __.select('tool').select('id')).values('name'), __.constant(null)))\n                .by(__.coalesce(__.V().hasLabel('Tool').has('name', __.select('tool').select('name')).where(__.not(__.has('id', __.select('tool').select('id')))).values('id'), __.constant(null)))\n        "},CHECK_LIBRARY_EXISTS:{neo4j:"\n            OPTIONAL MATCH (l:Library)\n            RETURN l IS NOT NULL as exists\n        ",cosmosdb:"\n            g.V().hasLabel('Library')\n            .count()\n            .project('exists')\n            .by(__.is(gt(0)))\n        "},CREATE_LIBRARY:{neo4j:"\n            CREATE (l:Library {\n                created_date: $created_date\n            })\n            RETURN l\n        ",cosmosdb:"\n            g.addV('Library')\n                .property('created_date', $created_date)\n        "},INSERT_MEASURE:{neo4j:"\n            MERGE (library:Library {type: 'Performance Definition'})\n            ON CREATE SET library.name = 'Performance Definition Library',\n                          library.created_date = datetime($created_date)\n            WITH library LIMIT 1\n            MERGE (m:Measure {id: $id})\n            SET m.measure_id = $measure_id,\n                m.name = $name,\n                m.description = $description,\n                m.type = $type,\n                m.domain = $domain,\n                m.category = $category,\n                m.version = $version,\n                m.safety_critical = $safety_critical,\n                m.unit = $unit,\n                m.data_source_id = $data_source_id,\n                m.created_date = datetime($created_date),\n                m.last_modified_date = datetime($last_modified_date)\n                \n            FOREACH (ignoreMe IN CASE WHEN $type = 'Base' THEN [1] ELSE [] END |\n              SET m.measurement_type = $measurement_type,\n                  m.sampling_rate = $sampling_rate,\n                  m.precision = $precision,\n                  m.validation_rules = $validation_rules,\n                  m.alarm_thresholds = $alarm_thresholds\n            )\n            \n            FOREACH (ignoreMe IN CASE WHEN $type = 'Calculated' THEN [1] ELSE [] END |\n              SET m.calculation_type = $calculation_type,\n                  m.normalization_method = $normalization_method,\n                  m.update_frequency = $update_frequency,\n                  m.aggregation_window = $aggregation_window,\n                  m.input_metrics = $input_metrics,\n                  m.formula = $formula\n            )\n            \n            FOREACH (ignoreMe IN CASE WHEN $type = 'Tool' THEN [1] ELSE [] END |\n              SET m.tool_id = $tool_id,\n                  m.confidence_threshold = $confidence_threshold,\n                  m.input_metrics = $input_metrics,\n                  m.formula_documentation = $formula_documentation,\n                  m.output_mapping = $output_mapping,\n                  m.tool_parameters = $tool_parameters\n            )\n            \n            CREATE (library)-[:CONTAINS]->(m)\n            \n            WITH m\n            CREATE (m)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n            SET audit.id = randomUUID(), \n                audit.created_date = datetime()\n            \n            RETURN m.id as measureId\n        ",cosmosdb:"\n            g.V().hasLabel('Library').has('type', 'Performance Definition')\n            .as('library')\n            .addV('Measure')\n            .property('id', $id)\n            .property('measure_id', $measure_id)\n            .property('name', $name)\n            .property('description', $description)\n            .property('type', $type)\n            .property('domain', $domain)\n            .property('category', $category)\n            .property('version', $version)\n            .property('safety_critical', $safety_critical)\n            .property('unit', $unit)\n            .property('created_date', $created_date)\n            .property('last_modified_date', $last_modified_date)\n            .choose(__.constant($type).is(eq('Base')),\n                __.property('measurement_type', $measurement_type)\n                  .property('sampling_rate', $sampling_rate)\n                  .property('precision', $precision)\n                  .property('validation_rules', $validation_rules)\n                  .property('alarm_thresholds', $alarm_thresholds),\n                __.choose(__.constant($type).is(eq('Calculated')),\n                    __.property('calculation_type', $calculation_type)\n                      .property('normalization_method', $normalization_method)\n                      .property('update_frequency', $update_frequency)\n                      .property('aggregation_window', $aggregation_window)\n                      .property('input_metrics', $input_metrics)\n                      .property('formula', $formula),\n                    __.property('tool_id', $tool_id)\n                      .property('confidence_threshold', $confidence_threshold)\n                      .property('input_metrics', $input_metrics)\n                      .property('formula_documentation', $formula_documentation)\n                      .property('output_mapping', $output_mapping)\n                      .property('tool_parameters', $tool_parameters)\n                )\n            )\n            .as('measure')\n            .addE('CONTAINS').from('library')\n            .select('measure')\n        "},UPDATE_MEASURE:{neo4j:"\n            MATCH (m:Measure {id: $id})\n            WITH m\n            MATCH (library:Library {type: 'Performance Definition'})\n            WITH m, library LIMIT 1\n            SET m.name = $name,\n                m.description = $description,\n                m.type = $type,\n                m.domain = $domain,\n                m.category = $category,\n                m.version = $version,\n                m.safety_critical = $safety_critical,\n                m.unit = $unit,\n                m.last_modified_date = datetime($last_modified_date)\n                \n            REMOVE m.measurement_type, m.sampling_rate, m.precision, m.validation_rules, m.alarm_thresholds,\n                m.calculation_type, m.normalization_method, m.update_frequency, m.aggregation_window, \n                m.input_metrics, m.formula, m.tool_id, m.confidence_threshold, m.formula_documentation,\n                m.output_mapping, m.tool_parameters\n                \n            FOREACH (ignoreMe IN CASE WHEN $type = 'Base' THEN [1] ELSE [] END |\n            SET m.measurement_type = $measurement_type,\n                m.sampling_rate = $sampling_rate,\n                m.precision = $precision,\n                m.validation_rules = $validation_rules,\n                m.alarm_thresholds = $alarm_thresholds\n            )\n\n            FOREACH (ignoreMe IN CASE WHEN $type = 'Calculated' THEN [1] ELSE [] END |\n            SET m.calculation_type = $calculation_type,\n                m.normalization_method = $normalization_method,\n                m.update_frequency = $update_frequency,\n                m.aggregation_window = $aggregation_window,\n                m.input_metrics = $input_metrics,\n                m.formula = $formula\n            )\n\n            FOREACH (ignoreMe IN CASE WHEN $type = 'Tool' THEN [1] ELSE [] END |\n            SET m.tool_id = $tool_id,\n                m.confidence_threshold = $confidence_threshold,\n                m.input_metrics = $input_metrics,\n                m.formula_documentation = $formula_documentation,\n                m.output_mapping = $output_mapping,\n                m.tool_parameters = $tool_parameters\n            )\n\n            MERGE (library)-[:CONTAINS]->(m)\n        ",cosmosdb:"\n            g.V().hasLabel('Measure').has('id', $id)\n                .properties('measurement_type', 'sampling_rate', 'precision', 'validation_rules', 'alarm_thresholds',\n                       'calculation_type', 'normalization_method', 'update_frequency', 'aggregation_window', \n                       'input_metrics', 'formula', 'tool_id', 'confidence_threshold', 'formula_documentation',\n                       'output_mapping', 'tool_parameters').drop()\n            .property('name', $name)\n            .property('description', $description)\n            .property('type', $type)\n            .property('domain', $domain)\n            .property('category', $category)\n            .property('version', $version)\n            .property('safety_critical', $safety_critical)\n            .property('unit', $unit)\n            .property('last_modified_date', $last_modified_date)\n            .choose(__.constant($type).is(eq('Base')),\n                __.property('measurement_type', $measurement_type)\n                  .property('sampling_rate', $sampling_rate)\n                  .property('precision', $precision)\n                  .property('validation_rules', $validation_rules)\n                  .property('alarm_thresholds', $alarm_thresholds),\n                __.choose(__.constant($type).is(eq('Calculated')),\n                    __.property('calculation_type', $calculation_type)\n                      .property('normalization_method', $normalization_method)\n                      .property('update_frequency', $update_frequency)\n                      .property('aggregation_window', $aggregation_window)\n                      .property('input_metrics', $input_metrics)\n                      .property('formula', $formula),\n                    __.property('tool_id', $tool_id)\n                      .property('confidence_threshold', $confidence_threshold)\n                      .property('input_metrics', $input_metrics)\n                      .property('formula_documentation', $formula_documentation)\n                      .property('output_mapping', $output_mapping)\n                      .property('tool_parameters', $tool_parameters)\n                )\n            )\n            .as('measure')\n            .select('measure')\n        "},INSERT_TOOL:{neo4j:"\n            MERGE (library:Library {type: 'Tool'})\n            MERGE (t:Tool {id: $id})\n            SET t.description = $description,\n                t.id = $id,\n                t.name = $name,\n                t.class_name = $class_name,\n                t.active = $active,\n                t.options = $options,\n                t.author = $author,\n                t.created_date = datetime($created_date),\n                t.last_modified_date = datetime($last_modified_date)\n            MERGE (library)-[:CONTAINS]->(t)\n            \n            WITH t\n            CREATE (t)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n            SET audit.id = randomUUID(), \n                audit.created_date = datetime()\n            \n            RETURN t.name as toolName\n        ",cosmosdb:"\n            g.addV('Tool')\n            .property('created_date', $created_date)\n            .property('last_modified_date', $last_modified_date)\n            .property('description', $description)\n            .property('id', $id)\n            .property('name', $name)\n            .property('class_name', $class_name)\n            .property('active', $active)\n            .property('options', $options)\n            .property('author', $author)\n            .as('tool')\n        "},INSERT_SQL_TOOL:{neo4j:"\n            MATCH (lib:Library)\n            CREATE (t:Tool {\n                id: $id,\n                name: $name,\n                description: $description,\n                class_name: $class_name,\n                options: $options,\n                author: $author,\n                active: $active,\n                created_date: $created_date,\n                last_modified_date: $last_modified_date\n            })\n            CREATE (lib)-[:CONTAINS]->(t)\n            \n            WITH t\n            CREATE (t)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n            SET audit.id = randomUUID(), \n                audit.created_date = datetime()\n            \n            RETURN t\n        ",cosmosdb:"\n            g.V().hasLabel('Library').as('lib')\n            .addV('Tool')\n                .property('id', $id)\n                .property('name', $name)\n                .property('description', $description)\n                .property('class_name', $class_name)\n                .property('options', $options)\n                .property('author', $author)\n                .property('active', $active)\n                .property('created_date', $created_date)\n                .property('last_modified_date', $last_modified_date)\n                .as('tool')\n            .select('lib').addE('CONTAINS').to('tool')\n        "},UPDATE_TOOL:{neo4j:"\n            MATCH (t:Tool {id: $id})\n            SET t.name = $name,\n                t.description = $description,\n                t.class_name = $class_name,\n                t.options = $options,\n                t.author = $author,\n                t.active = $active,\n                t.last_modified_date = $last_modified_date\n            RETURN t\n        ",cosmosdb:"\n            g.V().hasLabel('Tool').has('id', $id)\n                .property('name', $name)\n                .property('description', $description)\n                .property('class_name', $class_name)\n                .property('options', $options)\n                .property('author', $author)\n                .property('active', $active)\n                .property('last_modified_date', $last_modified_date)\n        "},UPDATE_SQL_TOOL:{neo4j:"\n            MATCH (t:Tool {id: $id})\n            SET t.name = $name,\n                t.description = $description,\n                t.class_name = $class_name,\n                t.options = $options,\n                t.author = $author,\n                t.active = $active,\n                t.last_modified_date = $last_modified_date\n            RETURN t\n        ",cosmosdb:"\n            g.V().hasLabel('Tool').has('id', $id)\n                .property('name', $name)\n                .property('description', $description)\n                .property('class_name', $class_name)\n                .property('options', $options)\n                .property('author', $author)\n                .property('active', $active)\n                .property('last_modified_date', $last_modified_date)\n        "},INSERT_ACTION:{neo4j:"\n            MATCH (lib:Library)\n            MERGE (a:Action {id: $id})\n            SET a.name = $name,\n                a.description = $description,\n                a.parameters = $parameters,\n                a.operation_requirements = $operation_requirements,\n                a.prerequisites = $prerequisites,\n                a.should_return = $should_return,\n                a.category = $category,\n                a.author = $author,\n                a.active = $active,\n                a.impact_measures = $impact_measures,\n                a.created_date = datetime($created_date),\n                a.last_modified_date = datetime($last_modified_date),\n                a.version = $version\n            MERGE (lib)-[:CONTAINS]->(a)\n            \n            WITH a\n            CREATE (a)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n            SET audit.id = randomUUID(), \n                audit.created_date = datetime()\n            \n            RETURN a\n        ",cosmosdb:"\n            g.V().hasLabel('Library').as('lib')\n            .addV('Action')\n                .property('id', $id)\n                .property('name', $name)\n                .property('description', $description)\n                .property('parameters', $parameters)\n                .property('operation_requirements', $operation_requirements)\n                .property('prerequisites', $prerequisites)\n                .property('should_return', $should_return)\n                .property('category', $category)\n                .property('author', $author)\n                .property('active', $active)\n                .property('created_date', $created_date)\n                .property('last_modified_date', $last_modified_date)\n                .property('version', $version)\n                .as('action')\n            .select('lib').addE('CONTAINS').to('action')\n        "},UPDATE_ACTION:{neo4j:"\n            MATCH (a:Action {id: $id})\n            SET a.name = $name,\n                a.description = $description,\n                a.parameters = $parameters,\n                a.operation_requirements = $operation_requirements,\n                a.prerequisites = $prerequisites,\n                a.should_return = $should_return,\n                a.category = $category,\n                a.author = $author,\n                a.active = $active,\n                a.last_modified_date = $last_modified_date,\n                a.version = $version\n            RETURN a\n        ",cosmosdb:"\n            g.V().hasLabel('Action').has('id', $id)\n                .property('name', $name)\n                .property('description', $description)\n                .property('parameters', $parameters)\n                .property('operation_requirements', $operation_requirements)\n                .property('prerequisites', $prerequisites)\n                .property('should_return', $should_return)\n                .property('category', $category)\n                .property('author', $author)\n                .property('active', $active)\n                .property('last_modified_date', $last_modified_date)\n                .property('version', $version)\n        "},DELETE_ACTION_MEASURE_RELATIONSHIPS:{neo4j:"\n            MATCH (a:Action {id: $actionId})-[r:IMPACTS]->(m:Measure)\n            DELETE r\n        ",cosmosdb:"\n            g.V().hasLabel('Action').has('id', $actionId)\n                .outE('IMPACTS').drop()\n        "},CREATE_IMPACT_RELATIONSHIP:{neo4j:"\n            MATCH (a:Action {id: $actionId})\n            OPTIONAL MATCH (m:Measure {id: $measureId})\n            FOREACH (x IN CASE WHEN m IS NOT NULL THEN [1] ELSE [] END | \n                CREATE (a)-[:IMPACTS {impact_type: $impactType}]->(m)\n            )\n            RETURN m IS NOT NULL as measureExists\n        ",cosmosdb:"\n            g.V().hasLabel('Action').has('id', $actionId).as('action')\n            .coalesce(\n                V().hasLabel('Measure').has('id', $measureId).as('measure')\n                .select('action').addE('IMPACTS').property('impact_type', $impactType).to('measure')\n                .project('measureExists').by(constant(true)),\n                project('measureExists').by(constant(false))\n            )\n        "},INSERT_PROFILE:{neo4j:"\n            MERGE (p:AgentProfile {profile_id: $profile_id})\n            SET p.name = $name,\n                p.name_lower = toLower($name),\n                p.description = $description,\n                p.system_prompt = $system_prompt,\n                p.model_name = $model_name,\n                p.model_provider = $model_provider,\n                p.max_tokens = $max_tokens,\n                p.category = $category,\n                p.category_lower = toLower($category),\n                p.author = $author,\n                p.active = $active,\n                p.created_date = datetime($created_date),\n                p.last_modified_date = datetime($last_modified_date),\n                p.profile_id_lower = toLower($profile_id),\n                p.experience = $experience,\n                p.skills = $skills,\n                p.observation_prompt = $observation_prompt,\n                p.reflection_prompt = $reflection_prompt,\n                p.organizational_rules = $organizational_rules,\n                p.deontic_rules = $deontic_rules,\n                p.allowed_planning_method = $allowed_planning_method,\n                p.use_general_rag = $use_general_rag,\n                p.rag_collection_name = $rag_collection_name,\n                p.rag_top_k = $rag_top_k,\n                p.rag_vector_size = $rag_vector_size,\n                p.memory_parameters = $memory_parameters,\n                p.decision_parameters = $decision_parameters,\n                p.tags = $tags,\n                p.tags_lower = $tags_lower\n            \n            WITH p\n            CREATE (p)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n            SET audit.id = randomUUID(), \n                audit.created_date = datetime()\n            \n            RETURN p\n        ",cosmosdb:"\n            g.addV('AgentProfile')\n                .property('profile_id', $profile_id)\n                .property('name', $name)\n                .property('description', $description)\n                .property('experience', $experience)\n                .property('skills', $skills)\n                .property('system_prompt', $system_prompt)\n                .property('observation_prompt', $observation_prompt)\n                .property('reflection_prompt', $reflection_prompt)\n                .property('model_provider', $model_provider)\n                .property('model', $model)\n                .property('max_tokens', $max_tokens)\n                .property('organizational_rules', $organizational_rules)\n                .property('deontic_rules', $deontic_rules)\n                .property('allowed_planning', $allowed_planning)\n                .property('allowed_consensus', $allowed_consensus)\n                .property('use_general_rag', $use_general_rag)\n                .property('rag_collection_name', $rag_collection_name)\n                .property('rag_top_k', $rag_top_k)\n                .property('memory_parameters', $memory_parameters)\n                .property('decision_parameters', $decision_parameters)\n                .property('category', $category)\n                .property('author', $author)\n                .property('active', $active)\n                .property('created_date', $created_date)\n                .property('last_modified_date', $last_modified_date)\n        "},UPDATE_PROFILE:{neo4j:"\n            MATCH (p:AgentProfile {profile_id: $profile_id})\n            SET p.name = $name,\n                p.description = $description,\n                p.experience = $experience,\n                p.skills = $skills,\n                p.system_prompt = $system_prompt,\n                p.observation_prompt = $observation_prompt,\n                p.reflection_prompt = $reflection_prompt,\n                p.model_provider = $model_provider,\n                p.model_name = $model_name,\n                p.max_tokens = $max_tokens,\n                p.organizational_rules = $organizational_rules,\n                p.deontic_rules = $deontic_rules,\n                p.allowed_planning_method = $allowed_planning_method,\n                p.use_general_rag = $use_general_rag,\n                p.rag_collection_name = $rag_collection_name,\n                p.rag_top_k = $rag_top_k,\n                p.memory_parameters = $memory_parameters,\n                p.decision_parameters = $decision_parameters,\n                p.category = $category,\n                p.author = $author,\n                p.active = $active,\n                p.last_modified_date = $last_modified_date\n            RETURN p\n        ",cosmosdb:"\n            g.V().hasLabel('AgentProfile').has('profile_id', $profile_id)\n                .property('name', $name)\n                .property('description', $description)\n                .property('experience', $experience)\n                .property('skills', $skills)\n                .property('system_prompt', $system_prompt)\n                .property('observation_prompt', $observation_prompt)\n                .property('reflection_prompt', $reflection_prompt)\n                .property('model_provider', $model_provider)\n                .property('model', $model)\n                .property('max_tokens', $max_tokens)\n                .property('organizational_rules', $organizational_rules)\n                .property('deontic_rules', $deontic_rules)\n                .property('allowed_planning', $allowed_planning)\n                .property('allowed_consensus', $allowed_consensus)\n                .property('use_general_rag', $use_general_rag)\n                .property('rag_collection_name', $rag_collection_name)\n                .property('rag_top_k', $rag_top_k)\n                .property('memory_parameters', $memory_parameters)\n                .property('decision_parameters', $decision_parameters)\n                .property('category', $category)\n                .property('author', $author)\n                .property('active', $active)\n                .property('last_modified_date', $last_modified_date)\n        "},REMOVE_PROFILE_TOOL_RELATIONSHIPS:{neo4j:"\n            MATCH (p:AgentProfile {profile_id: $profileId})-[r:ALLOWS_TOOL]->(t:Tool)\n            DELETE r\n        ",cosmosdb:"\n            g.V().hasLabel('AgentProfile').has('profile_id', $profileId)\n                .outE('ALLOWS_TOOL').drop()\n        "},ADD_PROFILE_TOOL_RELATIONSHIPS:{neo4j:"\n            MATCH (p:AgentProfile {profile_id: $profileId})\n            WITH p\n            UNWIND $toolIds AS toolId\n            OPTIONAL MATCH (t:Tool {id: toolId})\n            FOREACH (x IN CASE WHEN t IS NOT NULL THEN [1] ELSE [] END |\n                MERGE (p)-[:ALLOWS_TOOL]->(t)\n            )\n            RETURN count(DISTINCT t) as relationshipsCreated, \n                   collect(DISTINCT t.id) as linkedToolIds,\n                   collect(DISTINCT CASE WHEN t IS NULL THEN toolId END) as missingToolIds\n        ",cosmosdb:"\n            g.V().hasLabel('AgentProfile').has('profile_id', $profileId).as('profile')\n            .V().hasLabel('Tool').has('id', within($toolIds)).as('tool')\n            .select('profile').addE('ALLOWS_TOOL').to('tool')\n        "},REMOVE_PROFILE_ACTION_RELATIONSHIPS:{neo4j:"\n            MATCH (p:AgentProfile {profile_id: $profileId})-[r:ALLOWS_ACTION]->(a:Action)\n            DELETE r\n        ",cosmosdb:"\n            g.V().hasLabel('AgentProfile').has('profile_id', $profileId)\n                .outE('ALLOWS_ACTION').drop()\n        "},ADD_PROFILE_ACTION_RELATIONSHIPS:{neo4j:"\n            MATCH (p:AgentProfile {profile_id: $profileId})\n            WITH p\n            UNWIND $actionIds AS actionId\n            OPTIONAL MATCH (a:Action {id: actionId})\n            FOREACH (x IN CASE WHEN a IS NOT NULL THEN [1] ELSE [] END |\n                MERGE (p)-[:ALLOWS_ACTION]->(a)\n            )\n            RETURN count(DISTINCT a) as relationshipsCreated, \n                   collect(DISTINCT a.id) as linkedActionIds, \n                   collect(DISTINCT actionId) as requestedActionIds,\n                   collect(DISTINCT CASE WHEN a IS NULL THEN actionId END) as missingActionIds\n        ",cosmosdb:"\n            g.V().hasLabel('AgentProfile').has('profile_id', $profileId).as('profile')\n            .V().hasLabel('Action').has('id', within($actionIds)).as('action')\n            .select('profile').addE('ALLOWS_ACTION').to('action')\n        "},WRITE_MEASURE_AUDIT_INFO:{neo4j:"\n                MATCH (m:Measure {id: $measureId})\n                MERGE (m)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n                ON CREATE SET audit.id = $auditId,\n                    audit.type = 'Audit', \n                    audit.created_date = datetime()\n                WITH m, audit\n                MERGE (entry:Entry {id: $entryId})\n                ON CREATE SET\n                    entry.created_date = datetime(),\n                    entry.timestamp = $timestamp,\n                    entry.type = 'Audit',\n                    entry.user = $currentUser,\n                    entry.change = $stringifiedChanges\n                MERGE (audit)-[:AUDIT_ENTRY]->(entry)\n                RETURN entry.timestamp as lastTimestamp\n            ",cosmosdb:"\n                g.V().hasLabel('Measure').has('id',$measureId)\n                .as('measure')\n                .coalesce(\n                    outE('HAS_AUDIT').inV(),\n                    addV('Artifact')\n                        .property($partitionkeyproperty, $partitionkeyvalue)\n                        .property('id', $auditId)\n                        .property('type', 'Audit')\n                        .property('created_date', $audit_created_date)\n                        .as('newAudit')\n                        .addE('HAS_AUDIT')\n                        .from('measure')\n                        .to('newAudit')\n                        .select('newAudit')\n                )\n                .as('audit')\n                .addV('Entry')\n                    .property($partitionkeyproperty, $partitionkeyvalue)\n                    .property('id', $entryId)\n                    .property('type', 'Audit')\n                    .property('created_date', $entry_created_date)\n                    .property('timestamp', $timestamp)\n                    .property('user', $currentUser)\n                    .property('change', $stringifiedChanges)\n                    .as('entry')\n                    .addE('AUDIT_ENTRY')\n                    .from('audit')\n                    .to('entry')\n            "},WRITE_PROFILE_AUDIT_INFO:{neo4j:"\n                MATCH (p:AgentProfile {profile_id: $profileId})\n                MERGE (p)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n                ON CREATE SET audit.id = $auditId,\n                    audit.type = 'Audit', \n                    audit.created_date = datetime()\n                WITH p, audit\n                MERGE (entry:Entry {id: $entryId})\n                ON CREATE SET\n                    entry.created_date = datetime(),\n                    entry.timestamp = $timestamp,\n                    entry.type = 'Audit',\n                    entry.user = $currentUser,\n                    entry.change = $stringifiedChanges\n                MERGE (audit)-[:AUDIT_ENTRY]->(entry)\n                RETURN entry.timestamp as lastTimestamp\n            ",cosmosdb:"\n                g.V().hasLabel('AgentProfile').has('profile_id',$profileId)\n                .as('profile')\n                .coalesce(\n                    outE('HAS_AUDIT').inV(),\n                    addV('Artifact')\n                        .property($partitionkeyproperty, $partitionkeyvalue)\n                        .property('id', $auditId)\n                        .property('type', 'Audit')\n                        .property('created_date', $audit_created_date)\n                        .as('newAudit')\n                        .addE('HAS_AUDIT')\n                        .from('profile')\n                        .to('newAudit')\n                        .select('newAudit')\n                )\n                .as('audit')\n                .addV('Entry')\n                    .property($partitionkeyproperty, $partitionkeyvalue)\n                    .property('id', $entryId)\n                    .property('type', 'Audit')\n                    .property('created_date', $entry_created_date)\n                    .property('timestamp', $timestamp)\n                    .property('user', $currentUser)\n                    .property('change', $stringifiedChanges)\n                    .as('entry')\n                    .addE('AUDIT_ENTRY')\n                    .from('audit')\n                    .to('entry')\n            "},WRITE_TOOL_AUDIT_INFO:{neo4j:"\n                MATCH (t:Tool {id: $toolId})\n                MERGE (t)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n                ON CREATE SET audit.id = $auditId,\n                    audit.type = 'Audit', \n                    audit.created_date = datetime()\n                WITH t, audit\n                MERGE (entry:Entry {id: $entryId})\n                ON CREATE SET\n                    entry.created_date = datetime(),\n                    entry.timestamp = $timestamp,\n                    entry.type = 'Audit',\n                    entry.user = $currentUser,\n                    entry.change = $stringifiedChanges\n                MERGE (audit)-[:AUDIT_ENTRY]->(entry)\n                RETURN entry.timestamp as lastTimestamp\n            ",cosmosdb:"\n                g.V().hasLabel('Tool').has('id',$toolId)\n                .as('tool')\n                .coalesce(\n                    outE('HAS_AUDIT').inV(),\n                    addV('Artifact')\n                        .property($partitionkeyproperty, $partitionkeyvalue)\n                        .property('id', $auditId)\n                        .property('type', 'Audit')\n                        .property('created_date', $audit_created_date)\n                        .as('newAudit')\n                        .addE('HAS_AUDIT')\n                        .from('tool')\n                        .to('newAudit')\n                        .select('newAudit')\n                )\n                .as('audit')\n                .addV('Entry')\n                    .property($partitionkeyproperty, $partitionkeyvalue)\n                    .property('id', $entryId)\n                    .property('type', 'Audit')\n                    .property('created_date', $entry_created_date)\n                    .property('timestamp', $timestamp)\n                    .property('user', $currentUser)\n                    .property('change', $stringifiedChanges)\n                    .as('entry')\n                    .addE('AUDIT_ENTRY')\n                    .from('audit')\n                    .to('entry')\n            "},WRITE_ACTION_AUDIT_INFO:{neo4j:"\n                MATCH (a:Action {id: $actionId})\n                MERGE (a)-[:HAS_AUDIT]->(audit:Artifact {type: 'Audit'})\n                ON CREATE SET audit.id = $auditId,\n                    audit.type = 'Audit', \n                    audit.created_date = datetime()\n                WITH a, audit\n                MERGE (entry:Entry {id: $entryId})\n                ON CREATE SET\n                    entry.created_date = datetime(),\n                    entry.timestamp = $timestamp,\n                    entry.type = 'Audit',\n                    entry.user = $currentUser,\n                    entry.change = $stringifiedChanges\n                MERGE (audit)-[:AUDIT_ENTRY]->(entry)\n                RETURN entry.timestamp as lastTimestamp\n            ",cosmosdb:"\n                g.V().hasLabel('Action').has('id',$actionId)\n                .as('action')\n                .coalesce(\n                    outE('HAS_AUDIT').inV(),\n                    addV('Artifact')\n                        .property($partitionkeyproperty, $partitionkeyvalue)\n                        .property('id', $auditId)\n                        .property('type', 'Audit')\n                        .property('created_date', $audit_created_date)\n                        .as('newAudit')\n                        .addE('HAS_AUDIT')\n                        .from('action')\n                        .to('newAudit')\n                        .select('newAudit')\n                )\n                .as('audit')\n                .addV('Entry')\n                    .property($partitionkeyproperty, $partitionkeyvalue)\n                    .property('id', $entryId)\n                    .property('type', 'Audit')\n                    .property('created_date', $entry_created_date)\n                    .property('timestamp', $timestamp)\n                    .property('user', $currentUser)\n                    .property('change', $stringifiedChanges)\n                    .as('entry')\n                    .addE('AUDIT_ENTRY')\n                    .from('audit')\n                    .to('entry')\n            "}},o=n(3469),s=["location_id","created_date","last_modified_date","agent_configurations"],c=["created_date","last_modified_date"],l=["created_date","last_modified_date"],u=["selected_tools","selected_actions","objective_function"],d=["measure_id"];function p(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(S(e)+" is not iterable")}function f(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return y(l,"_invoke",function(n,r,i){var a,s,c,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,s=0,c=e,p.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],f=p.p,h=a[2];n>3?(i=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=f&&((i=n<2&&f<a[1])?(s=0,p.v=r,p.n=a[1]):f<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),s=u,c=h;(t=s<2?e:c)||!d;){a||(s?s<3?(s>1&&(p.n=-1),f(s,c)):p.n=c:p.v=c);try{if(l=2,a){if(s||(i="next"),t=a[i]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=a.return)&&t.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=e}else if((t=(d=p.n<0)?c:n.call(r,p))!==o)break}catch(t){a=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(y(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,y(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,y(d,"constructor",l),y(l,"constructor",c),c.displayName="GeneratorFunction",y(l,i,"GeneratorFunction"),y(d),y(d,i,"Generator"),y(d,r,function(){return this}),y(d,"toString",function(){return"[object Generator]"}),(m=function(){return{w:a,m:p}})()}function y(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}y=function(e,t,n,r){function a(t,n){y(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},y(e,t,n,r)}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){b(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function I(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function A(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){I(a,r,i,o,s,"next",e)}function s(e){I(a,r,i,o,s,"throw",e)}o(void 0)})}}var O,N,R,x,L,C,k,j={DEBUG:!1,TEAM_ID:"",LANGUAGE:"",THEME:"",NEO4J_CONFIG:{uri:"",username:"",password:"",neo4j_serverauth:""},COSMOSDB_CONFIG:{endpoint:"",key:"",db:"",graph:"",partitionkeyproperty:"",partitionkeyvalue:""},DATABASETYPE:"",CURRENT_USER:""},D=!1,$=null,P="team-editor",M="",U=new Set,F=new Set(["Active"]),z=[],B=!1,H=0,V=!0,W=null,G=!1,q=null,J=null,Y=new Map,Q=[],K=[],X=[],Z=[],ee=["Standard","Assistant","Content"];function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",n=document.querySelector(".modal-body")||document.querySelector(".team-editor");if(n){var r=document.createElement("div");r.className="status-message ".concat(t),r.setAttribute("role","alert"),r.setAttribute("aria-live","critical"===t?"assertive":"polite");var i=document.createElement("div");i.className="message-text",i.textContent=e,r.appendChild(i);var a=document.createElement("button");a.className="close-button",a.setAttribute("title","Close"),a.setAttribute("data-i18n-title","close"),a.setAttribute("aria-label","Close"),a.setAttribute("data-i18n-aria-label","close"),a.innerHTML='<i class="fas fa-times" aria-hidden="true"></i>',a.addEventListener("click",function(){return r.remove()}),r.appendChild(a),n.insertBefore(r,n.firstChild)}}function ne(e){try{var t={DEBUG:e.debug||!1,TEAM_ID:e.team_id||"",CURRENT_USER:e.current_user||"",THEME:e.theme||"light",DATABASETYPE:e.dbtype||"neo4j"},n=e.locale;n&&(t.LANGUAGE=n),Object.assign(t,{NEO4J_CONFIG:{uri:e.neo4j_uri||"",username:e.neo4j_user||"",password:e.neo4j_password||"",neo4j_serverauth:e.neo4j_serverauth||""}}),Object.assign(t,{COSMOSDB_CONFIG:{endpoint:e.cosmosdb_endpoint||"",key:e.cosmosdb_key||"",db:e.cosmosdb_db||"",graph:e.cosmosdb_graph||"",partitionkeyproperty:e.cosmosdb_partitionkeyproperty||"",partitionkeyvalue:e.cosmosdb_partitionkeyvalue||""}}),Object.assign(j,t),utils.initialize(j),window.i18n&&!window.i18n.initialized&&j.LANGUAGE&&window.i18n.initialize(j.LANGUAGE),window.localeUI&&!window.localeUI.initialized&&(utils.debugLog("Initializing LocaleUI service"),window.localeUI.initialize())}catch(e){throw e}}function re(){utils.debugLog("Theme in use is: ".concat(j.THEME)),document.documentElement.setAttribute("data-theme",j.THEME)}function ie(){return ae.apply(this,arguments)}function ae(){return(ae=A(m().m(function e(){var t,n,r;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=$.getQuery("LOAD_LOCATIONS"),e.n=1,$.executeRead(t,{});case 1:return n=e.v,e.a(2,n);case 2:return e.p=2,e.v,(r=TeamErrorHandler).showError.apply(r,h(TeamErrorCodes.LOCATIONS_LOAD_ERROR)),e.a(2,[])}},e,null,[[0,2]])}))).apply(this,arguments)}function oe(){return se.apply(this,arguments)}function se(){return(se=A(m().m(function e(){var t,n,r;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=$.getQuery("LOAD_PROFILES"),e.n=1,$.executeRead(t,{});case 1:return(n=e.v).forEach(function(e){e.allowed_actions=e.allowed_actions.filter(function(e){return null!=e.name}),e.allowed_tools=e.allowed_tools.filter(function(e){return null!=e.name})}),e.a(2,n);case 2:e.p=2,e.v,(r=TeamErrorHandler).showError.apply(r,h(TeamErrorCodes.PROFILES_LOAD_ERROR));case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function ce(){return le.apply(this,arguments)}function le(){return(le=A(m().m(function e(){var t,n,r,i;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=$.getQuery("LOAD_MEASURES"),e.n=1,$.executeRead(t,{});case 1:return n=e.v,r=n.map(function(e){return e.m||e}),e.a(2,r);case 2:return e.p=2,e.v,(i=TeamErrorHandler).showError.apply(i,h(TeamErrorCodes.MEASURES_LOAD_ERROR)),e.a(2,[])}},e,null,[[0,2]])}))).apply(this,arguments)}function ue(){return de.apply(this,arguments)}function de(){return de=A(m().m(function e(){var t,n,r,i=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=!(i.length>0&&void 0!==i[0])||i[0],!B){e.n=1;break}return e.a(2);case 1:return e.p=1,B=!0,xn(),t&&(N.innerHTML="",Qn("initial"),H=0,z=[],V=!0),n=document.getElementById("teamSearch").value.toLowerCase(),e.n=2,pe(n);case 2:t&&Xn(),e.n=4;break;case 3:e.p=3,e.v,(r=TeamErrorHandler).showError.apply(r,h(TeamErrorCodes.BATCH_LOAD_ERROR));case 4:return e.p=4,B=!1,Ln(),Kn("initial"),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])})),de.apply(this,arguments)}function pe(){return fe.apply(this,arguments)}function fe(){return fe=A(m().m(function e(){var t,n,r,a,o,s,c,l,u,d=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:"",V){e.n=1;break}return e.a(2);case 1:if(H>0&&Qn("load-more"),e.p=2,n=new i.e,n=F.size>0?i.e.from(F).map(function(e){return"Active"===e}):[!0,!1],!(U.size>0)){e.n=3;break}r=i.e.from(U),e.n=5;break;case 3:return a=$.getQuery("LOAD_CATEGORY_FILTERS"),e.n=4,$.executeRead(a,{});case 4:o=e.v,r=i.e.from(o.map(function(e){return e.category}));case 5:return r.quotedElements=!0,s=$.getQuery("LOAD_BATCHED_TEAMS"),c={searchTerm:t.toLowerCase()||"",statusConditions:n,categories:r,currentUser:j.CURRENT_USER},e.n=6,$.executeRead(s,c,null,!1,20*H,20);case 6:l=e.v,V=20===l.length,l.length>0?(ye(z=[].concat(h(z),h(l))),H++):V=!1,e.n=8;break;case 7:e.p=7,e.v,(u=TeamErrorHandler).showError.apply(u,h(TeamErrorCodes.BATCH_LOAD_ERROR));case 8:return e.p=8,H>0&&Kn("load-more"),B=!1,Ln(),e.f(8);case 9:return e.a(2)}},e,null,[[2,7,8,9]])})),fe.apply(this,arguments)}function he(e){return me.apply(this,arguments)}function me(){return(me=A(m().m(function e(t){var n,r,i,a,o,s,c,l,u;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!G){e.n=2;break}return e.n=1,Hn();case 1:if(e.v){e.n=2;break}return e.a(2);case 2:return e.p=2,n=$.getQuery("LOAD_TEAM"),e.n=3,$.executeRead(n,{teamId:t});case 3:(r=e.v).length>0?(i=r[0],a=r[0].objective_function?r[0].objective_function:null,o=r[0].location_id,a&&(a=ObjectiveFunctionManager.fromDatabase(a)),s=r[0].agentsWithData,c=s.map(function(e){if(null==e.agent_id)return null;var t=e.tools.filter(function(e){return null!=e.id}).map(function(e){return e.id}),n=e.actions.filter(function(e){return null!=e.id}).map(function(e){return e.id}),r=e.objectiveFunction?e.objectiveFunction:null;return r&&(r=ObjectiveFunctionManager.fromDatabase(r)),{active:e.active,agent_id:e.agent_id,constraints:e.constraints||[],created_date:e.created_date,last_modified_date:e.last_modified_date,name:e.name,profile_id:e.profile_id,responsibilities:e.responsibilities||[],task_prompt:e.task_prompt,type:e.type,user_prompt:e.user_prompt,selected_tools:t,selected_actions:n,objective_function:r}}),Un(W=_(_({},i),{},{agents:c.filter(function(e){return null!=e}),objective_function:a,location_id:o})),$n("edit"),TeamStatusHandler.showSuccess("teamLoadSuccess",{id:t}),ir(t),document.querySelector('.tab-button[data-tab="agents"]').classList.contains("active")&&Jt()):(l=TeamErrorHandler).showError.apply(l,h(TeamErrorCodes.TEAM_NOT_FOUND)),e.n=5;break;case 4:e.p=4,e.v,(u=TeamErrorHandler).showError.apply(u,h(TeamErrorCodes.TEAM_LOAD_ERROR));case 5:return e.a(2)}},e,null,[[2,4]])}))).apply(this,arguments)}function ye(e){var t=new Set(Array.from(N.children).filter(function(e){return e.classList.contains("team-item")}).map(function(e){return e.dataset.teamId}));e.forEach(function(e){var n,r;if(!t.has(e.team_id)){var i,a,o,s,c,l=document.createElement("div");l.className="team-item",l.dataset.teamId=e.team_id,l.dataset.active=null!==(n=null===(r=e.active)||void 0===r?void 0:r.toString())&&void 0!==n?n:"true",l.dataset.tags=JSON.stringify(e.tags||[]),l.setAttribute("role","button"),l.setAttribute("data-i18n-aria-label","loadTeam"),l.setAttribute("data-i18n-params",JSON.stringify({name:e.name})),l.addEventListener("click",function(){return he(e.team_id)}),l.innerHTML='\n            <div class="team-header">\n                <div class="team-name-container">\n                    <div class="team-name">'.concat(e.name,"</div>\n                    ").concat(e.category.trim()?'<span class="team-category">'.concat(e.category.trim(),"</span>"):'<span class="team-category" data-i18n="unspecified">Unspecified</span>','\n                    \n                </div>\n                <div class="team-menu">\n                    <button class="team-menu-button">\n                        <i class="fa-solid fa-ellipsis-vertical"></i>\n                    </button>\n                    <div class="team-menu-dropdown">\n                        <button class="team-menu-item view-history">\n                            <span data-i18n="viewHistory">View History</span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div class="team-info-container">\n                <div class="created-date" data-date="').concat(e.created_date,'">\n                    <i class="fa-regular fa-square-plus"></i>\n                    ').concat(e.created_date?'<span data-date="'.concat(e.created_date,'" data-i18n-date="date-medium"></span>'):"-",'\n                </div>\n                <div class="last-modified-date" data-date="').concat(e.last_modified_date,'">\n                    <i class="fa-solid fa-pen-to-square"></i>\n                    ').concat(e.last_modified_date?'<span data-date="'.concat(e.last_modified_date,'" data-i18n-date="date-medium"></span>'):"","\n                </div>\n            </div>\n        "),N.appendChild(l),i=l,a=e.team_id,o=i.querySelector(".team-menu-button"),s=i.querySelector(".team-menu-dropdown"),c=i.querySelector(".view-history"),o.addEventListener("click",function(e){e.stopPropagation(),s.classList.toggle("show")}),c.addEventListener("click",function(e){e.stopPropagation(),function(e){ge.apply(this,arguments)}(a),s.classList.remove("show")})}})}function ge(){return(ge=A(m().m(function e(t){var n,r,i,a;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=$.getQuery("GET_AUDIT_HISTORY"),e.n=1,$.executeRead(n,{teamId:t});case 1:r=e.v,i="",0===r.length?i+='<p data-i18n="noAuditHistory">No audit history available.</p>':(i+='<ul class="audit-list">',r.forEach(function(e){var t=e.timestamp,n=new Date(t),r=e.changes,a=JSON.parse(r),o=e.user||"Unknown";i+='\n                    <li class="audit-item">\n                        <div class="audit-header">\n                            <span class="audit-timestamp" data-date="'.concat(n.toISOString(),'" data-i18n-date="datetime-medium"></span>\n                            <span class="audit-user"><span data-i18n="by">by</span> ').concat(o,'</span>\n                        </div>\n                        <ul class="audit-changes">\n                '),Object.entries(a).forEach(function(e){var t=E(e,2),n=t[0],r=t[1],a=r.old?JSON.parse(r.old):"N/A",o=JSON.parse(r.new);a=be(a),o=be(o),i+="\n                        <li><strong>".concat(n,':</strong> \n                            <span class="old-value">').concat(a,'</span> → \n                            <span class="new-value">').concat(o,"</span>\n                        </li>\n                    ")}),i+="</ul></li>"}),i+="</ul>"),tr("auditHistory",i,{translateTitle:!0}),e.n=3;break;case 2:e.p=2,e.v,(a=TeamErrorHandler).showError.apply(a,h(TeamErrorCodes.AUDIT_HISTORY_ERROR));case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function ve(){return _e.apply(this,arguments)}function _e(){return(_e=A(m().m(function e(){var t,n,r,i,a,o,s,c,l,u,d;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=$.getQuery("LOAD_SYSTEM_OPTIONS"),e.n=1,$.executeRead(n,{id:"SYSTEM-OPTIONS"},null,!0);case 1:if(!(r=e.v)){e.n=2;break}return i=r.reserved_fields_user,a=void 0===i?[]:i,o=r.reserved_fields_task,s=void 0===o?[]:o,c=r.content_processor_type,l=void 0===c?[]:c,u=r.allowed_consensus,d=void 0===u?[]:u,e.a(2,{reserved_fields_user:a,reserved_fields_task:s,content_processor_type:l,allowed_consensus:d});case 2:throw(t=TeamErrorHandler).showError.apply(t,h(TeamErrorCodes.SYSTEM_OPTIONS_NOT_FOUND)),new Error("System options not found");case 3:return e.p=3,e.v,e.a(2,{reserved_fields_user:[],reserved_fields_task:[],content_processor_type:[],allowed_consensus:[]});case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)}function be(e){return"object"===S(e)&&null!==e?JSON.stringify(e,null,2):"boolean"==typeof e?e?"true":"false":null==e?"N/A":e.toString()}function Ee(){return we.apply(this,arguments)}function we(){return we=A(m().m(function e(){var t,n,r,i,a,o,d,y,v,b,E,w,T,S,I,O,N,R,x,L,C,D,M,U,F;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(G){e.n=1;break}return(t=TeamErrorHandler).showError.apply(t,h(TeamErrorCodes.NO_CHANGES_TO_SAVE)),e.a(2);case 1:if(n=document.querySelector("#save_team"),r=n.querySelector(".icon-xl"),i=n.querySelector(".spinner"),a=document.querySelector("#cancel_team"),o=document.querySelectorAll(".right-actions button"),n.disabled=a.disabled=!0,o.forEach(function(e){return e.disabled=!0}),r.classList.add("hide"),i.classList.remove("hide"),e.p=2,"string"==typeof(b=Mn()).agent_configurations&&(b.agent_configurations=JSON.parse(b.agent_configurations)),E=[],(w=vn(b)).length>0&&E.push.apply(E,h(w)),null!==(d=W)&&void 0!==d&&d.objective_function&&(T=En(W.objective_function,"team")).length>0&&E.push.apply(E,h(T)),!k||null===(y=b.agent_configurations)||void 0===y||!y.length){e.n=9;break}S=g(b.agent_configurations),e.p=3,O=m().m(function e(){var t,n,r,i,a;return m().w(function(e){for(;;)switch(e.n){case 0:n=I.value,(r=bn(n,k)).length>0&&E.push.apply(E,h(r)),null!=(i=null===(t=W.agents)||void 0===t?void 0:t.find(function(e){return e.agent_id===n.agent_id}))&&i.objective_function&&(a=En(i.objective_function,"agent")).length>0&&E.push.apply(E,h(a));case 1:return e.a(2)}},e)}),S.s();case 4:if((I=S.n()).done){e.n=6;break}return e.d(p(O()),5);case 5:e.n=4;break;case 6:e.n=8;break;case 7:e.p=7,F=e.v,S.e(F);case 8:return e.p=8,S.f(),e.f(8);case 9:if(!(E.length>0)){e.n=10;break}return TeamErrorHandler.handleValidationErrors(E),er(".".concat(P)),e.a(2);case 10:return N=q?or(_(_({},q),{},{agent_configurations:q.agents||[],agents:void 0})):null,R=b.location_id,b.created_date,b.last_modified_date,x=b.agent_configurations,L=f(b,s),C=null!==(v=W)&&void 0!==v&&v.objective_function?ObjectiveFunctionManager.prepareForStorage(W.objective_function):null,e.n=11,$.startTransaction();case 11:return D=e.v,e.p=12,M=!1,utils.debugLog("[MEASURE_TRACKING] ============ TEAM SAVE TRANSACTION STARTED ============"),e.n=13,$.executeInTransaction(D,function(){var e=A(m().m(function e(t){var n,r,i,a,o,s,d,y,v,E,w,T,S,I,A,O,k,D,P,U,F,z,B,H,V,G,q,J,Y,Q,K,X,Z,ee,te,ne,re,ie,ae,oe,se,ce,le,ue,de,pe,fe,he,me,ye,ge,ve,_e,be,Ee,we,Se,Ae,Ne,xe,Le,Ce,ke,je,De,$e,Pe,Me,Ue,Fe,ze,Be,He,Ve,We,Ge,qe,Je,Ye,Qe,Ke,Xe;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,Te(L.team_id,t);case 1:return M=!e.v,r=crypto.randomUUID(),i=crypto.randomUUID(),a=Math.floor(Date.now()/1e3),o=M?null:Re(N,b),s=o?JSON.stringify(o):null,d=(new Date).toISOString(),y=M?d:null!==(n=W)&&void 0!==n&&n.created_date?new Date(W.created_date).toISOString():d,v=d,E=$.getQuery("WRITE_TEAM"),e.n=2,$.executeWrite(E,{teamId:L.team_id,active:L.active,allowed_consensus:L.allowed_consensus,author:L.author,category:L.category,compliance_requirements:L.compliance_requirements,description:L.description,name:L.name,objectives:L.objectives,operating_principles:L.operating_principles,tags:L.tags,version:L.version,created_date:y,last_modified_date:v,auditId:r,audit_created_date:d,partitionkeyproperty:j.COSMOSDB_CONFIG.partitionkeyproperty,partitionkeyvalue:j.COSMOSDB_CONFIG.partitionkeyvalue},t);case 2:if(w=e.v){e.n=3;break}throw(T=TeamErrorHandler).showError.apply(T,h(TeamErrorCodes.TEAM_SAVE_FAILED)),new Error("Failed to save team data");case 3:if(S=w,!(!M&&o&&Object.keys(o).length>0)){e.n=5;break}return I=$.getQuery("WRITE_AUDIT_INFO"),e.n=4,$.executeWrite(I,{teamId:L.team_id,currentUser:j.CURRENT_USER,stringifiedChanges:s,auditId:r,entryId:i,timestamp:a,audit_created_date:d,entry_created_date:d},t);case 4:e.v;case 5:if(!R){e.n=9;break}return e.n=6,$.executeWrite($.getQuery("DELETE_LOCATION_RELATIONSHIPS"),{teamId:S.team_id},t);case 6:return e.n=7,$.executeWrite($.getQuery("CREATE_LOCATION_RELATIONSHIPS"),{teamId:S.team_id,locationId:R},t);case 7:return A=$.getQuery("LOAD_LOCATION"),e.n=8,$.executeRead(A,{locationId:R},t);case 8:(O=e.v).length>0&&(k=O[0],W.location=k),e.n=11;break;case 9:return e.n=10,$.executeWrite($.getQuery("DELETE_LOCATION_RELATIONSHIPS"),{teamId:S.team_id},t);case 10:W.location=null;case 11:if(D=null,!C){e.n=25;break}if(P=null,U=!0,M){e.n=13;break}return e.n=12,$.executeRead($.getQuery("LOAD_OBJECTIVE_FUNCTION"),{teamId:S.team_id},t,!0);case 12:(P=e.v)&&(U=!1);case 13:return F=C.created_date,z=C.last_modified_date,B=f(C,c),H=crypto.randomUUID(),V=crypto.randomUUID(),G=Re(P,C),q=G?JSON.stringify(G):"{}",$.getQuery("WRITE_OBJECTIVE_FUNCTION"),J=_(_({},B),{},{ofentryId:crypto.randomUUID(),created_date:F,last_modified_date:z,teamId:S.team_id,currentUser:j.CURRENT_USER,auditId:H,audit_created_date:d}),Y=null,e.p=14,Q=$.getQuery("CREATE_OR_UPDATE_TEAM_OBJECTIVE_FUNCTION"),e.n=15,$.executeWrite(Q,J,t);case 15:return Y=e.v,Q=$.getQuery("CONNECT_TEAM_OBJECTIVE_FUNCTION"),e.n=16,$.executeWrite(Q,J,t);case 16:if(e.v,!(!U&&G&&Object.keys(G).length>0)){e.n=18;break}return K=$.getQuery("WRITE_OBJECTIVE_FUNCTION_AUDIT_INFO"),e.n=17,$.executeWrite(K,{objectiveFunctionId:C.id,currentUser:j.CURRENT_USER,stringifiedChanges:q,auditId:H,entryId:V,timestamp:a,audit_created_date:d,entry_created_date:d},t);case 17:e.v;case 18:if(Y&&(!Array.isArray(Y)||0!==Y.length)){e.n=20;break}return X=$.getQuery("LOAD_OBJECTIVE_FUNCTION"),e.n=19,$.executeRead(X,{teamId:S.team_id},t);case 19:(Z=e.v)&&Z.length>0&&(Y=Z);case 20:e.n=22;break;case 21:throw e.p=21,e.v;case 22:if(!Y||Array.isArray(Y)&&!(Y.length>0)){e.n=24;break}return D=Array.isArray(Y)?Y[0]:Y,D=ObjectiveFunctionManager.fromDatabase(D),ee=ObjectiveFunctionManager.extractMeasureIds(C),utils.debugLog("[MEASURE_TRACKING] Team OF ".concat(C.id," needs measures:"),ee),e.n=23,$.executeWrite($.getQuery("UPDATE_OBJECTIVE_FUNCTION_MEASURE_RELATIONSHIPS"),{objectiveFunctionId:C.id,measureIds:ee},t);case 23:te=e.v,utils.debugLog("[MEASURE_TRACKING] Team OF relationships result:",te),te&&te.length>0&&(ne=te[0],utils.debugLog("[MEASURE_TRACKING] Team OF relationships created:",ne.relationshipsCreated||0,"relationships"),ne.debug_messages&&utils.debugLog("[MEASURE_TRACKING] Team OF measure lookup details:",ne.debug_messages));case 24:e.n=26;break;case 25:return e.n=26,$.executeWrite($.getQuery("DELETE_TEAM_OBJECTIVE_FUNCTION"),{teamId:S.team_id},t);case 26:if(re=[],null==x||!x.length){e.n=64;break}ie=[],ae=[],oe=g(x),e.p=27,ce=m().m(function e(){var n,r,i,a,o,s,c,l,d;return m().w(function(e){for(;;)switch(e.n){case 0:if(r=se.value,i=r.agent_id,a=i,!i.includes("-TMP-")){e.n=2;break}return e.n=1,on(r.profile_id,!1,t,ie);case 1:a=e.v,ie.push(a);case 2:o=null===(n=W.agents)||void 0===n?void 0:n.find(function(e){return e.agent_id===i}),s=r.selected_tools||[],c=r.selected_actions||[],r.selected_tools,r.selected_actions,r.objective_function,l=f(r,u),i.includes("-TMP-")&&(l.agent_id=a),d=null,null!=o&&o.objective_function&&(d=ObjectiveFunctionManager.prepareForStorage(o.objective_function)),ae.push({originalId:i,finalId:a,data:l,selectedTools:s,selectedActions:c,objectiveFunction:d,profileId:r.profile_id,created_date:r.created_date||(new Date).toISOString(),last_modified_date:(new Date).toISOString()});case 3:return e.a(2)}},e)}),oe.s();case 28:if((se=oe.n()).done){e.n=30;break}return e.d(p(ce()),29);case 29:e.n=28;break;case 30:e.n=32;break;case 31:e.p=31,Ke=e.v,oe.e(Ke);case 32:return e.p=32,oe.f(),e.f(32);case 33:le=0,ue=ae;case 34:if(!(le<ue.length)){e.n=63;break}return de=ue[le],e.p=35,e.n=36,Ie(de.finalId,t);case 36:if(pe=!e.v,fe=null,pe){e.n=38;break}return e.n=37,$.executeRead($.getQuery("LOAD_AGENT"),{agentId:de.finalId},t);case 37:(he=e.v).length>0&&(fe=he[0]);case 38:return me=(new Date).toISOString(),ye=crypto.randomUUID(),ge=crypto.randomUUID(),ve=$.getQuery("WRITE_AGENT"),_e={teamId:S.team_id,profileId:de.profileId,agentId:de.finalId,active:de.data.active,agent_id:de.data.agent_id,constraints:de.data.constraints||[],name:de.data.name,profile_id:de.data.profile_id,responsibilities:de.data.responsibilities||[],task_prompt:de.data.task_prompt,type:de.data.type,user_prompt:de.data.user_prompt,created_date:de.created_date,last_modified_date:de.last_modified_date,currentUser:j.CURRENT_USER,auditId:ye,audit_created_date:me},e.n=39,$.executeWrite(ve,_e,t);case 39:if((be=e.v)&&(!Array.isArray(be)||0!==be.length)){e.n=40;break}return e.a(2,null);case 40:if(Ee=Array.isArray(be)?be[0]:be,pe||!Ee||!Ee.agent_id){e.n=42;break}if(!((we=Re(fe,de.data))&&Object.keys(we).length>0)){e.n=42;break}return Se=JSON.stringify(we),Ae=$.getQuery("WRITE_AGENT_AUDIT_INFO"),e.n=41,$.executeWrite(Ae,{agentId:Ee.agent_id,currentUser:j.CURRENT_USER,stringifiedChanges:Se,auditId:ye,entryId:ge,timestamp:a,audit_created_date:me,entry_created_date:me},t);case 41:e.v;case 42:if(!de.objectiveFunction){e.n=55;break}if(de.objectiveFunction.id&&!de.objectiveFunction.id.includes("-TMP-")){e.n=44;break}return e.n=43,yn(de.finalId,"agent",t);case 43:Le=e.v,de.objectiveFunction.id=Le;case 44:return e.n=45,Oe(de.objectiveFunction.id,t);case 45:if(Ce=!e.v,ke=null,Ce){e.n=47;break}return e.n=46,$.executeRead($.getQuery("LOAD_AGENT_OBJECTIVE_FUNCTION"),{agentId:Ee.agent_id},t,!0);case 46:ke=e.v;case 47:return je=de.objectiveFunction,De=je.created_date,$e=je.last_modified_date,Pe=f(je,l),Me=(new Date).toISOString(),Ue=crypto.randomUUID(),Fe=_(_({},Pe),{},{ofentryId:crypto.randomUUID(),created_date:De,last_modified_date:$e,agentId:Ee.agent_id,teamOFId:null===(Ne=D)||void 0===Ne?void 0:Ne.id,currentUser:j.CURRENT_USER,auditId:Ue,audit_created_date:Me}),ze=$.getQuery("CREATE_OR_UPDATE_AGENT_OBJECTIVE_FUNCTION"),e.n=48,$.executeWrite(ze,Fe,t);case 48:if(Be=e.v,null===(xe=D)||void 0===xe||!xe.id){e.n=50;break}return ze=$.getQuery("CONNECT_OBJECTIVE_FUNCTION_TO_TEAM"),e.n=49,$.executeWrite(ze,Fe,t);case 49:e.v;case 50:if(Ce){e.n=52;break}if(!((He=Re(ke,de.objectiveFunction))&&Object.keys(He).length>0)){e.n=52;break}return Ve=JSON.stringify(He),We=crypto.randomUUID(),Ge=$.getQuery("WRITE_OBJECTIVE_FUNCTION_AUDIT_INFO"),e.n=51,$.executeWrite(Ge,{objectiveFunctionId:de.objectiveFunction.id,currentUser:j.CURRENT_USER,stringifiedChanges:Ve,auditId:Ue,entryId:We,timestamp:a,audit_created_date:Me,entry_created_date:Me},t);case 51:e.v;case 52:if(!Be){e.n=54;break}return qe=Be[0],Ee.objective_function=ObjectiveFunctionManager.fromDatabase(qe),Je=ObjectiveFunctionManager.extractMeasureIds(de.objectiveFunction),utils.debugLog("[MEASURE_TRACKING] Agent OF ".concat(de.objectiveFunction.id," (").concat(Ee.agent_id,") needs measures:"),Je),e.n=53,$.executeWrite($.getQuery("UPDATE_OBJECTIVE_FUNCTION_MEASURE_RELATIONSHIPS"),{objectiveFunctionId:de.objectiveFunction.id,measureIds:Je},t);case 53:Ye=e.v,utils.debugLog("[MEASURE_TRACKING] Agent OF relationships result:",Ye),Ye&&Ye.length>0&&(Qe=Ye[0],utils.debugLog("[MEASURE_TRACKING] Agent OF relationships created:",Qe.relationshipsCreated||0,"relationships"),Qe.debug_messages&&utils.debugLog("[MEASURE_TRACKING] Agent OF measure lookup details:",Qe.debug_messages));case 54:e.n=56;break;case 55:return e.n=56,$.executeWrite($.getQuery("DELETE_AGENT_OBJECTIVE_FUNCTION"),{agentId:Ee.agent_id},t);case 56:return e.n=57,$.executeWrite($.getQuery("DELETE_AGENT_TOOLS"),{agentId:Ee.agent_id},t);case 57:return e.n=58,$.executeWrite($.getQuery("DELETE_AGENT_ACTIONS"),{agentId:Ee.agent_id},t);case 58:if(!(de.selectedTools&&de.selectedTools.length>0)){e.n=59;break}return e.n=59,$.executeWrite($.getQuery("ADD_AGENT_TOOLS"),{agentId:Ee.agent_id,toolIds:de.selectedTools},t);case 59:if(!(de.selectedActions&&de.selectedActions.length>0)){e.n=60;break}return e.n=60,$.executeWrite($.getQuery("ADD_AGENT_ACTIONS"),{agentId:Ee.agent_id,actionIds:de.selectedActions},t);case 60:Ee.selected_tools=de.selectedTools||[],Ee.selected_actions=de.selectedActions||[],re.push(Ee),e.n=62;break;case 61:throw e.p=61,Xe=e.v,utils.debugLog("Agent data that failed:",de),Xe;case 62:le++,e.n=34;break;case 63:case 64:W=_(_({},S),{},{agents:re,objective_function:D});case 65:return e.a(2)}},e,null,[[35,61],[27,31,32,33],[14,21]])}));return function(t){return e.apply(this,arguments)}}());case 13:if(utils.debugLog("[MEASURE_TRACKING] ============ TEAM SAVE TRANSACTION COMPLETED ============"),TeamStatusHandler.showSuccess(M?"teamCreateSuccess":"teamUpdateSuccess",{id:b.team_id}),G=!1,!j.TEAM_ID){e.n=15;break}return e.n=14,he(j.TEAM_ID);case 14:e.n=16;break;case 15:return Jn(),e.n=16,ue();case 16:er(".".concat(P));case 17:return e.p=17,e.n=18,$.endTransaction(D);case 18:return e.f(17);case 19:e.n=21;break;case 20:e.p=20,e.v,(U=TeamErrorHandler).showError.apply(U,h(TeamErrorCodes.TEAM_SAVE_ERROR));case 21:return e.p=21,n.disabled=a.disabled=!1,o.forEach(function(e){return e.disabled=!1}),r.classList.remove("hide"),i.classList.add("hide"),e.f(21);case 22:return e.a(2)}},e,null,[[12,,17,19],[3,7,8,9],[2,20,21,22]])})),we.apply(this,arguments)}function Te(e,t){return Se.apply(this,arguments)}function Se(){return(Se=A(m().m(function e(t,n){var r,i;return m().w(function(e){for(;;)switch(e.n){case 0:return r=$.getQuery("CHECK_TEAM_EXISTS"),e.n=1,$.executeRead(r,{teamId:t},n,!0);case 1:return i=e.v,e.a(2,i.exists)}},e)}))).apply(this,arguments)}function Ie(e,t){return Ae.apply(this,arguments)}function Ae(){return(Ae=A(m().m(function e(t,n){var r,i;return m().w(function(e){for(;;)switch(e.n){case 0:return r=$.getQuery("CHECK_AGENT_EXISTS"),e.n=1,$.executeRead(r,{agentId:t},n,!0);case 1:return i=e.v,e.a(2,i.exists)}},e)}))).apply(this,arguments)}function Oe(e,t){return Ne.apply(this,arguments)}function Ne(){return(Ne=A(m().m(function e(t,n){var r,i;return m().w(function(e){for(;;)switch(e.n){case 0:return r=$.getQuery("CHECK_OBJECTIVE_FUNCTION_EXISTS"),e.n=1,$.executeRead(r,{ofId:t},n,!0);case 1:return i=e.v,e.a(2,i.exists)}},e)}))).apply(this,arguments)}function Re(e,t){var n={},r=["last_modified_date","created_date"],i=["id","name","description","type","objective_type","active","version","formula","weights","components","thresholds"],a=function(e){if(!e||"object"!==S(e))return e;for(var t={},n=0,r=i;n<r.length;n++){var a=r[n];e.hasOwnProperty(a)&&(t[a]=e[a])}return t},o=function(e){if(null==e)return e;if(Array.isArray(e))return e.map(function(e){return o(e)});if("object"===S(e)){for(var t={},n=0,i=Object.entries(e);n<i.length;n++){var a=E(i[n],2),s=a[0],c=a[1];r.includes(s)||(t[s]=o(c))}return t}return e},s=function(e){return Array.isArray(e)?e.map(function(e){var t=o(e);return t&&t.objective_function&&(t.objective_function=a(t.objective_function)),t}):e};for(var c in t)if(!r.includes(c)){var l=null==e?void 0:e[c],u=t[c];if("objective_function"===c&&(l=l?a(l):l,u=u?a(u):u),"agent_configurations"===c){var d=s(l),p=s(u);JSON.stringify(d)!==JSON.stringify(p)&&(n[c]={old:null!=l?JSON.stringify(l):null,new:null!=u?JSON.stringify(u):null})}else JSON.stringify(l)!==JSON.stringify(u)&&(n[c]={old:null!=l?JSON.stringify(l):null,new:null!=u?JSON.stringify(u):null})}return n}function xe(){return Le.apply(this,arguments)}function Le(){return(Le=A(m().m(function e(){return m().w(function(e){for(;;)switch(e.n){case 0:W={team_id:"",name:"",description:"",site:"",area:"",function:"",version:"",location_id:"",allowed_consensus:"",objectives:[],operating_principles:[],compliance:[],tags:[],agents:[],objective_function:null,created_date:(new Date).toISOString(),last_modified_date:(new Date).toISOString(),active:!0},$n("new"),Un(W);case 1:return e.a(2)}},e)}))).apply(this,arguments)}function Ce(){return ke.apply(this,arguments)}function ke(){return ke=A(m().m(function e(){var t,n,r,i,a,o,s,c,l,u,d,p,f,y;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=document.querySelector("#clone_team"),n=t.querySelector(".icon-xl"),r=t.querySelector(".spinner"),t.disabled=!0,n.classList.add("hide"),r.classList.remove("hide"),W){e.n=1;break}return(i=TeamErrorHandler).showError.apply(i,h(TeamErrorCodes.SELECT_TEAM_TO_CLONE)),t.disabled=!1,n.classList.remove("hide"),r.classList.add("hide"),e.a(2);case 1:return e.p=1,e.n=2,jt(W.team_id);case 2:if(a=e.v,o=W.name,s=1,(c=o.match(/^Clone(?:\s+(\d+))?\s+of\s+(.+)$/))&&(s=c[1]?parseInt(c[1])+1:2,o=c[2]),l=1===s?"Clone of ".concat(o):"Clone ".concat(s," of ").concat(o),u=(new Date).toISOString(),d=null,!W.objective_function){e.n=4;break}return e.n=3,yn(a,"team");case 3:p=e.v,(d=ObjectiveFunctionManager.fromImport(W.objective_function)).id=p,d.type="team",d.version=0,d.created_date=u,d.last_modified_date=u;case 4:return e.n=5,Promise.all(W.agents.map(function(){var e=A(m().m(function e(t){var n,r,i;return m().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,on(t.profile_id,!0);case 1:if(n=e.v,r=null,!t.objective_function){e.n=3;break}return e.n=2,yn(n,"agent");case 2:i=e.v,(r=ObjectiveFunctionManager.fromImport(t.objective_function)).id=i,r.type="agent",r.version=0,r.created_date=u,r.last_modified_date=u;case 3:return e.a(2,_(_({},t),{},{agent_id:n,created_date:u,last_modified_date:u,objective_function:r}))}},e)}));return function(t){return e.apply(this,arguments)}}()));case 5:f=e.v,Un(_(_({},W),{},{team_id:a,name:l,version:"",created_date:u,last_modified_date:u,agents:f,objective_function:d})),$n("clone"),ar(!1),TeamStatusHandler.showSuccess("teamCloneSuccess"),e.n=7;break;case 6:e.p=6,e.v,t.disabled=!1,(y=TeamErrorHandler).showError.apply(y,h(TeamErrorCodes.TEAM_CLONE_ERROR));case 7:return e.p=7,n.classList.remove("hide"),r.classList.add("hide"),e.f(7);case 8:return e.a(2)}},e,null,[[1,6,7,8]])})),ke.apply(this,arguments)}function je(){return De.apply(this,arguments)}function De(){return(De=A(m().m(function e(){var t,n,r,i,a,o,s,c,l,u,d,p,f,y,g,v;return m().w(function(e){for(;;)switch(e.n){case 0:if(t=document.querySelector("#export_team"),n=t.querySelector(".icon-xl"),r=t.querySelector(".spinner"),t.disabled=!0,n.classList.add("hide"),r.classList.remove("hide"),W){e.n=1;break}return(i=TeamErrorHandler).showError.apply(i,h(TeamErrorCodes.SELECT_TEAM_TO_EXPORT)),t.disabled=!1,n.classList.remove("hide"),r.classList.add("hide"),e.a(2);case 1:try{(c=JSON.parse(JSON.stringify(W))).created_date&&(c.created_date=new Date(c.created_date).toISOString()),c.last_modified_date&&(c.last_modified_date=new Date(c.last_modified_date).toISOString()),c.objective_function&&(c.objective_function=ObjectiveFunctionManager.toExport(c.objective_function)),delete c.agentsWithData,delete c._id,delete c._key,delete c._rev,l=Je(c),utils.debugLog("[IMPORT] Dependencies extracted:",l),c.dependencies={measures:l.measures,tools:l.tools,actions:l.actions,profiles:l.profiles},c.agents&&c.agents.length>0&&(c.agents=c.agents.map(function(e){var t={active:e.active,agent_id:e.agent_id,name:e.name,profile_id:e.profile_id,type:e.type,created_date:e.created_date?new Date(e.created_date).toISOString():void 0,last_modified_date:e.last_modified_date?new Date(e.last_modified_date).toISOString():void 0,selected_tools:Ge(e),selected_actions:qe(e)};return e.objective_function&&(t.objective_function=ObjectiveFunctionManager.toExport(e.objective_function)),t})),u="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(c,null,2))),(d=document.createElement("a")).setAttribute("href",u),d.setAttribute("download","".concat(W.team_id,".json")),d.setAttribute("target","_blank"),d.style.display="none",document.body.appendChild(d),d.click(),document.body.removeChild(d),p=(null===(a=c.agents)||void 0===a?void 0:a.filter(function(e){return e.profile}).length)||0,f=(null===(o=c.objective_function)||void 0===o||null===(o=o.measures)||void 0===o?void 0:o.length)||0,y=(null===(s=c.agents)||void 0===s?void 0:s.reduce(function(e,t){var n;return e+((null===(n=t.objective_function)||void 0===n||null===(n=n.measures)||void 0===n?void 0:n.length)||0)},0))||0,(g=p+f+y)>0?TeamStatusHandler.showSuccess("Team exported successfully with ".concat(g," embedded dependencies for cross-environment portability")):TeamStatusHandler.showSuccess("teamExportSuccess")}catch(e){(v=TeamErrorHandler).showError.apply(v,h(TeamErrorCodes.TEAM_EXPORT_ERROR))}finally{t.disabled=!1,n.classList.remove("hide"),r.classList.add("hide")}case 2:return e.a(2)}},e)}))).apply(this,arguments)}function $e(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=A(m().m(function e(t){var n,r,i,a,o,s,c,l,u,d,p,f,y,g,v;return m().w(function(e){for(;;)switch(e.n){case 0:utils.debugLog("[IMPORT] Starting streamlined dependency processing..."),o={dependencies:{measures:[],profiles:[],actions:[],tools:[]},conflicts:[],validationErrors:[]},s=[{key:"measures",idField:"id",items:(null===(n=t.dependencies)||void 0===n?void 0:n.measures)||[]},{key:"actions",idField:"id",items:(null===(r=t.dependencies)||void 0===r?void 0:r.actions)||[]},{key:"tools",idField:"id",items:(null===(i=t.dependencies)||void 0===i?void 0:i.tools)||[]},{key:"profiles",idField:"profile_id",items:(null===(a=t.dependencies)||void 0===a?void 0:a.profiles)||[]}],c=0,l=s;case 1:if(!(c<l.length)){e.n=4;break}return d=l[c],e.n=2,Me(d.items,d.key,d.idField);case 2:p=e.v,f=p.processed,y=p.errors,o.dependencies[d.key]=f,(u=o.validationErrors).push.apply(u,h(y));case 3:c++,e.n=1;break;case 4:if(!(o.validationErrors.length>0)){e.n=5;break}return(g=TeamErrorHandler).showError.apply(g,h(TeamErrorCodes.IMPORT_VALIDATION_FAILED).concat([{errors:o.validationErrors.join("\n")}])),e.a(2,null);case 5:return e.n=6,Promise.all([Fe(o.dependencies.measures,"measure"),Fe(o.dependencies.actions,"action"),Fe(o.dependencies.tools,"tool"),Fe(o.dependencies.profiles,"profile")]);case 6:return v=e.v,o.conflicts=v.flat(),e.a(2,o)}},e)}))).apply(this,arguments)}function Me(e,t,n){return Ue.apply(this,arguments)}function Ue(){return(Ue=A(m().m(function e(t,n,r){var i,a,o,s,c,l,u,d,p,f,h;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:i=[],a={ids:new Set,names:new Set},o=[],s=g(t.entries()),e.p=1,s.s();case 2:if((c=s.n()).done){e.n=6;break}if(l=E(c.value,2),u=l[0],d=l[1],p=d[r],f=d.name,!a.ids.has(p)){e.n=3;break}return o.push("Duplicate ".concat(n,' ID: "').concat(p,'" (position ').concat(u+1,")")),e.a(3,5);case 3:if(!a.names.has(f)){e.n=4;break}return o.push("Duplicate ".concat(n,' name: "').concat(f,'" (position ').concat(u+1,")")),e.a(3,5);case 4:i.push(Be(d)),a.ids.add(p),a.names.add(f);case 5:e.n=2;break;case 6:e.n=8;break;case 7:e.p=7,h=e.v,s.e(h);case 8:return e.p=8,s.f(),e.f(8);case 9:return utils.debugLog("[DEDUP] ".concat(n,": ").concat(t.length," → ").concat(i.length," (removed ").concat(t.length-i.length," duplicates)")),e.a(2,{processed:i,errors:o})}},e,null,[[1,7,8,9]])}))).apply(this,arguments)}function Fe(e,t){return ze.apply(this,arguments)}function ze(){return(ze=A(m().m(function e(t,n){var r,i,a;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(0!==t.length){e.n=1;break}return e.a(2,[]);case 1:return r={measure:"CHECK_MEASURES_EXIST",action:"CHECK_ACTIONS_EXIST",tool:"CHECK_TOOLS_EXIST",profile:"CHECK_PROFILES_EXIST"},e.p=2,i=$.getQuery(r[n]),e.n=3,$.executeRead(i,b({},n+"s",t));case 3:return a=e.v,e.a(2,t.map(function(e){var t=a.find(function(t){return t.importedId===(e.id||e.profile_id)});if(t&&(t.idExists||t.nameExists||t.measureIdExists)){var r=[];return t.idExists&&r.push("idAlreadyExists"),t.nameExists&&r.push("nameAlreadyExists"),t.measureIdExists&&r.push("measureIdAlreadyExists"),{type:n,id:e.id||e.profile_id,name:e.name,measure_id:e.measure_id,conflicts:r,status:"conflict",data:e,existingNameForId:t.existingNameForId,existingIdForName:t.existingIdForName,existingNameForMeasureId:t.existingNameForMeasureId}}return{type:n,id:e.id||e.profile_id,name:e.name,measure_id:e.measure_id,status:"new",data:e}}));case 4:return e.p=4,e.v,e.a(2,t.map(function(e){return{type:n,id:e.id||e.profile_id,name:e.name,status:"new",data:e}}))}},e,null,[[2,4]])}))).apply(this,arguments)}function Be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e||"object"!==S(e))return e;if(Array.isArray(e))return e;for(var n={},r=0,i=Object.entries(e);r<i.length;r++){var a=E(i[r],2),o=a[0],s=a[1];if("_id"!==o&&"_key"!==o&&"_rev"!==o){if(!t.includes(o)){if(null==s||""===s)continue;if(Array.isArray(s)&&0===s.length)continue;if("object"===S(s)&&!Array.isArray(s)&&0===Object.keys(s).length)continue}n[o]=s}}return function(e){var t=_({},e);t.precision&&"object"===S(t.precision)&&"low"in t.precision&&(t.precision=t.precision.low);t.version&&"object"===S(t.version)&&"low"in t.version&&(t.version=t.version.low);t.related_measures&&Array.isArray(t.related_measures)&&(t.related_measures=t.related_measures.filter(function(e){return e&&(null!==e.id||null!==e.name)}));return t}(n)}function He(e){if(!e)return null;var t=Be(e);t.related_measures&&(t.related_measures=t.related_measures.filter(function(e){return e&&(e.id||e.name)}).map(function(e){return Be(e)}),0===t.related_measures.length&&delete t.related_measures);for(var n=0,r=["validation_rules","alarm_thresholds"];n<r.length;n++){var i=r[n];""!==t[i]&&"{}"!==t[i]&&"[]"!==t[i]||delete t[i]}return t}function Ve(){return We.apply(this,arguments)}function We(){return We=A(m().m(function e(){var t;return m().w(function(e){for(;;)switch(e.n){case 0:(t=document.createElement("input")).type="file",t.accept="application/json",t.onchange=function(){var e=A(m().m(function e(t){var n,r,i,a,o;return m().w(function(e){for(;;)switch(e.n){case 0:n=document.querySelector("#import_team"),r=n.querySelector(".icon-xl"),i=n.querySelector(".spinner"),n.disabled=!0,r.classList.add("hide"),i.classList.remove("hide"),a=t.target.files[0],(o=new FileReader).onload=function(){var e=A(m().m(function e(t){var a,o,s,c,l,u,d,p,f,y,g,v,b,E,w,T;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,ar(),a=JSON.parse(t.target.result),o=new Set,e.n=1,$e(a);case 1:if(s=e.v){e.n=2;break}return e.a(2);case 2:if(c=s.dependencies,!((l=s.conflicts).length>0)){e.n=6;break}return e.n=3,Ye(l,a);case 3:if(u=e.v){e.n=4;break}return e.a(2);case 4:return e.n=5,nt(a,u.userChoices,l);case 5:a=e.v,e.n=8;break;case 6:if(!((d=[].concat(h(c.measures),h(c.actions),h(c.tools),h(c.profiles))).length>0)){e.n=8;break}return e.n=7,et({},d,a);case 7:if((p=e.v).success){e.n=8;break}return(f=TeamErrorHandler).showError.apply(f,h(TeamErrorCodes.DEPENDENCY_IMPORT_FAILED).concat([{error:p.error}])),e.a(2);case 8:if(!a.objective_function){e.n=10;break}return e.n=9,yn(a.team_id,"team",null,o);case 9:y=e.v,o.add(y),(g=ObjectiveFunctionManager.fromImport(a.objective_function)).id=y,g.type="team",g.version=0,a.objective_function=g;case 10:if(!(a.agents&&a.agents.length>0)){e.n=12;break}return e.n=11,Promise.all(a.agents.map(function(){var e=A(m().m(function e(t){var n,r,i,a,s,c,l,u,d,p,f;return m().w(function(e){for(;;)switch(e.n){case 0:if(n=cn(t),t.selected_tools&&(n.selected_tools=Array.isArray(t.selected_tools)?t.selected_tools.map(function(e){return"string"==typeof e?e:e.name||e.id}):[]),t.selected_actions&&(n.selected_actions=Array.isArray(t.selected_actions)?t.selected_actions.map(function(e){return"string"==typeof e?e:e.name||e.id}):[]),!t.objective_function){e.n=3;break}return r=n.profile_id,e.n=1,on(r,!0);case 1:return i=e.v,e.n=2,yn(i,"agent",null,o);case 2:a=e.v,o.add(a),(s=ObjectiveFunctionManager.fromImport(t.objective_function)).id=a,s.type="agent",s.version=0,n.objective_function=s;case 3:return c=_,l=_({},n),u={},e.n=4,on(n.profile_id,!0);case 4:return d=e.v,p=(new Date).toISOString(),f=(new Date).toISOString(),e.a(2,c(l,u,{agent_id:d,created_date:p,last_modified_date:f}))}},e)}));return function(t){return e.apply(this,arguments)}}()));case 11:a.agents=e.v;case 12:if(a){e.n=13;break}return(v=TeamErrorHandler).showError.apply(v,h(TeamErrorCodes.JSON_PARSE_ERROR)),e.a(2);case 13:if(a.team_id){e.n=14;break}return(b=TeamErrorHandler).showError.apply(b,h(TeamErrorCodes.TEAM_ID_REQUIRED)),e.a(2);case 14:return e.n=15,Ct(a.team_id);case 15:if(!e.v){e.n=17;break}return e.n=16,jt(a.team_id);case 16:a.team_id=e.v,TeamStatusHandler.showSuccess("newTeamIdGenerated");case 17:a.version="",Jn(),utils.debugLog("[IMPORT] Team data processed:",a.team_id),Un(a),$n("import"),TeamStatusHandler.showSuccess("teamImportSuccess"),(E=document.getElementById("generateTeamId"))&&(E.disabled=!1),5===(w=a.team_id?a.team_id.split("-"):[]).length&&(document.getElementById("site").value=w[0],document.getElementById("area").value=w[1],document.getElementById("function").value=w[2],document.getElementById("version").value=w[4]),document.getElementById("site").readOnly=!1,document.getElementById("area").readOnly=!1,document.getElementById("function").readOnly=!1,document.getElementById("version").readOnly=!1,e.n=19;break;case 18:e.p=18,e.v,(T=TeamErrorHandler).showError.apply(T,h(TeamErrorCodes.JSON_PARSE_ERROR));case 19:return e.p=19,n.disabled=!1,r.classList.remove("hide"),i.classList.add("hide"),e.f(19);case 20:return e.a(2)}},e,null,[[0,18,19,20]])}));return function(t){return e.apply(this,arguments)}}(),o.readAsText(a);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),t.click();case 1:return e.a(2)}},e)})),We.apply(this,arguments)}function Ge(e){if(!e.selected_tools||!Array.isArray(e.selected_tools))return[];var t=["DuckDuckGoWebSearchTool","SqlQueryTool"],n=["duckduckgo","sql","database","web_search","calculator"];return e.selected_tools.filter(function(e){return e&&!function(e){var r,i=g(K);try{var a,o=function(){var i=r.value;if(i.allowed_tools){var a=i.allowed_tools.find(function(t){return t.id===e});if(a){if(a.class_name&&t.includes(a.class_name))return{v:!0};if(n.some(function(e){var t,n;return(null===(t=a.name)||void 0===t?void 0:t.toLowerCase().includes(e))||(null===(n=a.id)||void 0===n?void 0:n.toLowerCase().includes(e))}))return{v:!0}}}};for(i.s();!(r=i.n()).done;)if(a=o())return a.v}catch(e){i.e(e)}finally{i.f()}return!1}(e)})}function qe(e){return e.selected_actions&&Array.isArray(e.selected_actions)?e.selected_actions.filter(function(e){return e}):[]}function Je(e){var t={measures:new Map,profiles:new Map,actions:new Map,tools:new Map},n=new Set;e.agents&&Array.isArray(e.agents)&&e.agents.forEach(function(e){e.profile_id&&n.add(e.profile_id)}),n.forEach(function(e){var n=K.find(function(t){return t.profile_id===e});if(n){var r,i,a=_(_({},n),{},{allowed_tools:(null===(r=n.allowed_tools)||void 0===r?void 0:r.map(function(e){return e.id}))||[],allowed_actions:(null===(i=n.allowed_actions)||void 0===i?void 0:i.map(function(e){return e.id}))||[]});t.profiles.set(n.profile_id,a),n.allowed_tools&&n.allowed_tools.forEach(function(e){if(e&&e.id){["DuckDuckGoWebSearchTool","SqlQueryTool"].includes(e.class_name)||t.tools.set(e.id,{id:e.id,name:e.name,description:e.description,class_name:e.class_name,active:e.active,options:e.options,created_date:e.created_date,last_modified_date:e.last_modified_date,author:e.author})}}),n.allowed_actions&&n.allowed_actions.forEach(function(e){e&&e.id&&t.actions.set(e.id,{id:e.id,name:e.name,description:e.description,type:e.type,category:e.category,active:e.active,parameters:e.parameters,operation_requirements:e.operation_requirements,prerequisites:e.prerequisites,should_return:e.should_return,version:e.version,impact_measures:e.impact_measures,created_date:e.created_date,last_modified_date:e.last_modified_date,author:e.author})})}});var r=new Set;e.objective_function&&ObjectiveFunctionManager.extractMeasureIds(e.objective_function).forEach(function(e){return r.add(e)});e.agents&&Array.isArray(e.agents)&&e.agents.forEach(function(e){e.objective_function&&ObjectiveFunctionManager.extractMeasureIds(e.objective_function).forEach(function(e){return r.add(e)})}),t.actions.forEach(function(e){e.impact_measures&&(Array.isArray(e.impact_measures)?e.impact_measures:JSON.parse(e.impact_measures||"[]")).forEach(function(e){var t;"string"==typeof e?t=e:e&&e.measure_id&&(t=e.measure_id),t&&r.add(t)})}),r.forEach(function(e){var n=Z.find(function(t){return t.name===e||t.measure_id===e||t.id===e});n&&t.measures.set(n.id,n)});var i={measures:Array.from(t.measures.values()).map(He),profiles:Array.from(t.profiles.values()).map(function(e){return Be(e)}),actions:Array.from(t.actions.values()).map(function(e){return Be(e)}),tools:Array.from(t.tools.values()).map(function(e){return Be(e)})};return utils.debugLog("[IMPORT] Extracted dependencies:",{measures:i.measures.length,profiles:i.profiles.length,actions:i.actions.length,tools:i.tools.length}),i}function Ye(e,t){return new Promise(function(){var n=A(m().m(function n(r){var i,a,o,s;return m().w(function(n){for(;;)switch(n.n){case 0:i=Qe(e),a=e.some(function(e){return"conflict"===e.status}),o=e.some(function(e){return"new"===e.status}),s="dependencyConflictsDetected",o&&!a?s="newDependenciesDetected":o&&a&&(s="dependenciesDetected"),Ke(tr(s,i,{translateTitle:!0,wide:!0,modalClass:"dependencies-conflict-modal"}),e,t,r);case 1:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}())}function Qe(e){var t=e.some(function(e){return"conflict"===e.status}),n=e.some(function(e){return"new"===e.status}),r=e.map(function(e){var t="",n="";if("conflict"===e.status){var r=e.conflicts&&e.conflicts.includes("idAlreadyExists"),i=e.conflicts&&e.conflicts.includes("nameAlreadyExists"),a=e.conflicts&&e.conflicts.includes("measureIdAlreadyExists"),o=r&&i,s=[];r&&s.push('<span class="conflict-badge id-conflict" data-i18n="idConflict">ID Conflict</span>'),i&&s.push('<span class="conflict-badge name-conflict" data-i18n="nameConflict">Name Conflict</span>'),a&&s.push('<span class="conflict-badge measure-id-conflict" data-i18n="measureIdConflict">Measure ID Conflict</span>'),t='<div class="conflict-badges">'.concat(s.join(""),"</div>"),o?n='\n                    <select class="dependency-choice-action-select" name="dependency-choice-'.concat(e.type,"-").concat(e.name,'" data-type="').concat(e.type,'" data-name="').concat(e.name,'" data-id="').concat(e.id,'" data-status="').concat(e.status,'" data-conflict-type="both">\n                        <option value="overwrite" selected data-i18n-dynamic="replaceExistingWithImported" data-i18n-params=\'{"name":"').concat(e.name,'"}\'>Replace existing "').concat(e.name,'" with imported data</option>\n                        <option value="keep" data-i18n-dynamic="skipImportUseExisting" data-i18n-params=\'{"name":"').concat(e.name,'"}\'>Skip import, use existing "').concat(e.name,'"</option>\n                        <option value="generateNew" data-i18n-dynamic="createNewWithGeneratedId" data-i18n-params=\'{"type":"').concat(Et(e).toLowerCase(),'","name":"').concat(e.name,"\"}'>Create new ").concat(Et(e),' "').concat(e.name,' (imported...)" with generated ID</option>\n                    </select>\n                '):r||a&&"measure"===e.type?n='\n                    <select class="dependency-choice-action-select" name="dependency-choice-'.concat(e.type,"-").concat(e.name,'" data-type="').concat(e.type,'" data-name="').concat(e.name,'" data-id="').concat(e.id,'" data-status="').concat(e.status,'" data-conflict-type="id">\n                        <option value="overwrite" selected data-i18n-dynamic="replaceExistingTypeWithImported" data-i18n-params=\'{"type":"').concat(Et(e).toLowerCase(),'","id":"').concat(e.id,'","name":"').concat(e.name,"\"}'>Replace existing ").concat(Et(e)," (ID: ").concat(e.id,') with imported "').concat(e.name,'"</option>\n                        <option value="keep" data-i18n-dynamic="skipImportKeepExistingType" data-i18n-params=\'{"type":"').concat(Et(e).toLowerCase(),'","id":"').concat(e.id,"\"}'>Skip import, keep existing ").concat(Et(e)," (ID: ").concat(e.id,')</option>\n                        <option value="generateNew" data-i18n-dynamic="createNewTypeWithGeneratedId" data-i18n-params=\'{"type":"').concat(Et(e).toLowerCase(),'","name":"').concat(e.name,"\"}'>Create new ").concat(Et(e),' "').concat(e.name,' (imported...)" with generated ID</option>\n                    </select>       \n                '):i&&(n='\n                    <select class="dependency-choice-action-select" name="dependency-choice-'.concat(e.type,"-").concat(e.name,'" data-type="').concat(e.type,'" data-name="').concat(e.name,'" data-id="').concat(e.id,'" data-status="').concat(e.status,'" data-conflict-type="name">\n                        <option value="rename" selected data-i18n-dynamic="createNewTypeWithImportedSuffix" data-i18n-params=\'{"type":"').concat(Et(e).toLowerCase(),'","name":"').concat(e.name,'","id":"').concat(e.id,"\"}'>Create new ").concat(Et(e),' "').concat(e.name,' (imported...)" with ID: ').concat(e.id,'</option>\n                        <option value="keep" data-i18n-dynamic="skipImportUseExistingType" data-i18n-params=\'{"name":"').concat(e.name,'","type":"').concat(Et(e).toLowerCase(),'"}\'>Skip import, use existing "').concat(e.name,'" ').concat(Et(e),"</option>\n                    </select>          \n                "))}else t='<div class="conflict-badges"><span class="conflict-badge new-item" data-i18n="newDependency">New</span></div>',n='\n                <select name="dependency-choice-'.concat(e.type,"-").concat(e.name,'" data-type="').concat(e.type,'" data-name="').concat(e.name,'" data-id="').concat(e.id,'" data-status="').concat(e.status,'" data-conflict-type="none" disabled>\n                    <option value="createNew" selected data-i18n-dynamic="createNewType" data-i18n-params=\'{"type":"').concat(Et(e).toLowerCase(),"\"}'>Create new ").concat(Et(e),"</option>\n                </select>\n            ");return'\n            <tr data-type="'.concat(e.type,'" data-name="').concat(e.name,'" data-id="').concat(e.id,'" data-status="').concat(e.status,'">\n                <td>\n                    <span class="type-badge ').concat(Et(e),'">').concat(Et(e),'</span>\n                </td>\n                <td class="dependency-id">').concat(e.id||"",'</td>\n                <td class="dependency-name">').concat(e.name||'<span data-i18n="unknown">Unknown</span>','</td>\n                <td class="dependency-status">').concat(t,'</td>\n                <td class="dependency-action">\n                    ').concat(n,"\n                </td>\n            </tr>\n        ")}).join(""),i="",a="";return t&&n?(i="The team you're importing contains both new dependencies and dependencies that already exist in the database. Please choose how to handle the conflicts:",a="dependencyMixedText"):t?(i="The team you're importing contains dependencies that already exist in the database. Please choose how to handle each conflict:",a="dependencyConflictsText"):(i="The team you're importing contains new dependencies that will be created:",a="dependencyNewText"),'\n        <div class="row">\n            <p data-i18n="'.concat(a,'">').concat(i,"</p>\n        </div>\n        \n        ").concat(t?'\n        <div class="row">\n            <button class="set-all-overwrite primary-button" data-i18n="setAllOverwrite">Set All Conflicts to Overwrite</button>\n            <button class="set-all-keep secondary-button" data-i18n="setAllKeep">Set All Conflicts to Keep Current</button>\n        </div>\n        ':"",'\n        \n        <div class="row">\n            <div class="dependencies-table-container">\n                <table class="dependencies-table">\n                    <thead>\n                        <tr>\n                            <th data-i18n="type">Type</th>\n                            <th data-i18n="id">ID</th>\n                            <th data-i18n="name">Name</th>\n                            <th data-i18n="status">Status</th>\n                            <th data-i18n="action">Action</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ').concat(r,"\n                    </tbody>\n                </table>\n            </div>\n        </div>\n       \n        ").concat(t?'\n        <div class="overwrite-warning status-message warning hide">\n            <span data-i18n="overwriteWarning">Warning: Replacing existing dependencies is irreversible.</span>\n        </div>\n        ':"",'\n        \n        <div class="form-actions">\n            <button class="secondary-button cancel-import" data-i18n="cancel">Cancel</button>\n            <button class="primary-button proceed-import" data-i18n="proceedWithImport">\n                <span class="spinner spinner-s hide"></span>\n                <span data-i18n="proceedWithImport">Proceed with Import</span>\n            </button>\n        </div>\n    ')}function Ke(e,t,n,r){var i=e.querySelector(".modal-content"),a=i.querySelector(".overwrite-warning"),o=i.querySelector(".set-all-overwrite"),s=i.querySelector(".set-all-keep");o&&o.addEventListener("click",function(){!function(e,t,n){var r=n.map(function(e){return'select[data-conflict-type="'.concat(e,'"]')}).join(", "),i=t.querySelectorAll(r);i.forEach(function(t){!t.disabled&&t.querySelector('option[value="'.concat(e,'"]'))&&(t.value=e)})}("overwrite",i,["id","both"]),Xe(i)}),s&&s.addEventListener("click",function(){!function(e,t){var n=t.querySelectorAll('select[name^="dependency-choice"][data-status="conflict"]');n.forEach(function(t){t.disabled||(t.value=e)})}("keep",i),Xe(i)}),function(e){var t=e.querySelectorAll('select[name^="dependency-choice"]');t.forEach(function(t){t.addEventListener("change",function(){Xe(e)})})}(i);var c=function(){e.remove(),r(null)};i.querySelector(".cancel-import").addEventListener("click",c);var l=i.querySelector(".close-button");l&&l.addEventListener("click",c);var u=!1;i.querySelector(".proceed-import").addEventListener("click",A(m().m(function a(){var o,s,c,l,d,p,f;return m().w(function(a){for(;;)switch(a.p=a.n){case 0:if(!u){a.n=1;break}return a.a(2);case 1:return u=!0,o=i.querySelector(".proceed-import"),s=i.querySelector(".cancel-import"),c=o.querySelector(".spinner"),o.disabled=!0,s.disabled=!0,c.classList.remove("hide"),a.p=2,l=Ze(t,i),a.n=3,et(l,t,n);case 3:if(a.v){a.n=4;break}throw(d=TeamErrorHandler).showError.apply(d,h(TeamErrorCodes.DEPENDENCY_PROCESSING_FAILED)),new Error("Dependency processing failed");case 4:return a.n=5,nt(n,l,t);case 5:return p=a.v,a.n=6,xt();case 6:e.remove(),r({userChoices:l,team:p}),a.n=8;break;case 7:a.p=7,a.v,(f=TeamErrorHandler).showError.apply(f,h(TeamErrorCodes.DEPENDENCY_PROCESSING_FAILED)),o.disabled=!1,s.disabled=!1,c.classList.add("hide"),u=!1;case 8:return a.a(2)}},a,null,[[2,7]])}))),a&&Xe(i)}function Xe(e){var t=e.querySelector(".overwrite-warning"),n=e.querySelectorAll('select[name^="dependency-choice"]'),r=Array.from(n).some(function(e){return"overwrite"===e.value});t.classList.toggle("hide",!r)}function Ze(e,t){var n={};return e.forEach(function(e){var r=t.querySelector('select[data-type="'.concat(e.type,'"][data-name="').concat(e.name,'"][data-id="').concat(e.id,'"]')),i="".concat(e.type,":").concat(e.id);"new"===e.status?n[i]="createNew":n[i]=r.value}),n}function et(e,t,n){return tt.apply(this,arguments)}function tt(){return(tt=A(m().m(function e(t,n,r){var i,a,o,s,c,l,u,d,p,f,h,y,v,b,E,w,T,I,A,O,N,R,x,L,C,k,D,$,P,M,U,F,z;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(utils.debugLog("Processing dependencies..."),n&&Array.isArray(n)){e.n=1;break}throw new Error("Invalid dependencyItems: expected array but got ".concat(S(n)));case 1:i={ids:{measure:new Set,profile:new Set,tool:new Set,action:new Set},names:{measure:new Set,profile:new Set,tool:new Set,action:new Set},measureIds:new Set},a=[],o=g(n),e.p=2,o.s();case 3:if((s=o.n()).done){e.n=20;break}if(c=s.value,l="".concat(c.type,":").concat(c.id),"keep"!==(u=t[l])){e.n=4;break}return utils.debugLog("Keeping existing ".concat(c.type,": ").concat(c.name)),c.type&&c.id&&i.ids[c.type]&&i.ids[c.type].add(c.id),c.type&&c.name&&i.names[c.type]&&i.names[c.type].add(c.name),c.measure_id&&i.measureIds&&i.measureIds.add(c.measure_id),e.a(3,19);case 4:if((d=_({},c.data||c)).active||(d.active=!0),d.author||(d.author=j.CURRENT_USER),p=null,"overwrite"!==u){e.n=5;break}p={type:"overwrite",dependency:c,data:d},e.n=18;break;case 5:if("generateNew"!==u){e.n=10;break}return e.n=6,yt(c,i);case 6:return h=e.v,e.n=7,dt(c.name,c.type,i);case 7:if(y=e.v,v=c.measure_id,!c.measure_id||null===(f=c.conflicts)||void 0===f||!f.includes("measureIdAlreadyExists")){e.n=9;break}return b=c.measure_id.replace(/_\d+$/,""),e.n=8,lt(b,i);case 8:v=e.v;case 9:E=_(_({},d),{},{name:y},v!==c.measure_id&&{measure_id:v}),Object.assign(c,{newId:h,newName:y,newMeasureId:v}),p={type:"create",dependency:_(_({},c),{},{newId:h,name:y}),data:E},e.n=18;break;case 10:if("rename"!==u){e.n=12;break}return e.n=11,dt(c.name,c.type,i);case 11:F=e.v,e.n=13;break;case 12:F=c.name;case 13:if(T=(w=F)!==c.name?_(_({},d),{},{name:w}):d,"createNew"!==u){e.n=17;break}if(null===(I=c.conflicts)||void 0===I||!I.includes("idAlreadyExists")){e.n=15;break}return e.n=14,yt(c,i);case 14:O=e.v,T=_(_({},T),{},{id:O}),c.newId=O;case 15:if("measure"!==c.type||!c.measure_id||null===(A=c.conflicts)||void 0===A||!A.includes("measureIdAlreadyExists")){e.n=17;break}return N=c.measure_id.replace(/_\d+$/,""),e.n=16,lt(N,i);case 16:R=e.v,T=_(_({},T),{},{measure_id:R}),c.newMeasureId=R;case 17:w!==c.name&&(c.newName=w),p={type:"create",dependency:_(_({},c),{},{name:w}),data:T};case 18:p&&(x=p.dependency,L=x.newId||x.id,C=x.newName||x.name,i.ids[c.type]&&i.ids[c.type].add(L),i.names[c.type]&&i.names[c.type].add(C),x.newMeasureId&&i.measureIds&&i.measureIds.add(x.newMeasureId)),p&&(utils.debugLog("[DEBUG-OP] Adding operation: ".concat(p.type," for ").concat(Et(p.dependency),' "').concat(p.dependency.name,'" (').concat(p.dependency.id,")")),a.push(p));case 19:e.n=3;break;case 20:e.n=22;break;case 21:e.p=21,z=e.v,o.e(z);case 22:return e.p=22,o.f(),e.f(22);case 23:k={},utils.debugLog("Building reference map for dependency operations..."),D=g(n);try{for(D.s();!($=D.n()).done;)P=$.value,M="".concat(P.type,":").concat(P.id),"generateNew"===(U=t[M])?(P.id&&P.newId&&(k[P.id]=P.newId),P.name&&P.newName&&(k[P.name]=P.newName),"measure"===P.type&&P.measure_id&&P.newMeasureId?k[P.measure_id]=P.newMeasureId:"profile"===P.type&&P.profile_id&&P.newId&&(k[P.profile_id]=P.newId)):"rename"===U&&P.name&&P.newName&&(k[P.name]=P.newName)}catch(e){D.e(e)}finally{D.f()}if(utils.debugLog("Final reference map for operations:",k),0!==a.length){e.n=24;break}return utils.debugLog("No dependency operations to execute"),e.a(2,!0);case 24:return e.p=24,e.n=25,wt(a,k);case 25:return utils.debugLog("All dependency operations completed successfully"),e.a(2,!0);case 26:return e.p=26,e.v,e.a(2,!1)}},e,null,[[24,26],[2,21,22,23]])}))).apply(this,arguments)}function nt(e,t,n){return rt.apply(this,arguments)}function rt(){return(rt=A(m().m(function e(t,n,r){var i,a,o,s,c,l,u,d,f,h,y,v,_,b,E,w,T,S,I,A,O;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=JSON.parse(JSON.stringify(t)),a={},o=r.some(function(e){return"measure"===e.type}),!o){e.n=2;break}return e.n=1,ce();case 1:e.v;case 2:s=g(r);try{for(s.s();!(c=s.n()).done;)l=c.value,u="".concat(l.type,":").concat(l.id),"generateNew"===(d=n[u])?(f=l.newId,h=l.newName||l.name,y=l.newMeasureId,l.id&&(a[l.id]=f),l.name&&(a[l.name]=h),"profile"===l.type&&l.profile_id?a[l.profile_id]=f:"measure"===l.type?(l.measure_id&&y&&(a[l.measure_id]=y),l.id&&f&&l.id!==f&&(a[l.id]=f)):"action"===l.type&&l.action_id?a[l.action_id]=f:"tool"===l.type&&l.tool_id&&(a[l.tool_id]=f)):"rename"===d?(v=l.newName,l.name&&v&&(a[l.name]=v),"measure"===l.type&&l.measure_id&&(a[l.measure_id]=l.measure_id)):"createNew"===d&&(_=l.newId,b=l.newName||l.name,l.id&&_&&(a[l.id]=_),l.name&&b&&l.name!==b&&(a[l.name]=b),"profile"===l.type&&l.profile_id&&_?a[l.profile_id]=_:"measure"===l.type?(E=l.newMeasureId||l.measure_id,l.measure_id&&E&&(a[l.measure_id]=E),l.id&&_&&l.id!==_&&(a[l.id]=_)):"action"===l.type&&l.id&&_||"tool"===l.type&&l.id)}catch(e){s.e(e)}finally{s.f()}if(!(i&&i.objective_function&&i.objective_function.formula)){e.n=10;break}if(w=i.objective_function.formula,!(T=w.match(/\(([^)]+)\)/g))){e.n=10;break}S=g(T),e.p=3,A=m().m(function e(){var t,o,s,c,l,u,d,p;return m().w(function(e){for(;;)switch(e.n){case 0:if(t=I.value,o=t.slice(1,-1),!a[o]){e.n=1;break}return e.a(2,1);case 1:i.objective_function.components&&(s=i.objective_function.components.find(function(e){return e.name===o}))&&i.objective_function.measures&&(c=i.objective_function.components.indexOf(s),(l=i.objective_function.measures[c])&&(u=r.find(function(e){return"measure"===e.type&&e.id===l.id}),u&&(d=n["".concat(u.type,":").concat(u.id)],p=l.measure_id,"generateNew"===d||"createNew"===d?p=u.newMeasureId||u.measure_id:"rename"===d?p=u.measure_id:"overwrite"===d&&(p=l.measure_id),p&&p!==o&&(a[o]=p))));case 2:return e.a(2)}},e)}),S.s();case 4:if((I=S.n()).done){e.n=7;break}return e.d(p(A()),5);case 5:if(!e.v){e.n=6;break}return e.a(3,6);case 6:e.n=4;break;case 7:e.n=9;break;case 8:e.p=8,O=e.v,S.e(O);case 9:return e.p=9,S.f(),e.f(9);case 10:return Object.keys(a).length>0&&(utils.debugLog("[IMPORT] Updating team object references"),at(i,a),utils.debugLog("[IMPORT] Team object references updated")),it(i,r,n),e.a(2,i)}},e,null,[[3,8,9,10]])}))).apply(this,arguments)}function it(e,t,n){if(e.agents&&Array.isArray(e.agents)){var r=new Map;t.forEach(function(e){var t="".concat(e.type,":").concat(e.id);n[t]&&e.newId&&e.newId!==e.id&&("tool"!==e.type&&"action"!==e.type||r.set(e.id,e.newId))}),e.agents.forEach(function(e,t){if(e.selected_tools&&Array.isArray(e.selected_tools)){var n=e.selected_tools.length;e.selected_tools=e.selected_tools.map(function(e){var t=r.get(e);return t?(utils.debugLog("[IMPORT] Remapping tool ID: ".concat(e," -> ").concat(t)),t):e}),utils.debugLog("[IMPORT] Agent ".concat(t,": Tools updated ").concat(n," -> ").concat(e.selected_tools.length))}if(e.selected_actions&&Array.isArray(e.selected_actions)){var i=e.selected_actions.length;e.selected_actions=e.selected_actions.map(function(e){var t=r.get(e);return t?(utils.debugLog("[IMPORT] Remapping action ID: ".concat(e," -> ").concat(t)),t):e}),utils.debugLog("[IMPORT] Agent ".concat(t,": Actions updated ").concat(i," -> ").concat(e.selected_actions.length))}})}}function at(e,t){if(e&&"object"===S(e))if(Array.isArray(e))for(var n=0;n<e.length;n++)"string"==typeof e[n]&&t[e[n]]?e[n]=t[e[n]]:"object"===S(e[n])&&at(e[n],t);else for(var r=0,i=Object.entries(e);r<i.length;r++){var a=E(i[r],2),o=a[0],s=a[1];if("string"==typeof s)t[s]?e[o]=t[s]:"formula"===o&&s.includes("(")?e[o]=st(s,t):"impact_measures"===o&&s.startsWith("[")&&(e[o]=ot(s,t));else if(Array.isArray(s)){if("components"===o)s.forEach(function(e){e&&e.name&&t[e.name]&&(e.name=t[e.name])});else if("selected_tools"===o||"selected_actions"===o)for(var c=0;c<s.length;c++)"string"==typeof s[c]&&t[s[c]]&&(s[c]=t[s[c]]);at(s,t)}else"object"===S(s)&&at(s,t)}}function ot(e,t){try{var n=JSON.parse(e),r=!1;return Array.isArray(n)&&n.forEach(function(e){e&&e.measure_id&&t[e.measure_id]&&(e.measure_id=t[e.measure_id],r=!0)}),r?JSON.stringify(n):e}catch(t){return e}}function st(e,t){for(var n=e,r=0,i=Object.entries(t);r<i.length;r++){var a=E(i[r],2),o=a[0],s=a[1],c=new RegExp("\\(".concat(ct(o),"\\)"),"g");n=n.replace(c,"(".concat(s,")"))}return n}function ct(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lt(e){return ut.apply(this,arguments)}function ut(){return ut=A(m().m(function e(t){var n,r,i,a,o,s,c,l,u,d,p,f,h,y,v,_,b,E=arguments;return m().w(function(e){for(;;)switch(e.n){case 0:return n=E.length>1&&void 0!==E[1]?E[1]:null,r=t.toLowerCase().replace(/[^a-z0-9_]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),i=$.getQuery("CHECK_MEASURE_ID_EXISTS"),e.n=1,$.executeRead(i,{measureId:r});case 1:return a=e.v,o=a&&a.length>0&&a[0].exists,s=$.getQuery("GET_LATEST_MEASURE_ID"),e.n=2,$.executeRead(s,{baseMeasureId:r});case 2:if(c=e.v,o||(o=c&&c.length>0),!o&&n&&n.measureIds&&(o=n.measureIds.has(r)),o){e.n=3;break}return n&&n.measureIds&&n.measureIds.add(r),e.a(2,r);case 3:if(l=0,c&&c.length>0&&((u=c[0].measure_id)===r?l=0:(d=u.match(/^(.+?)_(\d+)$/))&&d[1]===r&&(l=parseInt(d[2],10))),n&&n.measureIds){p=g(n.measureIds);try{for(p.s();!(f=p.n()).done;)(h=f.value)===r?l=Math.max(l,0):(y=h.match(/^(.+?)_(\d+)$/))&&y[1]===r&&(v=parseInt(y[2],10),l=Math.max(l,v))}catch(e){p.e(e)}finally{p.f()}}return _=l+1,b="".concat(r,"_").concat(_),n&&n.measureIds&&n.measureIds.add(b),e.a(2,b)}},e)})),ut.apply(this,arguments)}function dt(e,t){return pt.apply(this,arguments)}function pt(){return pt=A(m().m(function e(t,n){var r,i,a,o,s,c,l,u,d,p,f,y,v,_,b=arguments;return m().w(function(e){for(;;)switch(e.n){case 0:return r=b.length>2&&void 0!==b[2]?b[2]:null,i=t.replace(/ \(imported( \d+)?\)$/,""),e.n=1,ft(i,n);case 1:a=e.v,o=null!=r&&r.names[n]?Array.from(r.names[n]):[],s=new Set([].concat(h(a),h(o))),c=0,l=new RegExp("^".concat(mt(i)," \\(imported( (\\d+))?\\)$")),u=g(s);try{for(u.s();!(d=u.n()).done;)p=d.value,(f=p.match(l))&&(y=f[2]?parseInt(f[2],10):1,c=Math.max(c,y))}catch(e){u.e(e)}finally{u.f()}return _=1===(v=c+1)?"".concat(i," (imported)"):"".concat(i," (imported ").concat(v,")"),null!=r&&r.names[n]&&r.names[n].add(_),e.a(2,_)}},e)})),pt.apply(this,arguments)}function ft(e,t){return ht.apply(this,arguments)}function ht(){return(ht=A(m().m(function e(t,n){var r,i,a,o,s,c,l;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:i="".concat(t),l=n,e.n="measure"===l?1:"profile"===l?2:"action"===l?3:"tool"===l?4:5;break;case 1:return r="GET_NAMES_WITH_PATTERN_MEASURE",e.a(3,6);case 2:return r="GET_NAMES_WITH_PATTERN_PROFILE",e.a(3,6);case 3:return r="GET_NAMES_WITH_PATTERN_ACTION",e.a(3,6);case 4:return r="GET_NAMES_WITH_PATTERN_TOOL",e.a(3,6);case 5:return e.a(2,[]);case 6:return e.p=6,a=$.getQuery(r),e.n=7,$.executeRead(a,{searchPattern:i});case 7:return o=e.v,s=new RegExp("^".concat(mt(t),"$")),c=new RegExp("^".concat(mt(t)," \\(imported( \\d+)?\\)$")),e.a(2,o.map(function(e){return e.name}).filter(function(e){return e&&(s.test(e)||c.test(e))}));case 8:return e.p=8,e.v,e.a(2,[])}},e,null,[[6,8]])}))).apply(this,arguments)}function mt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function yt(e){return gt.apply(this,arguments)}function gt(){return gt=A(m().m(function e(t){var n,r,i,a,o=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:n=o.length>1&&void 0!==o[1]?o[1]:null,e.p=1,a=t.type,e.n="measure"===a||"profile"===a||"tool"===a||"action"===a?2:4;break;case 2:return e.n=3,_t(t.type,t.id,n);case 3:return e.a(2,e.v);case 4:return r="".concat(t.id,"_imported_").concat(Date.now()),n&&n.ids[t.type]&&n.ids[t.type].add(r),e.a(2,r);case 5:e.n=7;break;case 6:return e.p=6,e.v,i="".concat(t.id,"_imported_").concat(Date.now()),n&&n.ids[t.type]&&n.ids[t.type].add(i),e.a(2,i);case 7:return e.a(2)}},e,null,[[1,6]])})),gt.apply(this,arguments)}window.showError=te,window.showMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,r=document.querySelector(".team-editor");if(!r)return;var i=document.createElement("div");i.className="status-message ".concat(t),i.setAttribute("role","status"),i.textContent=e,r.insertBefore(i,r.firstChild),setTimeout(function(){return i.remove()},n)},window.scrollToTop=er,window.loadConfig=ne,window.onValueMappingLoaded=function(e){if(D)return;D=!0,ne(e),function(){ur.apply(this,arguments)}()};var vt={measure:{fallbackPrefix:"GEN-MEAS-MEASURE",queryName:"GET_LATEST_MEASURE",resultField:"id",allocatedIdsField:"measure"},profile:{fallbackPrefix:"GEN-PROF-PROFILE",queryName:"GET_LATEST_PROFILE",resultField:"profile_id",allocatedIdsField:"profile"},tool:{fallbackPrefix:"GEN-TOOL-TOOL",queryName:"GET_LATEST_TOOL",resultField:"id",allocatedIdsField:"tool"},action:{fallbackPrefix:"GEN-ACTION-ACTION",queryName:"GET_LATEST_ACTION",resultField:"id",allocatedIdsField:"action"}};function _t(e,t){return bt.apply(this,arguments)}function bt(){return bt=A(m().m(function e(t,n){var r,i,a,o,s,c,l,u,d,p,f,h,y,v,_,b,E=arguments;return m().w(function(e){for(;;)switch(e.n){case 0:if(a=E.length>2&&void 0!==E[2]?E[2]:null,o=vt[t]){e.n=1;break}throw new Error("Unknown entity type: ".concat(t));case 1:return s=n.split("-"),c=4===s.length?"".concat(s[0].toUpperCase().slice(0,8).padEnd(3,"X"),"-").concat(s[1].toUpperCase().slice(0,8).padEnd(3,"X"),"-").concat(s[2]):o.fallbackPrefix,l=$.getQuery(o.queryName),e.n=2,$.executeRead(l,{baseId:c});case 2:if(u=e.v,d=0,null!=u&&null!==(r=u[0])&&void 0!==r&&r[o.resultField]&&(p=u[0][o.resultField].split("-"),f=parseInt(p[p.length-1],10),isNaN(f)||(d=f)),null!=a&&a.ids[o.allocatedIdsField]){h=g(a.ids[o.allocatedIdsField]);try{for(h.s();!(y=h.n()).done;)(v=y.value).startsWith(c+"-")&&(_=parseInt(v.split("-").pop(),10),isNaN(_)||(d=Math.max(d,_)))}catch(e){h.e(e)}finally{h.f()}}return b="".concat(c,"-").concat((d+1).toString().padStart(3,"0")),null==a||null===(i=a.ids[o.allocatedIdsField])||void 0===i||i.add(b),e.a(2,b)}},e)})),bt.apply(this,arguments)}function Et(e){if(void 0!==e.measure_id)return"measure";if(void 0!==e.profile_id)return"profile";if(void 0!==e.action_id)return"action";if(void 0!==e.tool_id||void 0!==e.class_name)return"tool";if(["measure","profile","action","tool"].includes(e.type))return e.type;if(e.id&&e.name){if(e.data&&e.data.measure_id)return"measure";if(e.data&&e.data.profile_id)return"profile";if(e.data&&e.data.action_id)return"action";if(e.data&&e.data.tool_id)return"tool"}throw new Error("Unable to determine dependency type for object: ".concat(JSON.stringify(e,null,2)))}function wt(e){return Tt.apply(this,arguments)}function Tt(){return Tt=A(m().m(function e(t){var n,r,i,a,o=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},utils.debugLog("Executing ".concat(t.length," dependency operations...")),r={measure:1,action:2,tool:3,profile:4},t.sort(function(e,t){var n=Et(e.dependency),i=Et(t.dependency);return(r[n]||999)-(r[i]||999)}),utils.debugLog("[IMPORT] Sorted operations by dependency type"),i={},t.forEach(function(e){var t="".concat(Et(e.dependency),":").concat(e.dependency.id);i[t]=(i[t]||0)+1}),e.n=1,$.startTransaction();case 1:return a=e.v,utils.debugLog("[MEASURE_TRACKING] ============ DEPENDENCY TRANSACTION STARTED ============"),e.p=2,e.n=3,$.executeInTransaction(a,function(){var e=A(m().m(function e(r){var i,a,o,s,c,l,u,d;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:utils.debugLog("Phase 1: Creating entities..."),i=g(t),e.p=1,i.s();case 2:if((a=i.n()).done){e.n=8;break}if(o=a.value,s=o.type,c=o.dependency,l=o.data,u=Et(c),utils.debugLog("".concat(s,": ").concat(u," - ").concat(c.name)),"overwrite"!==s){e.n=4;break}return e.n=3,At(c,l,r);case 3:e.n=7;break;case 4:if("create"!==s){e.n=6;break}return e.n=5,Nt(c,l,r);case 5:e.n=7;break;case 6:throw new Error("Unknown operation type: ".concat(s));case 7:e.n=2;break;case 8:e.n=10;break;case 9:e.p=9,d=e.v,i.e(d);case 10:return e.p=10,i.f(),e.f(10);case 11:return utils.debugLog("Phase 2: Creating profile relationships..."),e.n=12,St(t,n,r);case 12:return e.a(2)}},e,null,[[1,9,10,11]])}));return function(t){return e.apply(this,arguments)}}());case 3:return utils.debugLog("[MEASURE_TRACKING] ============ DEPENDENCY TRANSACTION COMPLETED ============"),utils.debugLog("Transaction completed successfully"),e.a(2,!0);case 4:throw e.p=4,e.v;case 5:return e.p=5,e.n=6,$.endTransaction(a);case 6:return e.f(5);case 7:return e.a(2)}},e,null,[[2,4,5,7]])})),Tt.apply(this,arguments)}function St(e,t,n){return It.apply(this,arguments)}function It(){return(It=A(m().m(function e(t,n,r){var i,a,o,s;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:utils.debugLog("Creating profile relationships with reference map:",n),i=g(t),e.p=1,o=m().m(function e(){var t,i,o,s,c,l,u,d,p,f,h,y;return m().w(function(e){for(;;)switch(e.n){case 0:if(t=a.value,t.type,i=t.dependency,o=t.data,"profile"===Et(i)){e.n=1;break}return e.a(2,1);case 1:if(s=i.newId||i.id,!(o.allowed_tools&&o.allowed_tools.length>0)){e.n=3;break}if(!((c=o.allowed_tools.map(function(e){return n[e]||e}).filter(function(e){return e})).length>0)){e.n=3;break}return l=$.getQuery("ADD_PROFILE_TOOL_RELATIONSHIPS"),e.n=2,$.executeWrite(l,{profileId:s,toolIds:c},r);case 2:(u=e.v)&&u.length>0&&(d=u[0]).missingToolIds&&d.missingToolIds.length>0&&d.missingToolIds.forEach(function(e){e&&utils.debugLog("Skipping ALLOWS_TOOL relationship: tool ".concat(e," not found for profile ").concat(s))});case 3:if(!(o.allowed_actions&&o.allowed_actions.length>0)){e.n=5;break}if(!((p=o.allowed_actions.map(function(e){return n[e]||e}).filter(function(e){return e})).length>0)){e.n=5;break}return f=$.getQuery("ADD_PROFILE_ACTION_RELATIONSHIPS"),e.n=4,$.executeWrite(f,{profileId:s,actionIds:p},r);case 4:(h=e.v)&&h.length>0&&(y=h[0]).missingActionIds&&y.missingActionIds.length>0&&y.missingActionIds.forEach(function(e){e&&utils.debugLog("Skipping ALLOWS_ACTION relationship: action ".concat(e," not found for profile ").concat(s))});case 5:return e.a(2)}},e)}),i.s();case 2:if((a=i.n()).done){e.n=5;break}return e.d(p(o()),3);case 3:if(!e.v){e.n=4;break}return e.a(3,4);case 4:e.n=2;break;case 5:e.n=7;break;case 6:e.p=6,s=e.v,i.e(s);case 7:return e.p=7,i.f(),e.f(7);case 8:return e.a(2)}},e,null,[[1,6,7,8]])}))).apply(this,arguments)}function At(e,t,n){return Ot.apply(this,arguments)}function Ot(){return(Ot=A(m().m(function e(t,n,r){var i,a,o,s,c,l,u,p,h,y,v,E,w,T,S,I,A,O,N,R,x,L,C,k,D,P,M,U,F,z,B,H,V,W,G,q,J,Y,Q,X,ee,te,ne,re,ie,ae,oe,se,ce,le,ue,de,pe,fe,he,me;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:a=(new Date).toISOString(),o=Et(t),s=null,e.p=1,de=o,e.n="measure"===de?2:"profile"===de?3:"tool"===de?4:"action"===de?12:20;break;case 2:return s=Z.find(function(e){return e.id===t.id}),e.a(3,20);case 3:return s=K.find(function(e){return e.profile_id===t.id}),e.a(3,20);case 4:c=g(K),e.p=5,c.s();case 6:if((l=c.n()).done){e.n=8;break}if(!(u=l.value).allowed_tools){e.n=7;break}if(!(p=u.allowed_tools.find(function(e){return e.id===t.id}))){e.n=7;break}return s=p,e.a(3,8);case 7:e.n=6;break;case 8:e.n=10;break;case 9:e.p=9,pe=e.v,c.e(pe);case 10:return e.p=10,c.f(),e.f(10);case 11:return e.a(3,20);case 12:h=g(K),e.p=13,h.s();case 14:if((y=h.n()).done){e.n=16;break}if(!(v=y.value).allowed_actions){e.n=15;break}if(!(E=v.allowed_actions.find(function(e){return e.id===t.id}))){e.n=15;break}return s=E,e.a(3,16);case 15:e.n=14;break;case 16:e.n=18;break;case 17:e.p=17,fe=e.v,h.e(fe);case 18:return e.p=18,h.f(),e.f(18);case 19:return e.a(3,20);case 20:e.n=22;break;case 21:e.p=21,e.v;case 22:he=o,e.n="measure"===he?23:"profile"===he?26:"tool"===he?35:"action"===he?38:50;break;case 23:return n.measure_id,w=f(n,d),T=_(_({},w),{},(b(b(b(b(b(b(b(b(b(b(i={id:t.id,last_modified_date:a,author:j.CURRENT_USER,name:n.name||t.name,description:n.description||"Imported measure: ".concat(n.name||t.name),type:n.type||"Base",domain:n.domain||"Performance",category:n.category||"General",version:n.version||1,safety_critical:void 0!==n.safety_critical&&n.safety_critical,unit:n.unit||n.unit_of_measure||"unit",data_source_id:n.data_source_id||"IMPORTED"},"version",n.version||1),"active",void 0===n.active||n.active),"measurement_type","Base"===n.type?n.measurement_type||"external_data":null),"sampling_rate","Base"===n.type?n.sampling_rate||"daily":null),"precision","Base"===n.type?n.precision||2:null),"validation_rules","Base"===n.type?n.validation_rules||"{}":null),"alarm_thresholds","Base"===n.type?n.alarm_thresholds||"{}":null),"calculation_type","Calculated"===n.type&&n.calculation_type||null),"normalization_method","Calculated"===n.type&&n.normalization_method||null),"update_frequency","Calculated"===n.type&&n.update_frequency||null),b(b(b(b(b(b(b(b(i,"aggregation_window","Calculated"===n.type&&n.aggregation_window||null),"input_metrics","Calculated"===n.type&&n.input_metrics||null),"formula","Calculated"===n.type&&n.formula||null),"tool_id","Tool"===n.type&&n.tool_id||null),"confidence_threshold","Tool"===n.type&&n.confidence_threshold||null),"formula_documentation","Tool"===n.type&&n.formula_documentation||null),"output_mapping","Tool"===n.type&&n.output_mapping||null),"tool_parameters","Tool"===n.type&&n.tool_parameters||null))),S=$.getQuery("UPDATE_MEASURE"),utils.debugLog("[MEASURE_TRACKING] OVERWRITING measure: ID=".concat(T.id,", measure_id=").concat(T.measure_id,", name=").concat(T.name)),e.n=24,$.executeWrite(S,T,r);case 24:return I=s?Re(s,T):null,A={measureId:t.id,currentUser:j.CURRENT_USER,stringifiedChanges:I&&Object.keys(I).length>0?JSON.stringify(I):JSON.stringify({action:"overwrite",entity:"measure",updatedFields:T}),audit_created_date:a,entry_created_date:a,auditId:crypto.randomUUID(),entryId:crypto.randomUUID(),timestamp:Math.floor(Date.now()/1e3)},O=$.getQuery("WRITE_MEASURE_AUDIT_INFO"),e.n=25,$.executeWrite(O,A,r);case 25:return e.a(3,51);case 26:return N=_(_({},n),{},{profileId:t.id,profile_id:t.id,last_modified_date:a,author:j.CURRENT_USER,name:n.name||t.name||"Imported Profile",description:n.description||"Imported profile: ".concat(n.name||t.name||"Unknown"),active:void 0===n.active||n.active,experience:n.experience||"",skills:n.skills||"[]",observation_prompt:n.observation_prompt||"",reflection_prompt:n.reflection_prompt||"",model_provider:n.model_provider||"OpenAI",model_name:n.model_name||"gpt-4",max_tokens:n.max_tokens||4096,organizational_rules:n.organizational_rules||"[]",deontic_rules:n.deontic_rules||"[]",allowed_planning_method:n.allowed_planning_method||"[]",use_general_rag:void 0!==n.use_general_rag&&n.use_general_rag,rag_collection_name:n.rag_collection_name||"",rag_top_k:n.rag_top_k||10,rag_vector_size:n.rag_vector_size||1536,memory_parameters:n.memory_parameters||JSON.stringify({reflection_importance_threshold:.7,memory_decay_factor:.01,max_recent_memories:10}),decision_parameters:n.decision_parameters||"{}",system_prompt:n.system_prompt||"",category:n.category||"General",tags:n.tags||"[]",created_date:n.created_date||a}),R=$.getQuery("UPDATE_PROFILE"),e.n=27,$.executeWrite(R,N,r);case 27:if(!n.allowed_tools){e.n=30;break}return x=$.getQuery("REMOVE_PROFILE_TOOL_RELATIONSHIPS"),e.n=28,$.executeWrite(x,{profileId:t.id},r);case 28:if(!(n.allowed_tools.length>0)){e.n=30;break}return L=$.getQuery("ADD_PROFILE_TOOL_RELATIONSHIPS"),e.n=29,$.executeWrite(L,{profileId:t.id,toolIds:n.allowed_tools},r);case 29:(C=e.v)&&C.length>0&&(k=C[0]).missingToolIds&&k.missingToolIds.length>0&&k.missingToolIds.forEach(function(e){e&&utils.debugLog("Skipping ALLOWS_TOOL relationship: tool ".concat(e," not found for profile ").concat(t.id))});case 30:if(!n.allowed_actions){e.n=33;break}return D=$.getQuery("REMOVE_PROFILE_ACTION_RELATIONSHIPS"),e.n=31,$.executeWrite(D,{profileId:t.id},r);case 31:if(!(n.allowed_actions.length>0)){e.n=33;break}return P=$.getQuery("ADD_PROFILE_ACTION_RELATIONSHIPS"),e.n=32,$.executeWrite(P,{profileId:t.id,actionIds:n.allowed_actions},r);case 32:(M=e.v)&&M.length>0&&(U=M[0]).missingActionIds&&U.missingActionIds.length>0&&U.missingActionIds.forEach(function(e){e&&utils.debugLog("Skipping ALLOWS_ACTION relationship: action ".concat(e," not found for profile ").concat(t.id))});case 33:return F=s?Re(s,N):null,z={profileId:t.id,currentUser:j.CURRENT_USER,stringifiedChanges:F&&Object.keys(F).length>0?JSON.stringify(F):JSON.stringify({action:"overwrite",entity:"profile",updatedFields:N}),audit_created_date:a,entry_created_date:a,auditId:crypto.randomUUID(),entryId:crypto.randomUUID(),timestamp:Math.floor(Date.now()/1e3)},B=$.getQuery("WRITE_PROFILE_AUDIT_INFO"),e.n=34,$.executeWrite(B,z,r);case 34:return e.a(3,51);case 35:return H=_(_({},n),{},{id:t.id,last_modified_date:a,author:j.CURRENT_USER,description:n.description||"Imported tool: ".concat(n.name||t.name),class_name:n.class_name||"XMProDataStreamTool",options:n.options||JSON.stringify({mode:"receive",datastream_name:"",datastream_url:"",address_receive:"",window_seconds:60,keywords:[]}),active:void 0===n.active||n.active}),V="SqlQueryTool"===n.class_name?"UPDATE_SQL_TOOL":"UPDATE_TOOL",W=$.getQuery(V),e.n=36,$.executeWrite(W,H,r);case 36:return G=s?Re(s,H):null,q={toolId:t.id,currentUser:j.CURRENT_USER,stringifiedChanges:G&&Object.keys(G).length>0?JSON.stringify(G):JSON.stringify({action:"overwrite",entity:"tool",updatedFields:H}),audit_created_date:a,entry_created_date:a,auditId:crypto.randomUUID(),entryId:crypto.randomUUID(),timestamp:Math.floor(Date.now()/1e3)},J=$.getQuery("WRITE_TOOL_AUDIT_INFO"),e.n=37,$.executeWrite(J,q,r);case 37:return e.a(3,51);case 38:return Y=_(_({},n),{},{id:t.id,last_modified_date:a,author:j.CURRENT_USER,name:n.name||t.name,description:n.description||"Imported action: ".concat(n.name||t.name),parameters:n.parameters||"[]",operation_requirements:n.operation_requirements||"{}",prerequisites:n.prerequisites||"[]",should_return:void 0===n.should_return||n.should_return,category:n.category||"",version:n.version||1,impact_measures:n.impact_measures||"[]",active:void 0===n.active||n.active}),Q=$.getQuery("UPDATE_ACTION"),e.n=39,$.executeWrite(Q,Y,r);case 39:if(!n.impact_measures){e.n=48;break}return X=$.getQuery("DELETE_ACTION_MEASURE_RELATIONSHIPS"),e.n=40,$.executeWrite(X,{actionId:t.id},r);case 40:ee=Array.isArray(n.impact_measures)?n.impact_measures:JSON.parse(n.impact_measures||"[]"),te=g(ee),e.p=41,te.s();case 42:if((ne=te.n()).done){e.n=45;break}if(re=ne.value,ie=void 0,ae="INCREASE","string"==typeof re?ie=re:re&&re.measure_id&&(ie=re.measure_id,ae=re.impact_type||"INCREASE"),!ie){e.n=44;break}return oe=$.getQuery("CREATE_IMPACT_RELATIONSHIP"),e.n=43,$.executeWrite(oe,{actionId:t.id,measureId:ie,impactType:ae},r);case 43:(se=e.v)&&se.length>0&&!1===se[0].measureExists&&utils.debugLog("Skipping IMPACTS relationship: measure ".concat(ie," not found for action ").concat(t.id));case 44:e.n=42;break;case 45:e.n=47;break;case 46:e.p=46,me=e.v,te.e(me);case 47:return e.p=47,te.f(),e.f(47);case 48:return ce=s?Re(s,Y):null,le={actionId:t.id,currentUser:j.CURRENT_USER,stringifiedChanges:ce&&Object.keys(ce).length>0?JSON.stringify(ce):JSON.stringify({action:"overwrite",entity:"action",updatedFields:Y}),audit_created_date:a,entry_created_date:a,auditId:crypto.randomUUID(),entryId:crypto.randomUUID(),timestamp:Math.floor(Date.now()/1e3)},ue=$.getQuery("WRITE_ACTION_AUDIT_INFO"),e.n=49,$.executeWrite(ue,le,r);case 49:return e.a(3,51);case 50:throw new Error("Unknown dependency type: ".concat(o));case 51:return e.a(2)}},e,null,[[41,46,47,48],[13,17,18,19],[5,9,10,11],[1,21]])}))).apply(this,arguments)}function Nt(e,t,n){return Rt.apply(this,arguments)}function Rt(){return(Rt=A(m().m(function e(t,n,r){var i,a,o,s,c,l,u,d,p,f,h,y,v,E,w,T,S,I,A,O,N,R,x,L;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a=(new Date).toISOString(),o=Et(t),!["measure","tool","action"].includes(o)){e.n=2;break}return s=$.getQuery("CHECK_LIBRARY_EXISTS"),e.n=1,$.executeRead(s,{},r);case 1:if(e.v[0].exists){e.n=2;break}return utils.debugLog("Creating library node..."),c=$.getQuery("CREATE_LIBRARY"),e.n=2,$.executeWrite(c,{created_date:a},r);case 2:x=o,e.n="measure"===x?3:"profile"===x?5:"tool"===x?7:"action"===x?9:19;break;case 3:return l=_(_({},n),{},(b(b(b(b(b(b(b(b(b(b(i={id:t.newId||t.id,measure_id:t.newMeasureId||n.measure_id,created_date:a,last_modified_date:a,author:n.author||j.CURRENT_USER,name:n.name||t.name,description:n.description||"Imported measure: ".concat(n.name||t.name),type:n.type||"Base",domain:n.domain||"Performance",category:n.category||"General",version:n.version||1,safety_critical:void 0!==n.safety_critical&&n.safety_critical,unit:n.unit||n.unit_of_measure||"unit",data_source_id:n.data_source_id||"IMPORTED"},"version",n.version||1),"active",void 0===n.active||n.active),"measurement_type","Base"===n.type?n.measurement_type||"external_data":null),"sampling_rate","Base"===n.type?n.sampling_rate||"daily":null),"precision","Base"===n.type?n.precision||2:null),"validation_rules","Base"===n.type?n.validation_rules||"{}":null),"alarm_thresholds","Base"===n.type?n.alarm_thresholds||"{}":null),"calculation_type","Calculated"===n.type&&n.calculation_type||null),"normalization_method","Calculated"===n.type&&n.normalization_method||null),"update_frequency","Calculated"===n.type&&n.update_frequency||null),b(b(b(b(b(b(b(b(i,"aggregation_window","Calculated"===n.type&&n.aggregation_window||null),"input_metrics","Calculated"===n.type&&n.input_metrics||null),"formula","Calculated"===n.type&&n.formula||null),"tool_id","Tool"===n.type&&n.tool_id||null),"confidence_threshold","Tool"===n.type&&n.confidence_threshold||null),"formula_documentation","Tool"===n.type&&n.formula_documentation||null),"output_mapping","Tool"===n.type&&n.output_mapping||null),"tool_parameters","Tool"===n.type&&n.tool_parameters||null))),u=$.getQuery("INSERT_MEASURE"),utils.debugLog("[MEASURE_TRACKING] CREATING measure: ID=".concat(l.id,", measure_id=").concat(l.measure_id,", name=").concat(l.name)),e.n=4,$.executeWrite(u,l,r);case 4:return e.a(3,20);case 5:return d=_(_({},n),{},{profileId:t.newId||t.id,profile_id:t.newId||t.id,created_date:a,last_modified_date:a,author:n.author||j.CURRENT_USER,description:n.description||"Imported profile: ".concat(n.name||"Unknown"),experience:n.experience||"",skills:n.skills||"[]",observation_prompt:n.observation_prompt||"",reflection_prompt:n.reflection_prompt||"",model_provider:n.model_provider||"OpenAI",organizational_rules:n.organizational_rules||"[]",deontic_rules:n.deontic_rules||"[]",allowed_planning_method:n.allowed_planning_method||"[]",use_general_rag:void 0!==n.use_general_rag&&n.use_general_rag,rag_collection_name:n.rag_collection_name||"",rag_top_k:n.rag_top_k||10,rag_vector_size:n.rag_vector_size||1536,memory_parameters:n.memory_parameters||JSON.stringify({reflection_importance_threshold:.7,memory_decay_factor:.01,max_recent_memories:10}),decision_parameters:n.decision_parameters||"{}",tags:n.tags||"[]",tags_lower:n.tags_lower||"[]"}),p=$.getQuery("INSERT_PROFILE"),e.n=6,$.executeWrite(p,d,r);case 6:return e.a(3,20);case 7:return f=_(_({},n),{},{id:t.newId||t.id,created_date:a,last_modified_date:a,author:n.author||j.CURRENT_USER,name:n.name||t.name,description:n.description||"Imported tool: ".concat(n.name||t.name),class_name:n.class_name||"XMProDataStreamTool",options:n.options||"[]",active:void 0===n.active||n.active}),h="SqlQueryTool"===n.class_name?"INSERT_SQL_TOOL":"INSERT_TOOL",y=$.getQuery(h),e.n=8,$.executeWrite(y,f,r);case 8:return e.a(3,20);case 9:return utils.debugLog('[DEBUG-ACTION] Creating action: "'.concat(t.name,'" with ID: "').concat(t.newId||t.id,'"')),v=_(_({},n),{},{id:t.newId||t.id,created_date:a,last_modified_date:a,author:n.author||j.CURRENT_USER,name:n.name||t.name,description:n.description||"Imported action: ".concat(n.name||t.name),parameters:n.parameters||"[]",operation_requirements:n.operation_requirements||"{}",prerequisites:n.prerequisites||"[]",should_return:void 0===n.should_return||n.should_return,category:n.category||"",version:n.version||1,impact_measures:n.impact_measures||"[]",active:void 0===n.active||n.active}),E=$.getQuery("INSERT_ACTION"),utils.debugLog('[DEBUG-ACTION] Executing INSERT_ACTION for: "'.concat(t.name,'" (').concat(v.id,")")),e.n=10,$.executeWrite(E,v,r);case 10:if(!n.impact_measures){e.n=18;break}w=Array.isArray(n.impact_measures)?n.impact_measures:JSON.parse(n.impact_measures||"[]"),T=g(w),e.p=11,T.s();case 12:if((S=T.n()).done){e.n=15;break}if(I=S.value,A=void 0,O="INCREASE","string"==typeof I?A=I:I&&I.measure_id&&(A=I.measure_id,O=I.impact_type||"INCREASE"),!A){e.n=14;break}return N=$.getQuery("CREATE_IMPACT_RELATIONSHIP"),e.n=13,$.executeWrite(N,{actionId:t.newId||t.id,measureId:A,impactType:O},r);case 13:(R=e.v)&&R.length>0&&!1===R[0].measureExists&&utils.debugLog("Skipping IMPACTS relationship: measure ".concat(A," not found for action ").concat(t.newId||t.id));case 14:e.n=12;break;case 15:e.n=17;break;case 16:e.p=16,L=e.v,T.e(L);case 17:return e.p=17,T.f(),e.f(17);case 18:return e.a(3,20);case 19:throw new Error("Unknown dependency type: ".concat(o));case 20:return e.a(2)}},e,null,[[11,16,17,18]])}))).apply(this,arguments)}function xt(){return Lt.apply(this,arguments)}function Lt(){return(Lt=A(m().m(function e(){var t;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return utils.debugLog("Refreshing all dependency caches..."),e.p=1,e.n=2,ce();case 2:return Z=e.v,e.n=3,oe();case 3:K=e.v,void 0!==X&&(X.length=0,(t=X).push.apply(t,h(K.filter(function(e){return!0===e.active})))),void 0!==window.measuresAutocomplete&&window.measuresAutocomplete&&window.measuresAutocomplete.updateMeasures(Z),utils.debugLog("All dependency caches refreshed successfully"),e.n=5;break;case 4:throw e.p=4,e.v;case 5:return e.a(2)}},e,null,[[1,4]])}))).apply(this,arguments)}function Ct(e){return kt.apply(this,arguments)}function kt(){return(kt=A(m().m(function e(t){var n,r;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,t){e.n=1;break}return e.a(2,!1);case 1:return n=$.getQuery("CHECK_TEAM_EXISTS"),e.n=2,$.executeRead(n,{teamId:t});case 2:return r=e.v,e.a(2,r[0].exists);case 3:return e.p=3,e.v,e.a(2,!1)}},e,null,[[0,3]])}))).apply(this,arguments)}function jt(e){return Dt.apply(this,arguments)}function Dt(){return Dt=A(m().m(function e(t){var n,r,i,a,o,s,c,l,u,d,p,f,y,g,v,_,b,E=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=E.length>1&&void 0!==E[1]?E[1]:null,e.p=1,5===(r=t.split("-")).length){e.n=2;break}throw(i=TeamErrorHandler).showError.apply(i,h(TeamErrorCodes.TEAM_ID_FORMAT)),new Error("Invalid team ID format");case 2:return a=r[0].slice(0,8).padEnd(3,"X"),o=r[1].slice(0,8).padEnd(3,"X"),s=r[2].slice(0,8).padEnd(3,"X"),c="".concat(a,"-").concat(o,"-").concat(s,"-TEAM"),l=$.getQuery("GET_LATEST_TEAM"),e.n=3,$.executeRead(l,{baseId:c},n);case 3:if(u=e.v,d=1,u&&u.length>0&&(p=u[0].team_id,(f=p.match(/-(\d{3})$/))&&(d=parseInt(f[1])+1)),y="".concat(c,"-").concat(d.toString().padStart(3,"0")),!W||!W.objective_function){e.n=5;break}return W.objective_function.id,e.n=4,yn(y,"team",n);case 4:g=e.v,W.objective_function.id=g;case 5:return e.a(2,y);case 6:return e.p=6,e.v,v=t.split("-"),_=parseInt(v[4]||"0"),b=_+1,e.a(2,"".concat(v[0],"-").concat(v[1],"-").concat(v[2],"-").concat(v[3],"-").concat(b.toString().padStart(3,"0")))}},e,null,[[1,6]])})),Dt.apply(this,arguments)}function $t(e,t,n,r){e=e.toUpperCase().slice(0,8).padEnd(3,"X"),t=t.toUpperCase().slice(0,8).padEnd(3,"X"),n=n.toUpperCase().slice(0,8).padEnd(3,"X");var i=parseInt(r,10).toString().padStart(3,"0");return"".concat(e,"-").concat(t,"-").concat(n,"-TEAM-").concat(i)}function Pt(){return Mt.apply(this,arguments)}function Mt(){return(Mt=A(m().m(function e(){var t,n,r,i,a,o,s,c,l,u,d,p,f;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=document.querySelector("#generateTeamId"),n=t.querySelector("i"),r=t.querySelector(".spinner"),t.disabled=!0,n.classList.add("hide"),r.classList.remove("hide"),i=document.getElementById("site").value,a=document.getElementById("area").value,o=document.getElementById("function").value,s=document.getElementById("version").value,i&&a&&o){e.n=1;break}return(c=TeamErrorHandler).showError.apply(c,h(TeamErrorCodes.AREA_FUNCTION_REQUIRED)),t.disabled=!1,n.classList.remove("hide"),r.classList.add("hide"),e.a(2);case 1:return l=$t(i,a,o,s),e.p=2,e.n=3,Ct(l);case 3:if(!e.v){e.n=4;break}(u=TeamErrorHandler).showError.apply(u,h(TeamErrorCodes.TEAM_ID_EXISTS).concat([{id:l}])),document.getElementById("team_id").value="",e.n=6;break;case 4:if(document.getElementById("team_id").value=l,TeamStatusHandler.showSuccess("teamIdAvailable",{id:l}),!W||!W.objective_function){e.n=6;break}return e.n=5,yn(l,"team");case 5:d=e.v,W.objective_function.id=d,(p=document.getElementById("objectiveFunctionContainer"))&&(p.innerHTML="",hn(W.objective_function,p)),zn();case 6:e.n=8;break;case 7:e.p=7,e.v,(f=TeamErrorHandler).showError.apply(f,h(TeamErrorCodes.TEAM_ID_CHECK_ERROR));case 8:return e.p=8,t.disabled=!1,n.classList.remove("hide"),r.classList.add("hide"),e.f(8);case 9:return e.a(2)}},e,null,[[2,7,8,9]])}))).apply(this,arguments)}function Ut(){var e=tr("newLocation",'\n        <form id="addLocationForm">\n            <div class="section">\n                <div class="row center-align">\n                    <div class="input-group">\n                        <label for="locSite" data-i18n="site">Site</label>\n                        <input type="text" id="locSite" required aria-required>\n                    </div>\n                    <div class="input-group">\n                        <label for="locArea" data-i18n="area">Area</label>\n                        <input type="text" id="locArea" required aria-required>\n                    </div>\n                    <div class="input-group">\n                        <label for="locFunction" data-i18n="function">Function</label>\n                        <input type="text" id="locFunction" required aria-required>\n                    </div>\n                    <div class="input-group">\n                        <label for="locType" data-i18n="type">Type</label>\n                        <input type="text" id="locType" required aria-required>\n                    </div>\n                    <div class="input-group">\n                        <label for="locVersion" data-i18n="version">Version</label>\n                        <input type="number" id="locVersion" min="1" max="999" value="1" required aria-required>\n                    </div>\n                    <button id="generateLocationIdBtn" type="button" class="primary-button">\n                        <i class="fa-solid fa-arrows-rotate icon-l"></i>\n                        <span class="spinner spinner-s hide"></span>\n                        <span data-i18n="generate">Generate</span>\n                    </button>\n                </div>\n                <div class="row">\n                    <div class="input-group">\n                        <label for="location_id_input" data-i18n="teamId">Location ID</label>\n                        <input type="text" id="location_id_input" name="location_id_input" required aria-required readonly>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-group">\n                        <label for="locName" data-i18n="name">Name</label>\n                        <input type="text" id="locName" required aria-required>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-group">\n                        <label for="locDescription" data-i18n="description">Description</label>\n                        <textarea id="locDescription" rows="4" required aria-required></textarea>\n                    </div>\n                </div>\n            </div>\n            <div class="form-actions">\n                <button type="submit" class="primary-button" id="saveLocationBtn">\n                    <span class="spinner spinner-s hide"></span>\n                    <span data-i18n="save">Save</span>\n                </button>\n            </div>\n        </form>\n    ',{translateTitle:!0,wide:!0,modalClass:"add-location-modal"});e.querySelector("#generateLocationIdBtn").addEventListener("click",Ft),e.querySelector("#addLocationForm").addEventListener("submit",function(){var t=A(m().m(function t(n){var r,i,a,o,s,c;return m().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n.preventDefault(),r=e.querySelector("#saveLocationBtn"),i=r.querySelector(".spinner"),r.disabled=!0,i.classList.remove("hide"),t.p=1,a={location_id:document.getElementById("location_id_input").value,name:document.getElementById("locName").value,description:document.getElementById("locDescription").value},!((o=Ht(a)).length>0)){t.n=2;break}return TeamErrorHandler.handleValidationErrors(o),r.disabled=!1,i.classList.add("hide"),t.a(2);case 2:return t.n=3,Vt(a.location_id);case 3:if(!t.v){t.n=4;break}return(s=TeamErrorHandler).showError.apply(s,h(TeamErrorCodes.LOCATION_ID_EXISTS).concat([{id:a.location_id}])),r.disabled=!1,i.classList.add("hide"),t.a(2);case 4:return t.n=5,Gt(a);case 5:e.remove(),TeamStatusHandler.showSuccess("locationCreateSuccess",{id:a.location_id}),t.n=7;break;case 6:t.p=6,t.v,(c=TeamErrorHandler).showError.apply(c,h(TeamErrorCodes.LOCATION_SAVE_ERROR));case 7:return t.p=7,r.disabled=!1,i.classList.add("hide"),t.f(7);case 8:return t.a(2)}},t,null,[[1,6,7,8]])}));return function(e){return t.apply(this,arguments)}}())}function Ft(){return zt.apply(this,arguments)}function zt(){return(zt=A(m().m(function e(){var t,n,r,i,a,o,s,c,l,u,d;return m().w(function(e){for(;;)switch(e.n){case 0:if(t=document.querySelector("#generateLocationIdBtn"),n=t.querySelector("i"),r=t.querySelector(".spinner"),t.disabled=!0,n.classList.add("hide"),r.classList.remove("hide"),i=document.getElementById("locSite").value,a=document.getElementById("locArea").value,o=document.getElementById("locFunction").value,s=document.getElementById("locType").value,c=document.getElementById("locVersion").value,i&&a&&o&&s){e.n=1;break}return(l=TeamErrorHandler).showError.apply(l,h(TeamErrorCodes.AREA_FUNCTION_REQUIRED)),t.disabled=!1,n.classList.remove("hide"),r.classList.add("hide"),e.a(2);case 1:return u=Bt(i,a,o,s,c),e.n=2,Vt(u);case 2:e.v?(d=TeamErrorHandler).showError.apply(d,h(TeamErrorCodes.LOCATION_ID_EXISTS).concat([{id:u}])):(document.getElementById("location_id_input").value=u,TeamStatusHandler.showSuccess("locationIdAvailable",{id:u})),t.disabled=!1,n.classList.remove("hide"),r.classList.add("hide");case 3:return e.a(2)}},e)}))).apply(this,arguments)}function Bt(e,t,n,r,i){e=e.toUpperCase().slice(0,8).padEnd(3,"X"),t=t.toUpperCase().slice(0,8).padEnd(3,"X"),n=n.toUpperCase().slice(0,8).padEnd(3,"X"),r=r.toUpperCase().slice(0,8).padEnd(3,"X");var a=parseInt(i,10).toString().padStart(3,"0");return"".concat(e,"-").concat(t,"-").concat(n,"-").concat(r,"-").concat(a)}function Ht(e){var t=[];return e.location_id?/^[A-Z]{2,}-[A-Z]{2,}-[A-Z]{2,}-[A-Z]{2,}-\d{3}$/.test(e.location_id)||t.push("LOCATION_ID_FORMAT"):t.push("LOCATION_ID_REQUIRED"),e.name||t.push("LOCATION_NAME_REQUIRED"),e.description||t.push("LOCATION_DESCRIPTION_REQUIRED"),t}function Vt(e){return Wt.apply(this,arguments)}function Wt(){return(Wt=A(m().m(function e(t){var n,r;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=$.getQuery("CHECK_LOCATION_EXISTS"),e.n=1,$.executeRead(n,{locationId:t});case 1:return r=e.v,e.a(2,r[0].exists);case 2:return e.p=2,e.v,e.a(2,!1)}},e,null,[[0,2]])}))).apply(this,arguments)}function Gt(e){return qt.apply(this,arguments)}function qt(){return qt=A(m().m(function e(t){var n,r;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=(new Date).toISOString(),e.n=1,$.startTransaction();case 1:return r=e.v,e.p=2,e.n=3,$.executeInTransaction(r,function(){var e=A(m().m(function e(r){var i;return m().w(function(e){for(;;)switch(e.n){case 0:return i=$.getQuery("WRITE_LOCATION"),e.n=1,$.executeWrite(i,{location_id:t.location_id,name:t.name,description:t.description,created_date:n,last_modified_date:n,currentUser:j.CURRENT_USER},r);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.n=4,ie();case 4:Q=e.v,nn(document.getElementById("location_id"));case 5:return e.p=5,e.n=6,$.endTransaction(r);case 6:return e.f(5);case 7:e.n=9;break;case 8:throw e.p=8,e.v;case 9:return e.a(2)}},e,null,[[2,,5,7],[0,8]])})),qt.apply(this,arguments)}function Jt(){var e,t=document.getElementById("agentInstancesList");t.innerHTML="",null!==(e=W)&&void 0!==e&&null!==(e=e.agents)&&void 0!==e&&e.length?W.agents.forEach(function(e){var n=K.find(function(t){return t.profile_id===e.profile_id}),r=(null==n?void 0:n.allowed_tools)||[],i=e.selected_tools||[],a=(null==n?void 0:n.allowed_actions)||[],o=e.selected_actions||[],s=e.agent_id,c=Y.has(s)&&Y.get(s),l=document.createElement("div");if(l.className="agent-instance-item",l.innerHTML='\n            <div class="instance-header '.concat(c?"expanded":"",'">\n                <div class="instance-title">\n                    <h4>\n                        ').concat(e.name,' \n                        <span class="instance-id">').concat(s,'</span>\n                        <span class="status-badge ').concat(e.active?"active":"inactive",'" data-i18n="').concat(e.active?"active":"inactive",'">').concat(e.active?"Active":"Inactive",' </span>\n                    </h4>\n                    <i class="fa-solid fa-chevron-down toggle-icon"></i>\n                </div>\n            </div>\n            <div class="instance-content ').concat(c?"expanded":"",'">\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="profile">Profile</label>\n                        <div class="profile-reference">\n                            ').concat(e.profile_id,'\n                            <button class="icon-button view-profile-btn" data-profile-id="').concat(e.profile_id,'" aria-label="View Agent Profile" data-i18n-aria-label="viewAgentProfile">\n                                <i class="fa-solid fa-up-right-from-square"></i>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="input-group">\n                        <label data-i18n="type">Type</label>\n                        <span class="type-badge ').concat(e.type.toLowerCase(),'">').concat(e.type,"</span>\n                    </div>\n                    ").concat("content"===e.type.toLowerCase()?'\n                        <div class="input-group" id="contentProcessorTypeInputGroupWrapper">\n                            <label data-i18n="contentProcessorType">Content Processor Type</label>\n                            <select class="content-processor-type-select" data-agent-id="'.concat(e.agent_id,'">\n                                ').concat(k.content_processor_type.map(function(t){return'\n                                    <option value="'.concat(t.replace(" ",""),'" ').concat(e.content_processor_type===t.replace(" ","")?"selected":"",">").concat(t,"</option>\n                                ")}).join(""),"\n                            </select>\n                        </div>\n                    "):"",'\n                    <div class="checkbox-wrapper">\n                        <input type="checkbox" class="agent-status-chk" id="active_').concat(e.agent_id,'" \n                            ').concat(e.active?"checked":"",'>\n                        <label for="active_').concat(e.agent_id,'" data-i18n="active">Active</label>\n                    </div>\n                </div>    \n\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="tools">Tools</label>\n                        <div class="tools-container">\n                            ').concat(r.map(function(e){return'\n                                <div class="tool-item">\n                                    <input type="checkbox" value="'.concat(e.id,'" ').concat(i.some(function(t){return String(t)===String(e.id)})?"checked":"",">\n                                    <label>").concat(e.name,"</label>\n                                </div>\n                            ")}).join(""),"\n                            ").concat(0===r.length?'<div class="no-tools" data-i18n="noToolsAvailable">No tools available</div>':"",'\n                        </div>\n                    </div>\n                </div>\n\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="actions">Actions</label>\n                        <div class="actions-container">\n                            ').concat(a.map(function(e){return'\n                                <div class="action-item">\n                                    <input type="checkbox" value="'.concat(e.id,'" ').concat(o.some(function(t){return String(t)===String(e.id)})?"checked":"",">\n                                    <label>").concat(e.name,"</label>\n                                </div>\n                            ")}).join(""),"\n                            ").concat(0===a.length?'<div class="no-actions" data-i18n="noActionsAvailable">No actions available</div>':"",'\n                        </div>\n                    </div>\n                </div>\n\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="constraints">Constraints</label>\n                        <div id="constraints_').concat(e.agent_id,'" class="tag-input"></div>\n                    </div>\n                </div>\n\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="responsibilities">Responsibilities</label>\n                        <div id="responsibilities_').concat(e.agent_id,'" class="tag-input"></div>\n                    </div>\n                </div>\n\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="requiredTaskFields">Required Task Fields</label>\n                        <div id="required_fields_task_').concat(e.agent_id,'" class="tag-input readonly"></div>\n                    </div>\n                    <div class="input-group">\n                        <label data-i18n="requiredUserFields">Required User Fields</label>\n                        <div id="required_fields_user_').concat(e.agent_id,'" class="tag-input readonly"></div>\n                    </div>\n                </div>\n\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="taskPrompt">Task Prompt</label>\n                        <textarea class="task-prompt" ').concat(e.active?"":"disabled",' placeholder="Task prompt" data-i18n-placeholder="taskPromptPlaceholder">').concat(e.task_prompt||"",'</textarea>\n                    </div>\n                    <div class="input-group">\n                        <label data-i18n="userPrompt">User Prompt</label>\n                        <textarea class="user-prompt" ').concat(e.active?"":"disabled",' placeholder="User prompt" data-i18n-placeholder="userPromptPlaceholder">').concat(e.user_prompt||"",'</textarea>\n                    </div>\n                </div>\n\n                <div class="section">\n                    <h3 class="section-header" data-i18n="objectiveFunction">Objective Function</h3>\n                    <div id="agentObjectiveFunctionContainer_').concat(e.agent_id,'">\n                        ').concat(e.objective_function?"":'<div class="no-rows" data-i18n="noObjectiveFunction">No objective function</div>',"\n                    </div>\n                    ").concat(e.objective_function?"":'<button type="button" class="add-button add-agent-objective-function-btn" data-agent-id="'.concat(e.agent_id,'">\n                            <i class="fa-solid fa-plus"></i>\n                            <span data-i18n="addObjectiveFunction">Add Objective Function</span>\n                        </button>'),'\n                </div>\n\n                <div class="row actions-row">\n                    <button type="button" id="removeAgentBtn" class="remove-button">\n                        <i class="fa-solid fa-trash-can"></i>\n                        <span data-i18n="removeAgent">Remove Agent</span>\n                    </button>\n                </div>\n            </div>'),function(e,t){var n=e.querySelector(".instance-header"),r=e.querySelector(".instance-content"),i=e.querySelector(".task-prompt"),a=e.querySelector(".user-prompt"),o=e.querySelector(".view-profile-btn"),s=e.querySelector(".content-processor-type-select"),c=e.querySelector(".agent-status-chk"),l=e.querySelector(".tools-container"),u=e.querySelector(".actions-container"),d=e.querySelector(".actions-row"),p=e.querySelector(".add-agent-objective-function-btn"),f=e.querySelector("#removeAgentBtn"),h=t.agent_id,y=r.classList.contains("expanded");y&&k&&setTimeout(function(){Pn("required_fields_task_".concat(t.agent_id),k.reserved_fields_task||[],!0),Pn("required_fields_user_".concat(t.agent_id),k.reserved_fields_user||[],!0),Pn("constraints_".concat(t.agent_id),t.constraints||[]),Pn("responsibilities_".concat(t.agent_id),t.responsibilities||[])},50);["new","clone","import"].includes(M)?d.style.display="flex":d.style.display="none";n.addEventListener("click",function(e){e.target.closest("input, textarea, button, .checkbox-wrapper")||(n.classList.toggle("expanded"),r.classList.toggle("expanded"),Y.set(h,n.classList.contains("expanded")),r.classList.contains("expanded")&&k&&(Pn("required_fields_task_".concat(t.agent_id),k.reserved_fields_task||[],!0),Pn("required_fields_user_".concat(t.agent_id),k.reserved_fields_user||[],!0),Pn("constraints_".concat(t.agent_id),t.constraints||[]),Pn("responsibilities_".concat(t.agent_id),t.responsibilities||[])))}),i.addEventListener("input",function(){var e=W.agents.findIndex(function(e){return e.agent_id===t.agent_id});-1!==e&&(W.agents[e].task_prompt=i.value,zn())}),a.addEventListener("input",function(){var e=W.agents.findIndex(function(e){return e.agent_id===t.agent_id});-1!==e&&(W.agents[e].user_prompt=a.value,zn())}),setTimeout(function(){var n=e.querySelector("#constraints_".concat(t.agent_id)),r=e.querySelector("#responsibilities_".concat(t.agent_id));n&&n.addEventListener("tagsChanged",function(e){var n=W.agents.findIndex(function(e){return e.agent_id===t.agent_id});-1!==n&&(W.agents[n].constraints=e.detail.tags,zn())}),r&&r.addEventListener("tagsChanged",function(e){var n=W.agents.findIndex(function(e){return e.agent_id===t.agent_id});-1!==n&&(W.agents[n].responsibilities=e.detail.tags,zn())})},100),o.addEventListener("click",function(){return function(e){return Yt.apply(this,arguments)}(t.profile_id)}),s&&s.addEventListener("change",function(){var e=W.agents.findIndex(function(e){return e.agent_id===t.agent_id});-1!==e&&(W.agents[e].content_processor_type=s.value,zn())});if(c.addEventListener("change",function(){var e=W.agents.findIndex(function(e){return e.agent_id===t.agent_id});-1!==e&&(W.agents[e].active=c.checked,zn())}),l){l.querySelectorAll('input[type="checkbox"]').forEach(function(e){e.addEventListener("change",function(){var n=e.value,r=W.agents.findIndex(function(e){return e.agent_id===t.agent_id});if(-1!==r){var i=W.agents[r].selected_tools||[];if(e.checked)i.includes(n)||i.push(n);else{var a=i.indexOf(n);-1!==a&&i.splice(a,1)}W.agents[r].selected_tools=i,zn()}})})}if(u){u.querySelectorAll('input[type="checkbox"]').forEach(function(e){e.addEventListener("change",function(){var n=e.value,r=W.agents.findIndex(function(e){return e.agent_id===t.agent_id});if(-1!==r){var i=W.agents[r].selected_actions||[];if(e.checked)i.includes(n)||i.push(n);else{var a=i.indexOf(n);-1!==a&&i.splice(a,1)}W.agents[r].selected_actions=i,zn()}})})}p&&p.addEventListener("click",function(){mn("agent",t.agent_id)});f.addEventListener("click",function(){!function(e,t){var n='\n        <div class="row">\n            <p>'.concat(e,'</p>\n        </div>\n        <div class="row form-actions">\n            <button type="button" class="secondary-button cancel-button">\n                <span data-i18n="cancel">Cancel</span>\n            </button>\n            <button type="button" class="danger-button confirm-button">\n                <span data-i18n="remove">Remove</span>\n            </button>\n        </div>\n    '),r=tr("removeAgent",n,{translateTitle:!0,modalClass:"confirm-modal"}),i=r.querySelector(".confirm-button"),a=r.querySelector(".cancel-button");i.onclick=function(){t(),r.remove()},a.onclick=function(){return r.remove()}}('<span data-i18n="confirmRemoveAgent">Confirm Remove Agent</span>',A(m().m(function e(){return m().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Xt(t.agent_id);case 1:zn();case 2:return e.a(2)}},e)})))})}(l,e),t.appendChild(l),e.objective_function){var u=l.querySelector("#agentObjectiveFunctionContainer_".concat(e.agent_id));hn(e.objective_function,u,e.agent_id)}}):t.innerHTML='<div class="no-rows" data-i18n="noActiveAgentInstances">No active agent instances</div>'}function Yt(){return(Yt=A(m().m(function e(t){var n,r,i,a,o;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!(n=K.find(function(e){return e.profile_id===t}))){e.n=1;break}Qt(n),e.n=3;break;case 1:return r=$.getQuery("LOAD_AGENT_PROFILE"),e.n=2,$.executeRead(r,{profileId:t});case 2:(i=e.v).length>0?Qt(i[0]):(a=TeamErrorHandler).showError.apply(a,h(TeamErrorCodes.PROFILE_NOT_FOUND));case 3:e.n=5;break;case 4:e.p=4,e.v,(o=TeamErrorHandler).showError.apply(o,h(TeamErrorCodes.PROFILE_LOAD_ERROR));case 5:return e.a(2)}},e,null,[[0,4]])}))).apply(this,arguments)}function Qt(e){var t=Array.isArray(e.allowed_tools)?e.allowed_tools:[],n=Array.isArray(e.allowed_actions)?e.allowed_actions:[],r=Array.isArray(e.allowed_planning_method)?e.allowed_planning_method:"string"==typeof e.allowed_planning_method?e.allowed_planning_method.startsWith("[")||e.allowed_planning_method.startsWith("{")?JSON.parse(e.allowed_planning_method||"[]"):[e.allowed_planning_method]:[],i="object"===S(e.memory_parameters)?e.memory_parameters:function(){try{return JSON.parse(e.memory_parameters||"{}")}catch(e){return{}}}(),a="object"===S(e.decision_parameters)?e.decision_parameters:function(){try{return JSON.parse(e.decision_parameters||"{}")}catch(e){return{}}}(),o=Array.isArray(e.skills)?e.skills:"string"==typeof e.skills?e.skills.startsWith("[")||e.skills.startsWith("{")?JSON.parse(e.skills||"[]"):[e.skills]:[],s=Array.isArray(e.organizational_rules)?e.organizational_rules:"string"==typeof e.organizational_rules?e.organizational_rules.startsWith("[")||e.organizational_rules.startsWith("{")?JSON.parse(e.organizational_rules||"[]"):[e.organizational_rules]:[],c=Array.isArray(e.deontic_rules)?e.deontic_rules:"string"==typeof e.deontic_rules?e.deontic_rules.startsWith("[")||e.deontic_rules.startsWith("{")?JSON.parse(e.deontic_rules||"[]"):[e.deontic_rules]:[],l=tr("agentProfile",'\n        <div class="tab-container">\n            <div class="tab-buttons">\n                <button class="tab-button active" data-tab="profile-details">\n                    <span data-i18n="profileDetails">Profile Details</span>\n                </button>\n                <button class="tab-button" data-tab="prompts-parameters">\n                    <span data-i18n="promptsParameters">Prompts and Parameters</span>\n                </button>\n            </div>\n        </div>\n\n        <div id="profile-details" class="tab-panel active">\n            <div class="section">\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="profileId">Profile ID</label>\n                        <div class="value">'.concat(e.profile_id,'</div>\n                    </div>\n                    <div class="input-group">\n                        <label data-i18n="name">Name</label>\n                        <div class="value">').concat(e.name,'</div>\n                    </div>\n                    <div class="input-group">\n                        <label data-i18n="status">Status</label>\n                        <div class="status-badge ').concat(e.active?"active":"inactive",'">').concat(e.active?"Active":"Inactive",'</div>\n                    </div>\n                </div>\n    \n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="modelProvider">Model Provider</label>\n                        <div class="value">').concat(e.model_provider,'</div>\n                    </div>\n                    <div class="input-group">\n                        <label data-i18n="model">Model</label>\n                        <div class="value">').concat(e.model_name,'</div>\n                    </div>\n                    <div class="input-group">\n                        <label data-i18n="maxTokens">Max Tokens</label>\n                        <div class="value">').concat(e.max_tokens,'</div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="section">\n                <h3 class="section-header" data-i18n="tools">Tools</h3>\n                <ul class="tools-list-container">\n                    ').concat(t.length>0?t.map(function(e){return'\n                            <li class="tool-list-item">\n                                '.concat(e.name,"\n                            </li>\n                        ")}).join(""):'<div class="no-tools" data-i18n="noToolsAvailable">No tools available</div>','\n            </div>\n\n            <div class="section">\n                <h3 class="section-header" data-i18n="actions">Actions</h3>\n                <ul class="actions-list-container">\n                    ').concat(n.length>0?n.map(function(e){return'\n                            <li class="action-list-item">\n                                '.concat(e.name,"\n                            </li>\n                        ")}).join(""):'<div class="no-actions" data-i18n="noActionsAvailable">No actions available</div>','\n            </div>\n\n            <div class="section">\n\t\t\t\t<h3 class="section-header" data-i18n="ragConfiguration">RAG Configuration</h3>\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t<label data-i18n="useGeneralRag">Use General RAG</label>\n\t\t\t\t\t\t<div class="status-badge ').concat(e.use_general_rag?"active":"inactive",'">').concat(e.use_general_rag?"Yes":"No",'</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t<label data-i18n="ragCollectionName">RAG Collection Name</label>\n\t\t\t\t\t\t<div class="value">').concat(e.rag_collection_name,'</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t<label data-i18n="ragTopK">RAG Top K</label>\n\t\t\t\t\t\t<div class="value">').concat(e.rag_top_k,'</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n            <div class="section">\n\t\t\t\t<h3 class="section-header" data-i18n="allowedPlanning">Allowed Planning Methods</h3>\n\t\t\t\t<div class="tag-container">\n\t\t\t\t\t').concat(r.map(function(e){return'<span class="tag">'.concat(e,"</span>")}).join(""),'\n\t\t\t\t</div>\n\t\t\t</div>\n\n            <div class="section">\n\t\t\t\t<h3 class="section-header" data-i18n="memoryParameters">Memory Parameters</h3>\n\t\t\t\t<table class="params-table">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t<span data-i18n="parameter">Parameter</span>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t<span data-i18n="value">Value</span>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t').concat(Object.entries(i).map(function(e){var t=E(e,2),n=t[0],r=t[1];return"\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>".concat(Kt(n),"</td>\n\t\t\t\t\t\t\t\t<td>").concat(r,"</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t")}).join(""),'\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\n            <div class="section">\n\t\t\t\t<h3 class="section-header" data-i18n="decisionParameters">Decision Parameters</h3>\n\t\t\t\t<table class="params-table">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t<span data-i18n="parameter">Parameter</span>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t<span data-i18n="value">Value</span>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t').concat(Object.entries(a).map(function(e){var t=E(e,2),n=t[0],r=t[1];return"\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>".concat(Kt(n),"</td>\n\t\t\t\t\t\t\t\t<td>").concat(r,"</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t")}).join(""),'\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n        </div>\n\n        <div id="prompts-parameters" class="tab-panel">\n            <div class="section">\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="experience">Experience</label>\n                        <div class="value">').concat(e.experience,'</div>\n                    </div>\n                    <div class="input-group">\n                        <label data-i18n="skills">Skills</label>\n                        <div class="tag-container">\n                            ').concat(o.map(function(e){return'<span class="tag">'.concat(e,"</span>")}).join(""),'\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="section">\n                <h3 class="section-header" data-i18n="systemPrompt">System Prompt</h3>\n                <div class="text-content">').concat(e.system_prompt,'</div>\n            </div>\n\n            <div class="section">\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="observationPrompt">Observation Prompt</label>\n                        <div class="text-content full-height">').concat(e.observation_prompt,'</div>\n                    </div>\n                    <div class="input-group">\n                        <label data-i18n="reflectionPrompt">Reflection Prompt</label>\n                        <div class="text-content full-height">').concat(e.reflection_prompt,'</div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="section">\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="organizationalRules">Organizational Rules</label>\n                        <div class="tag-container">\n                            ').concat(s.map(function(e){return'<span class="tag">'.concat(e,"</span>")}).join(""),'\n                        </div>\n                    </div>\n                    <div class="input-group">\n                        <label data-i18n="deonticRules">Deontic Rules</label>\n                        <div class="tag-container">\n                            ').concat(c.map(function(e){return'<span class="tag">'.concat(e,"</span>")}).join(""),"\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    "),{translateTitle:!0,wide:!0,modalClass:"profile-modal"});l.querySelectorAll(".tab-button").forEach(function(e){e.addEventListener("click",function(){var t=e.dataset.tab;!function(e,t){e.querySelectorAll(".tab-button").forEach(function(e){e.classList.toggle("active",e.dataset.tab===t)}),e.querySelectorAll(".tab-panel").forEach(function(e){e.classList.toggle("active",e.id===t)})}(l,t)})})}function Kt(e){return e.split("_").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")}function Xt(e){return Zt.apply(this,arguments)}function Zt(){return(Zt=A(m().m(function e(t){var n,r,i;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,null!==(n=W)&&void 0!==n&&n.agents){e.n=1;break}return e.a(2);case 1:-1!==(r=W.agents.findIndex(function(e){return e.agent_id===t}))&&(W.agents.splice(r,1),Jt(),0===W.agents.length&&(document.getElementById("agentInstancesList").innerHTML='<div class="no-rows" data-i18n="noActiveAgentInstances">No active agent instances</div>'),TeamStatusHandler.showSuccess("agentRemoveSuccess")),e.n=3;break;case 2:e.p=2,e.v,(i=TeamErrorHandler).showError.apply(i,h(TeamErrorCodes.AGENT_REMOVE_ERROR));case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function en(){var e=tr("addAgent",'\n        <form id="addAgentForm">\n            <div class="section">\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="name">Name</label>\n                        <input type="text" id="agentName" required aria-required>\n                    </div>\n                    <div class="input-group">\n                        <label data-i18n="profile">Profile</label>\n                        <select id="agentProfile" required aria-required></select>\n                    </div>\n                    <div class="input-group">\n                        <label data-i18n="type">Type</label>\n                        <select id="agentType" required aria-required></select>\n                    </div>\n                    <div class="input-group hide" id="contentProcessorTypeInputGroup">\n                        <label data-i18n="contentProcessorType">Content Processor Type</label>\n                        <select id="contentProcessorType"></select>\n                    </div>\n                </div>\n            </div>\n\n            <div class="section">\n                <h3 class="section-header" data-i18n="tools">Tools</h3>\n                <div id="agentToolsContainer" class="tools-container">\n                    <div class="no-tools">Select a profile to see available tools</div>\n                </div>\n            </div>\n\n            <div class="section">\n                <h3 class="section-header" data-i18n="actions">Actions</h3>\n                <div id="agentActionsContainer" class="actions-container">\n                    <div class="no-actions">Select a profile to see available actions</div>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="input-group">\n                    <label data-i18n="constraints">Constraints</label>\n                    <div id="agentConstraints" class="tag-input">\n                        \x3c!-- Tags will be dynamically added --\x3e\n                        <input type="text" placeholder="Add" data-i18n-placeholder="add" aria-label="Add new constraint" data-i18n-aria-label="addNewConstraint">\n                    </div>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="input-group">\n                    <label data-i18n="responsibilities">Responsibilities</label>\n                    <div id="agentResponsibilities" class="tag-input">\n                        \x3c!-- Tags will be dynamically added --\x3e\n                        <input type="text" placeholder="Add" data-i18n-placeholder="add" aria-label="Add new responsibility" data-i18n-aria-label="addNewResponsibility">\n                    </div>\n                </div>\n            </div>\n\n            <div class="section">\n                <h3 class="section-header" data-i18n="prompts">Prompts</h3>\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="requiredTaskFields">Required Task Fields</label>\n                        <div id="required_fields_task" class="tag-input readonly"></div>\n                    </div>\n                    <div class="input-group">\n                        <label data-i18n="requiredUserFields">Required User Fields</label>\n                        <div id="required_fields_user" class="tag-input readonly"></div>\n                    </div>\n                </div>\n                \n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="taskPrompt">Task Prompt</label>\n                        <textarea id="agentTaskPrompt" class="task-prompt" placeholder="Task prompt" data-i18n-placeholder="taskPromptPlaceholder"></textarea>\n                    </div>\n                    <div class="input-group">\n                        <label data-i18n="userPrompt">User Prompt</label>\n                        <textarea id="agentUserPrompt" class="user-prompt" placeholder="User prompt" data-i18n-placeholder="userPromptPlaceholder"></textarea>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="form-actions">\n                <button type="submit" class="primary-button" id="add_agent">\n                    <span class="spinner spinner-s hide"></span>\n                    <span data-i18n="addAgent">Add Agent</span>\n                </button>\n            </div>\n        </form>\n    ',{translateTitle:!0,wide:!0,modalClass:"add-agent-modal"}),t=e.querySelector("#addAgentForm");!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";tn(e,X,{placeholderText:"Select Profile",placeholderi18n:"selectProfile",valueField:"profile_id",showBothFields:!0,primaryField:"name",secondaryField:"profile_id"},t)}(document.getElementById("agentProfile")),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";tn(e,ee,{placeholderText:"Select Type",placeholderi18n:"selectType",valueTransform:function(e){return e.toLowerCase()},textTransform:function(e){return e}},t)}(document.getElementById("agentType")),function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=(null===(t=k)||void 0===t?void 0:t.content_processor_type)||[];tn(e,r,{placeholderText:"Select Type",placeholderi18n:"selectType",valueTransform:function(e){return e.replace(" ","")},textTransform:function(e){return e}},n)}(document.getElementById("contentProcessorType")),k&&(Pn("required_fields_task",k.reserved_fields_task||[],!0),Pn("required_fields_user",k.reserved_fields_user||[],!0));var n=null,r=null;setTimeout(function(){n=Pn("agentConstraints",[],!1),r=Pn("agentResponsibilities",[],!1)},50);var i=document.getElementById("agentProfile"),a=document.getElementById("agentToolsContainer"),o=document.getElementById("agentActionsContainer");i.addEventListener("change",function(){var e=i.value;!function(e,t){if(!e)return void(t.innerHTML='<div class="no-tools" data-i18n="selectProfileDisplayTools">Select a profile to see available tools</div>');var n=X.find(function(t){return t.profile_id===e});if(!n||!n.allowed_tools||0===n.allowed_tools.length)return void(t.innerHTML='<div class="no-tools" data-i18n="noToolsAvailable">No tools available for this profile</div>');t.innerHTML="",n.allowed_tools.forEach(function(e){var n=document.createElement("div");n.className="tool-item",n.innerHTML='\n            <label>\n                <input type="checkbox" value="'.concat(e.name,'">\n                ').concat(e.name,"\n            </label>\n        "),t.appendChild(n)})}(e,a),function(e,t){if(!e)return void(t.innerHTML='<div class="no-actions" data-i18n="selectProfileDisplayActions">Select a profile to see available actions</div>');var n=X.find(function(t){return t.profile_id===e});if(!n||!n.allowed_actions||0===n.allowed_actions.length)return void(t.innerHTML='<div class="no-actions" data-i18n="noActionsAvailable">No actions available for this profile</div>');t.innerHTML="",n.allowed_actions.forEach(function(e){var n=document.createElement("div");n.className="action-item",n.innerHTML='\n            <label>\n                <input type="checkbox" value="'.concat(e.name,'">\n                ').concat(e.name,"\n            </label>\n        "),t.appendChild(n)})}(e,o)});var s=document.getElementById("agentType"),c=document.getElementById("contentProcessorTypeInputGroup");s.addEventListener("change",function(){var e=s.value.toLowerCase();c.classList.toggle("hide","content"!==e);var t=document.getElementById("contentProcessorType");t&&("content"===e?(t.setAttribute("required",""),t.setAttribute("aria-required","true")):(t.removeAttribute("required"),t.removeAttribute("aria-required")))}),t.onsubmit=function(){var t=A(m().m(function t(i){var s,c,l,u,d,p,f,h,y;return m().w(function(t){for(;;)switch(t.n){case 0:if(i.preventDefault(),l=e.querySelector(".spinner"),u=e.querySelector("#add_agent"),l.classList.remove("hide"),u.disabled=!0,d=document.getElementById("agentType").value,p={name:document.getElementById("agentName").value,profile_id:document.getElementById("agentProfile").value,type:d,content_processor_type:"content"===d.toLowerCase()?document.getElementById("contentProcessorType").value:null,constraints:(null===(s=n)||void 0===s?void 0:s.getTags())||[],responsibilities:(null===(c=r)||void 0===c?void 0:c.getTags())||[],task_prompt:document.getElementById("agentTaskPrompt").value,user_prompt:document.getElementById("agentUserPrompt").value,active:!0},f=[],a.querySelectorAll('input[type="checkbox"]:checked').forEach(function(e){f.push(e.value)}),p.selected_tools=f,h=[],o.querySelectorAll('input[type="checkbox"]:checked').forEach(function(e){h.push(e.value)}),p.selected_actions=h,!k){t.n=1;break}if(!((y=bn(p,k)).length>0)){t.n=1;break}return TeamErrorHandler.handleValidationErrors(y),l.classList.add("hide"),u.disabled=!1,t.a(2);case 1:return t.n=2,rn(p);case 2:l.classList.add("hide"),u.disabled=!1,e.remove();case 3:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()}function tn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=n.placeholderText,a=void 0===i?"Select Option":i,o=n.placeholderi18n,s=void 0===o?"selectOption":o,c=n.valueField,l=void 0===c?"value":c,u=n.textField,d=void 0===u?"text":u,p=n.valueTransform,f=void 0===p?null:p,h=n.textTransform,m=void 0===h?null:h,y=n.showBothFields,g=void 0!==y&&y,v=n.primaryField,_=void 0===v?null:v,b=n.secondaryField,E=void 0===b?null:b;e.innerHTML='<option value="" selected disabled data-i18n="'.concat(s,'">').concat(a,"</option>"),t&&Array.isArray(t)&&t.forEach(function(t){var n,i,a=document.createElement("option");"object"===S(t)?(n=t[l],f&&(n=f(n))):n=f?f(t):t,i="object"===S(t)?g&&_&&E?"".concat(t[_]," (").concat(t[E],")"):t[d]:m?m(t):t,a.value=n,a.textContent=i,a.selected=n===r,e.appendChild(a)})}function nn(e){tn(e,Q,{placeholderText:"Select Location",placeholderi18n:"selectLocation",valueField:"id",showBothFields:!0,primaryField:"name",secondaryField:"id"},arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")}function rn(e){return an.apply(this,arguments)}function an(){return(an=A(m().m(function e(t){var n,r,i,a,o;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,i=_,a=_,e.n=1,on(t.profile_id,!0);case 1:o=e.v,n=i(a({agent_id:o},t),{},{created_date:(new Date).toISOString(),last_modified_date:(new Date).toISOString()}),W.agents=W.agents||[],W.agents.push(n),Jt(),TeamStatusHandler.showSuccess("agentAddSuccess"),zn(),e.n=3;break;case 2:e.p=2,e.v,(r=TeamErrorHandler).showError.apply(r,h(TeamErrorCodes.AGENT_ADD_ERROR));case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function on(e){return sn.apply(this,arguments)}function sn(){return sn=A(m().m(function e(t){var n,r,i,a,o,s,c,l,u,d,p,f,h,y,g=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=g.length>1&&void 0!==g[1]&&g[1],r=g.length>2&&void 0!==g[2]?g[2]:null,i=g.length>3&&void 0!==g[3]?g[3]:[],t&&""!==t.trim()){e.n=1;break}return e.a(2,"UNKNOWN-AGENT-".concat(Date.now()));case 1:if(e.p=1,a=t.split("-"),o=E(a,2),s=o[0],c=o[1],l="".concat(s,"-").concat(c,"-AGENT"),!n){e.n=2;break}return e.a(2,"".concat(l,"-TMP-").concat(Math.floor(900*Math.random())+100));case 2:return u=$.getQuery("GET_LATEST_AGENT"),e.n=3,$.executeRead(u,{baseId:l},r);case 3:for(d=e.v,p=1,d&&d.length>0&&(f=d[0].agent_id,(h=f.match(/-(\d{3})$/))&&(p=parseInt(h[1])+1)),y="".concat(l,"-").concat(p.toString().padStart(3,"0"));i&&i.includes(y);)p++,y="".concat(l,"-").concat(p.toString().padStart(3,"0"));return e.a(2,y);case 4:return e.p=4,e.v,e.a(2,"".concat(t.split("-")[0]||"AGENT","-ERROR-").concat(Date.now()))}},e,null,[[1,4]])})),sn.apply(this,arguments)}function cn(e){var t={};return t.agent_id=e.agent_id,t.name=e.name,t.type=e.type,t.profile_id=e.profile_id,t.active=!1!==e.active,t.constraints=Array.isArray(e.constraints)?e.constraints:[],t.responsibilities=Array.isArray(e.responsibilities)?e.responsibilities:[],t.task_prompt=e.task_prompt||"",t.user_prompt=e.user_prompt||"",t.created_date=e.created_date||(new Date).toISOString(),t.last_modified_date=e.last_modified_date||(new Date).toISOString(),t.selected_tools=Array.isArray(e.selected_tools)?e.selected_tools.map(function(e){return"string"==typeof e?e:e.id||e.name}):[],t.selected_actions=Array.isArray(e.selected_actions)?e.selected_actions.map(function(e){return"string"==typeof e?e:e.id||e.name}):[],t}function ln(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.createElement("div");r.className="component-item",r.dataset.name=e.name;var i=document.createElement("div");i.className="instance-header",n&&i.classList.add("expanded"),i.innerHTML='\n        <div class="instance-title">\n            <h4>'.concat(e.name,'</h4>\n            <i class="fa-solid fa-chevron-down toggle-icon"></i>\n        </div>\n    ');var a=document.createElement("div");a.className="instance-content",n&&a.classList.add("expanded");var o=document.createElement("div");return o.className="row center-align",o.innerHTML='\n        <div class="input-group">\n            <label data-i18n="weight">Weight</label>\n            <div class="value">'.concat(e.weight,'</div>\n        </div>\n        <div class="input-group">\n            <label data-i18n="direction">Direction</label>\n            <div class="value" data-i18n="').concat("min"===e.direction?"minimize":"maximize",'">').concat("min"===e.direction?"Minimize":"Maximize","</div>\n        </div>\n    "),a.appendChild(o),r.appendChild(i),r.appendChild(a),t.appendChild(r),i.addEventListener("click",function(e){e.target.closest("input, button, select")||(i.classList.toggle("expanded"),a.classList.toggle("expanded"))}),{componentDiv:r,componentContent:a}}function un(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||dn(e),r=document.createElement("div");r.className="thresholds-container",r.innerHTML='<h4 class="threshold-header">Thresholds</h4>';var i=document.createElement("div");i.className="row center-align",i.innerHTML='\n        <div class="input-group">\n            <label data-i18n="scale">Scale (2-5)</label>\n            <input type="number" class="threshold-scale" value="'.concat(n.scale,'" min="2" max="5" required \n                   oninput="this.value = this.value > 5 ? 5 : (this.value < 2 ? 2 : this.value)">\n        </div>\n        <button type="button" class="primary-button generate-thresholds-btn">\n            <i class="fa-solid fa-arrows-rotate icon-l"></i>\n            <span data-i18n="generate">Generate</span>\n        </button>\n    '),r.appendChild(i);var a,o=((a=document.createElement("table")).className="threshold-table",a.innerHTML='\n        <thead>\n            <tr>\n                <th data-i18n="level">Level</th>\n                <th data-i18n="value">Value</th>\n                <th data-i18n="min">Min</th>\n                <th data-i18n="max">Max</th>\n                <th data-i18n="direction">Direction</th>\n            </tr>\n        </thead>\n        <tbody></tbody>\n    ',a);r.appendChild(o),t.appendChild(r);var s=i.querySelector(".generate-thresholds-btn"),c=o.querySelector("tbody");return s.addEventListener("click",function(){var t,n=i.querySelector(".threshold-scale"),r=parseInt(n.value,10),a=e.direction;r>=2&&r<=5?(c.innerHTML="",dn({name:e.name,direction:a},r).ranges.forEach(function(e){pn(c,e)})):(t=TeamErrorHandler).showError.apply(t,h(TeamErrorCodes.SCALE_RANGE_INVALID))}),n.ranges&&n.ranges.length>0?n.ranges.sort(function(e,t){return e.value-t.value}).forEach(function(e){pn(c,e)}):s.click(),{thresholdsDiv:r,generateBtn:s}}function dn(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=[],r=function(e){switch(e){case 2:return["Poor","Good"];case 3:return["Poor","Average","Good"];case 4:return["Poor","Average","Good","Excellent"];case 5:return["Critical","Poor","Average","Good","Excellent"];default:return Array(e).fill().map(function(e,t){return"Level ".concat(t+1)})}}(t),i="min"===e.direction,a=1;a<=t;a++){var o=i?1-a/t:(a-1)/t,s=i?1-(a-1)/t:a/t;o=Math.round(100*o)/100,s=Math.round(100*s)/100,n.push({level:r[a-1],value:a,min:o,max:s,direction:e.direction})}return{component:e.name,scale:t,ranges:n}}function pn(e,t){var n=document.createElement("tr");return n.innerHTML='\n        <td>\n            <input type="text" class="threshold-level form-control" value="'.concat(t.level||"",'" required>\n        </td>\n        <td>\n            <input type="number" class="threshold-value form-control" value="').concat(t.value,'" readonly>\n        </td>\n        <td>\n            <input type="number" class="threshold-min form-control" value="').concat(void 0!==t.min?t.min:0,'" step="0.05">\n        </td>\n        <td>\n            <input type="number" class="threshold-max form-control" value="').concat(void 0!==t.max?t.max:0,'" step="0.05">\n        </td>\n        <td>\n            <select class="threshold-direction form-control">\n                <option value="min" ').concat("min"===t.direction?"selected":"",'>Minimize</option>\n                <option value="max" ').concat("max"===t.direction?"selected":"",">Maximize</option>\n            </select>\n        </td>\n    "),e.appendChild(n),n}function fn(){var e=[];return document.querySelectorAll(".component-item").forEach(function(t){var n=t.dataset.name,r=t.querySelector(".threshold-scale");if(r){var i=parseInt(r.value,10),a=t.querySelectorAll(".threshold-table tbody tr");if(a.length>0){var o=Array.from(a).map(function(e){return{level:e.querySelector(".threshold-level").value,value:parseInt(e.querySelector(".threshold-value").value,10),min:""!==e.querySelector(".threshold-min").value?parseFloat(e.querySelector(".threshold-min").value):0,max:""!==e.querySelector(".threshold-max").value?parseFloat(e.querySelector(".threshold-max").value):0,direction:e.querySelector(".threshold-direction").value}});e.push({component:n,scale:i,ranges:o})}}}),e}function hn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=e.formula||"",i=n?"formula_".concat(n):"formula",a=n?"formulaAutocomplete_".concat(n):"formulaAutocomplete",o=document.createElement("div");o.innerHTML='\n        <div class="row">\n            <div class="input-group">\n                <label data-i18n="functionId">Function ID</label>\n                <input type="text" value="'.concat(e.id,'" readonly>\n            </div>\n        </div>\n        <div class="row center-align">\n            <div class="input-group">\n                <label data-i18n="name">Name</label>\n                <input type="text" id="of_name" value="').concat(e.name||"",'">\n            </div>\n            <div class="checkbox-wrapper">\n                <input type="checkbox" id="of_active" name="active" ').concat(e.active?"checked":"",'>\n                <label for="of_active" data-i18n="active">Active</label>\n             </div>\n        </div>\n        <div class="row">\n            <div class="input-group">\n                <label data-i18n="description">Description</label>\n                <textarea id="of_description">').concat(e.description||"",'</textarea>\n            </div>\n        </div>\n        <div class="row center-align">\n            <div class="input-group">\n                <label data-i18n="objectiveType">Objective Type</label>\n                <select id="ofObjectiveType">\n                    <option value="min" ').concat("min"===e.objective_type?"selected":"",'>Minimize</option>\n                    <option value="max" ').concat("max"===e.objective_type?"selected":"",'>Maximize</option>\n                </select>\n            </div>\n\n            <div class="formula-group">\n                <div class="input-group formula-input-container">\n                    <label data-i18n="formula">Formula</label>\n                    <input type="text" id="').concat(i,'" value="').concat(r,'">\n                    <div class="formula-hint hide" data-i18n="formulaHintComponentsUpdate">Components need to be updated. Click the button to view details.</div>\n                    <div class="measures-autocomplete hide" id="').concat(a,'">\n                        <ul class="measures-list"></ul>\n                    </div>\n                </div>\n                <button type="button" class="icon-button view-details-btn" aria-label="View Details" data-original-formula="').concat(r,'">\n                    <i class="fa-solid fa-up-right-from-square"></i>\n                </button>\n            </div>           \n        </div>\n    '),t.appendChild(o);var s=o.querySelector("#of_name"),c=o.querySelector("#of_description"),l=o.querySelector("#of_active"),u=o.querySelector("#ofObjectiveType"),d=o.querySelector("#".concat(i)),p=o.querySelector(".view-details-btn"),f=o.querySelector(".formula-hint");s.addEventListener("input",function(){e.name=s.value,zn()}),c.addEventListener("input",function(){e.description=c.value,zn()}),l.addEventListener("change",function(){e.active=l.checked,zn()}),u.addEventListener("change",function(){e.objective_type=u.value,zn()}),wn(d.value,r,f,p,Z,!0,e.components);var y=e.components;d.addEventListener("input",function(t){var n=d.value;wn(n,r,f,p,Z,!1,y);var i=ObjectiveFunctionManager.updateFormula(e,n);Object.assign(e,i),zn()});new MeasuresAutocomplete(i,a,Z);p.addEventListener("click",function(){!function(e){var t=ObjectiveFunctionManager.parseFormula(e.formula),n=t.components,r=t.weights,i=[];try{"string"==typeof e.thresholds?i=JSON.parse(e.thresholds||"[]"):Array.isArray(e.thresholds)&&(i=e.thresholds)}catch(e){}var a=new Map(i.map(function(e){return[e.component,e]})),o='\n        <form id="objectiveFunctionDetailsForm">\n            <div class="section">\n                <h3 class="section-header" data-i18n="formula">Formula</h3>\n                <div class="row">\n                    <div class="input-group">\n                        <div class="value">'.concat(e.formula,'</div>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="section">\n                <h3 class="section-header" data-i18n="components">Components</h3>\n                <div id="ofDetailsComponentsContainer">\n    ');0===n.length?o+='<div class="no-rows">No components could be extracted from the formula. Please check the format.</div></div></div>':o+="</div></div>";var s=tr("objectiveFunctionDetails",o+='\n            <div class="form-actions">\n                <button type="submit" class="primary-button" id="saveObjectiveFunctionDetails">\n                    <span class="spinner spinner-s hide"></span>\n                    <span data-i18n="save">Save</span>\n                </button>\n            </div>\n        </form>\n    ',{translateTitle:!0,wide:!0,modalClass:"objective-function-details-modal"});if(n&&n.length>0){var c=s.querySelector("#ofDetailsComponentsContainer");n.forEach(function(e){var t=ln(e,c);t.componentDiv;un(e,t.componentContent,a.get(e.name)||dn(e))})}s.querySelector("#objectiveFunctionDetailsForm").addEventListener("submit",function(){var t=A(m().m(function t(i){var a,o,c,l,u,d,p,f;return m().w(function(t){for(;;)switch(t.n){case 0:i.preventDefault(),a=s.querySelector("#saveObjectiveFunctionDetails"),o=a.querySelector(".spinner"),a.disabled=!0,o.classList.remove("hide");try{c=fn(),l=JSON.parse(JSON.stringify(n)),c&&c.length>0&&(u={},c.forEach(function(e){u[e.component]=e}),l.forEach(function(e){u[e.name]&&(e.thresholds=u[e.name])})),e.components=JSON.stringify(l),e.weights=JSON.stringify(r),e.thresholds=JSON.stringify(c),e.normalized_formula=ObjectiveFunctionManager.formatFormulaForStorage(l),e.formula=ObjectiveFunctionManager.formatFormulaForDisplay(l),"team"===e.type&&W?(W.objective_function=e,(d=document.getElementById("objectiveFunctionContainer"))&&(d.innerHTML="",hn(e,d))):"agent"===e.type&&W&&W.agents&&-1!==(p=W.agents.findIndex(function(t){return t.objective_function&&t.objective_function.id===e.id}))&&(W.agents[p].objective_function=e,Jt()),s.remove(),zn(),TeamStatusHandler.showSuccess("objectiveFunctionSaveSuccess")}catch(e){(f=TeamErrorHandler).showError.apply(f,h(TeamErrorCodes.OBJECTIVE_FUNCTION_UPDATE_ERROR))}finally{a.disabled=!1,o.classList.add("hide")}case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())}(e)})}function mn(e,t){var n=document.getElementById("team_id").value;if(n){if("team"===e)0;else{if("agent"!==e)return;var r,i;if(!t)return void(r=TeamErrorHandler).showError.apply(r,h(TeamErrorCodes.AGENT_ID_REQUIRED));if(!W.agents.find(function(e){return e.agent_id===t}))return void(i=TeamErrorHandler).showError.apply(i,h(TeamErrorCodes.AGENT_NOT_FOUND))}var a=tr("addObjectiveFunction",'\n        <form id="objectiveFunctionForm">\n            <div class="section">\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="name">Name</label>\n                        <input type="text" id="ofName">\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="description">Description</label>\n                        <textarea id="ofDescription"></textarea>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-group">\n                        <label data-i18n="objectiveType">Objective Type</label>\n                        <select id="ofObjectiveType">\n                            <option value="min" data-i18n="minimize">Minimize</option>\n                            <option value="max" data-i18n="maximize">Maximize</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="formula-group">\n                        <div class="input-group formula-input-container">\n                            <label data-i18n="formula">Formula</label>\n                            <input type="text" id="ofFormula" \n                                   placeholder="e.g. 0.1(comp1) + 0.2(comp2) - 0.3(comp3)">\n                            <div class="formula-hint hide" data-i18n="formulaHintValidComponents">Formula contains valid components. Click Generate to extract them.</div>\n                            <div class="measures-autocomplete hide" id="ofFormulaAutocomplete">\n                                <ul class="measures-list"></ul>\n                            </div>\n                        </div>\n                        <button type="button" class="primary-button generate-components-btn" disabled aria-label="Generate Components" data-i18n-aria-label="generateComponents">\n                            <i class="fa-solid fa-arrows-rotate icon-l"></i>\n                            <span data-i18n="generate">Generate</span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="section component-section">\n                <h3 class="section-header" data-i18n="components">Components</h3>\n                <div id="componentsContainer">\n                    <div class="no-rows" data-i18n="formulaHintEnterFormula">Enter a formula and click the generate button to extract components</div>\n                </div>\n            </div>\n            \n            <div class="form-actions">\n                <button type="submit" class="primary-button" id="saveObjectiveFunction">\n                    <span class="spinner spinner-s hide"></span>\n                    <span data-i18n="save">Save</span>\n                </button>\n            </div>\n        </form>\n    ',{translateTitle:!0,wide:!0,modalClass:"objective-function-modal"}),o=a.querySelector("#objectiveFunctionForm"),s=document.getElementById("ofFormula"),c=a.querySelector(".generate-components-btn"),l=document.getElementById("componentsContainer"),u=a.querySelector(".formula-hint"),d=!1,p="";if(s.value){var f=wn(s.value,"",u,c,Z,!1,null);d=f}s.addEventListener("input",function(){var e=s.value.trim();c.disabled=0===e.length;var t=wn(e,"",u,c,Z,!1,null);d=t,""!==p&&e!==p&&(d=!0)}),c.addEventListener("click",function(){var e=s.value.trim();if(e){l.innerHTML="";var t=function(e){return e?ObjectiveFunctionManager.parseFormula(e).components:[]}(e);0!==t.length?(t.forEach(function(e){var t=ln(e,l);t.componentDiv;un(e,t.componentContent)}),p=e,d=!1,c.classList.remove("update-needed"),u.classList.add("hide")):l.innerHTML='<div class="no-rows">No components could be extracted from the formula. Please check the format.</div>'}});new MeasuresAutocomplete("ofFormula","ofFormulaAutocomplete",Z);o.addEventListener("submit",function(){var r=A(m().m(function r(i){var o,s,c,l,p,f,y,g,v,_,b,E,w,T,S,I,A,O,N,R,x,L,C,k,j;return m().w(function(r){for(;;)switch(r.p=r.n){case 0:if(i.preventDefault(),o=document.getElementById("saveObjectiveFunction"),s=o.querySelector(".spinner"),c=[],d&&c.push("OBJECTIVE_FUNCTION_COMPONENTS_NEED_GENERATION"),u&&!u.classList.contains("hide")&&u.classList.contains("error")&&c.push("OBJECTIVE_FUNCTION_FORMULA_HAS_ERRORS"),l=document.getElementById("ofName").value,p=document.getElementById("ofDescription").value,f=document.getElementById("ofObjectiveType").value,y=document.getElementById("ofFormula").value,l&&l.trim()||c.push("OBJECTIVE_FUNCTION_NAME_REQUIRED"),p&&p.trim()||c.push("OBJECTIVE_FUNCTION_DESCRIPTION_REQUIRED"),y&&y.trim()||c.push("OBJECTIVE_FUNCTION_FORMULA_REQUIRED"),y&&y.trim()&&(g={id:"temp-id",name:l,description:p,type:e,objective_type:f,formula:y,components:JSON.stringify(ObjectiveFunctionManager.parseFormula(y).components),thresholds:JSON.stringify(fn()||[])},v=En(g,e),_=v.filter(function(e){return"OBJECTIVE_FUNCTION_ID_REQUIRED"!==("string"==typeof e?e:e.code)}),c.push.apply(c,h(_))),!(c.length>0)){r.n=1;break}return TeamErrorHandler.handleValidationErrors(c),r.a(2);case 1:if(o.disabled=!0,s.classList.remove("hide"),r.p=2,b="team"===e?n:t){r.n=3;break}return te("team"===e?"Team ID is required. Please save the team first before adding an objective function.":"Agent ID is required.","error"),o.disabled=!1,s.classList.add("hide"),r.a(2);case 3:return r.n=4,yn(b,e);case 4:E=r.v,w=document.getElementById("ofObjectiveType").value,T=ObjectiveFunctionManager.parseFormula(y),S=T.components,I=T.weights,A=fn(),O={id:E,name:l,description:p,type:e,objective_type:w,formula:ObjectiveFunctionManager.formatFormulaForStorage(S),weights:JSON.stringify(I),components:JSON.stringify(S),thresholds:JSON.stringify(A),active:!0},N=ObjectiveFunctionManager.normalize(O),R=N.formula,x=ObjectiveFunctionManager.parseFormula(R),L=x.components,N.components=JSON.stringify(L),"team"===e?(W.objective_function=N,(C=document.getElementById("objectiveFunctionContainer"))&&(C.innerHTML="",hn(N,C)),document.getElementById("addObjectiveFunction").classList.add("hide")):"agent"===e&&-1!==(k=W.agents.findIndex(function(e){return e.agent_id===t}))&&(W.agents[k].objective_function=N,Jt()),a.remove(),zn(),TeamStatusHandler.showSuccess("objectiveFunctionCreateSuccess"),r.n=6;break;case 5:r.p=5,r.v,(j=TeamErrorHandler).showError.apply(j,h(TeamErrorCodes.OBJECTIVE_FUNCTION_CREATE_ERROR));case 6:return r.p=6,o.disabled=!1,s.classList.add("hide"),r.f(6);case 7:return r.a(2)}},r,null,[[2,5,6,7]])}));return function(e){return r.apply(this,arguments)}}())}else{var y;(y=TeamErrorHandler).showError.apply(y,h(TeamErrorCodes.TEAM_ID_REQUIRED))}}function yn(e,t){return gn.apply(this,arguments)}function gn(){return gn=A(m().m(function e(t,n){var r,i,a,o,s,c,l,u,d,p,f,h,y,g,v,_,b=arguments;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=b.length>2&&void 0!==b[2]?b[2]:null,i=b.length>3&&void 0!==b[3]?b[3]:null,e.p=1,t){e.n=2;break}throw new Error("Parent ID is required for generating objective function ID. Received: ".concat(t));case 2:return a="team"===n?"TEAM":"AGENT",(o=t.replace(a,"OF")).includes("-TMP-")&&(s=o.split("-TMP-"),o=s[0]+"-"),c=o.match(/-(\d{3})$/),l=o,c&&(l=o.substring(0,o.length-c[1].length)),u=$.getQuery("GET_LATEST_OBJECTIVE_FUNCTION"),d=l.endsWith("-")?l.slice(0,-1):l,utils.debugLog("[MEASURE_TRACKING] OF ID generation: parentId=".concat(t,", baseIdWithoutVersion=").concat(l,", cleanBaseIdPrefix=").concat(d)),e.n=3,$.executeRead(u,{baseIdPrefix:d},r);case 3:if(p=e.v,f=1,p.length>0&&(h=p[0].id,(y=h.match(/-(\d{3})$/))&&(f=parseInt(y[1])+1)),g="".concat(l).concat(f.toString().padStart(3,"0")),i)for(;i.has(g);)f++,g="".concat(l).concat(f.toString().padStart(3,"0"));return e.a(2,g);case 4:return e.p=4,e.v,(v=t).includes("-TMP-")&&(_=v.split("-TMP-"),v=_[0]),e.a(2,"".concat(v.replace("team"===n?"TEAM":"AGENT","OF"),"-001"))}},e,null,[[1,4]])})),gn.apply(this,arguments)}function vn(e){var t=[];return e.team_id?/^[A-Z]{2,}-[A-Z]{2,}-[A-Z]{2,}-TEAM-\d{3}$/.test(e.team_id)||t.push("TEAM_ID_FORMAT"):t.push("TEAM_ID_REQUIRED"),e.name||t.push("NAME_REQUIRED"),e.description||t.push("DESCRIPTION_REQUIRED"),e.objectives&&0!==e.objectives.length||t.push("OBJECTIVES_REQUIRED"),t}function _n(e,t){if(""==e.trim())return null;var n=function(e){var t=/{([a-zA-Z0-9_]+)}/g,n=e.match(t);return n?n.map(function(e){return e.slice(1,-1)}):[]}(e||"");return{missingFields:t.filter(function(e){return!n.includes(e)}),extraFields:n.filter(function(e){return!t.includes(e)})}}function bn(e,t){var n=[];if(!t)return n;if(!(e.task_prompt&&0!==e.task_prompt.trim().length||e.user_prompt&&0!==e.user_prompt.trim().length))return n;if(e.task_prompt&&e.task_prompt.trim().length>0&&t.reserved_fields_task){var r=_n(e.task_prompt,t.reserved_fields_task);null!=r&&(r.missingFields.length>0&&n.push({code:"MISSING_TASK_FIELDS",params:{fields:r.missingFields.join(", ")}}),r.extraFields.length>0&&n.push({code:"EXTRA_TASK_FIELDS",params:{fields:r.extraFields.join(", ")}}))}if(e.user_prompt&&e.user_prompt.trim().length>0&&t.reserved_fields_user){var i=_n(e.user_prompt,t.reserved_fields_user);null!=i&&(i.missingFields.length>0&&n.push({code:"MISSING_USER_FIELDS",params:{fields:i.missingFields.join(", ")}}),i.extraFields.length>0&&n.push({code:"EXTRA_USER_FIELDS",params:{fields:i.extraFields.join(", ")}}))}return n}function En(e,t){for(var n=[],r=0,i=Object.entries({id:"OBJECTIVE_FUNCTION_ID_REQUIRED",name:"OBJECTIVE_FUNCTION_NAME_REQUIRED",description:"OBJECTIVE_FUNCTION_DESCRIPTION_REQUIRED"});r<i.length;r++){var a=E(i[r],2),o=a[0],s=a[1];e[o]||n.push(s)}if(e.type&&e.type!==t&&n.push({code:"OBJECTIVE_FUNCTION_TYPE_INVALID",params:{type:e.type,expectedType:t}}),e.objective_type&&["min","max"].includes(e.objective_type)||n.push("OBJECTIVE_FUNCTION_OBJECTIVE_TYPE_INVALID"),!e.formula||""===e.formula.trim())return n.push("OBJECTIVE_FUNCTION_FORMULA_REQUIRED"),n;try{var c;if("string"==typeof e.components)c=JSON.parse(e.components);else if(Array.isArray(e.components))c=e.components;else{c=ObjectiveFunctionManager.parseFormula(e.formula).components}if(!c||0===c.length)return n.push("OBJECTIVE_FUNCTION_COMPONENTS_REQUIRED"),n;if(Array.isArray(Z)&&Z.length>0){var l=new Set;Z.forEach(function(e){e.measure_id&&l.add(e.measure_id),e.id&&l.add(e.id)});var u=[];c.forEach(function(e){e.name&&!l.has(e.name)&&u.push(e.name)}),u.length>0&&n.push({code:"OBJECTIVE_FUNCTION_INVALID_MEASURE_IDS",params:{measureIds:u.join(", ")}})}var d="string"==typeof e.thresholds?JSON.parse(e.thresholds):e.thresholds;if(Array.isArray(d)&&0!==d.length){var p=new Set(d.map(function(e){return e.component})),f=new Set(c.map(function(e){return e.name})),m=h(p).filter(function(e){return!f.has(e)}),y=h(f).filter(function(e){return!p.has(e)});m.length>0&&n.push({code:"OBJECTIVE_FUNCTION_THRESHOLDS_NO_MATCHING_COMPONENT",params:{thresholds:m.join(", ")}}),y.length>0&&n.push({code:"OBJECTIVE_FUNCTION_COMPONENTS_MISSING_THRESHOLDS",params:{components:y.join(", ")}}),d.forEach(function(e,t){var r=e.component||"Threshold ".concat(t);(!e.scale||e.scale<2||e.scale>5)&&n.push({code:"OBJECTIVE_FUNCTION_THRESHOLD_SCALE_INVALID",params:{component:r,scale:e.scale}}),Array.isArray(e.ranges)?e.ranges.length!==e.scale?n.push({code:"OBJECTIVE_FUNCTION_THRESHOLD_RANGES_COUNT_MISMATCH",params:{component:r,expected:e.scale,actual:e.ranges.length}}):e.ranges.forEach(function(e,t){var i=e.level||"Range ".concat(t);e.level||n.push({code:"OBJECTIVE_FUNCTION_THRESHOLD_RANGE_LEVEL_REQUIRED",params:{component:r,range:t}}),(void 0===e.value||null===e.value||isNaN(e.value))&&n.push({code:"OBJECTIVE_FUNCTION_THRESHOLD_RANGE_VALUE_REQUIRED",params:{component:r,range:i}}),void 0!==e.min&&null!==e.min&&(isNaN(e.min)||e.min<0)&&n.push({code:"OBJECTIVE_FUNCTION_THRESHOLD_RANGE_MIN_INVALID",params:{component:r,range:i}}),void 0!==e.max&&null!==e.max&&(isNaN(e.max)||e.max<0)&&n.push({code:"OBJECTIVE_FUNCTION_THRESHOLD_RANGE_MAX_INVALID",params:{component:r,range:i}}),e.direction&&["min","max"].includes(e.direction)||n.push({code:"OBJECTIVE_FUNCTION_THRESHOLD_RANGE_DIRECTION_INVALID",params:{component:r,range:i}})}):n.push({code:"OBJECTIVE_FUNCTION_THRESHOLD_RANGES_REQUIRED",params:{component:r}})})}else n.push("OBJECTIVE_FUNCTION_THRESHOLDS_REQUIRED")}catch(e){n.push(0===n.length?"OBJECTIVE_FUNCTION_COMPONENTS_INVALID_FORMAT":"OBJECTIVE_FUNCTION_THRESHOLDS_INVALID_FORMAT")}return n}function wn(e,t,n,r,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(e!==t||arguments.length>5&&void 0!==arguments[5]&&arguments[5]){var o=ObjectiveFunctionManager.parseFormula(e).components,s=o.length>0,c={isValid:!0,invalidMeasures:[]};s&&Array.isArray(i)&&(c=ObjectiveFunctionManager.validateMeasures(o,i));var l=!1;if(s&&c.isValid){var u=!1;if(r.classList.contains("generate-components-btn")||(u=!a||ObjectiveFunctionManager.componentsNeedUpdate(e,a)),r.classList.contains("generate-components-btn")||u){var d=r.classList.contains("generate-components-btn")?"formulaHintValidComponents":"formulaHintComponentsUpdate";n.removeAttribute("data-i18n-dynamic"),n.removeAttribute("data-i18n-params"),n.setAttribute("data-i18n",d),n.textContent="",n.classList.remove("hide"),n.classList.remove("error"),l=!0}else n.removeAttribute("data-i18n"),n.removeAttribute("data-i18n-dynamic"),n.removeAttribute("data-i18n-params"),n.classList.add("hide"),n.classList.remove("error"),l=!1}else s&&!c.isValid?(n.removeAttribute("data-i18n"),n.setAttribute("data-i18n-dynamic","formulaHintInvalidMeasures"),n.setAttribute("data-i18n-params",JSON.stringify({measureIds:c.invalidMeasures.join(", ")})),n.textContent="",n.classList.remove("hide"),n.classList.add("error"),l=!1):e.length>0?(n.removeAttribute("data-i18n-dynamic"),n.removeAttribute("data-i18n-params"),n.setAttribute("data-i18n","formulaHintInvalidFormat"),n.textContent="",n.classList.remove("hide"),n.classList.add("error"),l=!1):(n.classList.add("hide"),n.classList.remove("error"),l=!1);return r&&(l?r.classList.add("update-needed"):r.classList.remove("update-needed")),l}return n.classList.add("hide"),n.classList.remove("error"),r&&r.classList.remove("update-needed"),!1}function Tn(e,t){var n,r=document.getElementById(e),i=document.getElementById(t);r.addEventListener("input",function(){var e=this.value.toLowerCase();n&&clearTimeout(n),n=setTimeout(function(){In()},300),Sn(e)}),i.addEventListener("click",function(){r.value="",In(),Sn("")})}function Sn(e){document.getElementById("clearSearch").style.display=e.length>0?"block":"none"}function In(){return An.apply(this,arguments)}function An(){return(An=A(m().m(function e(){return m().w(function(e){for(;;)switch(e.n){case 0:if(!B){e.n=1;break}return e.a(2);case 1:return e.n=2,ue(!0);case 2:return e.a(2)}},e)}))).apply(this,arguments)}function On(){var e=document.getElementById("categoryFilterButton"),t=document.getElementById("categoryDropdown"),n=document.getElementById("statusFilterButton"),r=document.getElementById("statusDropdown");!function(){var e=document.getElementById("statusFilterButton"),t=document.getElementById("statusDropdown"),n=t.querySelectorAll('input[type="checkbox"]');n.forEach(function(n){"Active"===n.value&&(n.checked=!0),n.addEventListener("change",function(){B||n.disabled||(n.checked?F.add(n.value):F.delete(n.value),jn(e,"Status",F.size),t.classList.remove("show"),ue(!0))})})}(),jn(n,"Status",F.size),jn(e,"Category",U.size),e.addEventListener("click",function(e){return kn(e,t)}),n.addEventListener("click",function(e){return kn(e,r)}),document.addEventListener("click",function(e){e.target.closest(".filter-group")||(t.classList.remove("show"),r.classList.remove("show"))})}function Nn(){return Rn.apply(this,arguments)}function Rn(){return(Rn=A(m().m(function e(){var t,n,r,i,a,o;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=$.getQuery("LOAD_CATEGORY_FILTERS"),e.n=1,$.executeRead(t,{});case 1:n=e.v,r=Array.from(n.map(function(e){return e.category})),i=document.getElementById("categoryDropdown"),(a=i.querySelector(".filter-dropdown-content")).innerHTML="",(o=document.createElement("div")).className="filter-item",o.innerHTML='\n            <label>\n                <input type="checkbox" value="Unspecified">\n                <span data-i18n="unspecified">Unspecified</span>\n            </label>\n        ',a.appendChild(o),r.forEach(function(e){if(e.trim()){var t=document.createElement("div");t.className="filter-item",t.innerHTML='\n                <label>\n                    <input type="checkbox" value="'.concat(e,'">\n                    <span>').concat(e,"</span>\n                </label>\n            "),a.appendChild(t)}}),Cn(),jn(document.getElementById("categoryFilterButton"),"Category",U.size),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function xn(){var e=document.querySelectorAll('#statusDropdown input[type="checkbox"]'),t=document.querySelectorAll('#categoryDropdown input[type="checkbox"]');e.forEach(function(e){e.disabled=!0}),t.forEach(function(e){e.disabled=!0})}function Ln(){var e=document.querySelectorAll('#statusDropdown input[type="checkbox"]'),t=document.querySelectorAll('#categoryDropdown input[type="checkbox"]');e.forEach(function(e){e.disabled=!1}),t.forEach(function(e){e.disabled=!1})}function Cn(){var e=document.getElementById("categoryFilterButton"),t=document.getElementById("categoryDropdown");t.querySelectorAll('input[type="checkbox"]').forEach(function(n){n.addEventListener("change",function(){B||n.disabled||(n.checked?U.add(n.value):U.delete(n.value),jn(e,"Category",U.size),t.classList.remove("show"),ue(!0))})})}function kn(e,t){e.stopPropagation(),document.querySelectorAll(".filter-dropdown").forEach(function(e){e!==t&&e.classList.remove("show")}),t.classList.toggle("show")}function jn(e,t,n){var r=e.querySelector("span");r&&(n>0?(r.removeAttribute("data-i18n"),r.textContent="".concat(t).concat(n>0?" (".concat(n,")"):"")):(r.setAttribute("data-i18n",t.toLowerCase()),r.textContent=""))}function Dn(){document.querySelectorAll(".tab-button").forEach(function(e){e.addEventListener("click",function(){lr(e.dataset.tab)})}),document.getElementById("new_team").addEventListener("click",xe),document.getElementById("clone_team").addEventListener("click",Ce),document.getElementById("import_team").addEventListener("click",Ve),document.getElementById("export_team").addEventListener("click",je),document.getElementById("addObjectiveFunction").addEventListener("click",function(){return mn("team")}),document.getElementById("addAgentInstance").addEventListener("click",function(){return en()}),nn(document.getElementById("location_id")),document.getElementById("location_id").addEventListener("change",zn),document.getElementById("addLocationBtn").addEventListener("click",Ut),function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";tn(e,(null===(t=k)||void 0===t?void 0:t.allowed_consensus)||[],{placeholderText:"Select Allowed Consensus",placeholderi18n:"selectAllowedConsensus"},n)}(document.getElementById("allowed_consensus")),document.getElementById("allowed_consensus").addEventListener("change",zn),document.querySelectorAll("textarea").forEach(function(e){e.addEventListener("input",function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"})})}function $n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial";M=e;var t=document.querySelector(".team-editor");t.classList.remove("initial-mode","new-mode","clone-mode","edit-mode","import-mode"),e&&t.classList.add("".concat(e,"-mode"));var n=document.getElementById("generateTeamId"),r=document.getElementById("site"),i=document.getElementById("area"),a=document.getElementById("function"),o=document.getElementById("version"),s="new"===e||"clone"===e||"import"===e;n.disabled=!s,r.readOnly=!s,i.readOnly=!s,a.readOnly=!s,o.readOnly=!s,G=s,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.getElementById("new_team"),r=document.getElementById("save_team"),i=document.getElementById("clone_team"),a=document.getElementById("import_team"),o=document.getElementById("export_team"),s=document.getElementById("cancel_team");switch(a.disabled=!1,r.style.display="none",s.style.display="none",n.style.display="flex",e){case"view":n.style.display="flex",n.disabled=!1,i.disabled=!t,o.disabled=!0;break;case"edit":n.style.display="none",r.style.display="flex",s.style.display="flex",i.disabled=!1,o.disabled=!1;break;case"clone":case"new":case"import":n.style.display="none",r.style.display="flex",r.disabled=!1,s.style.display="flex",i.disabled=!0,o.disabled=!0}}(e,"edit"===e||"clone"===e),rr()}function Pn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.getElementById(e);if(!r)return null;var i=sr(t);function a(){if(r.innerHTML="",i.forEach(function(e){if(e.trim()){var t=document.createElement("span");if(t.classList.add("tag"),t.textContent=e,!n){var o=document.createElement("button");o.textContent="×",o.setAttribute("data-i18n-aria-label","remove"),o.setAttribute("data-i18n-params",JSON.stringify({item:e})),o.onclick=function(){i=i.filter(function(t){return t!==e}),a(),zn()},t.appendChild(o)}r.appendChild(t)}}),!n){var t=document.createElement("input");t.type="text",t.setAttribute("data-i18n-placeholder","add"),t.setAttribute("data-i18n-aria-label","addNew"),t.setAttribute("data-i18n-params",JSON.stringify({item:e})),t.addEventListener("keydown",function(e){if("Enter"===e.key||","===e.key){e.preventDefault();var n=t.value.trim();n&&!i.includes(n)&&(i.push(n),a(),t.value="",zn())}}),r.appendChild(t)}}return a(),r.getTags=function(){return i},r.setTags=function(e){i=sr(e),a()},{getTags:function(){return i},setTags:function(e){i=sr(e),a()}}}function Mn(){var e,t,n,r,i=(new Date).toISOString(),a=new FormData(O),o=Object.fromEntries(a.entries());return o.location_id=document.getElementById("location_id").value||null,o.active=document.getElementById("active").checked,o.tags=R.getTags(),delete o.site,delete o.area,delete o.function,delete o.version,o.objectives=x.getTags(),o.operating_principles=L.getTags(),o.compliance_requirements=C.getTags(),o.agent_configurations=null!==(e=W)&&void 0!==e&&e.agents?function(){var e=(new Date).toISOString();return W.agents.map(function(t){var n=document.getElementById("constraints_".concat(t.agent_id)),r=document.getElementById("responsibilities_".concat(t.agent_id)),i=t.constraints||[],a=t.responsibilities||[];return n&&n.getTags&&(i=n.getTags()),r&&r.getTags&&(a=r.getTags()),_(_({},t),{},{constraints:i,responsibilities:a,created_date:t.created_date?new Date(t.created_date).toISOString():e,last_modified_date:e})})}():[],o.objective_function=(null===(t=W)||void 0===t?void 0:t.objective_function)||null,o.category=document.getElementById("category").value.trim()||"General",o.allowed_consensus=document.getElementById("allowed_consensus").value.trim()||"",o.author=j.CURRENT_USER,o.created_date=null!==(n=W)&&void 0!==n&&n.created_date?new Date(W.created_date).toISOString():i,o.last_modified_date=i,o.version=parseInt((null===(r=W)||void 0===r?void 0:r.version)||0)+1,or(o)}function Un(e){var t,n;if(G=!1,q=null,J=null,Bn(),Jn(!1),W="string"==typeof e?JSON.parse(e):_({},e),n=W,(W=Object.entries(n).reduce(function(e,t){var n=E(t,2),r=n[0],i=n[1];if("string"==typeof i&&(i.startsWith("{")||i.startsWith("[")))try{e[r]=JSON.parse(i)}catch(t){e[r]=i}else e[r]=i;return e},{})).objective_function&&(W.objective_function=ObjectiveFunctionManager.normalize(W.objective_function)),W.agents&&W.agents.length>0&&(W.agents=W.agents.map(function(e){return e.objective_function&&(e.objective_function=ObjectiveFunctionManager.normalize(e.objective_function)),e})),Object.keys(W).forEach(function(e){var t=document.getElementById(e);t&&"version"!==e&&("checkbox"===t.type?t.checked=!0===W[e]:t.value=W[e])}),W.team_id){var r=W.team_id.split("-");5===r.length&&(document.getElementById("site").value=r[0],document.getElementById("area").value=r[1],document.getElementById("function").value=r[2],document.getElementById("version").value=parseInt(r[4],10))}var i=document.getElementById("location_id");W.location_id?i.value=W.location_id:i.value="";var a=document.getElementById("allowed_consensus");if(W.allowed_consensus?a.value=W.allowed_consensus:a.value="",W.objectives&&x.setTags(sr(W.objectives)),W.operating_principles&&L.setTags(sr(W.operating_principles)),W.compliance_requirements&&C.setTags(sr(W.compliance_requirements)),W.tags&&R.setTags(sr(W.tags)),W.created_date){var o=document.getElementById("created_date");o.setAttribute("data-date",W.created_date),o.setAttribute("data-i18n-date","datetime-medium"),o.setAttribute("data-date",W.created_date),o.setAttribute("data-i18n-date","datetime-medium")}if(W.last_modified_date){var s=document.getElementById("last_modified_date");s.setAttribute("data-date",W.last_modified_date),s.setAttribute("data-i18n-date","datetime-medium"),s.setAttribute("data-date",W.last_modified_date),s.setAttribute("data-i18n-date","datetime-medium")}if(W.author){var c=document.getElementById("author");c.value=W.author,c.setAttribute("readonly","readonly")}W.category&&(document.getElementById("category").value=W.category);var l=document.getElementById("objectiveFunctionContainer");W.objective_function&&(null===(t=W.objective_function.id)||void 0===t?void 0:t.trim().length)>0?(l&&(l.innerHTML="",hn(W.objective_function,l)),document.getElementById("addObjectiveFunction").classList.add("hide")):(l&&(l.innerHTML='<div class="no-rows" data-i18n="noObjectiveFunction">No objective function</div>'),document.getElementById("addObjectiveFunction").classList.remove("hide")),Y.clear(),q=JSON.parse(JSON.stringify(W))}function Fn(){document.querySelector(".team-editor").querySelectorAll("input, textarea, select").forEach(function(e){e.addEventListener("change",zn),("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase()&&"checkbox"!==e.type)&&e.addEventListener("input",zn)})}function zn(){q?(J=Mn(),G=!function(e,t){var n=function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;var n=h(e).sort(),r=h(t).sort();return JSON.stringify(n)===JSON.stringify(r)},r=function(e){return Object.entries(e).sort().reduce(function(e,t){var n=E(t,2),r=n[0],i=n[1];return["created_date","last_modified_date","author"].includes(r)||(Array.isArray(i)?e[r]=i.sort():e[r]=i),e},{})},i=r(e),a=r(t);for(var o in i)if(Array.isArray(i[o])){if(!n(i[o],a[o]))return!1}else if(i[o]!==a[o])return!1;return!0}(q,J),Bn()):q=Mn()}function Bn(){var e=document.getElementById("save_team");if(e){["new","clone","import"].includes(M)?e.disabled=!1:e.disabled=!G}}function Hn(){return Vn.apply(this,arguments)}function Vn(){return(Vn=A(m().m(function e(){return m().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e){if(G){var t=tr("discardChanges",'\n            <div class="row">\n                <p><span data-i18n="confirmDiscardChanges">Are you sure you want to discard your changes?</span></p>\n            </div>\n            <div class="row form-actions">\n                <button type="button" class="secondary-button cancel-button">\n                    <span data-i18n="cancel">Cancel</span>\n                </button>\n                <button type="button" class="danger-button confirm-button">\n                    <span data-i18n="confirm">Confirm</span>\n                </button>\n            </div>\n        ',{translateTitle:!0,modalClass:"confirm-modal"}),n=t.querySelector(".confirm-button"),r=t.querySelector(".cancel-button");n.onclick=function(){G=!1,t.remove(),e(!0)},r.onclick=function(){t.remove(),e(!1)}}else e(!0)}))},e)}))).apply(this,arguments)}function Wn(){return Gn.apply(this,arguments)}function Gn(){return(Gn=A(m().m(function e(){return m().w(function(e){for(;;)switch(e.n){case 0:if(!G){e.n=2;break}return e.n=1,Hn();case 1:if(e.v){e.n=2;break}return e.a(2);case 2:Jn(),ar(),$n();case 3:return e.a(2)}},e)}))).apply(this,arguments)}function qn(){he(W.team_id)}function Jn(){var e,t,n,r,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];O.reset(),null===(e=C)||void 0===e||e.setTags([]),null===(t=x)||void 0===t||t.setTags([]),null===(n=L)||void 0===n||n.setTags([]),null===(r=R)||void 0===r||r.setTags([]),document.getElementById("created_date").textContent="",document.getElementById("last_modified_date").textContent="",document.getElementById("author").value=j.CURRENT_USER,document.getElementById("category").value="";var a=document.getElementById("objectiveFunctionContainer");a&&(a.innerHTML='<div class="no-rows" data-i18n="noObjectiveFunction">No objective function</div>'),document.getElementById("addObjectiveFunction").classList.remove("hide");var o=document.getElementById("agentInstancesList");o&&(o.innerHTML='<div class="no-rows" data-i18n="noActiveAgentInstances">No active agent instances</div>'),W=null,lr("details"),i&&$n("view"),rr()}function Yn(){Kn("page"),document.getElementById("container").classList.remove("hide")}function Qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial";if(!document.getElementById("".concat(e,"Spinner"))){var t=document.createElement("div");t.className="spinner-container ".concat(e),t.id="".concat(e,"Spinner");var n=document.createElement("div");n.className="spinner ".concat(e),t.appendChild(n),N.appendChild(t)}}function Kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial",t=document.getElementById("".concat(e,"Spinner"));t&&t.remove()}function Xn(){var e=document.getElementById("teamList");e.removeEventListener("scroll",Zn),e.addEventListener("scroll",Zn)}function Zn(e){var t=e.target;t.scrollTop+t.clientHeight>=t.scrollHeight-100&&!B&&V&&(B=!0,pe(document.getElementById("teamSearch").value.toLowerCase()))}function er(e){var t=document.querySelector(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})}function tr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.wide,i=void 0!==r&&r,a=n.modalClass,o=void 0===a?"":a,s=n.onClose,c=void 0===s?null:s,l=n.closeOnBackdrop,u=void 0!==l&&l,d=n.translateTitle,p=void 0!==d&&d,f=document.createElement("div");f.className="modal ".concat(o).concat(i?" wide":""),f.setAttribute("role","dialog"),f.setAttribute("aria-labelledby","modalTitle");var h=p?'<h2 id="modalTitle" data-i18n="'.concat(e,'"></h2>'):'<h2 id="modalTitle">'.concat(e,"</h2>");f.innerHTML='\n        <div class="modal-content">\n            <div class="modal-header">\n                '.concat(h,'\n                <span class="close-button" data-i18n-aria-label="close"><i class="fa-solid fa-times"></i></span>\n            </div>\n            <div class="modal-body">\n                ').concat(t,"\n            </div>\n        </div>\n    "),document.body.appendChild(f);var m=function(){f.remove(),c&&c()};return f.querySelector(".close-button").onclick=m,u&&f.addEventListener("click",function(e){e.target===f&&m()}),f}function nr(){var e=document.querySelector(".team-list");e&&e.classList.add("hide");var t=document.querySelector(".metadata-panel");t&&t.classList.add("hide");var n=document.querySelector(".right-actions");n&&n.classList.add("hide");var r=document.querySelector(".three-column-layout");r&&(r.classList.remove("three-column-layout"),r.classList.add("single-column-layout"))}function rr(){var e=document.getElementById("teamIdStatus");e&&(e.style.display="none",e.textContent="")}function ir(e){N.querySelectorAll(".team-item").forEach(function(t){t.classList.toggle("active",t.dataset.teamId===e)})}function ar(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];document.querySelectorAll(".team-item").forEach(function(e){e.classList.remove("active")}),e&&(W=null)}function or(e){return Object.entries(e).reduce(function(e,t){var n=E(t,2),r=n[0],i=n[1];return Array.isArray(i)?e[r]=i:null!==i&&"object"===S(i)?e[r]=JSON.stringify(i):e[r]=i,e},{})}function sr(e){if(Array.isArray(e))return e;if("string"!=typeof e)return null==e?[]:[e];try{var t=JSON.parse(e);return Array.isArray(t)?t:[e]}catch(t){return e?e.split(",").map(function(e){return e.trim()}):[]}}function cr(){var e;Dn(),e=function(){var e=A(m().m(function e(){return m().w(function(e){for(;;)switch(e.n){case 0:if(!$){e.n=1;break}return e.n=1,$.close();case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),window.addEventListener("pagehide",e),window.addEventListener("beforeunload",e),window.addEventListener("unload",e)}function lr(e){document.querySelectorAll(".tab-button").forEach(function(t){t.classList.toggle("active",t.dataset.tab===e)}),document.querySelectorAll(".tab-panel").forEach(function(t){t.classList.toggle("active",t.id===e)}),"agents"===e&&W&&Jt()}function ur(){return ur=A(m().m(function e(){var t,n,r,s,c,l;return m().w(function(e){for(;;)switch(e.p=e.n){case 0:return utils.debugLog("Initializing application"),e.p=1,O=document.getElementById("teamForm"),N=document.getElementById("teamList"),$=i.M.classFactory(j,a,o),e.n=2,$.initialize();case 2:return utils.debugLog("Graph database driver initialized successfully"),e.n=3,ve();case 3:return k=e.v,e.n=4,ie();case 4:return Q=e.v,e.n=5,oe();case 5:return K=e.v,X=K.filter(function(e){return!0===e.active}),e.n=6,ce();case 6:if(Z=e.v,re(),cr(),Fn(),!j.TEAM_ID){e.n=8;break}return x=Pn("objectives"),L=Pn("operating_principles"),C=Pn("compliance_requirements"),R=Pn("tags",[],!0),e.n=7,he(j.TEAM_ID);case 7:nr(),(t=document.getElementById("save_team"))&&t.addEventListener("click",function(){var e=A(m().m(function e(t){var n;return m().w(function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),""===M){e.n=2;break}return e.n=1,Ee();case 1:e.n=3;break;case 2:(n=TeamErrorHandler).showError.apply(n,h(TeamErrorCodes.NO_CHANGES_TO_SAVE));case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),(n=document.getElementById("cancel_team"))&&n.addEventListener("click",qn),e.n=11;break;case 8:return Yn(),Qn("initial"),$n(),Tn("teamSearch","clearSearch"),e.n=9,Nn();case 9:return On(),e.n=10,ue();case 10:x=Pn("objectives"),L=Pn("operating_principles"),C=Pn("compliance_requirements"),R=Pn("tags"),(r=document.getElementById("save_team"))&&r.addEventListener("click",function(){var e=A(m().m(function e(t){var n;return m().w(function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),""===M){e.n=2;break}return e.n=1,Ee();case 1:e.n=3;break;case 2:(n=TeamErrorHandler).showError.apply(n,h(TeamErrorCodes.NO_CHANGES_TO_SAVE));case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),(s=document.getElementById("cancel_team"))&&s.addEventListener("click",Wn),(c=document.getElementById("generateTeamId"))&&c.addEventListener("click",Pt);case 11:e.n=13;break;case 12:e.p=12,e.v,(l=TeamErrorHandler).showError.apply(l,h(TeamErrorCodes.INIT_FAILED));case 13:return e.p=13,Kn("initial"),Yn(),e.f(13);case 14:return e.a(2)}},e,null,[[1,12,13,14]])})),ur.apply(this,arguments)}},2420:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e,t){this.ioc=e,this.ID=t,this.ioc.serializers[t]=this}canBeUsedFor(e){return"string"==typeof e}serialize(e,t=!0){if(null==e)return t?r.from([this.ID,1]):this.ioc.intSerializer.serialize(0,!1);const n=[];t&&n.push(r.from([this.ID,0]));const i=r.from(String(e),"utf8");return n.push(this.ioc.intSerializer.serialize(i.length,!1)),n.push(i),r.concat(n)}deserialize(e,t=!0,n=!1){let i=0,a=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=a.readUInt8();if(i++,e!==this.ID)throw new Error("unexpected {type_code}");a=a.slice(1)}if(t||n){if(a.length<1)throw new Error("{value_flag} is missing");const e=a.readUInt8();if(i++,1===e)return{v:null,len:i};if(0!==e)throw new Error("unexpected {value_flag}");a=a.slice(1)}let o,s;try{({v:o,len:s}=this.ioc.intSerializer.deserialize(a,!1)),i+=s}catch(e){throw e.message="{length}: "+e.message,e}if(o<0)throw new Error("{length} is less than zero");if(a=a.slice(s),a.length<o)throw new Error("unexpected {text_value} length");i+=o;return{v:a.toString("utf8",0,o),len:i}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:a,err:e})}}}},2468:e=>{"use strict";e.exports=class{constructor(e){this._options=e}evaluateChallenge(e){throw new Error("evaluateChallenge should be implemented")}}},2588:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.EDGE]=this}canBeUsedFor(e){return e instanceof i.Edge}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.EDGE,1]);const e=[3,0,0,0,0,0],n=[0,0,0,0],i=[3,0,0,0,0,0],a=[0,0,0,0],o=[3,0,0,0,0,0],s=[0,0,0,0],c=[254,1],l=[254,1];return r.from([...e,...n,...i,...a,...o,...s,...c,...l])}const n=[];t&&n.push(r.from([this.ioc.DataType.EDGE,0])),n.push(this.ioc.anySerializer.serialize(e.id)),n.push(this.ioc.stringSerializer.serialize(e.label,!1));const i=e.inV&&e.inV.id;n.push(this.ioc.anySerializer.serialize(i));const a=e.inV&&e.inV.label;n.push(this.ioc.stringSerializer.serialize(a,!1));const o=e.outV&&e.outV.id;n.push(this.ioc.anySerializer.serialize(o));const s=e.outV&&e.outV.label;return n.push(this.ioc.stringSerializer.serialize(s,!1)),n.push(this.ioc.unspecifiedNullSerializer.serialize(null)),n.push(this.ioc.unspecifiedNullSerializer.serialize(null)),r.concat(n)}deserialize(e,t=!0){let n=0,a=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=a.readUInt8();if(n++,e!==this.ioc.DataType.EDGE)throw new Error("unexpected {type_code}");if(a=a.slice(1),a.length<1)throw new Error("{value_flag} is missing");const t=a.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");a=a.slice(1)}let o,s,c,l,u,d,p,f,h,m,y,g,v,_,b;try{({v:o,len:s}=this.ioc.anySerializer.deserialize(a)),n+=s}catch(e){throw e.message="{id}: "+e.message,e}a=a.slice(s);try{({v:c,len:l}=this.ioc.stringSerializer.deserialize(a,!1)),n+=l}catch(e){throw e.message="{label}: "+e.message,e}a=a.slice(l);try{({v:u,len:d}=this.ioc.anySerializer.deserialize(a)),n+=d}catch(e){throw e.message="{inVId}: "+e.message,e}a=a.slice(d);try{({v:p,len:f}=this.ioc.stringSerializer.deserialize(a,!1)),n+=f}catch(e){throw e.message="{inVLabel}: "+e.message,e}a=a.slice(f);try{({v:h,len:m}=this.ioc.anySerializer.deserialize(a)),n+=m}catch(e){throw e.message="{outVId}: "+e.message,e}a=a.slice(m);try{({v:y,len:g}=this.ioc.stringSerializer.deserialize(a,!1)),n+=g}catch(e){throw e.message="{outVLabel}: "+e.message,e}a=a.slice(g);try{({len:v}=this.ioc.anySerializer.deserialize(a)),n+=v}catch(e){throw e.message="{parent}: "+e.message,e}a=a.slice(v);try{({v:_,len:b}=this.ioc.anySerializer.deserialize(a)),n+=b}catch(e){throw e.message="{properties}: "+e.message,e}a=a.slice(b);return{v:new i.Edge(o,new i.Vertex(h,y,null),c,new i.Vertex(u,p,null),_),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:a,err:e})}}}},2617:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}var l=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.locale=t,this.config=this.getLocaleConfig(t),this.initializeFormatters()},t=[{key:"initializeFormatters",value:function(){var e={hour12:this.config.timeFormat.hour12};this.dateFormatters={short:new Intl.DateTimeFormat(this.locale,a({dateStyle:"short",timeStyle:"short"},e)),medium:new Intl.DateTimeFormat(this.locale,a({dateStyle:"medium",timeStyle:"medium"},e)),long:new Intl.DateTimeFormat(this.locale,a({dateStyle:"full",timeStyle:"long"},e)),time:new Intl.DateTimeFormat(this.locale,a({timeStyle:"short"},e))},this.numberFormatter=new Intl.NumberFormat(this.locale,{minimumFractionDigits:0,maximumFractionDigits:20}),this.currencyFormatter=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.config.numberFormat.currency})}},{key:"getLocaleConfig",value:function(e){return window.localeConfigs[e]||window.localeConfigs["en-US"]}},{key:"formatDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium",n=this.config.dateFormat;return null!=n&&n[t]?new Intl.DateTimeFormat(this.locale,{dateStyle:t}).format(e):e.toLocaleDateString(this.locale)}},{key:"formatNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return null!==t?new Intl.NumberFormat(this.locale,{minimumFractionDigits:t,maximumFractionDigits:t}).format(e):this.numberFormatter.format(e)}catch(t){return e.toString()}}},{key:"formatCurrency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return t?new Intl.NumberFormat(this.locale,{style:"currency",currency:t}).format(e):this.currencyFormatter.format(e)}catch(t){return e.toString()}}},{key:"formatRelativeTime",value:function(e){try{for(var t=new Intl.RelativeTimeFormat(this.locale,{numeric:"auto"}),r=(new Date(e).getTime()-Date.now())/1e3,i=0,a=Object.entries({year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1});i<a.length;i++){var o=n(a[i],2),s=o[0],c=o[1];if(Math.abs(r)>=c||"second"===s)return t.format(Math.round(r/c),s)}}catch(t){return new Date(e).toLocaleString(this.locale)}}},{key:"formatTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";try{var n,r={hour:"numeric",minute:"numeric",second:"short"!==t?"numeric":void 0,hour12:null===(n=this.config.timeFormat)||void 0===n?void 0:n.hour12};return new Intl.DateTimeFormat(this.locale,r).format(e)}catch(t){return e.toLocaleTimeString(this.locale)}}},{key:"uses12HourTime",value:function(){var e,t;return"12h"===(null===(e=this.config.timeFormat)||void 0===e?void 0:e.system)||!0===(null===(t=this.config.timeFormat)||void 0===t?void 0:t.hour12)}},{key:"usesMixedTimeFormat",value:function(){var e;return"mixed"===(null===(e=this.config.timeFormat)||void 0===e?void 0:e.system)}},{key:"formatDateTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";try{var n,r=e instanceof Date?e:new Date(e),i=(null===(n=this.config.dateTimeFormat)||void 0===n?void 0:n[t])||{},a=new Intl.DateTimeFormat(this.locale,{dateStyle:t}),o=new Intl.DateTimeFormat(this.locale,{hour:"12h"===this.config.timeFormat.system?"numeric":"2-digit",minute:"2-digit",second:"short"!==t?"2-digit":void 0,hour12:this.config.timeFormat.hour12});return(i.pattern||"{date} {time}").replace("{date}",a.format(r)).replace("{time}",o.format(r))}catch(t){return new Date(e).toLocaleString(this.locale)}}},{key:"getMeridiemMarker",value:function(e){var t=this.config.timeFormat;return null!=t&&t.meridiem?e<12?t.meridiem.ante:t.meridiem.post:null}},{key:"isRTL",value:function(){return"rtl"===this.config.direction}},{key:"getCulturalPreferences",value:function(){var e,t,n,r;return{direction:this.config.direction,timeFormat:this.config.timeFormat,dateFormat:this.config.dateFormat,dateTimeFormat:this.config.dateTimeFormat,numberFormat:this.config.numberFormat,calendar:{firstDayOfWeek:null!==(e=null===(t=this.config.calendar)||void 0===t?void 0:t.firstDayOfWeek)&&void 0!==e?e:0,weekendDays:null!==(n=null===(r=this.config.calendar)||void 0===r?void 0:r.weekendDays)&&void 0!==n?n:[0,6]},measurement:this.config.measurement||"metric"}}}],t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();e.exports&&(e.exports=l),window.CulturalConfig=l},2831:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return c.default}});var r=p(n(3518)),i=p(n(4948)),a=p(n(5073)),o=p(n(7186)),s=p(n(4808)),c=p(n(7775)),l=p(n(7037)),u=p(n(9910)),d=p(n(6792));function p(e){return e&&e.__esModule?e:{default:e}}},2858:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};const r=new Uint8Array(16)},2861:(e,t,n)=>{var r=n(8287),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),o.prototype=Object.create(i.prototype),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},3095:(e,t,n)=>{"use strict";const{ArrayPrototypePop:r,Promise:i}=n(4134),{isIterable:a,isNodeStream:o,isWebStream:s}=n(6115),{pipelineImpl:c}=n(7758),{finished:l}=n(6238);n(5506),e.exports={finished:l,pipeline:function(...e){return new i((t,n)=>{let i,l;const u=e[e.length-1];if(u&&"object"==typeof u&&!o(u)&&!a(u)&&!s(u)){const t=r(e);i=t.signal,l=t.end}c(e,(e,r)=>{e?n(e):t(r)},{signal:i,end:l})})}}},3141:(e,t,n)=>{"use strict";var r=n(2861).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(i=o(t[r]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(i=o(t[r]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},3203:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e}readResponse(e){if(null==e)throw new Error("Buffer is missing.");if(!(e instanceof r))throw new Error("Not an instance of Buffer.");if(e.length<1)throw new Error("Buffer is empty.");const t={status:{},result:{}};let n,i=e;const a=i[0];if(129!==a)throw new Error(`Unsupported version '${a}'.`);return i=i.slice(1),({v:t.requestId,len:n}=this.ioc.uuidSerializer.deserialize(i,!1,!0)),i=i.slice(n),({v:t.status.code,len:n}=this.ioc.intSerializer.deserialize(i,!1)),i=i.slice(n),({v:t.status.message,len:n}=this.ioc.stringSerializer.deserialize(i,!1,!0)),i=i.slice(n),({v:t.status.attributes,len:n}=this.ioc.mapSerializer.deserialize(i,!1)),i=i.slice(n),({v:t.result.meta,len:n}=this.ioc.mapSerializer.deserialize(i,!1)),i=i.slice(n),({v:t.result.data}=this.ioc.anySerializer.deserialize(i)),t}}},3321:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BOOLEAN]=this}canBeUsedFor(e){return"boolean"==typeof e}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.BOOLEAN,1]):r.from([0]);const n=[];return t&&n.push(r.from([this.ioc.DataType.BOOLEAN,0])),n.push(r.from([e?1:0])),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.BOOLEAN)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<1)throw new Error("unexpected {value} length");n+=1;let a=i.readUInt8();if(0!==a&&1!==a)throw new Error(`unexpected boolean byte=${a}`);return a=1===a,{v:a,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},3335:(e,t,n)=>{"use strict";const r=n(1545).Traversal;class i{constructor(e,t={}){this.fqcn=e,this.configuration=t}apply(e){}}e.exports={TraversalStrategies:class{constructor(e){this.strategies=e?[...e.strategies]:[]}addStrategy(e){this.strategies.push(e)}removeStrategy(e){const t=this.strategies.findIndex(t=>t.fqcn===e.fqcn);if(-1!==t)return this.strategies.splice(t,1)[0]}applyStrategies(e){return this.strategies.reduce((t,n)=>t.then(()=>n.apply(e)),Promise.resolve())}},TraversalStrategy:i,ConnectiveStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.ConnectiveStrategy")}},ElementIdStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.ElementIdStrategy")}},HaltedTraverserStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.HaltedTraverserStrategy"),void 0!==e&&(this.configuration.haltedTraverserFactory=e)}},OptionsStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.OptionsStrategy",e)}},PartitionStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.PartitionStrategy",e)}},SeedStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.SeedStrategy",{seed:e.seed})}},SubgraphStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.SubgraphStrategy",e),this.configuration.vertices instanceof r&&(this.configuration.vertices=this.configuration.vertices.bytecode),this.configuration.edges instanceof r&&(this.configuration.edges=this.configuration.edges.bytecode),this.configuration.vertexProperties instanceof r&&(this.configuration.vertexProperties=this.configuration.vertexProperties.bytecode)}},VertexProgramStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.computer.traversal.strategy.decoration.VertexProgramStrategy",e)}},MatchAlgorithmStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.finalization.MatchAlgorithmStrategy"),void 0!==e&&(this.configuration.matchAlgorithm=e)}},AdjacentToIncidentStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.AdjacentToIncidentStrategy")}},FilterRankingStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.FilterRankingStrategy")}},IdentityRemovalStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.IdentityRemovalStrategy")}},IncidentToAdjacentStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.IncidentToAdjacentStrategy")}},InlineFilterStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.InlineFilterStrategy")}},LazyBarrierStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.LazyBarrierStrategy")}},MatchPredicateStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.MatchPredicateStrategy")}},OrderLimitStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.OrderLimitStrategy")}},PathProcessorStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.PathProcessorStrategy")}},PathRetractionStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.PathRetractionStrategy")}},ProductiveByStrategy:class extends i{constructor(e){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.ProductiveByStrategy",e)}},CountStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.CountStrategy")}},RepeatUnrollStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.RepeatUnrollStrategy")}},GraphFilterStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.GraphFilterStrategy")}},EarlyLimitStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.optimization.EarlyLimitStrategy")}},EdgeLabelVerificationStrategy:class extends i{constructor(e=!1,t=!1){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.verification.EdgeLabelVerificationStrategy",{logWarnings:e,throwException:t})}},LambdaRestrictionStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.verification.LambdaRestrictionStrategy")}},ReadOnlyStrategy:class extends i{constructor(){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.verification.ReadOnlyStrategy")}},ReservedKeysVerificationStrategy:class extends i{constructor(e=!1,t=!1,n=["id","label"]){super("org.apache.tinkerpop.gremlin.process.traversal.strategy.verification.ReservedKeysVerificationStrategy",{logWarnings:e,throwException:t,keys:n})}}}},3370:(e,t,n)=>{"use strict";const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:a,ObjectSetPrototypeOf:o}=n(4134);e.exports=l;const s=n(7576),c=n(8584);o(l.prototype,s.prototype),o(l,s);{const e=a(c.prototype);for(let t=0;t<e.length;t++){const n=e[t];l.prototype[n]||(l.prototype[n]=c.prototype[n])}}function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),c.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let u,d;function p(){return void 0===u&&(u={}),u}r(l.prototype,{writable:{__proto__:null,...i(c.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(c.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(c.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(c.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(c.prototype,"writableLength")},writableFinished:{__proto__:null,...i(c.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(c.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(c.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(c.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),l.fromWeb=function(e,t){return p().newStreamDuplexFromReadableWritablePair(e,t)},l.toWeb=function(e){return p().newReadableWritablePairFromDuplex(e)},l.from=function(e){return d||(d=n(6706)),d(e,"body")}},3469:(e,t,n)=>{"use strict";const r=n(1545),i=n(5332),a=n(3335),o=n(163),s=n(9449),c=n(5737),l=n(9032),u=n(2029),d=n(1104),p=n(7240),f=n(7286),h=n(7545),m=n(74),y=n(2468),g=n(1893),v=n(6665);e.exports={driver:{RemoteConnection:c.RemoteConnection,RemoteStrategy:c.RemoteStrategy,RemoteTraversal:c.RemoteTraversal,ResponseError:f,DriverRemoteConnection:p,Client:h,ResultSet:m,auth:{Authenticator:y,PlainTextSaslAuthenticator:g}},process:{Bytecode:l,EnumValue:r.EnumValue,P:r.P,TextP:r.TextP,Traversal:r.Traversal,TraversalSideEffects:r.TraversalSideEffects,TraversalStrategies:a.TraversalStrategies,TraversalStrategy:a.TraversalStrategy,Traverser:r.Traverser,barrier:r.barrier,cardinality:r.cardinality,column:r.column,direction:r.direction,dt:r.dt,merge:r.merge,operator:r.operator,order:r.order,pick:r.pick,pop:r.pop,scope:r.scope,t:r.t,GraphTraversal:i.GraphTraversal,GraphTraversalSource:i.GraphTraversalSource,statics:i.statics,Translator:u,traversal:v.traversal,AnonymousTraversalSource:v,withOptions:r.withOptions},structure:{io:s,Edge:o.Edge,Graph:o.Graph,Path:o.Path,Property:o.Property,Vertex:o.Vertex,VertexProperty:o.VertexProperty,toLong:d.toLong}}},3518:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2858))&&r.__esModule?r:{default:r},a=n(9910);let o,s,c=0,l=0;var u=function(e,t,n){let r=t&&n||0;const u=t||new Array(16);let d=(e=e||{}).node||o,p=void 0!==e.clockseq?e.clockseq:s;if(null==d||null==p){const t=e.random||(e.rng||i.default)();null==d&&(d=o=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==p&&(p=s=16383&(t[6]<<8|t[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:l+1;const m=f-c+(h-l)/1e4;if(m<0&&void 0===e.clockseq&&(p=p+1&16383),(m<0||f>c)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=h,s=p,f+=122192928e5;const y=(1e4*(268435455&f)+h)%4294967296;u[r++]=y>>>24&255,u[r++]=y>>>16&255,u[r++]=y>>>8&255,u[r++]=255&y;const g=f/4294967296*1e4&268435455;u[r++]=g>>>8&255,u[r++]=255&g,u[r++]=g>>>24&15|16,u[r++]=g>>>16&255,u[r++]=p>>>8|128,u[r++]=255&p;for(let e=0;e<6;++e)u[r+e]=d[e];return t||(0,a.unsafeStringify)(u)};t.default=u},3676:e=>{var t;function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i={"en-US":{name:"English (US)",nativeName:"English (US)",flag:"🇺🇸",direction:"ltr",numberFormat:{decimal:".",group:",",currency:"USD",currencyDisplay:"$"},timeFormat:{system:"12h",hour12:!0,short:"h:mm A",medium:"h:mm:ss A",long:"h:mm:ss A z",meridiem:{ante:"AM",post:"PM"}},dateFormat:{short:"MM/DD/YY",medium:"MMM D, YYYY",long:"MMMM D, YYYY"},dateTimeFormat:{short:{pattern:"{date} {time}"},medium:{pattern:"{date} {time}"},long:{pattern:"{date} {time}"}},calendar:{firstDayOfWeek:0,weekendDays:[0,6],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},measurement:"imperial",translations:(t={teams:{text:"Teams"},details:{text:"Details"},agentInstances:{text:"Agent Instances"},add:{text:"Add"},addNew:{text:"Add New"},close:{text:"Close"},generate:{text:"Generate"},remove:{text:"Remove"},cancel:{text:"Cancel"},confirm:{text:"Confirm"},by:{text:"by"},measuresAutocompleteUnknownId:{text:"Unknown ID"},measuresAutocompleteNoName:{text:"No name available"},newTeam:{text:"New Team"},editTeam:{text:"Edit Team"},cloneTeam:{text:"Clone team"},importTeam:{text:"Import team"},exportTeam:{text:"Export team"},saveTeam:{text:"Save Team"},removeTeam:{text:"Remove Team"},loadTeam:{text:"Load team: {name}"},dependencyConflictsDetected:{text:"Dependency Conflicts Detected"},newDependenciesDetected:{text:"New Dependencies Detected"},dependenciesDetected:{text:"Dependencies Detected"},dependencyConflictsText:{text:"The team you're importing contains dependencies that already exist in the database. Please choose how to handle each conflict:"},dependencyMixedText:{text:"The team you're importing contains both new dependencies and dependencies that already exist in the database. Please choose how to handle the conflicts:"},dependencyNewText:{text:"The team you're importing contains new dependencies that will be created:"},setAllOverwrite:{text:"Set All Conflicts to Overwrite"},setAllKeep:{text:"Set All Conflicts to Keep Current"},idConflict:{text:"ID Conflict"},nameConflict:{text:"Name Conflict"},idNameConflict:{text:"ID & Name Conflict"},measureIdConflict:{text:"Measure ID Conflict"},newDependency:{text:"New"},replaceExistingWithImported:{text:'Replace existing "{name}" with imported data'},skipImportUseExisting:{text:'Skip import, use existing "{name}"'},createNewWithGeneratedId:{text:"Create new {type} with generated ID"},replaceExistingTypeWithImported:{text:'Replace existing {type} (ID: {id}) with imported "{name}"'},skipImportKeepExistingType:{text:"Skip import, keep existing {type} (ID: {id})"},createNewTypeWithGeneratedId:{text:'Create new {type} "{name}" with generated ID'},createNewTypeWithImportedSuffix:{text:'Create new {type} "{name} (imported)" with ID: {id}'},skipImportUseExistingType:{text:'Skip import, use existing "{name}" {type}'},createNewType:{text:"Create new {type}"},overwriteWarning:{text:"Warning: Replacing existing dependencies is irreversible."},proceedWithImport:{text:"Proceed with Import"},type:{text:"Type"},name:{text:"Name"},id:{text:"ID"},conflict:{text:"Conflict"},status:{text:"Status"},action:{text:"Action"},measure:{text:"Measure"},profile:{text:"Profile"},tool:{text:"Tool"},addAgent:{text:"Add Agent"},removeAgent:{text:"Remove Agent"},viewAgentProfile:{text:"View Agent Profile"},searchTeams:{text:"Search teams"},clearSearch:{text:"Clear search"},filter:{text:"Filter"},active:{text:"Active"},inactive:{text:"Inactive"},unspecified:{text:"Unspecified"},unknown:{text:"Unknown"},loading:{text:"Loading..."},teamId:{text:"Team ID"}},r(r(r(r(r(r(r(r(r(r(t,"name",{text:"Name"}),"location",{text:"Location"}),"selectLocation",{text:"Select Location"}),"newLocation",{text:"Add Location"}),"site",{text:"Site"}),"area",{text:"Area"}),"function",{text:"Function"}),"version",{text:"Version"}),"description",{text:"Description"}),"category",{text:"Category"}),r(r(r(r(r(r(r(r(r(r(t,"tags",{text:"Tags"}),"author",{text:"Author"}),"type",{text:"Type"}),"objectives",{text:"Objectives"}),"operatingPrinciples",{text:"Operating Principles"}),"format",{text:"Format"}),"formatValue",{text:"SITE-AREA-FUNCTION-TEAM-VERSION"}),"complianceRequirements",{text:"Compliance Requirements"}),"communicationProtocol",{text:"Communication Protocol"}),"primaryChannel",{text:"Primary Channel"}),r(r(r(r(r(r(r(r(r(r(t,"escalationChannel",{text:"Escalation Channel"}),"updateFrequency",{text:"Update Frequency"}),"reportSchedule",{text:"Report Schedule"}),"reportTime",{text:"Report Time"}),"utc",{text:"UTC"}),"operationalConstraints",{text:"Operational Constraints"}),"constraint",{text:"Constraint"}),"constraints",{text:"Constraints"}),"responsibilities",{text:"Responsibilities"}),"unit",{text:"Unit"}),r(r(r(r(r(r(r(r(r(r(t,"target",{text:"Target"}),"tolerance",{text:"Tolerance"}),"min",{text:"Min"}),"max",{text:"Max"}),"value",{text:"Value"}),"addConstraint",{text:"Add Constraint"}),"addNewConstraint",{text:"Add New Constraint"}),"addNewResponsibility",{text:"Add New Responsibility"}),"removeConstraint",{text:"Remove Constraint"}),"escalationPolicy",{text:"Escalation Policy"}),r(r(r(r(r(r(r(r(r(r(t,"threshold",{text:"Threshold"}),"minutes",{text:"Minutes"}),"notificationMethod",{text:"Notification Method"}),"contacts",{text:"Contacts"}),"commaSeparated",{text:"comma-separated"}),"messageTemplate",{text:"Message Template"}),"addEscalationPolicy",{text:"Add Escalation Policy"}),"removeEscalationPolicy",{text:"Remove Escalation Policy"}),"decisionMaking",{text:"Decision Making"}),"performanceMetrics",{text:"Performance Metrics"}),r(r(r(r(r(r(r(r(r(r(t,"addMetric",{text:"Add Metric"}),"metric",{text:"Metric"}),"weight",{text:"Weight"}),"objectiveFunction",{text:"Objective Function"}),"addObjectiveFunction",{text:"Add Objective Function"}),"functionId",{text:"Function ID "}),"objectiveType",{text:"Objective Type"}),"objectiveFunctionDetails",{text:"Objective Function Details"}),"components",{text:"Components"}),"formula",{text:"Formula"}),r(r(r(r(r(r(r(r(r(r(t,"formulaHintComponentsUpdate",{text:"Components need to be updated. Click the button to view details."}),"formulaHintInvalidFormat",{text:"Formula format is not valid. Example: 0.1(comp1) + 0.2(comp2)"}),"formulaHintInvalidMeasures",{text:"Invalid measure IDs: {measureIds}. Variables must match existing measures."}),"formulaHintValidComponents",{text:"Formula contains valid components. Click Generate to extract them."}),"formulaHintEnterFormula",{text:"Enter a formula and click the generate button to extract components"}),"direction",{text:"Direction"}),"minimize",{text:"Minimize"}),"maximize",{text:"Maximize"}),"thresholds",{text:"Thresholds"}),"scale",{text:"Scale"}),r(r(r(r(r(r(r(r(r(r(t,"level",{text:"Level"}),"value",{text:"Value"}),"min",{text:"Min"}),"max",{text:"Max"}),"noObjectiveFunction",{text:"No objective function"}),"objectiveFunctionSaveSuccess",{text:"Objective function saved successfully"}),"save",{text:"Save"}),"agentName",{text:"Agent Name"}),"agentProfile",{text:"Agent Profile"}),"agentType",{text:"Agent Type"}),r(r(r(r(r(r(r(r(r(r(t,"contentProcessorType",{text:"Content Processor Type"}),"tools",{text:"Tools"}),"actions",{text:"Actions"}),"taskPrompt",{text:"Task Prompt"}),"userPrompt",{text:"User Prompt"}),"profile",{text:"Profile"}),"profileId",{text:"Profile ID"}),"requiredTaskFields",{text:"Required Task Fields"}),"requiredUserFields",{text:"Required User Fields"}),"created",{text:"Created"}),r(r(r(r(r(r(r(r(r(r(t,"lastModified",{text:"Last Modified"}),"createdBy",{text:"Created By"}),"viewHistory",{text:"View History"}),"auditHistory",{text:"Audit History"}),"noAuditHistory",{text:"No audit history available"}),"discardChanges",{text:"Discard Changes"}),"confirmDiscardChanges",{text:"You have unsaved changes. Are you sure you want to discard them?"}),"selectProfile",{text:"Select profile"}),"selectType",{text:"Select type"}),"selectAllowedConsensus",{text:"Select Allowed Consensus"}),r(r(r(r(r(r(r(r(r(r(t,"confirmRemoveAgent",{text:"Are you sure you want to remove this agent?"}),"profileDetails",{text:"Profile Details"}),"promptsParameters",{text:"Prompts & Parameters"}),"parameter",{text:"Parameter"}),"value",{text:"Value"}),"modelProvider",{text:"Model Provider"}),"model",{text:"Model"}),"maxTokens",{text:"Max Tokens"}),"ragConfiguration",{text:"RAG Configuration"}),"useGeneralRag",{text:"Use General RAG"}),r(r(r(r(r(r(r(r(r(r(t,"ragCollectionName",{text:"RAG Collection Name"}),"ragTopK",{text:"RAG Top K"}),"experience",{text:"Experience"}),"skills",{text:"Skills"}),"systemPrompt",{text:"System Prompt"}),"observationPrompt",{text:"Observation Prompt"}),"reflectionPrompt",{text:"Reflection Prompt"}),"organizationalRules",{text:"Organizational Rules"}),"deonticRules",{text:"Deontic Rules"}),"allowedPlanning",{text:"Allowed Planning Methods"}),r(r(r(r(r(r(r(r(r(r(t,"allowedConsensus",{text:"Allowed Consensus"}),"prompts",{text:"Prompts"}),"memoryParameters",{text:"Memory Parameters"}),"decisionParameters",{text:"Decision Parameters"}),"interactionPreferences",{text:"Interaction Preferences"}),"searchPlaceholder",{text:"Search"}),"areaPlaceholder",{text:"e.g., WTR"}),"assetPlaceholder",{text:"e.g., PUMP"}),"functionPlaceholder",{text:"e.g., QUAL"}),"taskPromptPlaceholder",{text:"Enter task prompt..."}),r(r(r(r(r(r(r(r(r(r(t,"userPromptPlaceholder",{text:"Enter user prompt..."}),"noTeams",{text:"No teams found"}),"noOperationalConstraints",{text:"No operational constraints"}),"noEscalationPolicy",{text:"No escalation policy"}),"noPerformanceMetrics",{text:"No performance metrics"}),"noActiveAgentInstances",{text:"No active agent instances"}),"noToolsAvailable",{text:"No tools available"}),"selectProfileDisplayTools",{text:"Select a profile to see available tools"}),"noActionsAvailable",{text:"No actions available"}),"selectProfileDisplayActions",{text:"Select a profile to see available actions"}),r(r(r(r(r(r(r(r(r(r(t,"teamLoadSuccess",{text:"Team loaded successfully: {id}"}),"teamCreateSuccess",{text:"Team created successfully: {id}"}),"teamUpdateSuccess",{text:"Team updated successfully: {id}"}),"teamCloneSuccess",{text:"Team cloned successfully. Review and save changes."}),"teamExportSuccess",{text:"Team exported successfully"}),"teamImportSuccess",{text:"Team imported successfully. Review and save."}),"teamIdAvailable",{text:"Team ID {id} is available"}),"newTeamIdGenerated",{text:"A new team ID has been generated to avoid conflicts."}),"objectiveFunctionIdUpdated",{text:"Objective function ID updated to {id}"}),"locationIdAvailable",{text:"Location ID {id} is available"}),r(r(r(r(r(r(r(r(t,"newLocationIdGenerated",{text:"New location ID generated"}),"locationCreateSuccess",{text:"Location created successfully: {id}"}),"objectiveFunctionCreateSuccess",{text:"Objective function created successfully"}),"objectiveFunctionUpdateSuccess",{text:"Objective function updated successfully"}),"agentAddSuccess",{text:"Agent added successfully"}),"agentRemoveSuccess",{text:"Agent removed successfully"}),"agentStatusUpdateSuccess",{text:"Agent status updated successfully"}),"viewNamingConvention",{text:"View Naming Conventions"})),errors:{system:{initFailed:{text:"Failed to initialize team management system",severity:"error"},batchLoadError:{text:"Error loading teams batch. Please try again.",severity:"error"},jsonParseError:{text:"Error parsing JSON file. Please check the format.",severity:"error"},teamIdCheckError:{text:"Error checking team ID availability.",severity:"error"}},application:{teamLoadError:{text:"Error loading team. Please try again.",severity:"error"},teamNotFound:{text:"Team not found.",severity:"error"},teamSaveError:{text:"Error saving team. Please try again.",severity:"error"},teamExportError:{text:"Error exporting team. Please try again.",severity:"error"},teamImportError:{text:"Error importing team. Please try again.",severity:"error"},teamCloneError:{text:"Error cloning team. Please try again.",severity:"error"},locationsLoadError:{text:"Error loading locations. Please try again.",severity:"error"},noChangesToSave:{text:"No changes to save.",severity:"warning"},profileLoadError:{text:"Error loading agent profile.",severity:"error"},profilesLoadError:{text:"Error loading agent profiles.",severity:"error"},measuresLoadError:{text:"Error loading measures. Please try again.",severity:"error"},objectiveFunctionSaveError:{text:"Error saving objective function. Please try again.",severity:"error"},objectiveFunctionMeasureValidationError:{text:"Error validating objective function measures. Please try again.",severity:"error"}},selection:{selectTeamToClone:{text:"Please select a team to clone",severity:"warning"},selectTeamToExport:{text:"Please select a team to export",severity:"warning"}},validation:{areaFunctionRequired:{text:"Area and Function fields are required",severity:"error"},teamIdRequired:{text:"Team ID is required",severity:"error"},teamIdExists:{text:"Team ID {id} already exists",severity:"error"},teamIdFormat:{text:"Invalid team ID format",severity:"error"},nameRequired:{text:"Name is required",severity:"error"},descriptionRequired:{text:"Description is required",severity:"error"},objectivesRequired:{text:"Objectives are required",severity:"error"},locationIdRequired:{text:"Location ID is required",severity:"error"},locationIdExists:{text:"Location ID {id} already exists",severity:"error"},locationIdFormat:{text:"Invalid location ID format",severity:"error"},locationNameRequired:{text:"Location name is required",severity:"error"},locationDescriptionRequired:{text:"Location description is required",severity:"error"},locationSaveError:{text:"Error saving location. Please try again.",severity:"error"},agentIdRequired:{text:"Agent ID is required",severity:"error"},agentProfileNotFound:{text:"Agent profile not found",severity:"error"},missingTaskFields:{text:"Required task prompt fields missing: {fields}",severity:"error"},extraTaskFields:{text:"Invalid task prompt fields detected: {fields}",severity:"error"},importValidationFailed:{text:"Team import validation failed. Please check the team structure.",severity:"error"},importMissingMeasures:{text:"Import failed. Required measures are missing from the system.",severity:"error"},importMissingProfiles:{text:"Import failed. Required agent profiles are missing from the system.",severity:"error"},dependencyProcessingFailed:{text:"Dependency processing failed. Please try again.",severity:"error"},missingUserFields:{text:"Required user prompt fields missing: {fields}",severity:"error"},extraUserFields:{text:"Invalid user prompt fields detected: {fields}",severity:"error"},agentNotFound:{text:"Agent not found",severity:"error"},objectiveFunctionIdRequired:{text:"Objective function ID is required",severity:"error"},objectiveFunctionNameRequired:{text:"Objective function name is required",severity:"error"},objectiveFunctionDescriptionRequired:{text:"Objective function description is required",severity:"error"},objectiveFunctionTypeInvalid:{text:"Invalid objective function type: {type}, expected: {expectedType}",severity:"error"},objectiveFunctionObjectiveTypeInvalid:{text:"Invalid objective type, must be 'min' or 'max'",severity:"error"},objectiveFunctionFormulaRequired:{text:"Formula is required for objective function",severity:"error"},objectiveFunctionThresholdsRequired:{text:"Thresholds are required for objective function",severity:"error"},objectiveFunctionThresholdsInvalidFormat:{text:"Invalid thresholds format",severity:"error"},objectiveFunctionThresholdsNoMatchingComponent:{text:"Thresholds defined for non-existent components: {thresholds}",severity:"error"},objectiveFunctionComponentsMissingThresholds:{text:"Missing thresholds for components: {components}",severity:"error"},objectiveFunctionThresholdScaleInvalid:{text:"Invalid scale for threshold {component}: {scale}, must be between 2 and 5",severity:"error"},scaleRangeInvalid:{text:"Scale must be between 2 and 5",severity:"warning"},objectiveFunctionThresholdRangesRequired:{text:"Ranges are required for threshold {component}",severity:"error"},objectiveFunctionThresholdRangesCountMismatch:{text:"Range count mismatch for {component}: expected {expected}, got {actual}",severity:"error"},objectiveFunctionThresholdRangeLevelRequired:{text:"Level is required for range in {component}",severity:"error"},objectiveFunctionThresholdRangeValueRequired:{text:"Value is required for {range} in {component}",severity:"error"},objectiveFunctionThresholdRangeMinInvalid:{text:"Min value for {range} in {component} must be 0 or greater",severity:"error"},objectiveFunctionThresholdRangeMaxInvalid:{text:"Max value for {range} in {component} must be 0 or greater",severity:"error"},objectiveFunctionThresholdRangeDirectionInvalid:{text:"Invalid direction for {range} in {component}, must be 'min' or 'max'",severity:"error"},objectiveFunctionCreateError:{text:"Error creating objective function",severity:"error"},objectiveFunctionUpdateError:{text:"Error updating objective function",severity:"error"},objectiveFunctionInvalidMeasureIds:{text:"Invalid measure IDs in formula: {measureIds}. Please use valid measure IDs from the autocomplete list.",severity:"error"}},audit:{historyError:{text:"Error loading audit history",severity:"error"}},agent:{addError:{text:"Error adding agent to team",severity:"error"},removeError:{text:"Error removing agent from team",severity:"error"}}}}};e.exports&&(e.exports=i),window.localeConfigs=i},3920:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.PROPERTY]=this}canBeUsedFor(e){return e instanceof i.Property}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.PROPERTY,1]):r.concat([this.ioc.stringSerializer.serialize("",!1),this.ioc.unspecifiedNullSerializer.serialize(null),this.ioc.unspecifiedNullSerializer.serialize(null)]);const n=[];return t&&n.push(r.from([this.ioc.DataType.PROPERTY,0])),n.push(this.ioc.stringSerializer.serialize(e.key,!1)),n.push(this.ioc.anySerializer.serialize(e.value)),n.push(this.ioc.unspecifiedNullSerializer.serialize(null)),r.concat(n)}deserialize(e,t=!0){let n=0,a=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=a.readUInt8();if(n++,e!==this.ioc.DataType.PROPERTY)throw new Error("unexpected {type_code}");if(a=a.slice(1),a.length<1)throw new Error("{value_flag} is missing");const t=a.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");a=a.slice(1)}let o,s,c,l,u;try{({v:o,len:s}=this.ioc.stringSerializer.deserialize(a,!1)),n+=s}catch(e){throw e.message="{key}: "+e.message,e}a=a.slice(s);try{({v:c,len:l}=this.ioc.anySerializer.deserialize(a)),n+=l}catch(e){throw e.message="{value}: "+e.message,e}a=a.slice(l);try{({len:u}=this.ioc.unspecifiedNullSerializer.deserialize(a)),n+=u}catch(e){throw e.message="{parent}: "+e.message,e}a=a.slice(u);return{v:new i.Property(o,c),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:a,err:e})}}}},3933:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(1545);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.P]=this}canBeUsedFor(e){return e instanceof i.P}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.P,1]);const e=[0,0,0,0],n=[0,0,0,0];return r.from([...e,...n])}const n=[];let i;return t&&n.push(r.from([this.ioc.DataType.P,0])),n.push(this.ioc.stringSerializer.serialize(e.operator,!1)),i=void 0===e.other||null===e.other?Array.isArray(e.value)?e.value:[e.value]:[e.value,e.other],n.push(this.ioc.listSerializer.serialize(i,!1)),r.concat(n)}deserialize(e,t=!0){let n=0,a=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=a.readUInt8();if(n++,e!==this.ioc.DataType.P)throw new Error("unexpected {type_code}");if(a=a.slice(1),a.length<1)throw new Error("{value_flag} is missing");const t=a.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");a=a.slice(1)}let o,s,c,l,u;try{({v:o,len:s}=this.ioc.stringSerializer.deserialize(a,!1)),n+=s}catch(e){throw e.message="{name}: "+e.message,e}a=a.slice(s);try{({v:c,len:l}=this.ioc.listSerializer.deserialize(a,!1)),n+=l}catch(e){throw e.message="{values}: "+e.message,e}if(a=a.slice(l),c.length<1)return{v:new i.P(""),len:n};const d=i.P[o];return u="function"==typeof d?d(...c):new i.P(o,...c),{v:u,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:a,err:e})}}}},4074:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(228),a=n(9198),o=n(1104),{DeferredPromise:s}=o,c=n(9449),{graphBinaryReader:l,graphBinaryWriter:u}=n(1421),d=n(74),p=n(7286),f=204,h=206,m=407,y="application/vnd.gremlin-v2.0+json",g="application/vnd.graphbinary-v1.0",v="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}";e.exports=class extends i{constructor(e,t){super(),this.url=e,this.options=t=t||{},this.mimeType=t.mimeType||"application/vnd.gremlin-v3.0+json",this._responseHandlers={},this._reader=t.reader||this.#e(this.mimeType),this._writer=t.writer||this.#t(this.mimeType),this._openPromise=null,this._openCallback=null,this._closePromise=null,this._closeCallback=null,this._header=String.fromCharCode(this.mimeType.length)+this.mimeType,this._header_buf=r.from(this._header),this.isOpen=!1,this.traversalSource=t.traversalSource||"g",this._authenticator=t.authenticator,this._enableUserAgentOnConnect=!1!==t.enableUserAgentOnConnect,this._enableCompression=this.options.enableCompression||!1}async open(){if(this.isOpen)return;if(this._openPromise)return this._openPromise;this._openPromise=s(),this.emit("log","ws open");let e=this.options.headers;if(this._enableUserAgentOnConnect){e||(e=[]);void 0!==await o.getUserAgent()&&(e[o.getUserAgentHeader()]=await o.getUserAgent())}const t=new Set(["headers","ca","cert","pfx","rejectUnauthorized","agent","perMessageDeflate"]),r=!Object.entries(this.options).some(([e,n])=>t.has(e)&&![null,void 0].includes(n))&&globalThis.WebSocket,i=r||(await n.e(591).then(n.t.bind(n,1591,23))).default;return this._ws=new i(this.url,r?void 0:{headers:e,ca:this.options.ca,cert:this.options.cert,pfx:this.options.pfx,rejectUnauthorized:this.options.rejectUnauthorized,agent:this.options.agent,perMessageDeflate:this._enableCompression}),"binaryType"in this._ws&&(this._ws.binaryType="arraybuffer"),this._ws.addEventListener("open",this.#n),this._ws.addEventListener("error",this.#r),this._ws.on("unexpected-response",this.#i),this._ws.addEventListener("message",this.#a),this._ws.addEventListener("close",this.#o),await this._openPromise}submit(e,t,n,i){const a=(i||o.getUuid()).toLowerCase();if(!a.match(v))throw new Error('Provided requestId "'+a+'" is not a valid UUID.');return this.open().then(()=>new Promise((i,s)=>{"authentication"!==t&&(this._responseHandlers[a]={callback:(e,t)=>e?s(e):i(t),result:null});const c={requestId:a,op:t||"bytecode",processor:e||"eval"===t?e:"traversal",args:n||{}},l=this._writer.writeRequest(c),u=o.toArrayBuffer(r.concat([this._header_buf,l]));this._ws.send(u)}))}stream(e,t,n,i){const s=(i||o.getUuid()).toLowerCase();if(!s.match(v))throw new Error('Provided requestId "'+s+'" is not a valid UUID.');const c=new a.Readable({objectMode:!0,read(){}});return this._responseHandlers[s]={callback:e=>e?c.destroy(e):c.push(null),result:c},this.open().then(()=>{const i={requestId:s,op:t||"bytecode",processor:e||"eval"===t?e:"traversal",args:n||{}},a=this._writer.writeRequest(i),c=o.toArrayBuffer(r.concat([this._header_buf,a]));this._ws.send(c)}).catch(e=>c.destroy(e)),c}#e(e){return e===g?l:e===y?new c.GraphSON2Reader:new c.GraphSONReader}#t(e){return e===g?u:e===y?new c.GraphSON2Writer:new c.GraphSONWriter}#n=()=>{this._openPromise.resolve(),this.isOpen=!0};#i=async(e,t)=>{const n=await new Promise((e,n)=>{const i=[];t.on("data",e=>{i.push(e instanceof r?e:r.from(e))}),t.on("end",()=>{e(i.length?r.concat(i):null)}),t.on("error",n)}),i=`Unexpected server response code ${t.statusCode}`,a=n?`${i} with body:\n${n.toString()}`:i,o=new Error(a);this.#r({error:o,message:a,type:"unexpected-response",target:this._ws})};#r=({error:e})=>{this._openPromise.reject(e),this.emit("log",`ws error ${e}`),this.#s(e),this.emit("socketError",e)};#o=({code:e,message:t})=>{this.emit("log",`ws close code=${e} message=${t}`),this.#s(),this._closeCallback&&this._closeCallback(),this.emit("close",e,t)};#a=({data:e})=>{const t=e instanceof ArrayBuffer?r.from(e):e,n=this._reader.readResponse(t);if(null===n.requestId||void 0===n.requestId)return void Object.keys(this._responseHandlers).forEach(e=>{const t=this._responseHandlers[e];return this.#c(e),void 0!==n.status&&n.status.message?t.callback(new p(`Server error (no request information): ${n.status.message} (${n.status.code})`,n.status)):t.callback(new p(`Server error (no request information): ${JSON.stringify(n)}`,n.status))});n.requestId=n.requestId.toLowerCase();const i=this._responseHandlers[n.requestId];if(!i)return;if(n.status.code===m&&this._authenticator)return void this._authenticator.evaluateChallenge(n.result.data).then(e=>this.submit(void 0,"authentication",e,n.requestId)).catch(i.callback);if(n.status.code>=400)return this.#c(n.requestId),i.callback(new p(`Server error: ${n.status.message} (${n.status.code})`,n.status));const s=i.result instanceof a.Readable;switch(n.status.code){case f:return this.#c(n.requestId),s?(i.result.push(new d(o.emptyArray,n.status.attributes)),i.callback(null)):i.callback(null,new d(o.emptyArray,n.status.attributes));case h:if(s){i.result.push(new d(n.result.data,n.status.attributes));break}i.result=i.result||[],i.result.push.apply(i.result,n.result.data);break;default:return s?(i.result.push(new d(n.result.data,n.status.attributes)),i.callback(null)):(i.result?i.result.push.apply(i.result,n.result.data):i.result=n.result.data,this.#c(n.requestId),i.callback(null,new d(i.result,n.status.attributes)))}};#s(e){Object.keys(this._responseHandlers).forEach(t=>{const n=this._responseHandlers[t];if(n.result instanceof a.Readable)n.callback(null);else{const t=e||new Error("Connection has been closed.");n.callback(t)}}),this._ws.removeEventListener("open",this.#n),this._ws.removeEventListener("error",this.#r),this._ws.off("unexpected-response",this.#i),this._ws.removeEventListener("message",this.#a),this._ws.removeEventListener("close",this.#o),this._openPromise=null,this._closePromise=null,this.isOpen=!1}#c(e){delete this._responseHandlers[e]}close(){return!1===this.isOpen?Promise.resolve():(this._closePromise||(this._closePromise=new Promise(e=>{this._closeCallback=e,this._ws.close()})),this._closePromise)}}},4134:e=>{"use strict";class t extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let n=0;n<e.length;n++)t+=`    ${e[n].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:t,ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,n)=>e.slice(t,n),Error,FunctionPrototypeCall:(e,t,...n)=>e.call(t,...n),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,n)=>Object.defineProperty(e,t,n),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,n)=>e.then(t,n),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,n)=>e.slice(t,n),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,n)=>e.set(t,n),Boolean,Uint8Array}},4147:(e,t,n)=>{"use strict";const{SymbolDispose:r}=n(4134),{AbortError:i,codes:a}=n(6371),{isNodeStream:o,isWebStream:s,kControllerErrorFunction:c}=n(6115),l=n(6238),{ERR_INVALID_ARG_TYPE:u}=a;let d;e.exports.addAbortSignal=function(t,n){if(((e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new u(t,"AbortSignal",e)})(t,"signal"),!o(n)&&!s(n))throw new u("stream",["ReadableStream","WritableStream","Stream"],n);return e.exports.addAbortSignalNoValidate(t,n)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;const a=o(t)?()=>{t.destroy(new i(void 0,{cause:e.reason}))}:()=>{t[c](new i(void 0,{cause:e.reason}))};if(e.aborted)a();else{d=d||n(7760).addAbortListener;const i=d(e,a);l(t,i[r])}return t}},4194:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.UUID]=this}canBeUsedFor(e){}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.UUID,1]):r.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);const n=String(e).replace(/^urn:uuid:/,"").replace(/[{}-]/g,""),i=[];t&&i.push(r.from([this.ioc.DataType.UUID,0]));const a=r.alloc(16,0);for(let e=0;e<16&&2*e<n.length;e++)a[e]=parseInt(n.slice(2*e,2*e+2),16);return i.push(a),r.concat(i)}deserialize(e,t=!0,n=!1){let i=0,a=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=a.readUInt8();if(i++,e!==this.ioc.DataType.UUID)throw new Error("unexpected {type_code}");a=a.slice(1)}if(t||n){if(a.length<1)throw new Error("{value_flag} is missing");const e=a.readUInt8();if(i++,1===e)return{v:null,len:i};if(0!==e)throw new Error("unexpected {value_flag}");a=a.slice(1)}if(a.length<16)throw new Error("unexpected {value} length");i+=16;return{v:a.slice(0,4).toString("hex")+"-"+a.slice(4,6).toString("hex")+"-"+a.slice(6,8).toString("hex")+"-"+a.slice(8,10).toString("hex")+"-"+a.slice(10,16).toString("hex"),len:i}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:a,err:e})}}}},4253:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(1545);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.TRAVERSER]=this}canBeUsedFor(e){return e instanceof i.Traverser}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.TRAVERSER,1]);const e=[0,0,0,0,0,0,0,1],n=[254,1];return r.from([...e,...n])}const n=[];return t&&n.push(r.from([this.ioc.DataType.TRAVERSER,0])),n.push(this.ioc.longSerializer.serialize(e.bulk,!1)),n.push(this.ioc.anySerializer.serialize(e.object)),r.concat(n)}deserialize(e,t=!0){let n=0,a=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=a.readUInt8();if(n++,e!==this.ioc.DataType.TRAVERSER)throw new Error("unexpected {type_code}");if(a=a.slice(1),a.length<1)throw new Error("{value_flag} is missing");const t=a.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");a=a.slice(1)}let o,s,c,l;try{({v:o,len:s}=this.ioc.longSerializer.deserialize(a,!1)),n+=s}catch(e){throw e.message="{bulk}: "+e.message,e}if(o<0)throw new Error("{bulk} is less than zero");a=a.slice(s);try{({v:c,len:l}=this.ioc.anySerializer.deserialize(a)),n+=l}catch(e){throw e.message="{value}: "+e.message,e}a=a.slice(l);return{v:new i.Traverser(c,o),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:a,err:e})}}}},4259:(e,t,n)=>{"use strict";const{ArrayIsArray:r,ObjectSetPrototypeOf:i}=n(4134),{EventEmitter:a}=n(7007);function o(e){a.call(this,e)}function s(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}i(o.prototype,a.prototype),i(o,a),o.prototype.pipe=function(e,t){const n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",c),n.on("close",l));let o=!1;function c(){o||(o=!0,e.end())}function l(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){d(),0===a.listenerCount(this,"error")&&this.emit("error",e)}function d(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",c),n.removeListener("close",l),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return s(n,"error",u),s(e,"error",u),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e},e.exports={Stream:o,prependListener:s}},4687:e=>{"use strict";e.exports=class{constructor(e){this.ioc=e}canBeUsedFor(e){return!(!Number.isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY)||("number"==typeof e||"bigint"==typeof e)}serialize(e,t=!0){return"number"==typeof e?Number.isNaN(e)||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY||!Number.isInteger(e)?this.ioc.doubleSerializer.serialize(e,t):e>=-2147483648&&e<=2147483647?this.ioc.intSerializer.serialize(e,t):this.ioc.longSerializer.serialize(e,t):"bigint"==typeof e?this.ioc.bigIntegerSerializer.serialize(e,t):void 0}}},4796:()=>{function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},i=[{key:"parseFormula",value:function(e){if(!e||"string"!=typeof e)return{components:[],weights:[]};for(var t,n=/([+-]?\s*\d+(?:\.\d+)?)\s*\(\s*([a-zA-Z_][a-zA-Z0-9_]*)\s*\)/g,r=e.replace(/([+-])\s+(\d)/g,"$1$2"),i=[],a=[];null!==(t=n.exec(r));){var o=parseFloat(t[1]),s=t[2];isNaN(o)||(i.push({name:s,weight:Math.abs(o),direction:o<0?"max":"min"}),a.push({name:"".concat(s,"_weight"),weight:Math.abs(o)}))}return{components:i,weights:a}}},{key:"formatFormulaForStorage",value:function(e){return Array.isArray(e)&&0!==e.length?e.map(function(e){var t="".concat(e.name,"_weight"),n="max"===e.direction?"-":"+";return"".concat(n," ").concat(t,"(").concat(e.name,")")}).join(" ").replace(/^\+ /,""):""}},{key:"formatFormulaForDisplay",value:function(e){return Array.isArray(e)&&0!==e.length?e.map(function(e){var t="max"===e.direction?"- ":"+ ";return"".concat(t).concat(e.weight,"(").concat(e.name,")")}).join(" ").replace(/^\+ /,""):""}},{key:"convertStorageToDisplayFormula",value:function(e,t){if(!e)return"";var n=e,i={};try{"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)?t.forEach(function(e){var t,n=(null===(t=e.name)||void 0===t?void 0:t.replace(/_weight$/,""))||"";n&&void 0!==e.weight&&(i[n]=e.weight)}):t&&"object"===a(t)&&Object.keys(t).forEach(function(e){var n=e.replace(/_weight$/,"");i[n]=t[e]});for(var o=0,s=Object.entries(i);o<s.length;o++){var c=r(s[o],2),l=c[0],u=c[1];if(l&&void 0!==u){var d=new RegExp("".concat(l,"_weight\\(").concat(l,"\\)"),"g");n=n.replace(d,"".concat(u,"(").concat(l,")"))}}return n}catch(t){return e}}},{key:"normalize",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return null;var r=t({},e);if(["components","weights","thresholds"].forEach(function(e){if(r[e]&&"string"==typeof r[e])try{r[e]=JSON.parse(r[e])}catch(t){r[e]=[]}}),r.formula)if(r.formula.includes("_weight"))r.normalized_formula=r.formula,n&&(r.formula=this.convertStorageToDisplayFormula(r.normalized_formula,r.weights));else try{var i=this.parseFormula(r.formula),a=i.components,o=i.weights;a&&a.length>0&&(r.components=a,r.weights=o,r.normalized_formula=this.formatFormulaForStorage(a))}catch(e){}else r.normalized_formula?r.formula=this.convertStorageToDisplayFormula(r.normalized_formula,r.weights):Array.isArray(r.components)&&r.components.length>0&&(r.normalized_formula=this.formatFormulaForStorage(r.components),r.formula=this.formatFormulaForDisplay(r.components));return r}},{key:"prepareForStorage",value:function(e){if(!e)return null;var t=this.normalize(e,!1),n={id:t.id,name:t.name,description:t.description,type:t.type||"team",objective_type:t.objective_type||"min",active:!1!==t.active,version:(parseInt(t.version||0,10)+1).toString()};n.formula=t.normalized_formula,n.weights=JSON.stringify(t.weights||[]),n.components=JSON.stringify(t.components||[]),n.thresholds=JSON.stringify(t.thresholds||[]);var r=(new Date).toISOString();return n.created_date=t.created_date?new Date(t.created_date).toISOString():r,n.last_modified_date=r,n}},{key:"fromDatabase",value:function(e){if(!e)return null;var n=t(t({},e),{},{components:"string"==typeof e.components?JSON.parse(e.components||"[]"):e.components,weights:"string"==typeof e.weights?JSON.parse(e.weights||"[]"):e.weights,thresholds:"string"==typeof e.thresholds?JSON.parse(e.thresholds||"[]"):e.thresholds});return n.normalized_formula=n.formula,n.formula=this.convertStorageToDisplayFormula(n.normalized_formula,n.weights),n}},{key:"fromImport",value:function(e){if(!e)return null;var n=t({},e),r=e.formula;if(r){var i=this.parseFormula(r),a=i.components,o=i.weights;n.components=JSON.stringify(a),n.weights=JSON.stringify(o);var s=[];e.thresholds?s=Array.isArray(e.thresholds)?e.thresholds:JSON.parse("string"==typeof e.thresholds?e.thresholds:"[]"):e.components&&Array.isArray(e.components)&&e.components.forEach(function(e){e.thresholds&&s.push({component:e.name,scale:e.thresholds.scale,ranges:e.thresholds.ranges})}),n.thresholds=JSON.stringify(s);var c=this.formatFormulaForStorage(a);n.formula=c,n.normalized_formula=c,n.display_formula=r}return n}},{key:"toExport",value:function(e){if(!e)return null;var n=this.normalize(e),r=[];if(n.components&&n.thresholds){var i=Array.isArray(n.components)?n.components:JSON.parse("string"==typeof n.components?n.components:"[]"),a=Array.isArray(n.thresholds)?n.thresholds:JSON.parse("string"==typeof n.thresholds?n.thresholds:"[]"),o={};a.forEach(function(e){o[e.component]={scale:e.scale,ranges:e.ranges}}),r=i.map(function(e){return t(t({},e),{},{thresholds:o[e.name]||null})})}return{id:n.id,name:n.name,description:n.description,type:n.type,objective_type:n.objective_type,active:n.active,formula:n.formula,components:r,created_date:n.created_date,last_modified_date:n.last_modified_date}}},{key:"updateFormula",value:function(e,n){if(!e||!n)return e;try{var r=this.parseFormula(n),i=r.components,a=r.weights;return t(t({},e),{},{formula:n,components:i,weights:a,normalized_formula:this.formatFormulaForStorage(i)})}catch(r){return t(t({},e),{},{formula:n})}}},{key:"validateMeasures",value:function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return{isValid:!0,invalidMeasures:[]};var n=new Set;t.forEach(function(e){e.measure_id&&n.add(e.measure_id),e.id&&n.add(e.id)});var r=[];return e.forEach(function(e){e.name&&!n.has(e.name)&&r.push(e.name)}),{isValid:0===r.length,invalidMeasures:r}}},{key:"componentsNeedUpdate",value:function(e,t){if(!e||!t)return!0;try{var n=this.parseFormula(e).components,r=Array.isArray(t)?t:JSON.parse(t),i=n.map(function(e){return e.name}).sort(),a=r.map(function(e){return e.name}).sort();return JSON.stringify(i)!==JSON.stringify(a)}catch(e){return!0}}},{key:"extractMeasureIds",value:function(e){if(!e)return[];var t=[];if("string"==typeof e.components)try{t=JSON.parse(e.components)}catch(e){return[]}else Array.isArray(e.components)?t=e.components:e.formula&&(t=this.parseFormula(e.formula).components);var n=new Set;return t.forEach(function(e){e.name&&n.add(e.name)}),Array.from(n)}}],(n=null)&&o(e.prototype,n),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i}();window.ObjectiveFunctionManager=c},4808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},4948:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9025)),i=a(n(2311));function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)("v3",48,i.default);t.default=o},4957:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BIGINTEGER]=this}canBeUsedFor(e){return"bigint"==typeof e}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.BIGINTEGER,1]):r.from([0,0,0,1,0]);const n=[];let i;if(t&&n.push(r.from([this.ioc.DataType.BIGINTEGER,0])),e>=0){let t=e.toString(16);t.length%2!=0&&(t="0"+t),Number.parseInt(t[0],16)>7&&(t="00"+t),i=r.from(t,"hex")}else{let t=(-e).toString(16);const n=(t.length+t.length%2)/2;let a=BigInt(n)*BigInt(8);e<-(BigInt(2)**(a-BigInt(1)))&&(a+=BigInt(8));t=(BigInt(2)**a+e).toString(16),t.length%2!=0&&(t="0"+t),i=r.from(t,"hex")}return n.push(this.ioc.intSerializer.serialize(i.length,!1)),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.BIGINTEGER)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let a,o;try{({v:a,len:o}=this.ioc.intSerializer.deserialize(i,!1)),n+=o}catch(e){throw e.message="{length}: "+e.message,e}if(a<1)throw new Error(`{length}=${a} is less than one`);i=i.slice(o),n+=a,i=i.slice(0,a);let s=BigInt(`0x${i.toString("hex")}`);return!(128&~i[0])&&(s=BigInt.asIntN(8*a,s)),{v:s,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},5073:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(6140)),i=o(n(2858)),a=n(9910);function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();const o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return(0,a.unsafeStringify)(o)};t.default=s},5094:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.PATH]=this}canBeUsedFor(e){return e instanceof i.Path}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.PATH,1]):r.concat([this.ioc.listSerializer.serialize([]),this.ioc.listSerializer.serialize([])]);const n=[];return t&&n.push(r.from([this.ioc.DataType.PATH,0])),n.push(this.ioc.listSerializer.serialize(e.labels)),n.push(this.ioc.listSerializer.serialize(e.objects)),r.concat(n)}deserialize(e,t=!0){let n=0,a=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=a.readUInt8();if(n++,e!==this.ioc.DataType.PATH)throw new Error("unexpected {type_code}");if(a=a.slice(1),a.length<1)throw new Error("{value_flag} is missing");const t=a.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");a=a.slice(1)}let o,s,c,l;try{({v:o,len:s}=this.ioc.listSerializer.deserialize(a)),n+=s}catch(e){throw e.message="{labels}: "+e.message,e}a=a.slice(s);try{({v:c,len:l}=this.ioc.listSerializer.deserialize(a)),n+=l}catch(e){throw e.message="{objects}: "+e.message,e}a=a.slice(l);return{v:new i.Path(o,c),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:a,err:e})}}}},5118:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function s(n,r,a,o){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return i(u,"_invoke",function(n,r,i){var a,o,s,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,o=0,s=e,p.n=n,c}};function f(n,r){for(o=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],f=p.p,h=a[2];n>3?(i=h===r)&&(s=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=f&&((i=n<2&&f<a[1])?(o=0,p.v=r,p.n=a[1]):f<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,o=0))}if(i||n>1)return c;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),o=u,s=h;(t=o<2?e:s)||!d;){a||(o?o<3?(o>1&&(p.n=-1),f(o,s)):p.n=s:p.v=s);try{if(l=2,a){if(o||(i="next"),t=a[i]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,o<2&&(o=0)}else 1===o&&(t=a.return)&&t.call(a),o<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),o=1);a=e}else if((t=(d=p.n<0)?s:n.call(r,p))!==c)break}catch(t){a=e,o=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,a,o),!0),u}var c={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var p=[][a]?t(t([][a]())):(i(t={},a,function(){return this}),t),f=d.prototype=l.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,i(f,"constructor",d),i(d,"constructor",u),u.displayName="GeneratorFunction",i(d,o,"GeneratorFunction"),i(f),i(f,o,"Generator"),i(f,a,function(){return this}),i(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:h}})()}function i(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,t,n,r){function o(t,n){i(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},i(e,t,n,r)}function a(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fallbackLocale="en-US",this.eventListeners=new Map,this.initialized=!1},n=[{key:"initializePluralRules",value:function(){var e=this;Object.keys(localeConfigs).forEach(function(t){try{e.pluralRules[t]=new Intl.PluralRules(t)}catch(n){e.pluralRules[t]=new Intl.PluralRules("en-US")}})}},{key:"interpolate",value:function(e,t){return e?t&&0!==Object.keys(t).length?e.replace(/\{(\w+)\}/g,function(e,n){return void 0!==t[n]?t[n]:e}):e:""}},{key:"getPlural",value:function(e,t){var n=this.getTranslation(e);if(!n)return e;if(!n.plural)return n.text||e;var r=this.pluralRules[this.currentLocale].select(t);return n.plural[r]||n.text}},{key:"initialize",value:function(e){if(!this.initialized){var t=e||this.fallbackLocale;this.setLocale(t),this.culturalConfig=new CulturalConfig(t),this.pluralRules={},this.initializePluralRules(),this.initialized=!0}}},{key:"setLocale",value:(s=r().m(function e(t){var n;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(localeConfigs[t]){e.n=1;break}return e.a(2,!1);case 1:if(e.p=1,this.currentLocale===t){e.n=3;break}if(null!=(n=localeConfigs[t])&&n.translations){e.n=2;break}throw new Error("Translations not found for locale: ".concat(t));case 2:this.currentLocale=t,this.culturalConfig=new CulturalConfig(t),document.documentElement.setAttribute("dir",this.culturalConfig.isRTL()?"rtl":"ltr"),document.documentElement.setAttribute("lang",t.split("-")[0]),this.emit("localeChanged",{locale:t,direction:this.culturalConfig.isRTL()?"rtl":"ltr",culturalPreferences:this.culturalConfig.getCulturalPreferences()});case 3:return e.a(2,!0);case 4:if(e.p=4,e.v,t===this.fallbackLocale){e.n=5;break}return e.a(2,this.setLocale(this.fallbackLocale));case 5:return e.a(2,!1)}},e,this,[[1,4]])}),c=function(){var e=this,t=arguments;return new Promise(function(n,r){var i=s.apply(e,t);function o(e){a(i,n,r,o,c,"next",e)}function c(e){a(i,n,r,o,c,"throw",e)}o(void 0)})},function(e){return c.apply(this,arguments)})},{key:"getTranslation",value:function(e){if(!e)return null;var t=e.split("."),n="errors"===t[0];return this.findTranslation(t,n)}},{key:"findTranslation",value:function(e,t){return this.getTranslationFromLocale(this.currentLocale,e,t)||this.getTranslationFromLocale(this.fallbackLocale,e,t)}},{key:"getTranslationFromLocale",value:function(e,t,n){var r,i=localeConfigs[e],a=n?null==i?void 0:i.errors:null==i?void 0:i.translations;return n?null==a||null===(r=a[t[1]])||void 0===r?void 0:r[t[2]]:t.reduce(function(e,t){return null==e?void 0:e[t]},a)}},{key:"translate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=this.getTranslation(e);if(!n)return e;var r=n.text;return"count"in t&&(r=this.getPlural(e,t.count)),this.interpolate(r,t)}catch(t){return e}}},{key:"translateError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var r="errors.".concat(e,".").concat(t),i=this.getTranslation(r);return i?{text:this.interpolate(i.text,n),severity:i.severity||"error"}:{text:"".concat(e,".").concat(t),severity:"error"}}catch(i){return{text:"".concat(e,".").concat(t),severity:"error"}}}},{key:"formatDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";return this.culturalConfig.formatDate(e,t)}},{key:"formatTime",value:function(e){return this.culturalConfig.formatDate(e,"time")}},{key:"formatRelativeTime",value:function(e){for(var n=new Intl.RelativeTimeFormat(this.currentLocale,{numeric:"auto"}),r=(new Date(e).getTime()-Date.now())/1e3,i=0,a=Object.entries({year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1});i<a.length;i++){var o=t(a[i],2),s=o[0],c=o[1];if(Math.abs(r)>=c||"second"===s){var l=Math.round(r/c);return n.format(l,s)}}}},{key:"formatNumber",value:function(e,t){return this.culturalConfig.formatNumber(e,t)}},{key:"formatCurrency",value:function(e,t){return this.culturalConfig.formatCurrency(e,t)}},{key:"on",value:function(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e).add(t)}},{key:"off",value:function(e,t){this.eventListeners.has(e)&&this.eventListeners.get(e).delete(t)}},{key:"emit",value:function(e,t){this.eventListeners.has(e)&&this.eventListeners.get(e).forEach(function(e){try{e(t)}catch(e){}})}}],i=[{key:"detectUserLocale",value:function(){var e=navigator.language;return localeConfigs[e]?e:"en-US"}}],n&&o(e.prototype,n),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i,s,c}();window.i18n=new c},5127:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.serializers=[e.unspecifiedNullSerializer,e.numberSerializationStrategy,e.booleanSerializer,e.dateSerializer,e.bytecodeSerializer,e.pSerializer,e.traverserSerializer,e.enumSerializer,e.listSerializer,e.uuidSerializer,e.edgeSerializer,e.pathSerializer,e.propertySerializer,e.vertexSerializer,e.vertexPropertySerializer,e.stringSerializer,e.textPSerializer,e.traversalStrategySerializer,e.byteBufferSerializer,e.lambdaSerializer,e.mapSerializer]}getSerializerCanBeUsedFor(e){for(let t=0;t<this.serializers.length;t++)if(this.serializers[t].canBeUsedFor(e))return this.serializers[t];throw new Error(`No serializer found to support item where typeof(item)='${typeof e}' and String(item)='${String(e)}'.`)}serialize(e,t=!0){return this.getSerializerCanBeUsedFor(e).serialize(e,t)}deserialize(e){try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");const t=e.readUInt8(),n=this.ioc.serializers[t];if(!n)throw new Error("unknown {type_code}");return n.deserialize(e)}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,err:e})}}}},5283:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}var i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"getError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var r=i18n.translateError(e,t,n);return{message:r.text,severity:r.severity}}catch(n){return{message:localeConfigs["en-US"].translations.errors[e][t].text,severity:localeConfigs["en-US"].translations.errors[e][t].severity}}}}],(t=null)&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();e.exports&&(e.exports={ErrorHandler:i}),window.ErrorHandler=i},5291:(e,t,n)=>{"use strict";const{MathFloor:r,NumberIsInteger:i}=n(4134),{validateInteger:a}=n(277),{ERR_INVALID_ARG_VALUE:o}=n(6371).codes;let s=16384,c=16;function l(e){return e?c:s}e.exports={getHighWaterMark:function(e,t,n,a){const s=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,a,n);if(null!=s){if(!i(s)||s<0){throw new o(a?`options.${n}`:"options.highWaterMark",s)}return r(s)}return l(e.objectMode)},getDefaultHighWaterMark:l,setDefaultHighWaterMark:function(e,t){a(t,"value",0),e?c=t:s=t}}},5323:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Neo4jDatabaseService:()=>U});var r=n(1982);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(i(e)+" is not iterable")}function l(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return u(l,"_invoke",function(n,r,i){var a,s,c,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,s=0,c=e,p.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],f=p.p,h=a[2];n>3?(i=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=f&&((i=n<2&&f<a[1])?(s=0,p.v=r,p.n=a[1]):f<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),s=u,c=h;(t=s<2?e:c)||!d;){a||(s?s<3?(s>1&&(p.n=-1),f(s,c)):p.n=c:p.v=c);try{if(l=2,a){if(s||(i="next"),t=a[i]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=a.return)&&t.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=e}else if((t=(d=p.n<0)?c:n.call(r,p))!==o)break}catch(t){a=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),l}var o={};function s(){}function c(){}function d(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(u(t={},r,function(){return this}),t),f=d.prototype=s.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=d,u(f,"constructor",d),u(d,"constructor",c),c.displayName="GeneratorFunction",u(d,i,"GeneratorFunction"),u(f),u(f,i,"Generator"),u(f,r,function(){return this}),u(f,"toString",function(){return"[object Generator]"}),(l=function(){return{w:a,m:h}})()}function u(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}u=function(e,t,n,r){function a(t,n){u(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},u(e,t,n,r)}function d(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){d(a,r,i,o,s,"next",e)}function s(e){d(a,r,i,o,s,"throw",e)}o(void 0)})}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var m={READ:"READ",WRITE:"WRITE"},y=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.uri||!t.username||!t.password)throw new Error("Invalid Neo4j configuration");this.config=t,this.driver=null,this.isInitialized=!1,this.connectionRetryCount=0,this.maxRetries=3,this.poolConfig={maxConnectionPoolSize:1,connectionTimeout:15e3,maxTransactionRetryTime:15e3,connectionAcquisitionTimeout:15e3,maxConnectionLifetime:36e5,idleTimeoutMillis:18e5}},t=[{key:"isRetryableError",value:function(e){return["ServiceUnavailable","SessionExpired","TransientError","Neo.TransientError"].some(function(t){var n,r;return(null===(n=e.code)||void 0===n?void 0:n.includes(t))||(null===(r=e.message)||void 0===r?void 0:r.includes(t))})}},{key:"checkConnections",value:(h=p(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.driver){e.n=1;break}return debugLog("No driver found during health check - will initialize on next query"),this.isInitialized=!1,e.a(2);case 1:return e.p=1,e.n=2,this.driver.verifyConnectivity();case 2:utils.debugLog("Connection health check passed"),e.n=4;break;case 3:return e.p=3,t=e.v,utils.debugLog("Connection health check failed:",t),this.isInitialized=!1,e.n=4,this.cleanup();case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return h.apply(this,arguments)})},{key:"withRetry",value:(d=p(l().m(function e(t){var n,r,i,a,o=this,s=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:n=s.length>1&&void 0!==s[1]?s[1]:3,r=l().m(function e(){var r,i,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t();case 1:return i=e.v,e.a(2,{v:i});case 2:if(e.p=2,s=e.v,!(o.isRetryableError(s)&&a<n)){e.n=4;break}return r=Math.min(100*Math.pow(2,a),2e3),e.n=3,new Promise(function(e){return setTimeout(e,r)});case 3:return o.isInitialized=!1,e.a(2,0);case 4:throw s;case 5:return e.a(2)}},e,null,[[0,2]])}),a=1;case 1:if(!(a<=n)){e.n=5;break}return e.d(c(r()),2);case 2:if(0!==(i=e.v)){e.n=3;break}return e.a(3,4);case 3:if(!i){e.n=4;break}return e.a(2,i.v);case 4:a++,e.n=1;break;case 5:return e.a(2)}},e)})),function(e){return d.apply(this,arguments)})},{key:"executeQuery",value:(u=p(l().m(function e(t){var n,r,i=this,a=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},r=a.length>2&&void 0!==a[2]?a[2]:m.READ,utils.debugLog("Executing Neo4j query:",t,"Params:",n,"Mode:",r),this.isInitialized){e.n=1;break}return utils.debugLog("Connection not initialized or lost - reinitializing"),e.n=1,this.initialize();case 1:return e.a(2,this.withRetry(p(l().m(function e(){var a,o;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a=i.driver.session({database:i.config.database,defaultAccessMode:r===m.WRITE?neo4j.session.WRITE:neo4j.session.READ}),e.p=1,r!==m.WRITE){e.n=3;break}return e.n=2,a.writeTransaction(function(){var e=p(l().m(function e(r){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.run(t,n);case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:o=e.v,e.n=5;break;case 3:return e.n=4,a.readTransaction(function(){var e=p(l().m(function e(r){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.run(t,n);case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:o=e.v;case 5:return e.a(2,o);case 6:return e.p=6,e.n=7,a.close().catch(function(e){});case 7:return e.f(6);case 8:return e.a(2)}},e,null,[[1,,6,8]])}))))}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"read",value:(s=p(l().m(function e(t){var n,r=arguments;return l().w(function(e){for(;;)if(0===e.n)return n=r.length>1&&void 0!==r[1]?r[1]:{},e.a(2,this.executeQuery(t,n,m.READ))},e,this)})),function(e){return s.apply(this,arguments)})},{key:"write",value:(a=p(l().m(function e(t){var n,r=arguments;return l().w(function(e){for(;;)if(0===e.n)return n=r.length>1&&void 0!==r[1]?r[1]:{},e.a(2,this.executeQuery(t,n,m.WRITE))},e,this)})),function(e){return a.apply(this,arguments)})},{key:"initialize",value:(i=p(l().m(function e(){var t,n,r,i=this;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!this.driver){e.n=1;break}return e.n=1,this.cleanup();case 1:return t=this.config.uri.startsWith("neo4j+s://")||this.config.uri.includes("?trust=")||this.config.uri.includes("&trust="),n=o({},this.poolConfig),t&&(delete n.encrypted,delete n.trust,delete n.trustStrategy),this.driver=neo4j.driver(this.config.uri,neo4j.auth.basic(this.config.username,this.config.password),n),e.n=2,this.driver.verifyConnectivity();case 2:return this.isInitialized=!0,utils.debugLog("Neo4j connection initialized successfully"),this.healthCheckInterval=setInterval(function(){i.checkConnections().catch(function(e){})},3e5),e.a(2,this.driver);case 3:throw e.p=3,r=e.v,this.isInitialized=!1,utils.debugLog("Connection initialization error:",r),r;case 4:return e.a(2)}},e,this,[[0,3]])})),function(){return i.apply(this,arguments)})},{key:"cleanup",value:(r=p(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=null),!this.driver){e.n=5;break}return e.p=1,e.n=2,this.driver.close();case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:this.driver=null;case 5:this.isInitialized=!1,this.connectionRetryCount=0;case 6:return e.a(2)}},e,this,[[1,3]])})),function(){return r.apply(this,arguments)})}],t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,i,a,s,u,d,h}();function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}window.Neo4jConnectionManager=y,window.NEO4J_SESSION_MODES=m;var b={toNeo4jDateTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{year:{low:e.getFullYear(),high:0},month:{low:e.getMonth()+1,high:0},day:{low:e.getDate(),high:0},hour:{low:e.getHours(),high:0},minute:{low:e.getMinutes(),high:0},second:{low:e.getSeconds(),high:0},nanosecond:{low:0,high:0},timeZoneOffsetSeconds:{low:0,high:0}}},fromNeo4jDateTime:function(e){if(!e)return null;if("string"==typeof e)return new Date(e);if(e instanceof Date)return e;try{var t;if(void 0!==(null===(t=e.year)||void 0===t?void 0:t.low)){var n,r,i,a,o="".concat(e.year.low,"-").concat(String(e.month.low).padStart(2,"0"),"-").concat(String(e.day.low).padStart(2,"0"),"T").concat(String((null===(n=e.hour)||void 0===n?void 0:n.low)||0).padStart(2,"0"),":").concat(String((null===(r=e.minute)||void 0===r?void 0:r.low)||0).padStart(2,"0"),":").concat(String((null===(i=e.second)||void 0===i?void 0:i.low)||0).padStart(2,"0"),".").concat(String((null===(a=e.nanosecond)||void 0===a?void 0:a.low)||0).padStart(3,"0"),"Z");return new Date(o)}return new Date(e)}catch(e){return null}},isNeo4jDateTime:function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return!1}if(!e||"object"!==_(e))return!1;return!!["year","month","day","hour","minute","second","nanosecond","timeZoneOffsetSeconds"].every(function(t){return e.hasOwnProperty(t)})&&Object.entries(e).every(function(e){var t=g(e,2),n=(t[0],t[1]);return n&&"object"===_(n)&&"low"in n&&"high"in n&&"number"==typeof n.low&&"number"==typeof n.high})},now:function(){return this.toNeo4jDateTime(new Date)}};function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){A(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function A(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return N(l,"_invoke",function(n,r,i){var a,s,c,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,s=0,c=e,p.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],f=p.p,h=a[2];n>3?(i=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=f&&((i=n<2&&f<a[1])?(s=0,p.v=r,p.n=a[1]):f<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),s=u,c=h;(t=s<2?e:c)||!d;){a||(s?s<3?(s>1&&(p.n=-1),f(s,c)):p.n=c:p.v=c);try{if(l=2,a){if(s||(i="next"),t=a[i]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=a.return)&&t.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=e}else if((t=(d=p.n<0)?c:n.call(r,p))!==o)break}catch(t){a=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(N(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,N(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,N(d,"constructor",l),N(l,"constructor",c),c.displayName="GeneratorFunction",N(l,i,"GeneratorFunction"),N(d),N(d,i,"Generator"),N(d,r,function(){return this}),N(d,"toString",function(){return"[object Generator]"}),(O=function(){return{w:a,m:p}})()}function N(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}N=function(e,t,n,r){function a(t,n){N(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},N(e,t,n,r)}function R(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function x(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){R(a,r,i,o,s,"next",e)}function s(e){R(a,r,i,o,s,"throw",e)}o(void 0)})}}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function C(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}function k(e,t,n){return t=D(t),function(e,t){if(t&&("object"==T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,j()?Reflect.construct(t,n||[],D(e).constructor):t.apply(e,n))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(j=function(){return!!e})()}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}window.Neo4jDate=b;var P="READ",M="WRITE",U=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=k(this,t,[e])).config=e,n.connectionManager=new y(e),n.session=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(t,e),n=t,r=[{key:"initialize",value:(f=x(O().m(function e(){return O().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.connectionManager.initialize();case 1:return e.a(2)}},e,this)})),function(){return f.apply(this,arguments)})},{key:"close",value:(p=x(O().m(function e(){return O().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.connectionManager.cleanup();case 1:return e.a(2)}},e,this)})),function(){return p.apply(this,arguments)})},{key:"startTransaction",value:(d=x(O().m(function e(){var t,n=arguments;return O().w(function(e){for(;;)if(0===e.n)return t=n.length>0&&void 0!==n[0]?n[0]:"WRITE",e.a(2,this.connectionManager.driver.session({defaultAccessMode:t}))},e,this)})),function(){return d.apply(this,arguments)})},{key:"endTransaction",value:(u=x(O().m(function e(){var t,n=arguments;return O().w(function(e){for(;;)switch(e.n){case 0:null!=(t=n.length>0&&void 0!==n[0]?n[0]:null)&&t.close();case 1:return e.a(2)}},e)})),function(){return u.apply(this,arguments)})},{key:"executeInTransaction",value:(l=x(O().m(function e(t,n){return O().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.executeWrite(function(){var e=x(O().m(function e(t){return O().w(function(e){for(;;)if(0===e.n)return e.a(2,n(t))},e)}));return function(t){return e.apply(this,arguments)}}());case 1:return e.a(2,e.v)}},e)})),function(e,t){return l.apply(this,arguments)})},{key:"executeNeo4jQuery",value:(c=x(O().m(function e(t){var n,r,i,a=arguments;return O().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},r=a.length>2&&void 0!==a[2]?a[2]:P,null!=this.connectionManager){e.n=1;break}throw new Error("Neo4J connection manager has not been initialised.");case 1:return e.p=1,e.n=2,this.connectionManager.executeQuery(t,n,r);case 2:return i=e.v,e.a(2,i.records);case 3:throw e.p=3,e.v;case 4:return e.a(2)}},e,this,[[1,3]])})),function(e){return c.apply(this,arguments)})},{key:"executeRead",value:(s=x(O().m(function e(t,n){var r,i,a,o,s=arguments;return O().w(function(e){for(;;)switch(e.n){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:null,i=s.length>3&&void 0!==s[3]&&s[3],a=s.length>4&&void 0!==s[4]?s[4]:0,o=s.length>5&&void 0!==s[5]?s[5]:0,e.n=1,this.executeInternal(t,I(I({},n),{},{skip:a,limit:o}),r,i,P);case 1:return e.a(2,e.v)}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"executeWrite",value:(o=x(O().m(function e(t,n){var r,i=arguments;return O().w(function(e){for(;;)switch(e.n){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:null,e.n=1,this.executeInternal(t,n,r,!0,M);case 1:return e.a(2,e.v)}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"executeInternal",value:(a=x(O().m(function e(t,n,r,i,a){var o,s;return O().w(function(e){for(;;)switch(e.n){case 0:if(null==r){e.n=2;break}return e.n=1,r.run(t,n);case 1:o=e.v,e.n=4;break;case 2:return e.n=3,this.executeNeo4jQuery(t,n,a);case 3:o=e.v;case 4:if(s=this.normaliseData(o),!i){e.n=6;break}if(!Array.isArray(s)){e.n=5;break}if(!(s.length>0)){e.n=5;break}return e.a(2,s[0]);case 5:return e.a(2,s);case 6:if(!Array.isArray(s)){e.n=7;break}return e.a(2,s);case 7:if(null==s){e.n=8;break}return e.a(2,[s]);case 8:return e.a(2,[]);case 9:return e.a(2)}},e,this)})),function(e,t,n,r,i){return a.apply(this,arguments)})},{key:"normaliseData",value:function(e){var t=this;return e.records?0===e.records.length?null:1===e.records.length?this.normaliseRecord(e.records[0]):e.records.map(function(e){return t.normaliseRecord(e)}):0===e.length?null:1===e.length?this.normaliseNodeset(e[0]):e.map(function(e){return t.normaliseNodeset(e)})}},{key:"normaliseRecord",value:function(e){var t,n={};for(t=0;t<e.keys.length;t++){var r=e.keys[t],i=e._fields[t],a=r.lastIndexOf("."),o=-1===a?r:r.substring(a+1);"object"===T(i)&&this.isDate(i)?n[o]=b.fromNeo4jDateTime(i):"object"===T(i)&&null!=i.toNumber?n[o]=i.toNumber():n[o]=i}return n}},{key:"normaliseNodeset",value:function(e){var t,n={};for(t=0;t<e.length;t++){var r=e.keys[t],i=r.lastIndexOf("."),a=-1===i?r:r.substring(i+1);if(null!=e._fields[t])if(e._fields[t].properties)n[a]=this.normaliseNode(e._fields[t]);else{var o=e._fields[t];"object"===T(o)&&this.isDate(o)?n[a]=b.fromNeo4jDateTime(o):"object"===T(o)?null!=o.toNumber?n[a]=o.toNumber():n[a]=this.normaliseObject(o):n[a]=o}else n[a]=null}return n}},{key:"normaliseNode",value:function(e){for(var t={},n=0,r=Object.entries(e.properties);n<r.length;n++){var i=E(r[n],2),a=i[0],o=i[1];"object"===T(o)&&this.isDate(o)?t[a]=b.fromNeo4jDateTime(o):"object"===T(o)?null!=o.toNumber?t[a]=o.toNumber():t[a]=this.normaliseObject(o):t[a]=o}return t}},{key:"normaliseObject",value:function(e){var t,n=this;if(Array.isArray(e))t=[],e.forEach(function(e){return t.push(n.normaliseObject(e))});else if(this.isPrimitive(e))t=e;else{t={};for(var r=0,i=Object.entries(e);r<i.length;r++){var a=E(i[r],2),o=a[0],s=a[1];null!=s&&"object"===T(s)?this.isDate(s)?t[o]=b.fromNeo4jDateTime(s):t[o]=this.normaliseObject(s):t[o]=s}}return t}},{key:"isDate",value:function(e){if(e&&e.__isInteger__)return!1;var t=new Date(e);return!isNaN(t.getTime())}},{key:"isPrimitive",value:function(e){return e!==Object(e)}}],r&&L(n.prototype,r),i&&L(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,a,o,s,c,l,u,d,p,f}(r.M)},5332:(e,t,n)=>{"use strict";const{Traversal:r,cardinality:i}=n(1545),{Transaction:a}=n(9899),o=n(5737),s=n(9032),{TraversalStrategies:c,VertexProgramStrategy:l,OptionsStrategy:u}=n(3335);class d{constructor(e,t,n,r,i){this.graph=e,this.traversalStrategies=t,this.bytecode=n||new s,this.graphTraversalSourceClass=r||d,this.graphTraversalClass=i||p;const a=t.strategies.find(e=>"js:RemoteStrategy"===e.fqcn);this.remoteConnection=void 0!==a?a.connection:void 0}withRemote(e){const t=new c(this.traversalStrategies);return t.addStrategy(new o.RemoteStrategy(e)),new this.graphTraversalSourceClass(this.graph,t,new s(this.bytecode),this.graphTraversalSourceClass,this.graphTraversalClass)}tx(){if(this.remoteConnection&&this.remoteConnection.isSessionBound)throw new Error("This TraversalSource is already bound to a transaction - child transactions are not supported");return new a(this)}withComputer(e,t,n,r,i,a,o){const s={};return void 0!==e&&(s.graphComputer=e),void 0!==t&&(s.workers=t),void 0!==n&&(s.result=n),void 0!==r&&(s.graphComputer=r),void 0!==i&&(s.vertices=i),void 0!==a&&(s.edges=a),void 0!==o&&(s.configuration=o),this.withStrategies(new l(s))}with_(e,t=void 0){const n=void 0===t||t;let r=this.bytecode.sourceInstructions.find(e=>"withStrategies"===e[0]&&e[1]instanceof u);return void 0===r?(r=new u({[e]:n}),this.withStrategies(r)):(r[1].configuration[e]=n,new this.graphTraversalSourceClass(this.graph,new c(this.traversalStrategies),this.bytecode,this.graphTraversalSourceClass,this.graphTraversalClass))}toString(){return"graphtraversalsource["+this.graph.toString()+"]"}withBulk(...e){const t=new s(this.bytecode).addSource("withBulk",e);return new this.graphTraversalSourceClass(this.graph,new c(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withPath(...e){const t=new s(this.bytecode).addSource("withPath",e);return new this.graphTraversalSourceClass(this.graph,new c(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withSack(...e){const t=new s(this.bytecode).addSource("withSack",e);return new this.graphTraversalSourceClass(this.graph,new c(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withSideEffect(...e){const t=new s(this.bytecode).addSource("withSideEffect",e);return new this.graphTraversalSourceClass(this.graph,new c(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withStrategies(...e){const t=new s(this.bytecode).addSource("withStrategies",e);return new this.graphTraversalSourceClass(this.graph,new c(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}withoutStrategies(...e){const t=new s(this.bytecode).addSource("withoutStrategies",e);return new this.graphTraversalSourceClass(this.graph,new c(this.traversalStrategies),t,this.graphTraversalSourceClass,this.graphTraversalClass)}E(...e){const t=new s(this.bytecode).addStep("E",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}V(...e){const t=new s(this.bytecode).addStep("V",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}addE(...e){const t=new s(this.bytecode).addStep("addE",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}mergeE(...e){const t=new s(this.bytecode).addStep("mergeE",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}addV(...e){const t=new s(this.bytecode).addStep("addV",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}mergeV(...e){const t=new s(this.bytecode).addStep("mergeV",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}inject(...e){const t=new s(this.bytecode).addStep("inject",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}io(...e){const t=new s(this.bytecode).addStep("io",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}call(...e){const t=new s(this.bytecode).addStep("call",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}union(...e){const t=new s(this.bytecode).addStep("union",e);return new this.graphTraversalClass(this.graph,new c(this.traversalStrategies),t)}}class p extends r{constructor(e,t,n){super(e,t,n)}clone(){return new p(this.graph,this.traversalStrategies,this.getBytecode())}V(...e){return this.bytecode.addStep("V",e),this}E(...e){return this.bytecode.addStep("E",e),this}addE(...e){return this.bytecode.addStep("addE",e),this}addV(...e){return this.bytecode.addStep("addV",e),this}aggregate(...e){return this.bytecode.addStep("aggregate",e),this}all(...e){return this.bytecode.addStep("all",e),this}and(...e){return this.bytecode.addStep("and",e),this}any(...e){return this.bytecode.addStep("any",e),this}as(...e){return this.bytecode.addStep("as",e),this}asDate(...e){return this.bytecode.addStep("asDate",e),this}asString(...e){return this.bytecode.addStep("asString",e),this}barrier(...e){return this.bytecode.addStep("barrier",e),this}both(...e){return this.bytecode.addStep("both",e),this}bothE(...e){return this.bytecode.addStep("bothE",e),this}bothV(...e){return this.bytecode.addStep("bothV",e),this}branch(...e){return this.bytecode.addStep("branch",e),this}by(...e){return this.bytecode.addStep("by",e),this}call(...e){return this.bytecode.addStep("call",e),this}cap(...e){return this.bytecode.addStep("cap",e),this}choose(...e){return this.bytecode.addStep("choose",e),this}coalesce(...e){return this.bytecode.addStep("coalesce",e),this}coin(...e){return this.bytecode.addStep("coin",e),this}combine(...e){return this.bytecode.addStep("combine",e),this}concat(...e){return this.bytecode.addStep("concat",e),this}conjoin(...e){return this.bytecode.addStep("conjoin",e),this}connectedComponent(...e){return this.bytecode.addStep("connectedComponent",e),this}constant(...e){return this.bytecode.addStep("constant",e),this}count(...e){return this.bytecode.addStep("count",e),this}cyclicPath(...e){return this.bytecode.addStep("cyclicPath",e),this}dateAdd(...e){return this.bytecode.addStep("dateAdd",e),this}dateDiff(...e){return this.bytecode.addStep("dateDiff",e),this}dedup(...e){return this.bytecode.addStep("dedup",e),this}difference(...e){return this.bytecode.addStep("difference",e),this}disjunct(...e){return this.bytecode.addStep("disjunct",e),this}drop(...e){return this.bytecode.addStep("drop",e),this}element(...e){return this.bytecode.addStep("element",e),this}elementMap(...e){return this.bytecode.addStep("elementMap",e),this}emit(...e){return this.bytecode.addStep("emit",e),this}fail(...e){return this.bytecode.addStep("fail",e),this}filter(...e){return this.bytecode.addStep("filter",e),this}flatMap(...e){return this.bytecode.addStep("flatMap",e),this}fold(...e){return this.bytecode.addStep("fold",e),this}format(...e){return this.bytecode.addStep("format",e),this}from_(...e){return this.bytecode.addStep("from",e),this}group(...e){return this.bytecode.addStep("group",e),this}groupCount(...e){return this.bytecode.addStep("groupCount",e),this}has(...e){return this.bytecode.addStep("has",e),this}hasId(...e){return this.bytecode.addStep("hasId",e),this}hasKey(...e){return this.bytecode.addStep("hasKey",e),this}hasLabel(...e){return this.bytecode.addStep("hasLabel",e),this}hasNot(...e){return this.bytecode.addStep("hasNot",e),this}hasValue(...e){return this.bytecode.addStep("hasValue",e),this}id(...e){return this.bytecode.addStep("id",e),this}identity(...e){return this.bytecode.addStep("identity",e),this}in_(...e){return this.bytecode.addStep("in",e),this}inE(...e){return this.bytecode.addStep("inE",e),this}inV(...e){return this.bytecode.addStep("inV",e),this}index(...e){return this.bytecode.addStep("index",e),this}inject(...e){return this.bytecode.addStep("inject",e),this}intersect(...e){return this.bytecode.addStep("intersect",e),this}is(...e){return this.bytecode.addStep("is",e),this}key(...e){return this.bytecode.addStep("key",e),this}label(...e){return this.bytecode.addStep("label",e),this}length(...e){return this.bytecode.addStep("length",e),this}limit(...e){return this.bytecode.addStep("limit",e),this}local(...e){return this.bytecode.addStep("local",e),this}loops(...e){return this.bytecode.addStep("loops",e),this}lTrim(...e){return this.bytecode.addStep("lTrim",e),this}map(...e){return this.bytecode.addStep("map",e),this}match(...e){return this.bytecode.addStep("match",e),this}math(...e){return this.bytecode.addStep("math",e),this}max(...e){return this.bytecode.addStep("max",e),this}mean(...e){return this.bytecode.addStep("mean",e),this}merge(...e){return this.bytecode.addStep("merge",e),this}mergeE(...e){return this.bytecode.addStep("mergeE",e),this}mergeV(...e){return this.bytecode.addStep("mergeV",e),this}min(...e){return this.bytecode.addStep("min",e),this}none(...e){return this.bytecode.addStep("none",e),this}not(...e){return this.bytecode.addStep("not",e),this}option(...e){return this.bytecode.addStep("option",e),this}optional(...e){return this.bytecode.addStep("optional",e),this}or(...e){return this.bytecode.addStep("or",e),this}order(...e){return this.bytecode.addStep("order",e),this}otherV(...e){return this.bytecode.addStep("otherV",e),this}out(...e){return this.bytecode.addStep("out",e),this}outE(...e){return this.bytecode.addStep("outE",e),this}outV(...e){return this.bytecode.addStep("outV",e),this}pageRank(...e){return this.bytecode.addStep("pageRank",e),this}path(...e){return this.bytecode.addStep("path",e),this}peerPressure(...e){return this.bytecode.addStep("peerPressure",e),this}product(...e){return this.bytecode.addStep("product",e),this}profile(...e){return this.bytecode.addStep("profile",e),this}program(...e){return this.bytecode.addStep("program",e),this}project(...e){return this.bytecode.addStep("project",e),this}properties(...e){return this.bytecode.addStep("properties",e),this}property(...e){return this.bytecode.addStep("property",e),this}propertyMap(...e){return this.bytecode.addStep("propertyMap",e),this}range(...e){return this.bytecode.addStep("range",e),this}read(...e){return this.bytecode.addStep("read",e),this}repeat(...e){return this.bytecode.addStep("repeat",e),this}replace(...e){return this.bytecode.addStep("replace",e),this}reverse(...e){return this.bytecode.addStep("reverse",e),this}rTrim(...e){return this.bytecode.addStep("rTrim",e),this}sack(...e){return this.bytecode.addStep("sack",e),this}sample(...e){return this.bytecode.addStep("sample",e),this}select(...e){return this.bytecode.addStep("select",e),this}shortestPath(...e){return this.bytecode.addStep("shortestPath",e),this}sideEffect(...e){return this.bytecode.addStep("sideEffect",e),this}simplePath(...e){return this.bytecode.addStep("simplePath",e),this}skip(...e){return this.bytecode.addStep("skip",e),this}split(...e){return this.bytecode.addStep("split",e),this}store(...e){return this.bytecode.addStep("store",e),this}subgraph(...e){return this.bytecode.addStep("subgraph",e),this}substring(...e){return this.bytecode.addStep("substring",e),this}sum(...e){return this.bytecode.addStep("sum",e),this}tail(...e){return this.bytecode.addStep("tail",e),this}timeLimit(...e){return this.bytecode.addStep("timeLimit",e),this}times(...e){return this.bytecode.addStep("times",e),this}to(...e){return this.bytecode.addStep("to",e),this}toE(...e){return this.bytecode.addStep("toE",e),this}toLower(...e){return this.bytecode.addStep("toLower",e),this}toUpper(...e){return this.bytecode.addStep("toUpper",e),this}toV(...e){return this.bytecode.addStep("toV",e),this}tree(...e){return this.bytecode.addStep("tree",e),this}trim(...e){return this.bytecode.addStep("trim",e),this}unfold(...e){return this.bytecode.addStep("unfold",e),this}union(...e){return this.bytecode.addStep("union",e),this}until(...e){return this.bytecode.addStep("until",e),this}value(...e){return this.bytecode.addStep("value",e),this}valueMap(...e){return this.bytecode.addStep("valueMap",e),this}values(...e){return this.bytecode.addStep("values",e),this}where(...e){return this.bytecode.addStep("where",e),this}with_(...e){return this.bytecode.addStep("with",e),this}write(...e){return this.bytecode.addStep("write",e),this}}class f extends s{constructor(e,t){super(),this.addSource("CardinalityValueTraversal",[e,t])}static single(e){return new f(i.single,e)}static list(e){return new f(i.list,e)}static set(e){return new f(i.set,e)}}function h(e,t){const n=new p(null,null,new s);return n[e].apply(n,t)}const m={E:(...e)=>h("E",e),V:(...e)=>h("V",e),addE:(...e)=>h("addE",e),addV:(...e)=>h("addV",e),aggregate:(...e)=>h("aggregate",e),all:(...e)=>h("all",e),and:(...e)=>h("and",e),any:(...e)=>h("any",e),as:(...e)=>h("as",e),asDate:(...e)=>h("asDate",e),asString:(...e)=>h("asString",e),barrier:(...e)=>h("barrier",e),both:(...e)=>h("both",e),bothE:(...e)=>h("bothE",e),bothV:(...e)=>h("bothV",e),branch:(...e)=>h("branch",e),call:(...e)=>h("call",e),cap:(...e)=>h("cap",e),choose:(...e)=>h("choose",e),coalesce:(...e)=>h("coalesce",e),coin:(...e)=>h("coin",e),concat:(...e)=>h("concat",e),constant:(...e)=>h("constant",e),count:(...e)=>h("count",e),cyclicPath:(...e)=>h("cyclicPath",e),dateAdd:(...e)=>h("dateAdd",e),dateDiff:(...e)=>h("dateDiff",e),dedup:(...e)=>h("dedup",e),disjunct:(...e)=>h("disjunct",e),drop:(...e)=>h("drop",e),element:(...e)=>h("element",e),elementMap:(...e)=>h("elementMap",e),emit:(...e)=>h("emit",e),fail:(...e)=>h("fail",e),filter:(...e)=>h("filter",e),flatMap:(...e)=>h("flatMap",e),fold:(...e)=>h("fold",e),format:(...e)=>h("format",e),group:(...e)=>h("group",e),groupCount:(...e)=>h("groupCount",e),has:(...e)=>h("has",e),hasId:(...e)=>h("hasId",e),hasKey:(...e)=>h("hasKey",e),hasLabel:(...e)=>h("hasLabel",e),hasNot:(...e)=>h("hasNot",e),hasValue:(...e)=>h("hasValue",e),id:(...e)=>h("id",e),identity:(...e)=>h("identity",e),in_:(...e)=>h("in_",e),inE:(...e)=>h("inE",e),inV:(...e)=>h("inV",e),index:(...e)=>h("index",e),inject:(...e)=>h("inject",e),is:(...e)=>h("is",e),key:(...e)=>h("key",e),label:(...e)=>h("label",e),length:(...e)=>h("length",e),limit:(...e)=>h("limit",e),local:(...e)=>h("local",e),loops:(...e)=>h("loops",e),lTrim:(...e)=>h("lTrim",e),map:(...e)=>h("map",e),match:(...e)=>h("match",e),math:(...e)=>h("math",e),max:(...e)=>h("max",e),mean:(...e)=>h("mean",e),mergeE:(...e)=>h("mergeE",e),mergeV:(...e)=>h("mergeV",e),min:(...e)=>h("min",e),none:(...e)=>h("none",e),not:(...e)=>h("not",e),optional:(...e)=>h("optional",e),or:(...e)=>h("or",e),order:(...e)=>h("order",e),otherV:(...e)=>h("otherV",e),out:(...e)=>h("out",e),outE:(...e)=>h("outE",e),outV:(...e)=>h("outV",e),path:(...e)=>h("path",e),project:(...e)=>h("project",e),properties:(...e)=>h("properties",e),property:(...e)=>h("property",e),propertyMap:(...e)=>h("propertyMap",e),range:(...e)=>h("range",e),repeat:(...e)=>h("repeat",e),replace:(...e)=>h("replace",e),reverse:(...e)=>h("reverse",e),rTrim:(...e)=>h("rTrim",e),sack:(...e)=>h("sack",e),sample:(...e)=>h("sample",e),select:(...e)=>h("select",e),sideEffect:(...e)=>h("sideEffect",e),simplePath:(...e)=>h("simplePath",e),skip:(...e)=>h("skip",e),split:(...e)=>h("split",e),store:(...e)=>h("store",e),subgraph:(...e)=>h("subgraph",e),substring:(...e)=>h("substring",e),sum:(...e)=>h("sum",e),tail:(...e)=>h("tail",e),timeLimit:(...e)=>h("timeLimit",e),times:(...e)=>h("times",e),to:(...e)=>h("to",e),toE:(...e)=>h("toE",e),toLower:(...e)=>h("toLower",e),toUpper:(...e)=>h("toUpper",e),toV:(...e)=>h("toV",e),tree:(...e)=>h("tree",e),trim:(...e)=>h("trim",e),unfold:(...e)=>h("unfold",e),union:(...e)=>h("union",e),until:(...e)=>h("until",e),value:(...e)=>h("value",e),valueMap:(...e)=>h("valueMap",e),values:(...e)=>h("values",e),where:(...e)=>h("where",e)};e.exports={GraphTraversal:p,GraphTraversalSource:d,CardinalityValue:f,statics:m}},5406:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GremlinDatabaseService:()=>N});var r=n(1982);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function s(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return o(u,"_invoke",function(n,r,i){var a,o,s,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,o=0,s=e,p.n=n,c}};function f(n,r){for(o=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],f=p.p,h=a[2];n>3?(i=h===r)&&(s=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=f&&((i=n<2&&f<a[1])?(o=0,p.v=r,p.n=a[1]):f<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,o=0))}if(i||n>1)return c;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),o=u,s=h;(t=o<2?e:s)||!d;){a||(o?o<3?(o>1&&(p.n=-1),f(o,s)):p.n=s:p.v=s);try{if(l=2,a){if(o||(i="next"),t=a[i]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,o<2&&(o=0)}else 1===o&&(t=a.return)&&t.call(a),o<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),o=1);a=e}else if((t=(d=p.n<0)?s:n.call(r,p))!==c)break}catch(t){a=e,o=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),u}var c={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(o(t={},r,function(){return this}),t),f=d.prototype=l.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,o(f,"constructor",d),o(d,"constructor",u),u.displayName="GeneratorFunction",o(d,i,"GeneratorFunction"),o(f),o(f,i,"Generator"),o(f,r,function(){return this}),o(f,"toString",function(){return"[object Generator]"}),(a=function(){return{w:s,m:h}})()}function o(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}o=function(e,t,n,r){function a(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},o(e,t,n,r)}function s(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,c,"next",e)}function c(e){s(a,r,i,o,c,"throw",e)}o(void 0)})}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var d=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t},t=[{key:"initialize",value:(s=c(a().m(function e(t){return a().w(function(e){for(;;)switch(e.n){case 0:return this.client=t,e.n=1,this.client.open();case 1:return e.a(2)}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"close",value:(o=c(a().m(function e(){var t,n;return a().w(function(e){for(;;)switch(e.n){case 0:if(null===(t=this.client)||void 0===t||!t.isOpen){e.n=2;break}return e.n=1,null===(n=this.client)||void 0===n?void 0:n.close();case 1:this.client=null;case 2:return e.a(2)}},e,this)})),function(){return o.apply(this,arguments)})},{key:"runQuery",value:(r=c(a().m(function e(t){var n,r,i=arguments;return a().w(function(e){for(;;)switch(e.n){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:null,r=i.length>2&&void 0!==i[2]&&i[2],null!=this.client){e.n=1;break}throw new Error("Gremlin client has not been initialised.");case 1:if(this.client.isOpen){e.n=2;break}return e.n=2,this.client.open();case 2:if(!r){e.n=4;break}return e.n=3,this.client.submit(t,n);case 3:case 5:return e.a(2,e.v);case 4:return utils.debugLog(this.prepareQuery(t,n)),e.n=5,this.client.submit(this.prepareQuery(t,n))}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"prepareQuery",value:function(e,t){for(var n,r=this,i=null!=t?t:{},a=[],o=/\$([a-zA-Z0-9_]+)\b/g;null!=(n=o.exec(e));)a.push(n[1]);var s=a.filter(function(e){return!(e in i)});if(s.length>0)throw new Error("One or more parameters, ".concat(s.join(", "),", are referenced in the query but not included in the parameters object."));if(null!=t&&0!==Object.keys(t).length){var c=Object.keys(t).sort(function(e,t){return t.length-e.length}),l=new RegExp("\\$(".concat(c.join("|"),")\\b"),"g");e=e.replace(l,function(e,n){var i=t[n],a=r.sanitiseValue(i);return null===a?"null":a})}return e}},{key:"sanitiseValue",value:function(e){if(null==e)return null;switch(i(e)){case"string":return this.escapeSpecial(e,"'");case"number":case"boolean":return e.toString();case"object":return Array.isArray(e)?!0===e.isRawArray?e.quotedElements?e.map(function(e){return'"'.concat(e,'"')}).join(", "):e.join(", "):"'".concat(JSON.stringify(e),"'"):this.isDate(e)?"'".concat(new Date(e).toISOString(),"'"):this.escapeSpecial(e,'"');default:throw new Error("Unsupported parameter type: ".concat(i(e)))}}},{key:"escapeSpecial",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"'";return"".concat(t).concat(e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\$/g,"\\$").replace(/`/g,"\\u0060")).concat(t)}},{key:"isDate",value:function(e){var t=new Date(e);return!isNaN(t.getTime())}}],t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,o,s}();function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function v(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return _(l,"_invoke",function(n,r,i){var a,s,c,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,s=0,c=e,p.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],f=p.p,h=a[2];n>3?(i=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=f&&((i=n<2&&f<a[1])?(s=0,p.v=r,p.n=a[1]):f<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),s=u,c=h;(t=s<2?e:c)||!d;){a||(s?s<3?(s>1&&(p.n=-1),f(s,c)):p.n=c:p.v=c);try{if(l=2,a){if(s||(i="next"),t=a[i]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=a.return)&&t.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=e}else if((t=(d=p.n<0)?c:n.call(r,p))!==o)break}catch(t){a=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(_(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,_(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,_(d,"constructor",l),_(l,"constructor",c),c.displayName="GeneratorFunction",_(l,i,"GeneratorFunction"),_(d),_(d,i,"Generator"),_(d,r,function(){return this}),_(d,"toString",function(){return"[object Generator]"}),(v=function(){return{w:a,m:p}})()}function _(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}_=function(e,t,n,r){function a(t,n){_(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},_(e,t,n,r)}function b(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function E(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){b(a,r,i,o,s,"next",e)}function s(e){b(a,r,i,o,s,"throw",e)}o(void 0)})}}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function T(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}function S(e,t,n){return t=A(t),function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,I()?Reflect.construct(t,n||[],A(e).constructor):t.apply(e,n))}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(I=function(){return!!e})()}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}var N=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=S(this,t,[e])).config=e,r.gremlin=n,r.gremlinClient=new d(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),n=t,r=[{key:"initialize",value:(u=E(v().m(function e(){var t,n;return v().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=new this.gremlin.driver.auth.PlainTextSaslAuthenticator("/dbs/".concat(this.config.db,"/colls/").concat(this.config.graph),this.config.key),n=new this.gremlin.driver.Client(this.config.endpoint,{authenticator:t,traversalSource:"g",rejectUnauthorized:!0,mimeType:"application/vnd.gremlin-v2.0+json"}),e.n=1,this.gremlinClient.initialize(n);case 1:e.n=3;break;case 2:throw e.p=2,e.v;case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return u.apply(this,arguments)})},{key:"close",value:(l=E(v().m(function e(){return v().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.gremlinClient.close();case 1:case 2:return e.a(2)}},e,this)})),function(){return l.apply(this,arguments)})},{key:"startTransaction",value:function(){return null}},{key:"endTransaction",value:function(){}},{key:"executeInTransaction",value:(c=E(v().m(function e(t,n){return v().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n(null);case 1:return e.a(2,e.v)}},e)})),function(e,t){return c.apply(this,arguments)})},{key:"transformRecord",value:function(e){if(!e)return null;try{var t={};return e.properties?Object.keys(e.properties).forEach(function(n){var r=e.properties[n];Array.isArray(r)&&r.length>0?t[n]=r[0].value:"string"==typeof r&&r.length>1&&"["===r[0]&&"{"!==r[1]?t[n]=JSON.parse(r):t[n]=r}):e.value&&e.value.properties?Object.keys(e.value.properties).forEach(function(n){var r=e.properties[n];Array.isArray(r)&&r.length>0?t[n]=r[0].value:"string"==typeof r&&r.length>1&&"["===r[0]&&"{"!==r[1]?t[n]=JSON.parse(r):t[n]=r}):"object"===g(e)&&Object.keys(e).forEach(function(n){var r=e[n];"string"==typeof r&&r.length>1&&"["===r[0]&&"{"!==r[1]?t[n]=JSON.parse(r):t[n]=r}),t.created_date&&"string"==typeof t.created_date&&(t.created_date=new Date(t.created_date)),t.last_modified_date&&"string"==typeof t.last_modified_date&&(t.last_modified_date=new Date(t.last_modified_date)),t}catch(t){return e}}},{key:"executeRead",value:(s=E(v().m(function e(t,n){var r,i,a,o,s=arguments;return v().w(function(e){for(;;)if(0===e.n)return r=s.length>2&&void 0!==s[2]?s[2]:null,i=s.length>3&&void 0!==s[3]&&s[3],a=s.length>4&&void 0!==s[4]?s[4]:0,o=s.length>5&&void 0!==s[5]?s[5]:0,e.a(2,this.executeInternal(t,m(m({},n),{},{skip:a,limit:o+a}),r,i,"WRITE"))},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"executeWrite",value:(o=E(v().m(function e(t,n){var r,i=arguments;return v().w(function(e){for(;;)if(0===e.n)return r=i.length>2&&void 0!==i[2]?i[2]:null,e.a(2,this.executeInternal(t,n,r,!0,"WRITE"))},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"_transformParameters",value:function(e){var t=m({},e);return this.queryStrings&&this.queryStrings.cosmosdb_default_values&&"object"===g(this.queryStrings.cosmosdb_default_values)&&Object.entries(this.queryStrings.cosmosdb_default_values).forEach(function(e){var n=p(e,2),r=n[0],i=n[1],a=t[r];(null==a||"string"==typeof a&&""===a||Array.isArray(a)&&0===a.length)&&(t[r]=i)}),this.queryStrings&&this.queryStrings.cosmosdb_force_lowercase&&Array.isArray(this.queryStrings.cosmosdb_force_lowercase)&&this.queryStrings.cosmosdb_force_lowercase.length>0&&this.queryStrings.cosmosdb_force_lowercase.forEach(function(e){e in t&&"string"==typeof t[e]&&(t[e]=t[e].toLowerCase())}),t}},{key:"executeInternal",value:(a=E(v().m(function e(t,n,r,i,a){var o,s,c;return v().w(function(e){for(;;)switch(e.n){case 0:return s=this._transformParameters(n),utils.debugLog("Executing Gremlin query:\n".concat(t)),e.n=1,this.gremlinClient.runQuery(t,m(m({},s),{},{partitionkeyproperty:this.config.partitionkeyproperty,partitionkeyvalue:this.config.partitionkeyvalue}));case 1:if(o=e.v,c=this.normaliseData(o),!i){e.n=3;break}if(!Array.isArray(c)){e.n=2;break}if(!(c.length>0)){e.n=2;break}return e.a(2,c[0]);case 2:return e.a(2,c);case 3:if(!Array.isArray(c)){e.n=4;break}return e.a(2,c);case 4:if(null==c){e.n=5;break}return e.a(2,[c]);case 5:return e.a(2,[]);case 6:return e.a(2)}},e,this)})),function(e,t,n,r,i){return a.apply(this,arguments)})},{key:"normaliseData",value:function(e){var t=this;return 0===e._items.length?null:1===e._items.length?this.transformRecord(e._items[0]):e._items.map(function(e){return t.transformRecord(e)})}}],r&&w(n.prototype,r),i&&w(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,a,o,s,c,l,u}(r.M)},5462:()=>{},5506:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),{ObjectDefineProperty:i,ObjectKeys:a,ReflectApply:o}=n(4134),{promisify:{custom:s}}=n(7760),{streamReturningOperators:c,promiseReturningOperators:l}=n(823),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=n(6371),d=n(7830),{setDefaultHighWaterMark:p,getDefaultHighWaterMark:f}=n(5291),{pipeline:h}=n(7758),{destroyer:m}=n(5896),y=n(6238),g=n(3095),v=n(6115),_=e.exports=n(4259).Stream;_.isDestroyed=v.isDestroyed,_.isDisturbed=v.isDisturbed,_.isErrored=v.isErrored,_.isReadable=v.isReadable,_.isWritable=v.isWritable,_.Readable=n(7576);for(const E of a(c)){const w=c[E];function T(...e){if(new.target)throw u();return _.Readable.from(o(w,this,e))}i(T,"name",{__proto__:null,value:w.name}),i(T,"length",{__proto__:null,value:w.length}),i(_.Readable.prototype,E,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(const S of a(l)){const I=l[S];function A(...e){if(new.target)throw u();return o(I,this,e)}i(A,"name",{__proto__:null,value:I.name}),i(A,"length",{__proto__:null,value:I.length}),i(_.Readable.prototype,S,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}_.Writable=n(8584),_.Duplex=n(3370),_.Transform=n(7382),_.PassThrough=n(6524),_.pipeline=h;const{addAbortSignal:b}=n(4147);_.addAbortSignal=b,_.finished=y,_.destroy=m,_.compose=d,_.setDefaultHighWaterMark=p,_.getDefaultHighWaterMark=f,i(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>g}),i(h,s,{__proto__:null,enumerable:!0,get:()=>g.pipeline}),i(y,s,{__proto__:null,enumerable:!0,get:()=>g.finished}),_.Stream=_,_._isUint8Array=function(e){return e instanceof Uint8Array},_._uint8ArrayToBuffer=function(e){return r.from(e.buffer,e.byteOffset,e.byteLength)}},5568:e=>{"use strict";const{AbortController:t,AbortSignal:n}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=t,e.exports.AbortSignal=n,e.exports.default=t},5606:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,c=[],l=!1,u=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):u=-1,c.length&&p())}function p(){if(!l){var e=o(d);l=!0;for(var t=c.length;t;){for(s=c,c=[];++u<t;)s&&s[u].run();u=-1,t=c.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||l||o(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},5737:(e,t,n)=>{"use strict";const r=n(1545),i=n(3335).TraversalStrategy;class a extends r.Traversal{constructor(e,t){super(null,null,null),this.traversers=e,this.sideEffects=t}}e.exports={RemoteConnection:class{constructor(e,t={}){this.url=e,this.options=t}open(){throw new Error("open() must be implemented")}get isOpen(){throw new Error("isOpen() must be implemented")}get isSessionBound(){return!1}submit(e){throw new Error("submit() must be implemented")}createSession(){throw new Error("createSession() must be implemented")}commit(){throw new Error("commit() must be implemented")}rollback(){throw new Error("rollback() must be implemented")}close(){throw new Error("close() must be implemented")}},RemoteStrategy:class extends i{constructor(e){super("js:RemoteStrategy"),this.connection=e}apply(e){return e.traversers?Promise.resolve():this.connection.submit(e.getBytecode()).then(function(t){e.sideEffects=t.sideEffects,e.traversers=t.traversers})}},RemoteTraversal:a}},5896:(e,t,n)=>{"use strict";const r=n(5606),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:a},AbortError:o}=n(6371),{Symbol:s}=n(4134),{kIsDestroyed:c,isDestroyed:l,isFinished:u,isServerRequest:d}=n(6115),p=s("kDestroy"),f=s("kConstruct");function h(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function m(e,t,n){let i=!1;function a(t){if(i)return;i=!0;const a=e._readableState,o=e._writableState;h(t,o,a),o&&(o.closed=!0),a&&(a.closed=!0),"function"==typeof n&&n(t),t?r.nextTick(y,e,t):r.nextTick(g,e)}try{e._destroy(t||null,a)}catch(t){a(t)}}function y(e,t){v(e,t),g(e)}function g(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=n&&n.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function v(e,t){const n=e._readableState,r=e._writableState;null!=r&&r.errorEmitted||null!=n&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function _(e,t,n){const i=e._readableState,a=e._writableState;if(null!=a&&a.destroyed||null!=i&&i.destroyed)return this;null!=i&&i.autoDestroy||null!=a&&a.autoDestroy?e.destroy(t):t&&(t.stack,a&&!a.errored&&(a.errored=t),i&&!i.errored&&(i.errored=t),n?r.nextTick(v,e,t):v(e,t))}function b(e){let t=!1;function n(n){if(t)return void _(e,null!=n?n:new a);t=!0;const i=e._readableState,o=e._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?e.emit(p,n):n?_(e,n,!0):r.nextTick(E,e)}try{e._construct(e=>{r.nextTick(n,e)})}catch(e){r.nextTick(n,e)}}function E(e){e.emit(f)}function w(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function T(e){e.emit("close")}function S(e,t){e.emit("error",t),r.nextTick(T,e)}e.exports={construct:function(e,t){if("function"!=typeof e._construct)return;const n=e._readableState,i=e._writableState;n&&(n.constructed=!1),i&&(i.constructed=!1),e.once(f,t),e.listenerCount(f)>1||r.nextTick(b,e)},destroyer:function(e,t){e&&!l(e)&&(t||u(e)||(t=new o),d(e)?(e.socket=null,e.destroy(t)):w(e)?e.abort():w(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?r.nextTick(S,e,t):r.nextTick(T,e),e.destroyed||(e[c]=!0))},destroy:function(e,t){const n=this._readableState,r=this._writableState,a=r||n;return null!=r&&r.destroyed||null!=n&&n.destroyed?("function"==typeof t&&t(),this):(h(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),a.constructed?m(this,e,t):this.once(p,function(n){m(this,i(n,e),t)}),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:_}},6078:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),{valueKey:i,LambdaSerializer:a}=n(474);e.exports=class{constructor(e){this.ioc=e,this.graphsonLambdaSerializer=new a}canBeUsedFor(e){return this.graphsonLambdaSerializer.canBeUsedFor(e)}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.LAMBDA,1]);const e=[0,0,0,0],n=[0,0,0,0],i=[0,0,0,0];return r.from([...e,...n,...i])}const n=[];t&&n.push(r.from([this.ioc.DataType.LAMBDA,0]));const a=this.graphsonLambdaSerializer.serialize(e),o=a[i].language,s=a[i].script,c=a[i].arguments;return n.push(this.ioc.stringSerializer.serialize(o,!1)),n.push(this.ioc.stringSerializer.serialize(s,!1)),n.push(this.ioc.intSerializer.serialize(c,!1)),r.concat(n)}}},6115:(e,t,n)=>{"use strict";const{SymbolAsyncIterator:r,SymbolIterator:i,SymbolFor:a}=n(4134),o=a("nodejs.stream.destroyed"),s=a("nodejs.stream.errored"),c=a("nodejs.stream.readable"),l=a("nodejs.stream.writable"),u=a("nodejs.stream.disturbed"),d=a("nodejs.webstream.isClosedPromise"),p=a("nodejs.webstream.controllerErrorFunction");function f(e,t=!1){var n;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(n=e._readableState)||void 0===n?void 0:n.readable)||e._writableState&&!e._readableState)}function h(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function m(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function y(e){return!(!e||m(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function g(e){return!(!e||m(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function v(e){return!(!e||m(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function _(e){if(!m(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[o]||null!=r&&r.destroyed)}function b(e){if(!h(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function E(e,t){if(!f(e))return null;const n=e._readableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.endEmitted)?null:!!(n.endEmitted||!1===t&&!0===n.ended&&0===n.length))}function w(e){return e&&null!=e[c]?e[c]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!_(e)&&(f(e)&&e.readable&&!E(e))}function T(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!_(e)&&(h(e)&&e.writable&&!b(e))}function S(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function I(e){return"boolean"==typeof e._sent100&&S(e)}e.exports={isDestroyed:_,kIsDestroyed:o,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[u])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:u,isErrored:function(e){var t,n,r,i,a,o,c,l,u,d;return!(!e||!(null!==(t=null!==(n=null!==(r=null!==(i=null!==(a=null!==(o=e[s])&&void 0!==o?o:e.readableErrored)&&void 0!==a?a:e.writableErrored)&&void 0!==i?i:null===(c=e._readableState)||void 0===c?void 0:c.errorEmitted)&&void 0!==r?r:null===(l=e._writableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==n?n:null===(u=e._readableState)||void 0===u?void 0:u.errored)&&void 0!==t?t:null===(d=e._writableState)||void 0===d?void 0:d.errored))},kIsErrored:s,isReadable:w,kIsReadable:c,kIsClosedPromise:d,kControllerErrorFunction:p,kIsWritable:l,isClosed:function(e){if(!m(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,n=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==n?void 0:n.closed)?(null==t?void 0:t.closed)||(null==n?void 0:n.closed):"boolean"==typeof e._closed&&S(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return m(e)?!!_(e)||(!1===(null==t?void 0:t.readable)||!w(e))&&(!1===(null==t?void 0:t.writable)||!T(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[r]:!1===t?"function"==typeof e[i]:"function"==typeof e[r]||"function"==typeof e[i])},isReadableNodeStream:f,isReadableStream:y,isReadableEnded:function(e){if(!f(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:E,isReadableErrored:function(e){var t,n;return m(e)?e.readableErrored?e.readableErrored:null!==(t=null===(n=e._readableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isNodeStream:m,isWebStream:function(e){return y(e)||g(e)||v(e)},isWritable:T,isWritableNodeStream:h,isWritableStream:g,isWritableEnded:b,isWritableFinished:function(e,t){if(!h(e))return null;if(!0===e.writableFinished)return!0;const n=e._writableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.finished)?null:!!(n.finished||!1===t&&!0===n.ended&&0===n.length))},isWritableErrored:function(e){var t,n;return m(e)?e.writableErrored?e.writableErrored:null!==(t=null===(n=e._writableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:I,willEmitClose:function(e){if(!m(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&I(e)||!!(r&&r.autoDestroy&&r.emitClose&&!1===r.closed)},isTransformStream:v}},6140:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=n},6238:(e,t,n)=>{"use strict";const r=n(5606),{AbortError:i,codes:a}=n(6371),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_PREMATURE_CLOSE:s}=a,{kEmptyObject:c,once:l}=n(7760),{validateAbortSignal:u,validateFunction:d,validateObject:p,validateBoolean:f}=n(277),{Promise:h,PromisePrototypeThen:m,SymbolDispose:y}=n(4134),{isClosed:g,isReadable:v,isReadableNodeStream:_,isReadableStream:b,isReadableFinished:E,isReadableErrored:w,isWritable:T,isWritableNodeStream:S,isWritableStream:I,isWritableFinished:A,isWritableErrored:O,isNodeStream:N,willEmitClose:R,kIsClosedPromise:x}=n(6115);let L;const C=()=>{};function k(e,t,a){var f,h;if(2===arguments.length?(a=t,t=c):null==t?t=c:p(t,"options"),d(a,"callback"),u(t.signal,"options.signal"),a=l(a),b(e)||I(e))return function(e,t,a){let o=!1,s=C;if(t.signal)if(s=()=>{o=!0,a.call(e,new i(void 0,{cause:t.signal.reason}))},t.signal.aborted)r.nextTick(s);else{L=L||n(7760).addAbortListener;const r=L(t.signal,s),i=a;a=l((...t)=>{r[y](),i.apply(e,t)})}const c=(...t)=>{o||r.nextTick(()=>a.apply(e,t))};return m(e[x].promise,c,c),C}(e,t,a);if(!N(e))throw new o("stream",["ReadableStream","WritableStream","Stream"],e);const k=null!==(f=t.readable)&&void 0!==f?f:_(e),j=null!==(h=t.writable)&&void 0!==h?h:S(e),D=e._writableState,$=e._readableState,P=()=>{e.writable||F()};let M=R(e)&&_(e)===k&&S(e)===j,U=A(e,!1);const F=()=>{U=!0,e.destroyed&&(M=!1),(!M||e.readable&&!k)&&(k&&!z||a.call(e))};let z=E(e,!1);const B=()=>{z=!0,e.destroyed&&(M=!1),(!M||e.writable&&!j)&&(j&&!U||a.call(e))},H=t=>{a.call(e,t)};let V=g(e);const W=()=>{V=!0;const t=O(e)||w(e);return t&&"boolean"!=typeof t?a.call(e,t):k&&!z&&_(e,!0)&&!E(e,!1)?a.call(e,new s):!j||U||A(e,!1)?void a.call(e):a.call(e,new s)},G=()=>{V=!0;const t=O(e)||w(e);if(t&&"boolean"!=typeof t)return a.call(e,t);a.call(e)},q=()=>{e.req.on("finish",F)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?j&&!D&&(e.on("end",P),e.on("close",P)):(e.on("complete",F),M||e.on("abort",W),e.req?q():e.on("request",q)),M||"boolean"!=typeof e.aborted||e.on("aborted",W),e.on("end",B),e.on("finish",F),!1!==t.error&&e.on("error",H),e.on("close",W),V?r.nextTick(W):null!=D&&D.errorEmitted||null!=$&&$.errorEmitted?M||r.nextTick(G):(k||M&&!v(e)||!U&&!1!==T(e))&&(j||M&&!T(e)||!z&&!1!==v(e))?$&&e.req&&e.aborted&&r.nextTick(G):r.nextTick(G);const J=()=>{a=C,e.removeListener("aborted",W),e.removeListener("complete",F),e.removeListener("abort",W),e.removeListener("request",q),e.req&&e.req.removeListener("finish",F),e.removeListener("end",P),e.removeListener("close",P),e.removeListener("finish",F),e.removeListener("end",B),e.removeListener("error",H),e.removeListener("close",W)};if(t.signal&&!V){const o=()=>{const n=a;J(),n.call(e,new i(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)r.nextTick(o);else{L=L||n(7760).addAbortListener;const r=L(t.signal,o),i=a;a=l((...t)=>{r[y](),i.apply(e,t)})}}return J}e.exports=k,e.exports.finished=function(e,t){var n;let r=!1;return null===t&&(t=c),null!==(n=t)&&void 0!==n&&n.cleanup&&(f(t.cleanup,"cleanup"),r=t.cleanup),new h((n,i)=>{const a=k(e,t,e=>{r&&a(),e?i(e):n()})})}},6284:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function i(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var a={_initialized:!1,_debugEnabled:!1,_config:null,initialize:function(e){var t;return this._initialized&&this._config?this._config=r(r({},this._config),e):this._config=e,this._debugEnabled=(null===(t=this._config)||void 0===t?void 0:t.DEBUG)||!1,this._initialized=!0,this.debugLog("Utils initialized with this locale:",this._config.LANGUAGE),this},debugLog:function(e){if(!this._initialized||this._debugEnabled){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;if(n.length>0)(i=console).log.apply(i,["[DEBUG]",e].concat(n))}},getConfig:function(){return this._config},isInitialized:function(){return this._initialized},loadScript:function(e){return new Promise(function(t,n){var r=document.createElement("script");r.src=e,r.async=!0,r.onload=function(){return t()},r.onerror=function(){return n(new Error("Failed to load script: ".concat(e)))},document.head.appendChild(r)})},generateUUID:function(){if("undefined"!=typeof crypto&&crypto.randomUUID)return crypto.randomUUID();if("undefined"!=typeof crypto&&crypto.getRandomValues){var e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128,Array.from(e).map(function(e){return e.toString(16).padStart(2,"0")}).join("").replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}for(var t=(new Date).getTime(),n="undefined"!=typeof performance&&performance.now?performance.now():0,r=function(){var e=1e4*Math.sin(t*n*Math.random());return Math.floor(256*(e-Math.floor(e)))},i=new Uint8Array(16),a=0;a<16;a++)i[a]=r();return i[6]=15&i[6]|64,i[8]=63&i[8]|128,Array.from(i).map(function(e){return e.toString(16).padStart(2,"0")}).join("").replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}};e.exports&&(e.exports=a),window.utils=a},6348:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(1545);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.TEXTP]=this}canBeUsedFor(e){return e instanceof i.TextP}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.TEXTP,1]);const e=[0,0,0,0],n=[0,0,0,0];return r.from([...e,...n])}const n=[];let i;return t&&n.push(r.from([this.ioc.DataType.TEXTP,0])),n.push(this.ioc.stringSerializer.serialize(e.operator,!1)),i=void 0===e.other||null===e.other?Array.isArray(e.value)?e.value:[e.value]:[e.value,e.other],n.push(this.ioc.listSerializer.serialize(i,!1)),r.concat(n)}deserialize(e,t=!0){let n=0,a=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=a.readUInt8();if(n++,e!==this.ioc.DataType.TEXTP)throw new Error("unexpected {type_code}");if(a=a.slice(1),a.length<1)throw new Error("{value_flag} is missing");const t=a.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");a=a.slice(1)}let o,s,c,l,u;try{({v:o,len:s}=this.ioc.stringSerializer.deserialize(a,!1)),n+=s}catch(e){throw e.message="{name}: "+e.message,e}a=a.slice(s);try{({v:c,len:l}=this.ioc.listSerializer.deserialize(a,!1)),n+=l}catch(e){throw e.message="{values}: "+e.message,e}if(a=a.slice(l),c.length<1)return{v:new i.TextP(""),len:n};const d=i.TextP[o];return u="function"==typeof d?d(...c):new i.TextP(o,...c),{v:u,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:a,err:e})}}}},6371:(e,t,n)=>{"use strict";const{format:r,inspect:i}=n(9231),{AggregateError:a}=n(4134),o=globalThis.AggregateError||a,s=Symbol("kIsNodeError"),c=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,u={};function d(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function p(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function f(e,t,n){n||(n=Error);class i extends n{constructor(...n){super(function(e,t,n){if("function"==typeof t)return d(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);const i=(t.match(/%[dfijoOs]/g)||[]).length;return d(i===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${i}).`),0===n.length?t:r(t,...n)}(e,t,n))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=e,i.prototype[s]=!0,u[e]=i}function h(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class m extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new u.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(e,t,n)=>{d("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let r="The ";e.endsWith(" argument")?r+=`${e} `:r+=`"${e}" ${e.includes(".")?"property":"argument"} `,r+="must be ";const a=[],o=[],s=[];for(const e of t)d("string"==typeof e,"All expected entries have to be of type string"),c.includes(e)?a.push(e.toLowerCase()):l.test(e)?o.push(e):(d("object"!==e,'The value "object" should be written as "Object"'),s.push(e));if(o.length>0){const e=a.indexOf("object");-1!==e&&(a.splice(a,e,1),o.push("Object"))}if(a.length>0){switch(a.length){case 1:r+=`of type ${a[0]}`;break;case 2:r+=`one of type ${a[0]} or ${a[1]}`;break;default:{const e=a.pop();r+=`one of type ${a.join(", ")}, or ${e}`}}(o.length>0||s.length>0)&&(r+=" or ")}if(o.length>0){switch(o.length){case 1:r+=`an instance of ${o[0]}`;break;case 2:r+=`an instance of ${o[0]} or ${o[1]}`;break;default:{const e=o.pop();r+=`an instance of ${o.join(", ")}, or ${e}`}}s.length>0&&(r+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(r+="an "),r+=`${s[0]}`;break;case 2:r+=`one of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();r+=`one of ${s.join(", ")}, or ${e}`}}if(null==n)r+=`. Received ${n}`;else if("function"==typeof n&&n.name)r+=`. Received function ${n.name}`;else if("object"==typeof n){var u;if(null!==(u=n.constructor)&&void 0!==u&&u.name)r+=`. Received an instance of ${n.constructor.name}`;else{r+=`. Received ${i(n,{depth:-1})}`}}else{let e=i(n,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),r+=`. Received type ${typeof n} (${e})`}return r},TypeError),f("ERR_INVALID_ARG_VALUE",(e,t,n="is invalid")=>{let r=i(t);r.length>128&&(r=r.slice(0,128)+"...");return`The ${e.includes(".")?"property":"argument"} '${e}' ${n}. Received ${r}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(e,t,n)=>{var r;return`Expected ${e} to be returned from the "${t}" function but got ${null!=n&&null!==(r=n.constructor)&&void 0!==r&&r.name?`instance of ${n.constructor.name}`:"type "+typeof n}.`},TypeError),f("ERR_MISSING_ARGS",(...e)=>{let t;d(e.length>0,"At least one arg needs to be specified");const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}}return`${t} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(e,t,n)=>{let r;if(d(t,'Missing "range" argument'),Number.isInteger(n)&&Math.abs(n)>2**32)r=p(String(n));else if("bigint"==typeof n){r=String(n);const e=BigInt(2)**BigInt(32);(n>e||n<-e)&&(r=p(r)),r+="n"}else r=i(n);return`The value of "${e}" is out of range. It must be ${t}. Received ${r}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:m,aggregateTwoErrors:h(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new o([t,e],t.message);return n.code=t.code,n}return e||t}),hideStackFrames:h,codes:u}},6414:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(163);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.VERTEXPROPERTY]=this}canBeUsedFor(e){return e instanceof i.VertexProperty}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.VERTEXPROPERTY,1]):r.concat([this.ioc.unspecifiedNullSerializer.serialize(null),this.ioc.stringSerializer.serialize("",!1),this.ioc.unspecifiedNullSerializer.serialize(null),this.ioc.unspecifiedNullSerializer.serialize(null),this.ioc.unspecifiedNullSerializer.serialize(null)]);const n=[];return t&&n.push(r.from([this.ioc.DataType.VERTEXPROPERTY,0])),n.push(this.ioc.anySerializer.serialize(e.id)),n.push(this.ioc.stringSerializer.serialize(e.label,!1)),n.push(this.ioc.anySerializer.serialize(e.value)),n.push(this.ioc.unspecifiedNullSerializer.serialize(null)),n.push(this.ioc.anySerializer.serialize(e.properties)),r.concat(n)}deserialize(e,t=!0){let n=0,a=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=a.readUInt8();if(n++,e!==this.ioc.DataType.VERTEXPROPERTY)throw new Error("unexpected {type_code}");if(a=a.slice(1),a.length<1)throw new Error("{value_flag} is missing");const t=a.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");a=a.slice(1)}let o,s,c,l,u,d,p,f,h;try{({v:o,len:s}=this.ioc.anySerializer.deserialize(a)),n+=s}catch(e){throw e.message="{id}: "+e.message,e}a=a.slice(s);try{({v:c,len:l}=this.ioc.stringSerializer.deserialize(a,!1)),n+=l}catch(e){throw e.message="{label}: "+e.message,e}a=a.slice(l);try{({v:u,len:d}=this.ioc.anySerializer.deserialize(a)),n+=d}catch(e){throw e.message="{value}: "+e.message,e}a=a.slice(d);try{({len:p}=this.ioc.unspecifiedNullSerializer.deserialize(a)),n+=p}catch(e){throw e.message="{parent}: "+e.message,e}a=a.slice(p);try{({v:f,len:h}=this.ioc.anySerializer.deserialize(a)),n+=h}catch(e){throw e.message="{properties}: "+e.message,e}a=a.slice(h);const m=f||[];return{v:new i.VertexProperty(o,c,u,m),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:a,err:e})}}}},6524:(e,t,n)=>{"use strict";const{ObjectSetPrototypeOf:r}=n(4134);e.exports=a;const i=n(7382);function a(e){if(!(this instanceof a))return new a(e);i.call(this,e)}r(a.prototype,i.prototype),r(a,i),a.prototype._transform=function(e,t,n){n(null,e)}},6532:(e,t,n)=>{"use strict";const r=n(5606),{PromisePrototypeThen:i,SymbolAsyncIterator:a,SymbolIterator:o}=n(4134),{Buffer:s}=n(8287),{ERR_INVALID_ARG_TYPE:c,ERR_STREAM_NULL_VALUES:l}=n(6371).codes;e.exports=function(e,t,n){let u,d;if("string"==typeof t||t instanceof s)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});if(t&&t[a])d=!0,u=t[a]();else{if(!t||!t[o])throw new c("iterable",["Iterable"],t);d=!1,u=t[o]()}const p=new e({objectMode:!0,highWaterMark:1,...n});let f=!1;return p._read=function(){f||(f=!0,async function(){for(;;){try{const{value:e,done:t}=d?await u.next():u.next();if(t)p.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw f=!1,new l;if(p.push(t))continue;f=!1}}catch(e){p.destroy(e)}break}}())},p._destroy=function(e,t){i(async function(e){const t=null!=e,n="function"==typeof u.throw;if(t&&n){const{value:t,done:n}=await u.throw(e);if(await t,n)return}if("function"==typeof u.return){const{value:e}=await u.return();await e}}(e),()=>r.nextTick(t,e),n=>r.nextTick(t,n||e))},p}},6579:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e}writeRequest({requestId:e,op:t,processor:n,args:i}){const a=[r.from([129]),this.ioc.uuidSerializer.serialize(e,!1),this.ioc.stringSerializer.serialize(t,!1),this.ioc.stringSerializer.serialize(n,!1),this.ioc.mapSerializer.serialize(i,!1)];return r.concat(a)}}},6580:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{get INT32_MIN(){return-2147483648}get INT32_MAX(){return 2147483647}constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.INT]=this}canBeUsedFor(e){return"number"==typeof e&&!(e<this.INT32_MIN||e>this.INT32_MAX)}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.INT,1]):r.from([0,0,0,0]);const n=[];t&&n.push(r.from([this.ioc.DataType.INT,0]));const i=r.alloc(4);return i.writeInt32BE(e),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.INT)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<4)throw new Error("unexpected {value} length");n+=4;return{v:i.readInt32BE(),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},6665:(e,t,n)=>{"use strict";const r=n(5332),i=n(3335).TraversalStrategies,a=r.GraphTraversalSource,o=n(163).Graph;class s{constructor(e){this.traversalSourceClass=e}static traversal(e){return new s(e||a)}withRemote(e){return this.withGraph(new o).withRemote(e)}withGraph(e){return new this.traversalSourceClass(e,new i)}}e.exports=s},6706:(e,t,n)=>{const r=n(5606),i=n(8287),{isReadable:a,isWritable:o,isIterable:s,isNodeStream:c,isReadableNodeStream:l,isWritableNodeStream:u,isDuplexNodeStream:d,isReadableStream:p,isWritableStream:f}=n(6115),h=n(6238),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:g}}=n(6371),{destroyer:v}=n(5896),_=n(3370),b=n(7576),E=n(8584),{createDeferredPromise:w}=n(7760),T=n(6532),S=globalThis.Blob||i.Blob,I=void 0!==S?function(e){return e instanceof S}:function(e){return!1},A=globalThis.AbortController||n(5568).AbortController,{FunctionPrototypeCall:O}=n(4134);class N extends _{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function R(e){const t=e.readable&&"function"!=typeof e.readable.read?b.wrap(e.readable):e.readable,n=e.writable;let r,i,s,c,l,u=!!a(t),d=!!o(n);function p(e){const t=c;c=null,t?t(e):e&&l.destroy(e)}return l=new N({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==n||!n.writableObjectMode),readable:u,writable:d}),d&&(h(n,e=>{d=!1,e&&v(t,e),p(e)}),l._write=function(e,t,i){n.write(e,t)?i():r=i},l._final=function(e){n.end(),i=e},n.on("drain",function(){if(r){const e=r;r=null,e()}}),n.on("finish",function(){if(i){const e=i;i=null,e()}})),u&&(h(t,e=>{u=!1,e&&v(t,e),p(e)}),t.on("readable",function(){if(s){const e=s;s=null,e()}}),t.on("end",function(){l.push(null)}),l._read=function(){for(;;){const e=t.read();if(null===e)return void(s=l._read);if(!l.push(e))return}}),l._destroy=function(e,a){e||null===c||(e=new m),s=null,r=null,i=null,null===c?a(e):(c=a,v(n,e),v(t,e))},l}e.exports=function e(t,n){if(d(t))return t;if(l(t))return R({readable:t});if(u(t))return R({writable:t});if(c(t))return R({writable:!1,readable:!1});if(p(t))return R({readable:b.fromWeb(t)});if(f(t))return R({writable:E.fromWeb(t)});if("function"==typeof t){const{value:e,write:i,final:a,destroy:o}=function(e){let{promise:t,resolve:n}=w();const i=new A,a=i.signal,o=e(async function*(){for(;;){const e=t;t=null;const{chunk:i,done:o,cb:s}=await e;if(r.nextTick(s),o)return;if(a.aborted)throw new m(void 0,{cause:a.reason});({promise:t,resolve:n}=w()),yield i}}(),{signal:a});return{value:o,write(e,t,r){const i=n;n=null,i({chunk:e,done:!1,cb:r})},final(e){const t=n;n=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}(t);if(s(e))return T(N,e,{objectMode:!0,write:i,final:a,destroy:o});const c=null==e?void 0:e.then;if("function"==typeof c){let t;const n=O(c,e,e=>{if(null!=e)throw new g("nully","body",e)},e=>{v(t,e)});return t=new N({objectMode:!0,readable:!1,write:i,final(e){a(async()=>{try{await n,r.nextTick(e,null)}catch(t){r.nextTick(e,t)}})},destroy:o})}throw new g("Iterable, AsyncIterable or AsyncFunction",n,e)}if(I(t))return e(t.arrayBuffer());if(s(t))return T(N,t,{objectMode:!0,writable:!1});if(p(null==t?void 0:t.readable)&&f(null==t?void 0:t.writable))return N.fromWeb(t);if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable)){return R({readable:null!=t&&t.readable?l(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?u(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0})}const i=null==t?void 0:t.then;if("function"==typeof i){let e;return O(i,t,t=>{null!=t&&e.push(t),e.push(null)},t=>{v(e,t)}),e=new N({objectMode:!0,writable:!1,read(){}})}throw new y(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},6792:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(7037))&&r.__esModule?r:{default:r};var a=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};t.default=a},6980:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports={des_error:({serializer:e,args:t,cursor:n,err:i})=>{void 0===n&&(n=t[0]);let a="";n instanceof r&&(n.length>32&&(a="..."),n=n.slice(0,32).toString("hex"));const o=t[1],s=t[2];let c=`${e.constructor.name}.deserialize(cursor=${n}${a}`;return void 0!==o&&(c+=`, fullyQualifiedFormat=${o}`),void 0!==s&&(c+=`, nullable=${s}`),c+=`): ${i.message.replace(/\.$/,"")}.`,i.message=c,i}}},7007:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,n)}(e,i,{once:!0})})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,a,o;if(s(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,console&&console.warn}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):h(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(a){r.once&&e.removeEventListener(t,i),n(a)})}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=a[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,u=h(c,l);for(n=0;n<l;++n)r(u[n],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,a,o;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7037:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(7656))&&r.__esModule?r:{default:r};var a=function(e){return"string"==typeof e&&i.default.test(e)};t.default=a},7092:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e}canBeUsedFor(){}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.LONG,1]):r.from([0,0,0,0,0,0,0,0]);const n=[];t&&n.push(r.from([this.ioc.DataType.LONG,0]));const i=r.alloc(8);return i.writeBigInt64BE(BigInt(e)),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.LONG)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<8)throw new Error("unexpected {value} length");n+=8;return{v:i.readBigInt64BE(),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},7100:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e,t){this.ioc=e,this.ID=t,this.ioc.serializers[t]=this}canBeUsedFor(e){return Array.isArray(e)}serialize(e,t=!0){if(null==e)return t?r.from([this.ID,1]):r.from([0,0,0,0]);const n=[];t&&n.push(r.from([this.ID,0]));let i=e.length;if(i<0&&(i=0),i>this.ioc.intSerializer.INT32_MAX)throw new Error(`Array length=${i} is greater than supported max_length=${this.ioc.intSerializer.INT32_MAX}.`);n.push(this.ioc.intSerializer.serialize(i,!1));for(let t=0;t<i;t++)n.push(this.ioc.anySerializer.serialize(e[t]));return r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ID)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let a,o;try{({v:a,len:o}=this.ioc.intSerializer.deserialize(i,!1)),n+=o}catch(e){throw e.message="{length}: "+e.message,e}if(a<0)throw new Error("{length} is less than zero");i=i.slice(o);const s=[];for(let e=0;e<a;e++){let t,r;try{({v:t,len:r}=this.ioc.anySerializer.deserialize(i)),n+=r}catch(t){throw t.message=`{item_${e}}: `+t.message,t}i=i.slice(r),s.push(t)}return{v:s,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},7135:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.UNSPECIFIED_NULL]=this}canBeUsedFor(e){return null==e}serialize(e){return r.from([this.ioc.DataType.UNSPECIFIED_NULL,1])}deserialize(e){let t=0,n=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");const i=n.readUInt8();if(t++,i!==this.ioc.DataType.UNSPECIFIED_NULL)throw new Error("unexpected {type_code}");if(n=n.slice(1),n.length<1)throw new Error("{value_flag} is missing");const a=n.readUInt8();if(t++,1!==a)throw new Error("unexpected {value_flag}");return n=n.slice(1),{v:null,len:t}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:n,err:e})}}}},7186:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9025)),i=a(n(9042));function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)("v5",80,i.default);t.default=o},7240:(e,t,n)=>{"use strict";const r=n(5737),i=r.RemoteConnection,a=r.RemoteTraversal,o=n(1104),s=n(7545),c=n(9032),l=n(3335).OptionsStrategy;class u extends i{constructor(e,t={}){super(e,t),this._client=new s(e,t)}open(){return this._client.open()}get isOpen(){return this._client.isOpen}submit(e){const t=e.sourceInstructions.find(e=>"withStrategies"===e[0]&&e[1]instanceof l),n=["evaluationTimeout","scriptEvaluationTimeout","batchSize","requestId","userAgent","materializeProperties"];let r;if(void 0!==t){r={};const e=t[1].configuration;for(const t in e)e.hasOwnProperty(t)&&n.indexOf(t)>-1&&(r[t]=e[t])}return this._client.submit(e,null,r).then(e=>new a(e.toArray()))}createSession(){if(this.isSessionBound)throw new Error("Connection is already bound to a session - child sessions are not allowed");const e=Object.assign({},this.options);return e.session=o.getUuid(),new u(this.url,e)}get isSessionBound(){return this.options.session}commit(){return this._client.submit(c.GraphOp.commit,null)}rollback(){return this._client.submit(c.GraphOp.rollback,null)}close(){return this._client.close()}addListener(...e){return this._client.addListener(...e)}removeListener(...e){return this._client.removeListener(...e)}}e.exports=u},7281:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=null,r=[{key:"showMessage",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?5e3:n,i=t.type,a=void 0===i?"success":i,o=t.params,s=void 0===o?{}:o,c=i18n.translate(e,s);showMessage(c,a,r)})},{key:"showSuccess",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;this.showMessage(e,{type:"success",duration:n,params:t})}},{key:"showInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;this.showMessage(e,{type:"info",duration:n,params:t})}},{key:"showWarning",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7e3;this.showMessage(e,{type:"warning",duration:n,params:t})}}],n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();window.TeamStatusHandler=r},7286:e=>{"use strict";class t extends Error{constructor(e,t){super(e),this.name="ResponseError",this.statusCode=t.code,this.statusMessage=t.message,this.statusAttributes=t.attributes||{}}}e.exports=t},7382:(e,t,n)=>{"use strict";const{ObjectSetPrototypeOf:r,Symbol:i}=n(4134);e.exports=l;const{ERR_METHOD_NOT_IMPLEMENTED:a}=n(6371).codes,o=n(3370),{getHighWaterMark:s}=n(5291);r(l.prototype,o.prototype),r(l,o);const c=i("kCallback");function l(e){if(!(this instanceof l))return new l(e);const t=e?s(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),o.call(this,e),this._readableState.sync=!1,this[c]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function u(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,n)=>{t?e?e(t):this.destroy(t):(null!=n&&this.push(n),this.push(null),e&&e())})}function d(){this._final!==u&&u.call(this)}l.prototype._final=u,l.prototype._transform=function(e,t,n){throw new a("_transform()")},l.prototype._write=function(e,t,n){const r=this._readableState,i=this._writableState,a=r.length;this._transform(e,t,(e,t)=>{e?n(e):(null!=t&&this.push(t),i.ended||a===r.length||r.length<r.highWaterMark?n():this[c]=n)})},l.prototype._read=function(){if(this[c]){const e=this[c];this[c]=null,e()}}},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,a=s(e),o=a[0],c=a[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,o,c)),u=0,d=c>0?o-4:o;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;2===c&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t);1===c&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t);return l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],o=16383,s=0,c=r-i;s<c;s+=o)a.push(l(e,s,s+o>c?c:s+o));1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function l(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(c(r));return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},7545:(e,t,n)=>{"use strict";const r=n(1104),i=n(4074),a=n(9032);e.exports=class{constructor(e,t={}){this._options=t,"session"===this._options.processor&&(this._options.session=t.session||r.getUuid()),this._options.session&&(this._options.processor=t.processor||"session"),this._connection=new i(e,t)}open(){return this._connection.open()}get isOpen(){return this._connection.isOpen}submit(e,t,n){const r=n&&n.requestId;r&&delete n.requestId;const i=Object.assign({gremlin:e,aliases:{g:this._options.traversalSource||"g"}},n);if(this._options.session&&"session"===this._options.processor&&(i.session=this._options.session),e instanceof a)return this._options.session&&"session"===this._options.processor?this._connection.submit("session","bytecode",i,r):this._connection.submit("traversal","bytecode",i,r);if("string"==typeof e)return i.bindings=t,i.language="gremlin-groovy",i.accept=this._connection.mimeType,this._connection.submit(this._options.processor||"","eval",i,r);throw new TypeError("message must be of type Bytecode or string")}stream(e,t,n){const r=n&&n.requestId;r&&delete n.requestId;const i=Object.assign({gremlin:e,aliases:{g:this._options.traversalSource||"g"}},n);if(this._options.session&&"session"===this._options.processor&&(i.session=this._options.session),e instanceof a)return this._options.session&&"session"===this._options.processor?this._connection.stream("session","bytecode",i,r):this._connection.stream("traversal","bytecode",i,r);if("string"==typeof e)return i.bindings=t,i.language="gremlin-groovy",i.accept=this._connection.mimeType,this._connection.stream(this._options.processor||"","eval",i,r);throw new TypeError("message must be of type Bytecode or string")}close(){if(this._options.session&&"session"===this._options.processor){const e={session:this._options.session};return this._connection.submit(this._options.processor,"close",e,null).then(()=>this._connection.close())}return this._connection.close()}addListener(e,t){this._connection.on(e,t)}removeListener(e,t){this._connection.removeListener(e,t)}}},7576:(e,t,n)=>{"use strict";const r=n(5606),{ArrayPrototypeIndexOf:i,NumberIsInteger:a,NumberIsNaN:o,NumberParseInt:s,ObjectDefineProperties:c,ObjectKeys:l,ObjectSetPrototypeOf:u,Promise:d,SafeSet:p,SymbolAsyncDispose:f,SymbolAsyncIterator:h,Symbol:m}=n(4134);e.exports=q,q.ReadableState=G;const{EventEmitter:y}=n(7007),{Stream:g,prependListener:v}=n(4259),{Buffer:_}=n(8287),{addAbortSignal:b}=n(4147),E=n(6238);let w=n(7760).debuglog("stream",e=>{w=e});const T=n(345),S=n(5896),{getHighWaterMark:I,getDefaultHighWaterMark:A}=n(5291),{aggregateTwoErrors:O,codes:{ERR_INVALID_ARG_TYPE:N,ERR_METHOD_NOT_IMPLEMENTED:R,ERR_OUT_OF_RANGE:x,ERR_STREAM_PUSH_AFTER_EOF:L,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:C},AbortError:k}=n(6371),{validateObject:j}=n(277),D=m("kPaused"),{StringDecoder:$}=n(3141),P=n(6532);u(q.prototype,g.prototype),u(q,g);const M=()=>{},{errorOrDestroy:U}=S,F=1,z=16,B=32,H=2048,V=4096;function W(e){return{enumerable:!1,get(){return 0!==(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function G(e,t,r){"boolean"!=typeof r&&(r=t instanceof n(3370)),this.state=H|V|z|B,e&&e.objectMode&&(this.state|=F),r&&e&&e.readableObjectMode&&(this.state|=F),this.highWaterMark=e?I(this,e,"readableHighWaterMark",r):A(!1),this.buffer=new T,this.length=0,this.pipes=[],this.flowing=null,this[D]=null,e&&!1===e.emitClose&&(this.state&=~H),e&&!1===e.autoDestroy&&(this.state&=~V),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new $(e.encoding),this.encoding=e.encoding)}function q(e){if(!(this instanceof q))return new q(e);const t=this instanceof n(3370);this._readableState=new G(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&b(e.signal,this)),g.call(this,e),S.construct(this,()=>{this._readableState.needReadable&&Z(this,this._readableState)})}function J(e,t,n,r){w("readableAddChunk",t);const i=e._readableState;let a;if(0===(i.state&F)&&("string"==typeof t?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?t=_.from(t,n).toString(i.encoding):(t=_.from(t,n),n=""))):t instanceof _?n="":g._isUint8Array(t)?(t=g._uint8ArrayToBuffer(t),n=""):null!=t&&(a=new N("chunk",["string","Buffer","Uint8Array"],t))),a)U(e,a);else if(null===t)i.state&=-9,function(e,t){if(w("onEofChunk"),t.ended)return;if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?K(e):(t.needReadable=!1,t.emittedReadable=!0,X(e))}(e,i);else if(0!==(i.state&F)||t&&t.length>0)if(r)if(4&i.state)U(e,new C);else{if(i.destroyed||i.errored)return!1;Y(e,i,t,!0)}else if(i.ended)U(e,new L);else{if(i.destroyed||i.errored)return!1;i.state&=-9,i.decoder&&!n?(t=i.decoder.write(t),i.objectMode||0!==t.length?Y(e,i,t,!1):Z(e,i)):Y(e,i,t,!1)}else r||(i.state&=-9,Z(e,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function Y(e,t,n,r){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(65536&t.state?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),64&t.state&&K(e)),Z(e,t)}c(G.prototype,{objectMode:W(F),ended:W(2),endEmitted:W(4),reading:W(8),constructed:W(z),sync:W(B),needReadable:W(64),emittedReadable:W(128),readableListening:W(256),resumeScheduled:W(512),errorEmitted:W(1024),emitClose:W(H),autoDestroy:W(V),destroyed:W(8192),closed:W(16384),closeEmitted:W(32768),multiAwaitDrain:W(65536),readingMore:W(1<<17),dataEmitted:W(1<<18)}),q.prototype.destroy=S.destroy,q.prototype._undestroy=S.undestroy,q.prototype._destroy=function(e,t){t(e)},q.prototype[y.captureRejectionSymbol]=function(e){this.destroy(e)},q.prototype[f]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new k,this.destroy(e)),new d((t,n)=>E(this,r=>r&&r!==e?n(r):t(null)))},q.prototype.push=function(e,t){return J(this,e,t,!1)},q.prototype.unshift=function(e,t){return J(this,e,t,!0)},q.prototype.isPaused=function(){const e=this._readableState;return!0===e[D]||!1===e.flowing},q.prototype.setEncoding=function(e){const t=new $(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const n=this._readableState.buffer;let r="";for(const e of n)r+=t.write(e);return n.clear(),""!==r&&n.push(r),this._readableState.length=r.length,this};function Q(e,t){return e<=0||0===t.length&&t.ended?0:0!==(t.state&F)?1:o(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function K(e){const t=e._readableState;w("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(w("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(X,e))}function X(e){const t=e._readableState;w("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ie(e)}function Z(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,r.nextTick(ee,e,t))}function ee(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const n=t.length;if(w("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function te(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[D]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function ne(e){w("readable nexttick read 0"),e.read(0)}function re(e,t){w("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ie(e),t.flowing&&!t.reading&&e.read(0)}function ie(e){const t=e._readableState;for(w("flow",t.flowing);t.flowing&&null!==e.read(););}function ae(e,t){"function"!=typeof e.read&&(e=q.wrap(e,{objectMode:!0}));const n=async function*(e,t){let n,r=M;function i(t){this===e?(r(),r=M):r=t}e.on("readable",i);const a=E(e,{writable:!1},e=>{n=e?O(n,e):null,r(),r=M});try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(n)throw n;if(null===n)return;await new d(i)}}}catch(e){throw n=O(n,e),n}finally{!n&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==n&&!e._readableState.autoDestroy?(e.off("readable",i),a()):S.destroyer(e,null)}}(e,t);return n.stream=e,n}function oe(e,t){if(0===t.length)return null;let n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n}function se(e){const t=e._readableState;w("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(ce,t,e))}function ce(e,t){if(w("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)r.nextTick(le,t);else if(e.autoDestroy){const e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function le(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let ue;function de(){return void 0===ue&&(ue={}),ue}q.prototype.read=function(e){w("read",e),void 0===e?e=NaN:a(e)||(e=s(e,10));const t=this._readableState,n=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new x("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return w("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?se(this):K(this),null;if(0===(e=Q(e,t))&&t.ended)return 0===t.length&&se(this),null;let r,i=!!(64&t.state);if(w("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,w("length less than watermark",i)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)i=!1,w("reading, ended or constructing",i);else if(i){w("do read"),t.state|=8|B,0===t.length&&(t.state|=64);try{this._read(t.highWaterMark)}catch(e){U(this,e)}t.state&=~B,t.reading||(e=Q(n,t))}return r=e>0?oe(e,t):null,null===r?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&se(this)),null===r||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",r)),r},q.prototype._read=function(e){throw new R("_read()")},q.prototype.pipe=function(e,t){const n=this,i=this._readableState;1===i.pipes.length&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new p(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(e),w("pipe count=%d opts=%j",i.pipes.length,t);const a=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?s:y;function o(t,r){w("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,function(){w("cleanup"),e.removeListener("close",h),e.removeListener("finish",m),c&&e.removeListener("drain",c);e.removeListener("error",f),e.removeListener("unpipe",o),n.removeListener("end",s),n.removeListener("end",y),n.removeListener("data",d),l=!0,c&&i.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&c()}())}function s(){w("onend"),e.end()}let c;i.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",o);let l=!1;function u(){l||(1===i.pipes.length&&i.pipes[0]===e?(w("false write response, pause",0),i.awaitDrainWriters=e,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(e)&&(w("false write response, pause",i.awaitDrainWriters.size),i.awaitDrainWriters.add(e)),n.pause()),c||(c=function(e,t){return function(){const n=e._readableState;n.awaitDrainWriters===t?(w("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(w("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),n.awaitDrainWriters&&0!==n.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(n,e),e.on("drain",c))}function d(t){w("ondata");const n=e.write(t);w("dest.write",n),!1===n&&u()}function f(t){if(w("onerror",t),y(),e.removeListener("error",f),0===e.listenerCount("error")){const n=e._writableState||e._readableState;n&&!n.errorEmitted?U(e,t):e.emit("error",t)}}function h(){e.removeListener("finish",m),y()}function m(){w("onfinish"),e.removeListener("close",h),y()}function y(){w("unpipe"),n.unpipe(e)}return n.on("data",d),v(e,"error",f),e.once("close",h),e.once("finish",m),e.emit("pipe",n),!0===e.writableNeedDrain?u():i.flowing||(w("pipe resume"),n.resume()),e},q.prototype.unpipe=function(e){const t=this._readableState;if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const n=i(t.pipes,e);return-1===n||(t.pipes.splice(n,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},q.prototype.on=function(e,t){const n=g.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,w("on readable",i.length,i.reading),i.length?K(this):i.reading||r.nextTick(ne,this))),n},q.prototype.addListener=q.prototype.on,q.prototype.removeListener=function(e,t){const n=g.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(te,this),n},q.prototype.off=q.prototype.removeListener,q.prototype.removeAllListeners=function(e){const t=g.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(te,this),t},q.prototype.resume=function(){const e=this._readableState;return e.flowing||(w("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(re,e,t))}(this,e)),e[D]=!1,this},q.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[D]=!0,this},q.prototype.wrap=function(e){let t=!1;e.on("data",n=>{!this.push(n)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{U(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const n=l(e);for(let t=1;t<n.length;t++){const r=n[t];void 0===this[r]&&"function"==typeof e[r]&&(this[r]=e[r].bind(e))}return this},q.prototype[h]=function(){return ae(this)},q.prototype.iterator=function(e){return void 0!==e&&j(e,"options"),ae(this,e)},c(q.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),c(G.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[D]},set(e){this[D]=!!e}}}),q._fromList=oe,q.from=function(e,t){return P(q,e,t)},q.fromWeb=function(e,t){return de().newStreamReadableFromReadableStream(e,t)},q.toWeb=function(e,t){return de().newReadableStreamFromStreamReadable(e,t)},q.wrap=function(e,t){var n,r;return new q({objectMode:null===(n=null!==(r=e.readableObjectMode)&&void 0!==r?r:e.objectMode)||void 0===n||n,...t,destroy(t,n){S.destroyer(e,t),n(t)}}).wrap(e)}},7656:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},7758:(e,t,n)=>{const r=n(5606),{ArrayIsArray:i,Promise:a,SymbolAsyncIterator:o,SymbolDispose:s}=n(4134),c=n(6238),{once:l}=n(7760),u=n(5896),d=n(3370),{aggregateTwoErrors:p,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:y,ERR_STREAM_PREMATURE_CLOSE:g},AbortError:v}=n(6371),{validateFunction:_,validateAbortSignal:b}=n(277),{isIterable:E,isReadable:w,isReadableNodeStream:T,isNodeStream:S,isTransformStream:I,isWebStream:A,isReadableStream:O,isReadableFinished:N}=n(6115),R=globalThis.AbortController||n(5568).AbortController;let x,L,C;function k(e,t,n){let r=!1;e.on("close",()=>{r=!0});return{destroy:t=>{r||(r=!0,u.destroyer(e,t||new y("pipe")))},cleanup:c(e,{readable:t,writable:n},e=>{r=!e})}}function j(e){if(E(e))return e;if(T(e))return async function*(e){L||(L=n(7576));yield*L.prototype[o].call(e)}(e);throw new f("val",["Readable","Iterable","AsyncIterable"],e)}async function D(e,t,n,{end:r}){let i,o=null;const s=e=>{if(e&&(i=e),o){const e=o;o=null,e()}},l=()=>new a((e,t)=>{i?t(i):o=()=>{i?t(i):e()}});t.on("drain",s);const u=c(t,{readable:!1},s);try{t.writableNeedDrain&&await l();for await(const n of e)t.write(n)||await l();r&&(t.end(),await l()),n()}catch(e){n(i!==e?p(i,e):e)}finally{u(),t.off("drain",s)}}async function $(e,t,n,{end:r}){I(t)&&(t=t.writable);const i=t.getWriter();try{for await(const t of e)await i.ready,i.write(t).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(e){try{await i.abort(e),n(e)}catch(e){n(e)}}}function P(e,t,a){if(1===e.length&&i(e[0])&&(e=e[0]),e.length<2)throw new m("streams");const o=new R,c=o.signal,l=null==a?void 0:a.signal,u=[];function p(){F(new v)}let y,g,_;b(l,"options.signal"),C=C||n(7760).addAbortListener,l&&(y=C(l,p));const N=[];let L,P=0;function U(e){F(e,0===--P)}function F(e,n){var i;if(!e||g&&"ERR_STREAM_PREMATURE_CLOSE"!==g.code||(g=e),g||n){for(;N.length;)N.shift()(g);null===(i=y)||void 0===i||i[s](),o.abort(),n&&(g||u.forEach(e=>e()),r.nextTick(t,g,_))}}for(let V=0;V<e.length;V++){const W=e[V],G=V<e.length-1,q=V>0,J=G||!1!==(null==a?void 0:a.end),Y=V===e.length-1;if(S(W)){if(J){const{destroy:Q,cleanup:K}=k(W,G,q);N.push(Q),w(W)&&Y&&u.push(K)}function z(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&U(e)}W.on("error",z),w(W)&&Y&&u.push(()=>{W.removeListener("error",z)})}if(0===V)if("function"==typeof W){if(L=W({signal:c}),!E(L))throw new h("Iterable, AsyncIterable or Stream","source",L)}else L=E(W)||T(W)||I(W)?W:d.from(W);else if("function"==typeof W){var B;if(I(L))L=j(null===(B=L)||void 0===B?void 0:B.readable);else L=j(L);if(L=W(L,{signal:c}),G){if(!E(L,!0))throw new h("AsyncIterable",`transform[${V-1}]`,L)}else{var H;x||(x=n(6524));const X=new x({objectMode:!0}),Z=null===(H=L)||void 0===H?void 0:H.then;if("function"==typeof Z)P++,Z.call(L,e=>{_=e,null!=e&&X.write(e),J&&X.end(),r.nextTick(U)},e=>{X.destroy(e),r.nextTick(U,e)});else if(E(L,!0))P++,D(L,X,U,{end:J});else{if(!O(L)&&!I(L))throw new h("AsyncIterable or Promise","destination",L);{const ne=L.readable||L;P++,D(ne,X,U,{end:J})}}L=X;const{destroy:ee,cleanup:te}=k(L,!1,!0);N.push(ee),Y&&u.push(te)}}else if(S(W)){if(T(L)){P+=2;const re=M(L,W,U,{end:J});w(W)&&Y&&u.push(re)}else if(I(L)||O(L)){const ie=L.readable||L;P++,D(ie,W,U,{end:J})}else{if(!E(L))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],L);P++,D(L,W,U,{end:J})}L=W}else if(A(W)){if(T(L))P++,$(j(L),W,U,{end:J});else if(O(L)||E(L))P++,$(L,W,U,{end:J});else{if(!I(L))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],L);P++,$(L.readable,W,U,{end:J})}L=W}else L=d.from(W)}return(null!=c&&c.aborted||null!=l&&l.aborted)&&r.nextTick(p),L}function M(e,t,n,{end:i}){let a=!1;if(t.on("close",()=>{a||n(new g)}),e.pipe(t,{end:!1}),i){function o(){a=!0,t.end()}N(e)?r.nextTick(o):e.once("end",o)}else n();return c(e,{readable:!0,writable:!1},t=>{const r=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&r&&r.ended&&!r.errored&&!r.errorEmitted?e.once("end",n).once("error",n):n(t)}),c(t,{readable:!1,writable:!0},n)}e.exports={pipelineImpl:P,pipeline:function(...e){return P(e,l(function(e){return _(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}},7760:(e,t,n)=>{"use strict";const r=n(8287),{format:i,inspect:a}=n(9231),{codes:{ERR_INVALID_ARG_TYPE:o}}=n(6371),{kResistStopPropagation:s,AggregateError:c,SymbolDispose:l}=n(4134),u=globalThis.AbortSignal||n(5568).AbortSignal,d=globalThis.AbortController||n(5568).AbortController,p=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||r.Blob,h=void 0!==f?function(e){return e instanceof f}:function(e){return!1},m=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new o(t,"AbortSignal",e)};e.exports={AggregateError:c,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...n){t||(t=!0,e.apply(this,n))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}},promisify:e=>new Promise((t,n)=>{e((e,...r)=>e?n(e):t(...r))}),debuglog:()=>function(){},format:i,inspect:a,types:{isAsyncFunction:e=>e instanceof p,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:h,deprecate:(e,t)=>e,addAbortListener:n(7007).addAbortListener||function(e,t){if(void 0===e)throw new o("signal","AbortSignal",e);let n;return m(e,"signal"),((e,t)=>{if("function"!=typeof e)throw new o(t,"Function",e)})(t,"listener"),e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[s]:!0}),n=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[l](){var e;null===(e=n)||void 0===e||e()}}},AbortSignalAny:u.any||function(e){if(1===e.length)return e[0];const t=new d,n=()=>t.abort();return e.forEach(e=>{m(e,"signals"),e.addEventListener("abort",n,{once:!0})}),t.signal.addEventListener("abort",()=>{e.forEach(e=>e.removeEventListener("abort",n))},{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},7765:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BULKSET]=this}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.BULKSET)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let a,o;try{({v:a,len:o}=this.ioc.intSerializer.deserialize(i,!1)),n+=o}catch(e){throw e.message="{length}: "+e.message,e}if(a<0)throw new Error("{length} is less than zero");i=i.slice(o);let s=new Array;for(let e=0;e<a;e++){let t,r,a,o;try{({v:t,len:r}=this.ioc.anySerializer.deserialize(i)),n+=r}catch(t){throw t.message=`{item_${e}} value: `+t.message,t}i=i.slice(r);try{({v:a,len:o}=this.ioc.longSerializer.deserialize(i,!1)),n+=o}catch(t){throw t.message=`{item_${e}} bulk: `+t.message,t}if(a<0)throw new Error(`{item_${e}}: bulk is less than zero`);if(a>4294967295)throw new Error(`{item_${e}}: bulk is greater than 2^32-1`);i=i.slice(o),a=Number(a);const c=new Array(a).fill(t);s=s.concat(c)}return{v:s,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},7775:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(7037))&&r.__esModule?r:{default:r};var a=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};t.default=a},7777:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.BYTEBUFFER]=this}canBeUsedFor(e){return e instanceof r}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.BYTEBUFFER,1]):r.from([0,0,0,0]);const n=[];t&&n.push(r.from([this.ioc.DataType.BYTEBUFFER,0]));let i=e.length;if(i<0&&(i=0),i>this.ioc.intSerializer.INT32_MAX)throw new Error(`Buffer length=${i} is greater than supported max_length=${this.ioc.intSerializer.INT32_MAX}.`);return n.push(this.ioc.intSerializer.serialize(i,!1)),n.push(e),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.BYTEBUFFER)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let a,o;try{({v:a,len:o}=this.ioc.intSerializer.deserialize(i,!1)),n+=o}catch(e){throw e.message="{length}: "+e.message,e}if(a<0)throw new Error("{length} is less than zero");if(i=i.slice(o),a!==i.length)throw new Error(`{value}: unexpected actual {value} length=${i.length} when {length}=${a}`);const s=i.slice(0,a);return n+=a,{v:s,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},7830:(e,t,n)=>{"use strict";const{pipeline:r}=n(7758),i=n(3370),{destroyer:a}=n(5896),{isNodeStream:o,isReadable:s,isWritable:c,isWebStream:l,isTransformStream:u,isWritableStream:d,isReadableStream:p}=n(6115),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=n(6371),y=n(6238);e.exports=function(...e){if(0===e.length)throw new m("streams");if(1===e.length)return i.from(e[0]);const t=[...e];if("function"==typeof e[0]&&(e[0]=i.from(e[0])),"function"==typeof e[e.length-1]){const t=e.length-1;e[t]=i.from(e[t])}for(let n=0;n<e.length;++n)if(o(e[n])||l(e[n])){if(n<e.length-1&&!(s(e[n])||p(e[n])||u(e[n])))throw new h(`streams[${n}]`,t[n],"must be readable");if(n>0&&!(c(e[n])||d(e[n])||u(e[n])))throw new h(`streams[${n}]`,t[n],"must be writable")}let n,g,v,_,b;const E=e[0],w=r(e,function(e){const t=_;_=null,t?t(e):e?b.destroy(e):S||T||b.destroy()}),T=!!(c(E)||d(E)||u(E)),S=!!(s(w)||p(w)||u(w));if(b=new i({writableObjectMode:!(null==E||!E.writableObjectMode),readableObjectMode:!(null==w||!w.readableObjectMode),writable:T,readable:S}),T){if(o(E))b._write=function(e,t,r){E.write(e,t)?r():n=r},b._final=function(e){E.end(),g=e},E.on("drain",function(){if(n){const e=n;n=null,e()}});else if(l(E)){const e=(u(E)?E.writable:E).getWriter();b._write=async function(t,n,r){try{await e.ready,e.write(t).catch(()=>{}),r()}catch(e){r(e)}},b._final=async function(t){try{await e.ready,e.close().catch(()=>{}),g=t}catch(e){t(e)}}}const e=u(w)?w.readable:w;y(e,()=>{if(g){const e=g;g=null,e()}})}if(S)if(o(w))w.on("readable",function(){if(v){const e=v;v=null,e()}}),w.on("end",function(){b.push(null)}),b._read=function(){for(;;){const e=w.read();if(null===e)return void(v=b._read);if(!b.push(e))return}};else if(l(w)){const e=(u(w)?w.readable:w).getReader();b._read=async function(){for(;;)try{const{value:t,done:n}=await e.read();if(!b.push(t))return;if(n)return void b.push(null)}catch{return}}}return b._destroy=function(e,t){e||null===_||(e=new f),v=null,n=null,g=null,null===_?t(e):(_=t,o(w)&&a(w,e))},b}},8095:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.MAP]=this}canBeUsedFor(e){return null!=e&&(e instanceof Map||!Array.isArray(e)&&"object"==typeof e)}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.MAP,1]):this.ioc.intSerializer.serialize(0,!1);const n=e instanceof Map,i=n?Array.from(e.keys()):Object.keys(e);let a=i.length;a<0?a=0:a>this.ioc.intSerializer.INT32_MAX&&(a=this.ioc.intSerializer.INT32_MAX);const o=[];t&&o.push(r.from([this.ioc.DataType.MAP,0])),o.push(this.ioc.intSerializer.serialize(a,!1));for(let t=0;t<a;t++){const r=i[t],a=n?e.get(r):e[r];o.push(this.ioc.anySerializer.serialize(r),this.ioc.anySerializer.serialize(a))}return r.concat(o)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.MAP)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}let a,o;try{({v:a,len:o}=this.ioc.intSerializer.deserialize(i,!1)),n+=o}catch(e){throw e.message="{length}: "+e.message,e}if(a<0)throw new Error("{length} is less than zero");i=i.slice(o);const s=new Map;for(let e=0;e<a;e++){let t,r,a,o;try{({v:t,len:r}=this.ioc.anySerializer.deserialize(i)),n+=r}catch(t){throw t.message=`{item_${e}} key: `+t.message,t}i=i.slice(r);try{({v:a,len:o}=this.ioc.anySerializer.deserialize(i)),n+=o}catch(t){throw t.message=`{item_${e}} value: `+t.message,t}i=i.slice(o),s.set(t,a)}return{v:s,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}},8209:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function s(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return o(u,"_invoke",function(n,r,i){var a,o,s,l=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,o=0,s=e,p.n=n,c}};function f(n,r){for(o=n,s=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],f=p.p,h=a[2];n>3?(i=h===r)&&(s=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=f&&((i=n<2&&f<a[1])?(o=0,p.v=r,p.n=a[1]):f<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,o=0))}if(i||n>1)return c;throw d=!0,r}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),o=u,s=h;(t=o<2?e:s)||!d;){a||(o?o<3?(o>1&&(p.n=-1),f(o,s)):p.n=s:p.v=s);try{if(l=2,a){if(o||(i="next"),t=a[i]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,o<2&&(o=0)}else 1===o&&(t=a.return)&&t.call(a),o<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),o=1);a=e}else if((t=(d=p.n<0)?s:n.call(r,p))!==c)break}catch(t){a=e,o=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),u}var c={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(o(t={},r,function(){return this}),t),f=d.prototype=l.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,o(f,"constructor",d),o(d,"constructor",u),u.displayName="GeneratorFunction",o(d,i,"GeneratorFunction"),o(f),o(f,i,"Generator"),o(f,r,function(){return this}),o(f,"toString",function(){return"[object Generator]"}),(a=function(){return{w:s,m:h}})()}function o(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}o=function(e,t,n,r){function a(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},o(e,t,n,r)}function s(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,c,"next",e)}function c(e){s(a,r,i,o,c,"throw",e)}o(void 0)})}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var d=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialized=!1,this.dynamicElements=new Set,this.translationQueue=new Set,this.translationScheduled=!1},r=[{key:"initializeEventListeners",value:function(){var e=this;i18n.on("localeChanged",function(t){e.updatePageLocalization(t)}),document.querySelectorAll(".locale-option").forEach(function(t){t.addEventListener("click",function(){var t=c(a().m(function t(n){var r;return a().w(function(t){for(;;)switch(t.n){case 0:return r=n.currentTarget.getAttribute("data-locale"),t.n=1,e.handleLocaleChange(r);case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())})}},{key:"handleLocaleChange",value:(o=c(a().m(function e(t){return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.isChangingLocale){e.n=1;break}return e.a(2);case 1:return e.p=1,this.isChangingLocale=!0,document.body.classList.add("changing-locale"),e.n=2,i18n.setLocale(t);case 2:if(e.v){e.n=3;break}throw new Error("Failed to load locale: ".concat(t));case 3:e.n=5;break;case 4:e.p=4,e.v,showError("Failed to change language settings");case 5:return e.p=5,this.isChangingLocale=!1,document.body.classList.remove("changing-locale"),e.f(5);case 6:return e.a(2)}},e,this,[[1,4,5,6]])})),function(e){return o.apply(this,arguments)})},{key:"initializeDynamicElements",value:function(){var e=this;this.dynamicElements=new Set([].concat(n(document.querySelectorAll("[data-i18n]")),n(document.querySelectorAll("[data-i18n-placeholder]")),n(document.querySelectorAll("[data-i18n-aria-label]")),n(document.querySelectorAll("[data-i18n-title]")),n(document.querySelectorAll("[data-i18n-dynamic]")),n(document.querySelectorAll("[data-i18n-date]")),n(document.querySelectorAll("[data-i18n-params]")))),new MutationObserver(function(t){t.forEach(function(t){if("childList"===t.type)t.addedNodes.forEach(function(t){if(t.nodeType===Node.ELEMENT_NODE){var n=[];(t.hasAttribute("data-i18n")||t.hasAttribute("data-i18n-placeholder")||t.hasAttribute("data-i18n-aria-label")||t.hasAttribute("data-i18n-title")||t.hasAttribute("data-i18n-dynamic")||t.hasAttribute("data-i18n-date"))&&(e.dynamicElements.add(t),n.push(t)),t.querySelectorAll("[data-i18n], [data-i18n-placeholder], [data-i18n-aria-label], [data-i18n-title], [data-i18n-dynamic], [data-i18n-date]").forEach(function(t){e.dynamicElements.add(t),n.push(t)}),e.queueForTranslation(n)}});else if("attributes"===t.type){var n=t.target;n.nodeType===Node.ELEMENT_NODE&&(n.hasAttribute("data-i18n")||n.hasAttribute("data-i18n-placeholder")||n.hasAttribute("data-i18n-aria-label")||n.hasAttribute("data-i18n-title")||n.hasAttribute("data-i18n-dynamic")||n.hasAttribute("data-i18n-date")||n.hasAttribute("data-i18n-params"))&&(e.dynamicElements.add(n),e.queueForTranslation([n]))}})}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-i18n","data-i18n-placeholder","data-i18n-aria-label","data-i18n-title","data-i18n-dynamic","data-i18n-date","data-i18n-params"]})}},{key:"updateElementLocalization",value:function(e){try{if(e.hasAttribute("data-i18n")){var n=e.getAttribute("data-i18n"),r=i18n.translate(n);if(r)if("BUTTON"===e.tagName&&e.querySelector(".spinner")){var i=e.querySelector("span[data-i18n]");if(i)i.textContent=r;else{var a=e.querySelector(".spinner");e.innerHTML="",e.appendChild(a);var o=document.createElement("span");o.setAttribute("data-i18n",n),o.textContent=r,e.appendChild(o)}}else e.textContent=r}if(e.hasAttribute("data-i18n-title")){var s=e.getAttribute("data-i18n-title"),c=i18n.translate(s);c&&(e.title=c)}if(e.hasAttribute("data-i18n-placeholder")){var l=e.getAttribute("data-i18n-placeholder"),u=i18n.translate(l);u&&(e.placeholder=u)}if(e.hasAttribute("data-i18n-aria-label")){var d=e.getAttribute("data-i18n-aria-label"),p=i18n.translate(d);p&&e.setAttribute("aria-label",p)}if(e.hasAttribute("data-i18n-title")){var f=e.getAttribute("data-i18n-title"),h=i18n.translate(f);h&&(e.title=h)}if(e.hasAttribute("data-i18n-dynamic")){var m=e.getAttribute("data-i18n-dynamic"),y=e.getAttribute("data-i18n-params"),g=y?JSON.parse(y):{},v=i18n.translate(m,g);v&&(e.textContent=v)}if(e.hasAttribute("data-i18n-date")){var _=e.getAttribute("data-i18n-date"),b=e.getAttribute("data-date");if(b){var E,w="datetime",T="medium";if(_.includes("-")){var S=t(_.split("-"),2);w=S[0],T=S[1]}else T=_;switch(w){case"date":E=i18n.culturalConfig.formatDate(new Date(b),T);break;case"time":E=i18n.culturalConfig.formatTime(new Date(b),T);break;default:E=i18n.culturalConfig.formatDateTime(new Date(b),T)}var I=e.querySelector("i"),A=I?I.outerHTML:"";e.innerHTML=A+E}}}catch(e){}}},{key:"queueForTranslation",value:function(e){var t=this;e.forEach(function(e){return t.translationQueue.add(e)}),this.scheduleTranslation()}},{key:"scheduleTranslation",value:function(){var e=this;this.translationScheduled||(this.translationScheduled=!0,requestAnimationFrame(function(){e.processTranslationQueue(),e.translationScheduled=!1}))}},{key:"processTranslationQueue",value:function(){var e=this;this.translationQueue.forEach(function(t){document.body.contains(t)&&e.updateElementLocalization(t)}),this.translationQueue.clear()}},{key:"updatePageLocalization",value:function(e){var t=this;try{this.dynamicElements.forEach(function(e){document.body.contains(e)?t.updateElementLocalization(e):t.dynamicElements.delete(e)}),document.documentElement.setAttribute("dir",e.direction),document.documentElement.setAttribute("lang",e.locale.split("-")[0]),this.applyCulturalStyles(e.culturalPreferences),window.dispatchEvent(new CustomEvent("localizationUpdated",{detail:e}))}catch(e){}}},{key:"applyCulturalStyles",value:function(e){var t=document.documentElement;t.style.setProperty("--decimal-separator",e.numberFormat.decimal),t.style.setProperty("--grouping-separator",e.numberFormat.group),t.style.setProperty("--time-format",e.timeFormat.short),t.style.setProperty("--date-format",e.dateFormat.medium),t.style.setProperty("--date-time-format",e.dateTimeFormat.medium)}},{key:"initialize",value:function(){this.initialized||(this.initializeDynamicElements(),this.initializeEventListeners(),this.initialized=!0);var e={locale:i18n.currentLocale,direction:i18n.culturalConfig.isRTL()?"rtl":"ltr",culturalPreferences:i18n.culturalConfig.getCulturalPreferences()};this.updatePageLocalization(e)}}],r&&l(e.prototype,r),i&&l(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,i,o}();window.localeUI=new d},8287:(e,t,n)=>{"use strict";const r=n(7526),i=n(251),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const o=2147483647;function s(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|m(e,t);let r=s(n);const i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return f(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);const i=function(e){if(c.isBuffer(e)){const t=0|h(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||Q(e.length)?s(0):p(e);if("Buffer"===e.type&&Array.isArray(e.data))return p(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),s(e<0?0:0|h(e))}function p(e){const t=e.length<0?0:0|h(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function h(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function m(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(i)return r?-1:G(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return N(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Q(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){let a,o=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,c/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let r=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===r?0:a-r)){if(-1===r&&(r=a),a-r+1===c)return r*o}else-1!==r&&(a-=a-r),r=-1}else for(n+c>s&&(n=s-c),a=n;a>=0;a--){let n=!0;for(let r=0;r<c;r++)if(l(e,a+r)!==l(t,r)){n=!1;break}if(n)return a}return-1}function b(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const a=t.length;let o;for(r>a/2&&(r=a/2),o=0;o<r;++o){const r=parseInt(t.substr(2*o,2),16);if(Q(r))return o;e[n+o]=r}return o}function E(e,t,n,r){return J(G(t,e.length-n),e,n,r)}function w(e,t,n,r){return J(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function T(e,t,n,r){return J(q(t),e,n,r)}function S(e,t,n,r){return J(function(e,t){let n,r,i;const a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function I(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let a=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=n){let n,r,s,c;switch(o){case 1:t<128&&(a=t);break;case 2:n=e[i+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(a=c));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,c>65535&&c<1114112&&(a=c))}}null===a?(a=65533,o=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=o}return function(e){const t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=O));return n}(r)}t.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!c.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&console.error,Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},c.allocUnsafe=function(e){return d(e)},c.allocUnsafeSlow=function(e){return d(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(Y(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=c.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(Y(t,Uint8Array))i+t.length>r.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(c.prototype[a]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,i){if(Y(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0);const s=Math.min(a,o),l=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<s;++e)if(l[e]!==u[e]){a=l[e],o=u[e];break}return a<o?-1:o<a?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let a=!1;for(;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function N(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function R(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function x(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=K[e[r]];return i}function L(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function C(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,n,r,i,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r,i){B(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function D(e,t,n,r,i){B(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function $(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,n,r,a){return t=+t,n>>>=0,a||$(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function M(e,t,n,r,a){return t=+t,n>>>=0,a||$(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=X(function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),c.prototype.readBigUInt64BE=X(function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);let r=t,i=1,a=this[e+--r];for(;r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||C(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||C(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=X(function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),c.prototype.readBigInt64BE=X(function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)}),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||C(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||C(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||C(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||C(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){k(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){k(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=X(function(e,t=0){return j(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=X(function(e,t=0){return D(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);k(this,e,t,n,r-1,-r)}let i=0,a=1,o=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/a|0)-o&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);k(this,e,t,n,r-1,-r)}let i=n-1,a=1,o=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/a|0)-o&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=X(function(e,t=0){return j(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=X(function(e,t=0){return D(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const a=c.isBuffer(e)?e:c.from(e,r),o=a.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=a[i%o]}return this};const U={};function F(e,t,n){U[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function z(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function B(e,t,n,r,i,a){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=a>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(a+1)}${r}`:`>= -(2${r} ** ${8*(a+1)-1}${r}) and < 2 ** ${8*(a+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new U.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||V(t,e.length-(n+1))}(r,i,a)}function H(e,t){if("number"!=typeof e)throw new U.ERR_INVALID_ARG_TYPE(t,"number",e)}function V(e,t,n){if(Math.floor(e)!==e)throw H(e,n),new U.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),F("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),F("ERR_OUT_OF_RANGE",function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=z(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=z(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r},RangeError);const W=/[^+/0-9A-Za-z-_]/g;function G(e,t){let n;t=t||1/0;const r=e.length;let i=null;const a=[];for(let o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function q(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function J(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!=e}const K=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},8372:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(1545);e.exports=class{constructor(e){this.ioc=e;const t=e=>{const t={};return Object.values(e).forEach(e=>t[e.elementName]=e),t},n=e.DataType;this.types=[{name:"Barrier",code:n.BARRIER,enum:t(i.barrier)},{name:"Cardinality",code:n.CARDINALITY,enum:t(i.cardinality)},{name:"Column",code:n.COLUMN,enum:t(i.column)},{name:"Direction",code:n.DIRECTION,enum:t(i.direction)},{name:"DT",code:n.DT,enum:t(i.dt)},{name:"Merge",code:n.MERGE,enum:t(i.merge)},{name:"Operator",code:n.OPERATOR,enum:t(i.operator)},{name:"Order",code:n.ORDER,enum:t(i.order)},{name:"Pick",code:n.PICK,enum:t(i.pick)},{name:"Pop",code:n.POP,enum:t(i.pop)},{name:"Scope",code:n.SCOPE,enum:t(i.scope)},{name:"T",code:n.T,enum:t(i.t)}],this.byname={},this.bycode={};for(const e of this.types)this.ioc.serializers[e.code]=this,this.byname[e.name]=e,this.bycode[e.code]=e}canBeUsedFor(e){if(!(e instanceof i.EnumValue))return!1;if(!this.byname[e.typeName])throw new Error(`EnumSerializer.serialize: typeName=${e.typeName} is not supported.`);return!0}serialize(e,t=!0){const n=this.byname[e.typeName];if(void 0===e.elementName||null===e.elementName)return t?r.from([n.code,1]):r.from([this.ioc.DataType.STRING,0,0,0,0,0]);const i=[];return t&&i.push(r.from([n.code,0])),i.push(this.ioc.stringSerializer.serialize(e.elementName,!0)),r.concat(i)}deserialize(e,t=!0){let n=0,a=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");let o,s,c,l;if(t){const e=a.readUInt8();if(n++,o=this.bycode[e],!o)throw new Error(`unexpected {type_code}=${e}`);if(a=a.slice(1),a.length<1)throw new Error("{value_flag} is missing");const t=a.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");a=a.slice(1)}try{({v:s,len:c}=this.ioc.stringSerializer.deserialize(a,!0)),n+=c}catch(e){throw e.message="elementName: "+e.message,e}return a=a.slice(c),l=o?o.enum[s]:new i.EnumValue(void 0,s),{v:l,len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:a,err:e})}}}},8402:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(9253);e.exports=class extends i{constructor(e){if(super(e),void 0===this._options.username||null===this._options.username||0===this._options.username.length||void 0===this._options.password||null===this._options.password||0===this._options.password.length)throw new Error("Missing credentials for SASL PLAIN mechanism")}get name(){return"PLAIN"}evaluateChallenge(e){return this._hasInitialResponse(e)?Promise.resolve({saslMechanism:this.name,sasl:this._saslArgument(this._options.authzid,this._options.username,this._options.password)}):Promise.resolve({sasl:this._saslArgument(this._options.authzid,this._options.username,this._options.password)})}_saslArgument(e,t,n){return null==e&&(e=""),null==t&&(t=""),void 0!==n&&null!==n.length||(n=""),r.from(`${e}\0${t}\0${n}`).toString("base64")}_hasInitialResponse(e){return null!=e}}},8584:(e,t,n)=>{"use strict";const r=n(5606),{ArrayPrototypeSlice:i,Error:a,FunctionPrototypeSymbolHasInstance:o,ObjectDefineProperty:s,ObjectDefineProperties:c,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:u,Symbol:d,SymbolHasInstance:p}=n(4134);e.exports=j,j.WritableState=C;const{EventEmitter:f}=n(7007),h=n(4259).Stream,{Buffer:m}=n(8287),y=n(5896),{addAbortSignal:g}=n(4147),{getHighWaterMark:v,getDefaultHighWaterMark:_}=n(5291),{ERR_INVALID_ARG_TYPE:b,ERR_METHOD_NOT_IMPLEMENTED:E,ERR_MULTIPLE_CALLBACK:w,ERR_STREAM_CANNOT_PIPE:T,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:A,ERR_STREAM_WRITE_AFTER_END:O,ERR_UNKNOWN_ENCODING:N}=n(6371).codes,{errorOrDestroy:R}=y;function x(){}l(j.prototype,h.prototype),l(j,h);const L=d("kOnFinished");function C(e,t,r){"boolean"!=typeof r&&(r=t instanceof n(3370)),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?v(this,e,"writableHighWaterMark",r):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const i=!(!e||!1!==e.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=M.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,k(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[L]=[]}function k(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function j(e){const t=this instanceof n(3370);if(!t&&!o(j,this))return new j(e);this._writableState=new C(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&g(e.signal,this)),h.call(this,e),y.construct(this,()=>{const e=this._writableState;e.writing||B(this,e),W(this,e)})}function D(e,t,n,i){const a=e._writableState;if("function"==typeof n)i=n,n=a.defaultEncoding;else{if(n){if("buffer"!==n&&!m.isEncoding(n))throw new N(n)}else n=a.defaultEncoding;"function"!=typeof i&&(i=x)}if(null===t)throw new A;if(!a.objectMode)if("string"==typeof t)!1!==a.decodeStrings&&(t=m.from(t,n),n="buffer");else if(t instanceof m)n="buffer";else{if(!h._isUint8Array(t))throw new b("chunk",["string","Buffer","Uint8Array"],t);t=h._uint8ArrayToBuffer(t),n="buffer"}let o;return a.ending?o=new O:a.destroyed&&(o=new S("write")),o?(r.nextTick(i,o),R(e,o,!0),o):(a.pendingcb++,function(e,t,n,r,i){const a=t.objectMode?1:n.length;t.length+=a;const o=t.length<t.highWaterMark;o||(t.needDrain=!0);t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:n,encoding:r,callback:i}),t.allBuffers&&"buffer"!==r&&(t.allBuffers=!1),t.allNoop&&i!==x&&(t.allNoop=!1)):(t.writelen=a,t.writecb=i,t.writing=!0,t.sync=!0,e._write(n,r,t.onwrite),t.sync=!1);return o&&!t.errored&&!t.destroyed}(e,a,t,n,i))}function $(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new S("write")):n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function P(e,t,n,r){--t.pendingcb,r(n),z(t),R(e,n)}function M(e,t){const n=e._writableState,i=n.sync,a=n.writecb;"function"==typeof a?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t?(t.stack,n.errored||(n.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?r.nextTick(P,e,n,t,a):P(e,n,t,a)):(n.buffered.length>n.bufferedIndex&&B(e,n),i?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===a?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:a,stream:e,state:n},r.nextTick(U,n.afterWriteTickInfo)):F(e,n,1,a))):R(e,new w)}function U({stream:e,state:t,count:n,cb:r}){return t.afterWriteTickInfo=null,F(e,t,n,r)}function F(e,t,n,r){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));n-- >0;)t.pendingcb--,r();t.destroyed&&z(t),W(e,t)}function z(e){if(e.writing)return;for(let n=e.bufferedIndex;n<e.buffered.length;++n){var t;const{chunk:r,callback:i}=e.buffered[n],a=e.objectMode?1:r.length;e.length-=a,i(null!==(t=e.errored)&&void 0!==t?t:new S("write"))}const n=e[L].splice(0);for(let t=0;t<n.length;t++){var r;n[t](null!==(r=e.errored)&&void 0!==r?r:new S("end"))}k(e)}function B(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:n,bufferedIndex:r,objectMode:a}=t,o=n.length-r;if(!o)return;let s=r;if(t.bufferProcessing=!0,o>1&&e._writev){t.pendingcb-=o-1;const r=t.allNoop?x:e=>{for(let t=s;t<n.length;++t)n[t].callback(e)},a=t.allNoop&&0===s?n:i(n,s);a.allBuffers=t.allBuffers,$(e,t,!0,t.length,a,"",r),k(t)}else{do{const{chunk:r,encoding:i,callback:o}=n[s];n[s++]=null;$(e,t,!1,a?1:r.length,r,i,o)}while(s<n.length&&!t.writing);s===n.length?k(t):s>256?(n.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}function H(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function V(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let n=!1;function i(i){if(n)R(e,null!=i?i:w());else if(n=!0,t.pendingcb--,i){const n=t[L].splice(0);for(let e=0;e<n.length;e++)n[e](i);R(e,i,t.sync)}else H(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,r.nextTick(G,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(e){i(e)}t.sync=!1}(e,t)))}function W(e,t,n){H(t)&&(V(e,t),0===t.pendingcb&&(n?(t.pendingcb++,r.nextTick((e,t)=>{H(t)?G(e,t):t.pendingcb--},e,t)):H(t)&&(t.pendingcb++,G(e,t))))}function G(e,t){t.pendingcb--,t.finished=!0;const n=t[L].splice(0);for(let e=0;e<n.length;e++)n[e]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}C.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},s(C.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),s(j,p,{__proto__:null,value:function(e){return!!o(this,e)||this===j&&(e&&e._writableState instanceof C)}}),j.prototype.pipe=function(){R(this,new T)},j.prototype.write=function(e,t,n){return!0===D(this,e,t,n)},j.prototype.cork=function(){this._writableState.corked++},j.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||B(this,e))},j.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=u(e)),!m.isEncoding(e))throw new N(e);return this._writableState.defaultEncoding=e,this},j.prototype._write=function(e,t,n){if(!this._writev)throw new E("_write()");this._writev([{chunk:e,encoding:t}],n)},j.prototype._writev=null,j.prototype.end=function(e,t,n){const i=this._writableState;let o;if("function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e){const n=D(this,e,t);n instanceof a&&(o=n)}return i.corked&&(i.corked=1,this.uncork()),o||(i.errored||i.ending?i.finished?o=new I("end"):i.destroyed&&(o=new S("end")):(i.ending=!0,W(this,i,!0),i.ended=!0)),"function"==typeof n&&(o||i.finished?r.nextTick(n,o):i[L].push(n)),this},c(j.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const q=y.destroy;let J;function Y(){return void 0===J&&(J={}),J}j.prototype.destroy=function(e,t){const n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[L].length)&&r.nextTick(z,n),q.call(this,e,t),this},j.prototype._undestroy=y.undestroy,j.prototype._destroy=function(e,t){t(e)},j.prototype[f.captureRejectionSymbol]=function(e){this.destroy(e)},j.fromWeb=function(e,t){return Y().newStreamWritableFromWritableStream(e,t)},j.toWeb=function(e){return Y().newWritableStreamFromStreamWritable(e)}},8653:e=>{"use strict";e.exports={INT:1,LONG:2,STRING:3,DATE:4,TIMESTAMP:5,CLASS:6,DOUBLE:7,FLOAT:8,LIST:9,MAP:10,SET:11,UUID:12,EDGE:13,PATH:14,PROPERTY:15,GRAPH:16,VERTEX:17,VERTEXPROPERTY:18,BARRIER:19,BINDING:20,BYTECODE:21,CARDINALITY:22,COLUMN:23,DIRECTION:24,OPERATOR:25,ORDER:26,PICK:27,POP:28,LAMBDA:29,P:30,SCOPE:31,T:32,TRAVERSER:33,BIGDECIMAL:34,BIGINTEGER:35,BYTE:36,BYTEBUFFER:37,SHORT:38,BOOLEAN:39,TEXTP:40,TRAVERSALSTRATEGY:41,BULKSET:42,TREE:43,METRICS:44,TRAVERSALMETRICS:45,MERGE:46,DT:47,CHAR:128,DURATION:129,INETADDRESS:130,INSTANT:131,LOCALDATE:132,LOCALDATETIME:133,LOCALTIME:134,MONTHDAY:135,OFFSETDATETIME:136,OFFSETTIME:137,PERIOD:138,YEAR:139,YEARMONTH:140,ZONEDATETIME:141,ZONEOFFSET:142,CUSTOM:0,UNSPECIFIED_NULL:254}},8775:()=>{function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var a={INIT_FAILED:["system","initFailed"],BATCH_LOAD_ERROR:["system","batchLoadError"],JSON_PARSE_ERROR:["system","jsonParseError"],AUDIT_HISTORY_ERROR:["audit","historyError"],TEAM_LOAD_ERROR:["application","teamLoadError"],TEAM_NOT_FOUND:["application","teamNotFound"],TEAM_SAVE_ERROR:["application","teamSaveError"],TEAM_EXPORT_ERROR:["application","teamExportError"],TEAM_IMPORT_ERROR:["application","teamImportError"],TEAM_CLONE_ERROR:["application","teamCloneError"],LOCATIONS_LOAD_ERROR:["application","locationsLoadError"],PROFILES_LOAD_ERROR:["application","profilesLoadError"],MEASURES_LOAD_ERROR:["application","measuresLoadError"],DEPENDENCY_PROCESSING_FAILED:["validation","dependencyProcessingFailed"],DEPENDENCY_IMPORT_FAILED:["application","dependencyImportFailed"],IMPORT_VALIDATION_FAILED:["validation","importValidationFailed"],IMPORT_MISSING_MEASURES:["validation","importMissingMeasures"],IMPORT_MISSING_PROFILES:["validation","importMissingProfiles"],SYSTEM_OPTIONS_NOT_FOUND:["system","systemOptionsNotFound"],TEAM_SAVE_FAILED:["application","teamSaveFailed"],SELECT_TEAM_TO_CLONE:["selection","selectTeamToClone"],SELECT_TEAM_TO_EXPORT:["selection","selectTeamToExport"],AREA_FUNCTION_REQUIRED:["validation","areaFunctionRequired"],TEAM_ID_FORMAT:["validation","teamIdFormat"],TEAM_ID_REQUIRED:["validation","teamIdRequired"],TEAM_ID_EXISTS:["validation","teamIdExists"],TEAM_ID_CHECK_ERROR:["system","teamIdCheckError"],NAME_REQUIRED:["validation","nameRequired"],DESCRIPTION_REQUIRED:["validation","descriptionRequired"],OBJECTIVES_REQUIRED:["validation","objectivesRequired"],NO_CHANGES_TO_SAVE:["application","noChangesToSave"],MISSING_TASK_FIELDS:["validation","missingTaskFields"],EXTRA_TASK_FIELDS:["validation","extraTaskFields"],MISSING_USER_FIELDS:["validation","missingUserFields"],EXTRA_USER_FIELDS:["validation","extraUserFields"],LOCATION_ID_REQUIRED:["validation","locationIdRequired"],LOCATION_NAME_REQUIRED:["validation","locationNameRequired"],LOCATION_DESCRIPTION_REQUIRED:["validation","locationDescriptionRequired"],LOCATION_ID_EXISTS:["validation","locationIdExists"],LOCATION_ID_FORMAT:["validation","locationIdFormat"],LOCATION_SAVE_ERROR:["application","locationSaveError"],AGENT_ID_REQUIRED:["validation","agentIdRequired"],AGENT_ADD_ERROR:["agent","addError"],AGENT_REMOVE_ERROR:["agent","removeError"],AGENT_NOT_FOUND:["validation","agentNotFound"],PROFILE_LOAD_ERROR:["application","profileLoadError"],PROFILE_NOT_FOUND:["validation","agentProfileNotFound"],OBJECTIVE_FUNCTION_ID_REQUIRED:["validation","objectiveFunctionIdRequired"],OBJECTIVE_FUNCTION_NAME_REQUIRED:["validation","objectiveFunctionNameRequired"],OBJECTIVE_FUNCTION_DESCRIPTION_REQUIRED:["validation","objectiveFunctionDescriptionRequired"],OBJECTIVE_FUNCTION_TYPE_INVALID:["validation","objectiveFunctionTypeInvalid"],OBJECTIVE_FUNCTION_OBJECTIVE_TYPE_INVALID:["validation","objectiveFunctionObjectiveTypeInvalid"],OBJECTIVE_FUNCTION_FORMULA_REQUIRED:["validation","objectiveFunctionFormulaRequired"],OBJECTIVE_FUNCTION_COMPONENTS_REQUIRED:["validation","objectiveFunctionComponentsRequired"],OBJECTIVE_FUNCTION_THRESHOLDS_NO_MATCHING_COMPONENT:["validation","objectiveFunctionThresholdsNoMatchingComponent"],OBJECTIVE_FUNCTION_COMPONENTS_MISSING_THRESHOLDS:["validation","objectiveFunctionComponentsMissingThresholds"],OBJECTIVE_FUNCTION_THRESHOLDS_REQUIRED:["validation","objectiveFunctionThresholdsRequired"],OBJECTIVE_FUNCTION_THRESHOLDS_INVALID_FORMAT:["validation","objectiveFunctionThresholdsInvalidFormat"],OBJECTIVE_FUNCTION_THRESHOLD_SCALE_INVALID:["validation","objectiveFunctionThresholdScaleInvalid"],SCALE_RANGE_INVALID:["validation","scaleRangeInvalid"],OBJECTIVE_FUNCTION_THRESHOLD_RANGES_REQUIRED:["validation","objectiveFunctionThresholdRangesRequired"],OBJECTIVE_FUNCTION_THRESHOLD_RANGES_COUNT_MISMATCH:["validation","objectiveFunctionThresholdRangesCountMismatch"],OBJECTIVE_FUNCTION_THRESHOLD_RANGE_LEVEL_REQUIRED:["validation","objectiveFunctionThresholdRangeLevelRequired"],OBJECTIVE_FUNCTION_THRESHOLD_RANGE_VALUE_REQUIRED:["validation","objectiveFunctionThresholdRangeValueRequired"],OBJECTIVE_FUNCTION_THRESHOLD_RANGE_MIN_INVALID:["validation","objectiveFunctionThresholdRangeMinInvalid"],OBJECTIVE_FUNCTION_THRESHOLD_RANGE_MAX_INVALID:["validation","objectiveFunctionThresholdRangeMaxInvalid"],OBJECTIVE_FUNCTION_THRESHOLD_RANGE_DIRECTION_INVALID:["validation","objectiveFunctionThresholdRangeDirectionInvalid"],OBJECTIVE_FUNCTION_CREATE_ERROR:["application","objectiveFunctionCreateError"],OBJECTIVE_FUNCTION_UPDATE_ERROR:["application","objectiveFunctionUpdateError"],OBJECTIVE_FUNCTION_INVALID_MEASURE_IDS:["validation","objectiveFunctionInvalidMeasureIds"]},o=function(){return t=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},i=null,o=[{key:"showError",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var r=ErrorHandler.getError(e,t,n),i=r.message,a=r.severity;showError(i,a)}catch(e){var o=ErrorHandler.getError("system","unexpectedError").message;showError(o,"error")}})},{key:"showDirectError",value:function(e){showError(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error")}},{key:"handleValidationErrors",value:function(t){if(0!==t.length){var r=t.map(function(t){try{if("object"===n(t)&&t.code){var r=a[t.code];if(!Array.isArray(r))return null;var i=e(r,2),o=i[0],s=i[1],c=ErrorHandler.getError(o,s).message;return t.params&&Object.entries(t.params).forEach(function(t){var n=e(t,2),r=n[0],i=n[1];c=c.replace("{".concat(r,"}"),Array.isArray(i)?i.join(", "):i)}),c}var l=a[t];if(!Array.isArray(l))return null;var u=e(l,2),d=u[0],p=u[1];return ErrorHandler.getError(d,p).message}catch(e){return null}}).filter(Boolean);r.length>0&&(showError(r.join("\n")),scrollToTop(".team-editor"))}}}],i&&r(t.prototype,i),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,o}();window.TeamErrorHandler=o,window.TeamErrorCodes=a},9025:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function r(e,r,o,s){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=(0,a.default)(r)),16!==(null===(c=r)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(r),l.set(e,r.length),l=n(l),l[6]=15&l[6]|t,l[8]=63&l[8]|128,o){s=s||0;for(let e=0;e<16;++e)o[s+e]=l[e];return o}return(0,i.unsafeStringify)(l)}try{r.name=e}catch(e){}return r.DNS=o,r.URL=s,r};var r,i=n(9910),a=(r=n(6792))&&r.__esModule?r:{default:r};const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=o;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=s},9032:(e,t,n)=>{"use strict";const{Traversal:r}=n(1545);class i{constructor(e){e?(this.sourceInstructions=[...e.sourceInstructions],this.stepInstructions=[...e.stepInstructions]):(this.sourceInstructions=[],this.stepInstructions=[])}addSource(e,t){if(void 0===e)throw new Error("Name is not defined");const n=new Array(t.length+1);n[0]=e;for(let e=0;e<t.length;++e)n[e+1]=t[e];return this.sourceInstructions.push(i._generateInstruction(e,t)),this}addStep(e,t){if(void 0===e)throw new Error("Name is not defined");return this.stepInstructions.push(i._generateInstruction(e,t)),this}static _generateInstruction(e,t){const n=(t?t.length:0)+1,i=new Array(n);i[0]=e;for(let e=1;e<n;e++){const n=t[e-1];if(n instanceof r&&null!=n.graph)throw new Error(`The child traversal of ${n} was not spawned anonymously - use the __ class rather than a TraversalSource to construct the child traversal`);i[e]=n}return i}toString(){return JSON.stringify([this.sourceInstructions,this.stepInstructions])}static _createGraphOp(e,t){const n=new i;return n.addSource(e,t),n}static get GraphOp(){return{commit:i._createGraphOp("tx",["commit"]),rollback:i._createGraphOp("tx",["rollback"])}}}e.exports=i},9042:(e,t)=>{"use strict";function n(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const a=e.length/4+2,o=Math.ceil(a/16),s=new Array(o);for(let t=0;t<o;++t){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];s[t]=n}s[o-1][14]=8*(e.length-1)/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<o;++e){const a=new Uint32Array(80);for(let t=0;t<16;++t)a[t]=s[e][t];for(let e=16;e<80;++e)a[e]=r(a[e-3]^a[e-8]^a[e-14]^a[e-16],1);let o=i[0],c=i[1],l=i[2],u=i[3],d=i[4];for(let e=0;e<80;++e){const i=Math.floor(e/20),s=r(o,5)+n(i,c,l,u)+d+t[i]+a[e]>>>0;d=u,u=l,l=r(c,30)>>>0,c=o,o=s}i[0]=i[0]+o>>>0,i[1]=i[1]+c>>>0,i[2]=i[2]+l>>>0,i[3]=i[3]+u>>>0,i[4]=i[4]+d>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]};t.default=i},9198:(e,t,n)=>{"use strict";const r=n(5506),i=n(3095),a=r.Readable.destroy;e.exports=r.Readable,e.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,e.exports._isUint8Array=r._isUint8Array,e.exports.isDisturbed=r.isDisturbed,e.exports.isErrored=r.isErrored,e.exports.isReadable=r.isReadable,e.exports.Readable=r.Readable,e.exports.Writable=r.Writable,e.exports.Duplex=r.Duplex,e.exports.Transform=r.Transform,e.exports.PassThrough=r.PassThrough,e.exports.addAbortSignal=r.addAbortSignal,e.exports.finished=r.finished,e.exports.destroy=r.destroy,e.exports.destroy=a,e.exports.pipeline=r.pipeline,e.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:()=>i}),e.exports.Stream=r.Stream,e.exports.default=e.exports},9231:e=>{"use strict";e.exports={format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,n]){const r=t.shift();if("f"===n)return r.toFixed(6);if("j"===n)return JSON.stringify(r);if("s"===n&&"object"==typeof r){return`${r.constructor!==Object?r.constructor.name:""} {}`.trim()}return r.toString()}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}},9253:e=>{"use strict";e.exports=class{constructor(e){this.setopts(e)}get name(){return null}setopts(e){this._options=e}evaluateChallenge(e){throw new Error("evaluateChallenge should be implemented")}}},9386:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),{TraversalStrategySerializer:i}=n(474);e.exports=class{constructor(e){this.ioc=e,this.graphsonTraversalStrategySerializer=new i}canBeUsedFor(e){return this.graphsonTraversalStrategySerializer.canBeUsedFor(e)}serialize(e,t=!0){if(null==e){if(t)return r.from([this.ioc.DataType.TRAVERSALSTRATEGY,1]);const e=[0,0,0,0],n=[0,0,0,0];return r.from([...e,...n])}const n=[];t&&n.push(r.from([this.ioc.DataType.TRAVERSALSTRATEGY,0]));const i=e.fqcn,a={};for(const t in e.configuration)e.configuration.hasOwnProperty(t)&&(a[t]=e.configuration[t]);return n.push(this.ioc.classSerializer.serialize(i,!1)),n.push(this.ioc.mapSerializer.serialize(a,!1)),r.concat(n)}}},9449:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),i=n(474),a=n(9032);class o{constructor(e){this._options=e||{},this._serializers=this.getDefaultSerializers().map(e=>{const t=new e;return t.writer=this,t});const t=this._options.serializers||{};Object.keys(t).forEach(e=>{const n=t[e];n.serialize&&(n.writer=this,this._serializers.unshift(n))})}getDefaultSerializers(){return p}adaptObject(e){let t;for(let n=0;n<this._serializers.length;n++){const r=this._serializers[n];if(r.canBeUsedFor&&r.canBeUsedFor(e)){t=r;break}}return t?t.serialize(e):Array.isArray(e)?e.map(e=>this.adaptObject(e)):e}write(e){return JSON.stringify(this.adaptObject(e))}writeRequest({requestId:e,op:t,processor:n,args:i}){const o={requestId:{"@type":"g:UUID","@value":e},op:t,processor:n,args:this._adaptArgs(i,!0)};return o.args.gremlin instanceof a&&(o.args.gremlin=this.adaptObject(o.args.gremlin)),r.from(JSON.stringify(o))}_adaptArgs(e,t){if(e instanceof Object){const n={};return Object.keys(e).forEach(r=>{n[r]=t&&"bindings"===r?this._adaptArgs(e[r],!1):this.adaptObject(e[r])}),n}return e}}class s extends o{getDefaultSerializers(){return f}}class c{constructor(e){this._options=e||{},this._deserializers={};const t=this.getDefaultDeserializers();if(Object.keys(t).forEach(e=>{const n=new(0,t[e]);n.reader=this,this._deserializers[e]=n}),this._options.serializers){const e=this._options.serializers||{};Object.keys(e).forEach(t=>{const n=e[t];n.deserialize&&(n.reader=this,this._deserializers[t]=n)})}}getDefaultDeserializers(){return u}read(e){if(void 0===e)return;if(null===e)return null;if(Array.isArray(e))return e.map(e=>this.read(e));const t=e[i.typeKey];if(t){const n=this._deserializers[t];return n?n.deserialize(e):e[i.valueKey]}return e&&"object"==typeof e&&e.constructor===Object?this._deserializeObject(e):e}readResponse(e){return this.read(JSON.parse(e.toString()))}_deserializeObject(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++)n[t[r]]=this.read(e[t[r]]);return n}}class l extends c{getDefaultDeserializers(){return d}}const u={"g:Traverser":i.TraverserSerializer,"g:TraversalStrategy":i.TraversalStrategySerializer,"g:Int32":i.NumberSerializer,"g:Int64":i.NumberSerializer,"g:Float":i.NumberSerializer,"g:Double":i.NumberSerializer,"g:Date":i.DateSerializer,"g:Direction":i.DirectionSerializer,"g:Vertex":i.VertexSerializer,"g:Edge":i.EdgeSerializer,"g:VertexProperty":i.VertexPropertySerializer,"g:Property":i.PropertySerializer,"g:Path":i.Path3Serializer,"g:TextP":i.TextPSerializer,"g:T":i.TSerializer,"g:BulkSet":i.BulkSetSerializer},d=Object.assign({},u,{"g:List":i.ListSerializer,"g:Set":i.SetSerializer,"g:Map":i.MapSerializer}),p=[i.NumberSerializer,i.DateSerializer,i.BytecodeSerializer,i.TraverserSerializer,i.TraversalStrategySerializer,i.PSerializer,i.TextPSerializer,i.LambdaSerializer,i.EnumSerializer,i.VertexSerializer,i.EdgeSerializer,i.LongSerializer],f=p.concat([i.ListSerializer,i.SetSerializer,i.MapSerializer]);e.exports={GraphSON3Writer:s,GraphSON3Reader:l,GraphSON2Writer:o,GraphSON2Reader:c,GraphSONWriter:s,GraphSONReader:l}},9899:(e,t,n)=>{"use strict";const r=n(5737),i=n(9032),{TraversalStrategies:a}=n(3335);e.exports={Transaction:class{constructor(e){this._g=e,this._sessionBasedConnection=void 0}begin(){if(this._sessionBasedConnection)throw new Error("Transaction already started on this object");this._sessionBasedConnection=this._g.remoteConnection.createSession();const e=new a;return e.addStrategy(new r.RemoteStrategy(this._sessionBasedConnection)),new this._g.graphTraversalSourceClass(this._g.graph,e,new i(this._g.bytecode),this._g.graphTraversalSourceClass,this._g.graphTraversalClass)}commit(){if(!this._sessionBasedConnection)throw new Error("Cannot commit a transaction that is not started");return this._sessionBasedConnection.commit().finally(()=>this.close())}rollback(){if(!this._sessionBasedConnection)throw new Error("Cannot rollback a transaction that is not started");return this._sessionBasedConnection.rollback().finally(()=>this.close())}get isOpen(){return this._sessionBasedConnection.isOpen}close(){this._sessionBasedConnection&&this._sessionBasedConnection.close()}}}},9910:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=o;var r,i=(r=n(7037))&&r.__esModule?r:{default:r};const a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));function o(e,t=0){return a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]}var s=function(e,t=0){const n=o(e,t);if(!(0,i.default)(n))throw TypeError("Stringified UUID is invalid");return n};t.default=s},9995:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287);e.exports=class{constructor(e){this.ioc=e,this.ioc.serializers[e.DataType.FLOAT]=this}canBeUsedFor(e){}serialize(e,t=!0){if(null==e)return t?r.from([this.ioc.DataType.FLOAT,1]):r.from([0,0,0,0]);const n=[];t&&n.push(r.from([this.ioc.DataType.FLOAT,0]));const i=r.alloc(4);return i.writeFloatBE(e),n.push(i),r.concat(n)}deserialize(e,t=!0){let n=0,i=e;try{if(null==e||!(e instanceof r))throw new Error("buffer is missing");if(e.length<1)throw new Error("buffer is empty");if(t){const e=i.readUInt8();if(n++,e!==this.ioc.DataType.FLOAT)throw new Error("unexpected {type_code}");if(i=i.slice(1),i.length<1)throw new Error("{value_flag} is missing");const t=i.readUInt8();if(n++,1===t)return{v:null,len:n};if(0!==t)throw new Error("unexpected {value_flag}");i=i.slice(1)}if(i.length<4)throw new Error("unexpected {value} length");n+=4;return{v:i.readFloatBE(),len:n}}catch(e){throw this.ioc.utils.des_error({serializer:this,args:arguments,cursor:i,err:e})}}}}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return i[e](n,n.exports,o),n.exports}o.m=i,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);o.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>n[e]);return a.default=()=>n,o.d(i,a),i},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce((t,n)=>(o.f[n](e,t),t),[])),o.u=e=>e+".js",o.miniCssF=e=>{},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="admin-teams:",o.l=(e,t,i,a)=>{if(n[e])n[e].push(t);else{var s,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+i){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",r+i),s.src=e),n[e]=[t];var p=(t,r)=>{s.onerror=s.onload=null,clearTimeout(f);var i=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(e=>e(r)),t)return t(r)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="/dist/",(()=>{var e={593:0};o.f.j=(t,n)=>{var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((n,i)=>r=e[t]=[n,i]);n.push(r[2]=i);var a=o.p+o.u(t),s=new Error;o.l(a,n=>{if(o.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,r[1](s)}},"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[a,s,c]=n,l=0;if(a.some(t=>0!==e[t])){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(c)c(o)}for(t&&t(n);l<a.length;l++)i=a[l],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkadmin_teams=self.webpackChunkadmin_teams||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o(6284),o(5283),o(4796),o(658),o(7281),o(8775),o(3676),o(2366),o(2617),o(5118),o(8209);o(5462)})();